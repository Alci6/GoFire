var Pd=Object.defineProperty;var Ud=(t,e)=>{for(var n in e)Pd(t,n,{get:e[n],enumerable:!0})};var Yi={};Ud(Yi,{MODE:()=>xd,NODE_ENV:()=>Vd,SSR:()=>Fd});var xd="production",Vd="production",Fd=!1;function G(){}var $d=t=>t;function Da(t,e){for(let n in e)t[n]=e[n];return t}function Oa(t){return t()}function La(){return Object.create(null)}function xe(t){t.forEach(Oa)}function vr(t){return typeof t=="function"}function $(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function jd(t){return Object.keys(t).length===0}function qd(t,...e){if(t==null)return G;let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Be(t,e,n){t.$$.on_destroy.push(qd(e,n))}function st(t,e,n,r){if(t){let i=Ma(t,e,n,r);return t[0](i)}}function Ma(t,e,n,r){return t[1]&&r?Da(n.ctx.slice(),t[1](r(e))):n.ctx}function Bd(t,e,n,r){if(t[2]&&r){let i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){let s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function ot(t,e,n,r,i,s,o){let a=Bd(e,r,i,s);if(a){let l=Ma(e,n,r,o);t.p(l,a)}}function Kt(t){return t??""}var Pa=typeof window!="undefined",zd=Pa?()=>window.performance.now():()=>Date.now(),Ji=Pa?t=>requestAnimationFrame(t):G,Gt=new Set;function Ua(t){Gt.forEach(e=>{e.c(t)||(Gt.delete(e),e.f())}),Gt.size!==0&&Ji(Ua)}function Hd(t){let e;return Gt.size===0&&Ji(Ua),{promise:new Promise(n=>{Gt.add(e={c:t,f:n})}),abort(){Gt.delete(e)}}}function S(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function _(t){t.parentNode.removeChild(t)}function Qe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function W(t){return document.createTextNode(t)}function N(){return W(" ")}function ze(){return W("")}function le(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Zi(t){return function(e){return e.preventDefault(),t.call(this,e)}}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function kt(t){return t===""?null:+t}function Kd(t){return Array.from(t.childNodes)}function J(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ve(t,e){t.value=e??""}function ge(t,e,n){t.classList[n?"add":"remove"](e)}var es=new Set,yr=0;function Gd(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Wd(t,e,n,r,i,s,o,a=0){let l=16.666/r,c=`{
`;for(let g=0;g<=1;g+=l){let b=e+(n-e)*s(g);c+=g*100+`%{${o(b,1-b)}}
`}let u=c+`100% {${o(n,1-n)}}
}`,h=`__svelte_${Gd(u)}_${a}`,f=t.ownerDocument;es.add(f);let d=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(E("style")).sheet),m=f.__svelte_rules||(f.__svelte_rules={});m[h]||(m[h]=!0,d.insertRule(`@keyframes ${h} ${u}`,d.cssRules.length));let p=t.style.animation||"";return t.style.animation=`${p?`${p}, `:""}${h} ${r}ms linear ${i}ms 1 both`,yr+=1,h}function Qd(t,e){let n=(t.style.animation||"").split(", "),r=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=n.length-r.length;i&&(t.style.animation=r.join(", "),yr-=i,yr||Xd())}function Xd(){Ji(()=>{yr||(es.forEach(t=>{let e=t.__svelte_stylesheet,n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),es.clear())})}function _r(t,e,n,r){if(!e)return G;let i=t.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return G;let{delay:s=0,duration:o=300,easing:a=$d,start:l=zd()+s,end:c=l+o,tick:u=G,css:h}=n(t,{from:e,to:i},r),f=!0,d=!1,m;function p(){h&&(m=Wd(t,0,1,o,s,a,h)),s||(d=!0)}function g(){h&&Qd(t,m),f=!1}return Hd(b=>{if(!d&&b>=l&&(d=!0),d&&b>=c&&(u(1,0),g()),!f)return!1;if(d){let T=b-l,y=0+1*a(T/o);u(y,1-y)}return!0}),p(),u(0,1),g}function wr(t){let e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){let{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,ts(t,i)}}function ts(t,e){let n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){let r=getComputedStyle(t),i=r.transform==="none"?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}var xa;function br(t){xa=t}function ns(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r(e))}var Cn=[],at=[],Er=[],rs=[],Yd=Promise.resolve(),is=!1;function Jd(){is||(is=!0,Yd.then(Va))}function Rn(t){Er.push(t)}function Wt(t){rs.push(t)}var ss=!1,os=new Set;function Va(){if(!ss){ss=!0;do{for(let t=0;t<Cn.length;t+=1){let e=Cn[t];br(e),Zd(e.$$)}for(br(null),Cn.length=0;at.length;)at.pop()();for(let t=0;t<Er.length;t+=1){let e=Er[t];os.has(e)||(os.add(e),e())}Er.length=0}while(Cn.length);for(;rs.length;)rs.pop()();is=!1,ss=!1,os.clear()}}function Zd(t){if(t.fragment!==null){t.update(),xe(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Rn)}}var Tr=new Set,St;function ie(){St={r:0,c:[],p:St}}function se(){St.r||xe(St.c),St=St.p}function k(t,e){t&&t.i&&(Tr.delete(t),t.i(e))}function A(t,e,n,r){if(t&&t.o){if(Tr.has(t))return;Tr.add(t),St.c.push(()=>{Tr.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function Xt(t,e){A(t,1,1,()=>{e.delete(t.key)})}function Ir(t,e){t.f(),Xt(t,e)}function At(t,e,n,r,i,s,o,a,l,c,u,h){let f=t.length,d=s.length,m=f,p={};for(;m--;)p[t[m].key]=m;let g=[],b=new Map,T=new Map;for(m=d;m--;){let U=h(i,s,m),me=n(U),we=o.get(me);we?r&&we.p(U,e):(we=c(me,U),we.c()),b.set(me,g[m]=we),me in p&&T.set(me,Math.abs(m-p[me]))}let y=new Set,D=new Set;function R(U){k(U,1),U.m(a,u),o.set(U.key,U),u=U.first,d--}for(;f&&d;){let U=g[d-1],me=t[f-1],we=U.key,ae=me.key;U===me?(u=U.first,f--,d--):b.has(ae)?!o.has(we)||y.has(we)?R(U):D.has(ae)?f--:T.get(we)>T.get(ae)?(D.add(we),R(U)):(y.add(ae),f--):(l(me,o),f--)}for(;f--;){let U=t[f];b.has(U.key)||l(U,o)}for(;d;)R(g[d-1]);return g}function Qt(t,e,n){let r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function x(t){t&&t.c()}function M(t,e,n,r){let{fragment:i,on_mount:s,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,n),r||Rn(()=>{let l=s.map(Oa).filter(vr);o?o.push(...l):xe(l),t.$$.on_mount=[]}),a.forEach(Rn)}function P(t,e){let n=t.$$;n.fragment!==null&&(xe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ep(t,e){t.$$.dirty[0]===-1&&(Cn.push(t),Jd(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(t,e,n,r,i,s,o=[-1]){let a=xa;br(t);let l=t.$$={fragment:null,ctx:null,props:s,update:G,not_equal:i,bound:La(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:e.context||[]),callbacks:La(),dirty:o,skip_bound:!1},c=!1;if(l.ctx=n?n(t,e.props||{},(u,h,...f)=>{let d=f.length?f[0]:h;return l.ctx&&i(l.ctx[u],l.ctx[u]=d)&&(!l.skip_bound&&l.bound[u]&&l.bound[u](d),c&&ep(t,u)),h}):[],l.update(),c=!0,xe(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){let u=Kd(e.target);l.fragment&&l.fragment.l(u),u.forEach(_)}else l.fragment&&l.fragment.c();e.intro&&k(t.$$.fragment),M(t,e.target,e.anchor,e.customElement),Va()}br(a)}var j=class{$destroy(){P(this,1),this.$destroy=G}$on(e,n){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{let i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!jd(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ve=t=>new Intl.NumberFormat("es",{notation:"compact",style:"currency",currency:"EUR"}).format(t),as=t=>new Intl.NumberFormat("es",{style:"currency",currency:"EUR"}).format(t),lt=t=>new Intl.NumberFormat("en",{style:"percent"}).format(t),Fa=new Date().toISOString().slice(0,10);function rp(t){let e,n,r,i=ve(t[0])+"",s;return{c(){e=E("p"),e.textContent="Objetivo logrado",n=N(),r=E("h6"),s=W(i),v(e,"class","euros text-xs text-center"),v(r,"class","euros text-xs text-center svelte-bssdtf")},m(o,a){w(o,e,a),w(o,n,a),w(o,r,a),S(r,s)},p(o,a){a&1&&i!==(i=ve(o[0])+"")&&J(s,i)},d(o){o&&_(e),o&&_(n),o&&_(r)}}}function ip(t){let e,n,r=ve(t[1])+"",i,s,o,a,l=ve(t[0])+"",c;return{c(){e=E("p"),n=W("a "),i=W(r),s=N(),o=E("h6"),a=W("de "),c=W(l),v(e,"class","euros text-sm text-center"),v(o,"class","euros text-xs text-center svelte-bssdtf")},m(u,h){w(u,e,h),S(e,n),S(e,i),w(u,s,h),w(u,o,h),S(o,a),S(o,c)},p(u,h){h&2&&r!==(r=ve(u[1])+"")&&J(i,r),h&1&&l!==(l=ve(u[0])+"")&&J(c,l)},d(u){u&&_(e),u&&_(s),u&&_(o)}}}function sp(t){let e,n,r,i,s;function o(c,u){return(s==null||u&4)&&(s=!!c[2]()),s?ip:rp}let a=o(t,-1),l=a(t);return{c(){e=E("div"),n=E("img"),i=N(),l.c(),v(n,"class","m-auto"),n.src!==(r="icons/goal.svg")&&v(n,"src",r),v(n,"alt","goal"),v(e,"class","goal  float-right bg-red-500 p-5  svelte-bssdtf")},m(c,u){w(c,e,u),S(e,n),S(e,i),l.m(e,null)},p(c,[u]){a===(a=o(c,u))&&l?l.p(c,u):(l.d(1),l=a(c),l&&(l.c(),l.m(e,null)))},i:G,o:G,d(c){c&&_(e),l.d()}}}function op(t,e,n){let r,{goal:i=0}=e,{road:s=0}=e,{balance:o=0}=e;return t.$$set=a=>{"goal"in a&&n(0,i=a.goal),"road"in a&&n(1,s=a.road),"balance"in a&&n(3,o=a.balance)},t.$$.update=()=>{if(t.$$.dirty&9){e:n(2,r=()=>i>o)}},[i,s,r,o]}var $a=class extends j{constructor(e){super();z(this,e,op,sp,$,{goal:0,road:1,balance:3})}},ja=$a;function ap(t){let e,n,r=t[1].default,i=st(r,t,t[0],null);return{c(){e=E("div"),i&&i.c(),v(e,"class","card__background h-auto sm:w-96 w-11/12 mb-12 p-8 shadow-2xl relative")},m(s,o){w(s,e,o),i&&i.m(e,null),n=!0},p(s,[o]){i&&i.p&&(!n||o&1)&&ot(i,r,s,s[0],o,null,null)},i(s){n||(k(i,s),n=!0)},o(s){A(i,s),n=!1},d(s){s&&_(e),i&&i.d(s)}}}function lp(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=s=>{"$$scope"in s&&n(0,i=s.$$scope)},[i,r]}var qa=class extends j{constructor(e){super();z(this,e,lp,ap,$,{})}},ct=qa;var Yt=[];function Jt(t,e=G){let n,r=[];function i(a){if($(t,a)&&(t=a,n)){let l=!Yt.length;for(let c=0;c<r.length;c+=1){let u=r[c];u[1](),Yt.push(u,t)}if(l){for(let c=0;c<Yt.length;c+=2)Yt[c][0](Yt[c+1]);Yt.length=0}}}function s(a){i(a(t))}function o(a,l=G){let c=[a,l];return r.push(c),r.length===1&&(n=e(i)||G),a(t),()=>{let u=r.indexOf(c);u!==-1&&r.splice(u,1),r.length===0&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}var Ye=Jt({displayName:"",photoURL:"icons/user.svg",email:"",uid:""}),Ba=()=>Ye.set(0);var Je=Jt(),za=()=>Je.set(0);function cp(t){let e,n,r,i,s,o,a,l,c,u=ve(t[0])+"",h,f,d,m;return d=new ja({props:{balance:t[0],goal:t[1],road:t[2]}}),{c(){e=E("h1"),n=W("Hola "),r=W(t[3]),i=N(),s=E("h3"),s.textContent="Bienvenido de nuevo",o=N(),a=E("h3"),a.textContent="Balance",l=N(),c=E("p"),h=W(u),f=N(),x(d.$$.fragment),v(a,"class","mt-8"),v(c,"class","euros")},m(p,g){w(p,e,g),S(e,n),S(e,r),w(p,i,g),w(p,s,g),w(p,o,g),w(p,a,g),w(p,l,g),w(p,c,g),S(c,h),w(p,f,g),M(d,p,g),m=!0},p(p,g){(!m||g&8)&&J(r,p[3]),(!m||g&1)&&u!==(u=ve(p[0])+"")&&J(h,u);let b={};g&1&&(b.balance=p[0]),g&2&&(b.goal=p[1]),g&4&&(b.road=p[2]),d.$set(b)},i(p){m||(k(d.$$.fragment,p),m=!0)},o(p){A(d.$$.fragment,p),m=!1},d(p){p&&_(e),p&&_(i),p&&_(s),p&&_(o),p&&_(a),p&&_(l),p&&_(c),p&&_(f),P(d,p)}}}function up(t){let e,n;return e=new ct({props:{$$slots:{default:[cp]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,[i]){let s={};i&47&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function hp(t,e,n){let r,i,s,o;Be(t,Je,l=>n(1,s=l)),Be(t,Ye,l=>n(4,o=l));let{balance:a=0}=e;return t.$$set=l=>{"balance"in l&&n(0,a=l.balance)},t.$$.update=()=>{if(t.$$.dirty&3){e:n(2,r=s-a)}if(t.$$.dirty&16){e:n(3,i=o.displayName?o.displayName.split(" ")[0]:"crack")}},[a,s,r,i,o]}var Ha=class extends j{constructor(e){super();z(this,e,hp,up,$,{balance:0})}},Ka=Ha;function fp(t){let e,n,r,i,s,o,a;return{c(){e=E("div"),n=E("button"),r=E("img"),r.src!==(i=`icons/${t[1]}.svg`)&&v(r,"src",i),v(r,"alt",t[1]),v(r,"class","svelte-1qy75yq"),ge(r,"selected__icon",t[0]===t[1]),v(e,"class",s=""+(Kt(t[2])+" svelte-1qy75yq")),ge(e,"selected",t[0]===t[1])},m(l,c){w(l,e,c),S(e,n),S(n,r),o||(a=[le(n,"click",t[3]),le(e,"click",t[5])],o=!0)},p(l,[c]){c&3&&ge(r,"selected__icon",l[0]===l[1]),c&3&&ge(e,"selected",l[0]===l[1])},i:G,o:G,d(l){l&&_(e),o=!1,xe(a)}}}function dp(t,e,n){let{props:r={icon:"menu",style:"primary",onClick:()=>console.log("click")}}=e,{current:i="profile"}=e,{icon:s,style:o,onClick:a}=r;function l(c){ns(t,c)}return t.$$set=c=>{"props"in c&&n(4,r=c.props),"current"in c&&n(0,i=c.current)},[i,s,o,a,r,l]}var Ga=class extends j{constructor(e){super();z(this,e,dp,fp,$,{props:4,current:0})}},he=Ga;function pp(t){let e,n,r,i;n=new he({props:{props:t[1]}});let s=t[2].default,o=st(s,t,t[3],null);return{c(){e=E("div"),x(n.$$.fragment),r=N(),o&&o.c(),v(e,"class","btn--close svelte-1hoiz49")},m(a,l){w(a,e,l),M(n,e,null),w(a,r,l),o&&o.m(a,l),i=!0},p(a,l){o&&o.p&&(!i||l&8)&&ot(o,s,a,a[3],l,null,null)},i(a){i||(k(n.$$.fragment,a),k(o,a),i=!0)},o(a){A(n.$$.fragment,a),A(o,a),i=!1},d(a){a&&_(e),P(n),a&&_(r),o&&o.d(a)}}}function mp(t){let e,n,r,i;return n=new ct({props:{$$slots:{default:[pp]},$$scope:{ctx:t}}}),{c(){e=E("div"),x(n.$$.fragment),v(e,"class",r=""+(Kt(t[0]?"hideModal":"modal")+" svelte-1hoiz49"))},m(s,o){w(s,e,o),M(n,e,null),i=!0},p(s,[o]){let a={};o&8&&(a.$$scope={dirty:o,ctx:s}),n.$set(a),(!i||o&1&&r!==(r=""+(Kt(s[0]?"hideModal":"modal")+" svelte-1hoiz49")))&&v(e,"class",r)},i(s){i||(k(n.$$.fragment,s),i=!0)},o(s){A(n.$$.fragment,s),i=!1},d(s){s&&_(e),P(n)}}}function gp(t,e,n){let{$$slots:r={},$$scope:i}=e,{hideModal:s=!0}=e,a={icon:"delete",style:"tertiary",onClick:()=>n(0,s=!s)};return t.$$set=l=>{"hideModal"in l&&n(0,s=l.hideModal),"$$scope"in l&&n(3,i=l.$$scope)},[s,a,r,i]}var Wa=class extends j{constructor(e){super();z(this,e,gp,mp,$,{hideModal:0})}},Xa=Wa;function vp(t){let e,n,r,i;return{c(){e=E("input"),v(e,"type","text"),v(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),v(e,"placeholder",t[2])},m(s,o){w(s,e,o),Ve(e,t[0]),r||(i=le(e,"input",t[8]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&v(e,"class",n),o&4&&v(e,"placeholder",s[2]),o&1&&e.value!==s[0]&&Ve(e,s[0])},d(s){s&&_(e),r=!1,i()}}}function yp(t){let e,n,r,i;return{c(){e=E("input"),v(e,"type","date"),v(e,"class",n="input__"+t[1]+" svelte-17e1blc"),v(e,"placeholder",t[2])},m(s,o){w(s,e,o),Ve(e,t[0]),r||(i=le(e,"input",t[7]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" svelte-17e1blc")&&v(e,"class",n),o&4&&v(e,"placeholder",s[2]),o&1&&Ve(e,s[0])},d(s){s&&_(e),r=!1,i()}}}function _p(t){let e,n,r,i;return{c(){e=E("input"),v(e,"type","number"),v(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),v(e,"placeholder",t[2])},m(s,o){w(s,e,o),Ve(e,t[0]),r||(i=le(e,"input",t[6]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&v(e,"class",n),o&4&&v(e,"placeholder",s[2]),o&1&&kt(e.value)!==s[0]&&Ve(e,s[0])},d(s){s&&_(e),r=!1,i()}}}function wp(t){let e,n,r,i;function s(l,c){if(l[4]==="number")return _p;if(l[4]==="date")return yp;if(l[4]==="text")return vp}let o=s(t,-1),a=o&&o(t);return{c(){e=E("div"),n=E("h3"),r=W(t[3]),i=N(),a&&a.c(),v(n,"class","mt-8 mb-1"),v(e,"class","svelte-17e1blc")},m(l,c){w(l,e,c),S(e,n),S(n,r),S(e,i),a&&a.m(e,null)},p(l,[c]){c&8&&J(r,l[3]),o===(o=s(l,c))&&a?a.p(l,c):(a&&a.d(1),a=o&&o(l),a&&(a.c(),a.m(e,null)))},i:G,o:G,d(l){l&&_(e),a&&a.d()}}}function bp(t,e,n){let{icon:r="menu"}=e,{style:i="primary"}=e,{placeholder:s="0€"}=e,{value:o=""}=e,{label:a=""}=e,{type:l="number"}=e;function c(){o=kt(this.value),n(0,o)}function u(){o=this.value,n(0,o)}function h(){o=this.value,n(0,o)}return t.$$set=f=>{"icon"in f&&n(5,r=f.icon),"style"in f&&n(1,i=f.style),"placeholder"in f&&n(2,s=f.placeholder),"value"in f&&n(0,o=f.value),"label"in f&&n(3,a=f.label),"type"in f&&n(4,l=f.type)},[o,i,s,a,l,r,c,u,h]}var Qa=class extends j{constructor(e){super();z(this,e,bp,wp,$,{icon:5,style:1,placeholder:2,value:0,label:3,type:4})}},Nn=Qa;function Ep(t){let e,n,r,i,s,o=t[2].default,a=st(o,t,t[1],null);return{c(){e=E("div"),a&&a.c(),n=N(),r=E("span"),i=W(t[0]),v(r,"class","tooltiptext svelte-1betoo6"),v(e,"class","tooltip svelte-1betoo6")},m(l,c){w(l,e,c),a&&a.m(e,null),S(e,n),S(e,r),S(r,i),s=!0},p(l,[c]){a&&a.p&&(!s||c&2)&&ot(a,o,l,l[1],c,null,null),(!s||c&1)&&J(i,l[0])},i(l){s||(k(a,l),s=!0)},o(l){A(a,l),s=!1},d(l){l&&_(e),a&&a.d(l)}}}function Tp(t,e,n){let{$$slots:r={},$$scope:i}=e,{label:s="Soy un tooltip"}=e;return t.$$set=o=>{"label"in o&&n(0,s=o.label),"$$scope"in o&&n(1,i=o.$$scope)},[s,i,r]}var Ya=class extends j{constructor(e){super();z(this,e,Tp,Ep,$,{label:0})}},Dn=Ya;function Ja(t,e,n){let r=t.slice();return r[4]=e[n].today,r[5]=e[n].amount,r[6]=e[n].id_saving,r}function Za(t){let e,n,r=t[4]+"",i,s,o,a=as(t[5])+"",l,c,u,h,f,d;function m(){return t[3](t[6])}return h=new he({props:{props:{icon:"delete",style:"tertiary",onClick:m}}}),{c(){e=E("tr"),n=E("td"),i=W(r),s=N(),o=E("td"),l=W(a),c=N(),u=E("td"),x(h.$$.fragment),f=N(),v(n,"class","text-xs svelte-1q78vq1"),v(o,"class","svelte-1q78vq1"),v(u,"class","svelte-1q78vq1")},m(p,g){w(p,e,g),S(e,n),S(n,i),S(e,s),S(e,o),S(o,l),S(e,c),S(e,u),M(h,u,null),S(e,f),d=!0},p(p,g){t=p,(!d||g&2)&&r!==(r=t[4]+"")&&J(i,r),(!d||g&2)&&a!==(a=as(t[5])+"")&&J(l,a);let b={};g&7&&(b.props={icon:"delete",style:"tertiary",onClick:m}),h.$set(b)},i(p){d||(k(h.$$.fragment,p),d=!0)},o(p){A(h.$$.fragment,p),d=!1},d(p){p&&_(e),P(h)}}}function Ip(t){let e,n,r,i,s,o=t[1],a=[];for(let c=0;c<o.length;c+=1)a[c]=Za(Ja(t,o,c));let l=c=>A(a[c],1,1,()=>{a[c]=null});return{c(){e=E("table"),n=E("thead"),n.innerHTML=`<tr><th class="svelte-1q78vq1">FECHA</th> 

			<th class="svelte-1q78vq1">CANTIDAD</th></tr>`,r=N(),i=E("tbody");for(let c=0;c<a.length;c+=1)a[c].c();v(e,"class","text-center w-full")},m(c,u){w(c,e,u),S(e,n),S(e,r),S(e,i);for(let h=0;h<a.length;h+=1)a[h].m(i,null);s=!0},p(c,[u]){if(u&7){o=c[1];let h;for(h=0;h<o.length;h+=1){let f=Ja(c,o,h);a[h]?(a[h].p(f,u),k(a[h],1)):(a[h]=Za(f),a[h].c(),k(a[h],1),a[h].m(i,null))}for(ie(),h=o.length;h<a.length;h+=1)l(h);se()}},i(c){if(!s){for(let u=0;u<o.length;u+=1)k(a[u]);s=!0}},o(c){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)A(a[u]);s=!1},d(c){c&&_(e),Qe(a,c)}}}function kp(t,e,n){let{removeSaving:r=()=>{}}=e,{savings:i=[]}=e,{id:s=0}=e,o=a=>r(s,a);return t.$$set=a=>{"removeSaving"in a&&n(0,r=a.removeSaving),"savings"in a&&n(1,i=a.savings),"id"in a&&n(2,s=a.id)},[r,i,s,o]}var el=class extends j{constructor(e){super();z(this,e,kp,Ip,$,{removeSaving:0,savings:1,id:2})}},tl=el;function nl(t,e,n){let r=t.slice();return r[15]=e[n].label,r[16]=e[n].icon,r[17]=e[n].style,r[18]=e[n].onClick,r}function Sp(t){let e,n,r;return n=new he({props:{props:t[9][1]}}),{c(){e=E("div"),x(n.$$.fragment),v(e,"class","float-right  mt-5 flex flex-row")},m(i,s){w(i,e,s),M(n,e,null),r=!0},p:G,i(i){r||(k(n.$$.fragment,i),r=!0)},o(i){A(n.$$.fragment,i),r=!1},d(i){i&&_(e),P(n)}}}function Ap(t){let e,n,r,i,s,o=t[9],a=[];for(let c=0;c<o.length;c+=1)a[c]=rl(nl(t,o,c));let l=c=>A(a[c],1,1,()=>{a[c]=null});return i=new tl({props:{savings:t[8],removeSaving:t[2],id:t[4]}}),{c(){e=E("div");for(let c=0;c<a.length;c+=1)a[c].c();n=N(),r=E("div"),x(i.$$.fragment),v(e,"class","float-right  mt-5 flex flex-row"),v(r,"class","mt-20 svelte-gm1d5i"),ge(r,"hide",!t[5])},m(c,u){w(c,e,u);for(let h=0;h<a.length;h+=1)a[h].m(e,null);w(c,n,u),w(c,r,u),M(i,r,null),s=!0},p(c,u){if(u&512){o=c[9];let f;for(f=0;f<o.length;f+=1){let d=nl(c,o,f);a[f]?(a[f].p(d,u),k(a[f],1)):(a[f]=rl(d),a[f].c(),k(a[f],1),a[f].m(e,null))}for(ie(),f=o.length;f<a.length;f+=1)l(f);se()}let h={};u&256&&(h.savings=c[8]),u&4&&(h.removeSaving=c[2]),u&16&&(h.id=c[4]),i.$set(h),u&32&&ge(r,"hide",!c[5])},i(c){if(!s){for(let u=0;u<o.length;u+=1)k(a[u]);k(i.$$.fragment,c),s=!0}},o(c){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)A(a[u]);A(i.$$.fragment,c),s=!1},d(c){c&&_(e),Qe(a,c),c&&_(n),c&&_(r),P(i)}}}function Cp(t){let e,n,r;return e=new he({props:{props:{icon:t[16],style:t[17],onClick:t[18]}}}),{c(){x(e.$$.fragment),n=N()},m(i,s){M(e,i,s),w(i,n,s),r=!0},p:G,i(i){r||(k(e.$$.fragment,i),r=!0)},o(i){A(e.$$.fragment,i),r=!1},d(i){P(e,i),i&&_(n)}}}function rl(t){let e,n;return e=new Dn({props:{label:t[15],$$slots:{default:[Cp]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){let s={};i&2097152&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function Rp(t){let e,n,r,i,s,o,a,l,c,u,h,f,d;function m(R){t[11](R)}let p={label:"añade la cantidad",type:"number"};t[6]!==void 0&&(p.value=t[6]),i=new Nn({props:p}),at.push(()=>Qt(i,"value",m));function g(R){t[12](R)}let b={label:"¿Cuándo añadiste los fondos?",type:"date"};t[7]!==void 0&&(b.value=t[7]),a=new Nn({props:b}),at.push(()=>Qt(a,"value",g));let T=[Ap,Sp],y=[];function D(R,U){return R[1].length>0?0:1}return u=D(t,-1),h=y[u]=T[u](t),{c(){e=E("h1"),n=W(t[3]),r=N(),x(i.$$.fragment),o=N(),x(a.$$.fragment),c=N(),h.c(),f=ze(),v(e,"class","noselect text-2xl")},m(R,U){w(R,e,U),S(e,n),w(R,r,U),M(i,R,U),w(R,o,U),M(a,R,U),w(R,c,U),y[u].m(R,U),w(R,f,U),d=!0},p(R,U){(!d||U&8)&&J(n,R[3]);let me={};!s&&U&64&&(s=!0,me.value=R[6],Wt(()=>s=!1)),i.$set(me);let we={};!l&&U&128&&(l=!0,we.value=R[7],Wt(()=>l=!1)),a.$set(we);let ae=u;u=D(R,U),u===ae?y[u].p(R,U):(ie(),A(y[ae],1,1,()=>{y[ae]=null}),se(),h=y[u],h?h.p(R,U):(h=y[u]=T[u](R),h.c()),k(h,1),h.m(f.parentNode,f))},i(R){d||(k(i.$$.fragment,R),k(a.$$.fragment,R),k(h),d=!0)},o(R){A(i.$$.fragment,R),A(a.$$.fragment,R),A(h),d=!1},d(R){R&&_(e),R&&_(r),P(i,R),R&&_(o),P(a,R),R&&_(c),y[u].d(R),R&&_(f)}}}function Np(t){let e,n;return e=new Xa({props:{hideModal:t[0],$$slots:{default:[Rp]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,[i]){let s={};i&1&&(s.hideModal=r[0]),i&2097662&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function Dp(t,e,n){let r,{hideModal:i=!0}=e,{save:s=()=>{}}=e,{savings:o=[]}=e,{removeSaving:a=()=>{}}=e,{title:l="Title"}=e,{id:c="0"}=e,u=!1,h=()=>n(5,u=!u),f=0,d=()=>n(0,i=!i),m=[{icon:"history",label:"Ver el historial ",style:"modal",onClick:h},{icon:"saving",label:"Guardar Datos",style:"modal",onClick:()=>{s(c,p,f)}}],p=Fa;function g(T){f=T,n(6,f)}function b(T){p=T,n(7,p)}return t.$$set=T=>{"hideModal"in T&&n(0,i=T.hideModal),"save"in T&&n(10,s=T.save),"savings"in T&&n(1,o=T.savings),"removeSaving"in T&&n(2,a=T.removeSaving),"title"in T&&n(3,l=T.title),"id"in T&&n(4,c=T.id)},t.$$.update=()=>{if(t.$$.dirty&2){e:n(8,r=o.sort((T,y)=>(T=T.today.split("-").join(""),y=y.today.split("-").join(""),y-T)))}},[i,o,a,l,c,u,f,p,r,m,s,g,b]}var il=class extends j{constructor(e){super();z(this,e,Dp,Np,$,{hideModal:0,save:10,savings:1,removeSaving:2,title:3,id:4})}},sl=il;function ol(t,e,n){let r=t.slice();return r[22]=e[n],r}function Op(t){let e,n,r,i,s,o=ve(t[3])+"",a,l,c=isFinite(t[8]),u=c&&al(t);return{c(){e=E("h6"),n=W(t[4]),r=N(),i=E("div"),s=E("p"),a=W(o),l=N(),u&&u.c(),v(e,"class","mb-1"),v(s,"class","euros"),v(i,"class","data svelte-1ar7xro")},m(h,f){w(h,e,f),S(e,n),w(h,r,f),w(h,i,f),S(i,s),S(s,a),S(i,l),u&&u.m(i,null)},p(h,f){f&16&&J(n,h[4]),f&8&&o!==(o=ve(h[3])+"")&&J(a,o),f&256&&(c=isFinite(h[8])),c?u?u.p(h,f):(u=al(h),u.c(),u.m(i,null)):u&&(u.d(1),u=null)},i:G,o:G,d(h){h&&_(e),h&&_(r),h&&_(i),u&&u.d()}}}function Lp(t){let e,n,r,i,s,o,a=isFinite(t[8]),l,c,u,h,f,d=a&&ll(t),m=t[13],p=[];for(let b=0;b<m.length;b+=1)p[b]=cl(ol(t,m,b));let g=b=>A(p[b],1,1,()=>{p[b]=null});return{c(){e=E("div"),n=E("input"),r=N(),i=E("div"),s=E("input"),o=N(),d&&d.c(),l=N(),c=E("div");for(let b=0;b<p.length;b+=1)p[b].c();v(n,"name","title"),v(n,"class","title w-64 svelte-1ar7xro"),v(n,"type","text"),v(s,"name","number"),v(s,"type","number"),v(s,"class","svelte-1ar7xro"),v(i,"class","data svelte-1ar7xro"),v(c,"class"," flex flex-row float-right"),v(e,"draggable","true")},m(b,T){w(b,e,T),S(e,n),Ve(n,t[4]),S(e,r),S(e,i),S(i,s),Ve(s,t[3]),S(i,o),d&&d.m(i,null),S(e,l),S(e,c);for(let y=0;y<p.length;y+=1)p[y].m(c,null);u=!0,h||(f=[le(n,"change",t[11]),le(n,"input",t[15]),le(s,"change",t[12]),le(s,"input",t[16])],h=!0)},p(b,T){if(T&16&&n.value!==b[4]&&Ve(n,b[4]),T&8&&kt(s.value)!==b[3]&&Ve(s,b[3]),T&256&&(a=isFinite(b[8])),a?d?d.p(b,T):(d=ll(b),d.c(),d.m(i,null)):d&&(d.d(1),d=null),T&8192){m=b[13];let y;for(y=0;y<m.length;y+=1){let D=ol(b,m,y);p[y]?(p[y].p(D,T),k(p[y],1)):(p[y]=cl(D),p[y].c(),k(p[y],1),p[y].m(c,null))}for(ie(),y=m.length;y<p.length;y+=1)g(y);se()}},i(b){if(!u){for(let T=0;T<m.length;T+=1)k(p[T]);u=!0}},o(b){p=p.filter(Boolean);for(let T=0;T<p.length;T+=1)A(p[T]);u=!1},d(b){b&&_(e),d&&d.d(),Qe(p,b),h=!1,xe(f)}}}function al(t){let e,n=lt(t[8])+"",r;return{c(){e=E("p"),r=W(n),v(e,"class"," percent svelte-1ar7xro")},m(i,s){w(i,e,s),S(e,r)},p(i,s){s&256&&n!==(n=lt(i[8])+"")&&J(r,n)},d(i){i&&_(e)}}}function ll(t){let e,n=lt(t[8])+"",r;return{c(){e=E("p"),r=W(n),v(e,"class"," percent svelte-1ar7xro")},m(i,s){w(i,e,s),S(e,r)},p(i,s){s&256&&n!==(n=lt(i[8])+"")&&J(r,n)},d(i){i&&_(e)}}}function cl(t){let e,n,r,i;return n=new he({props:{props:t[22]}}),{c(){e=E("div"),x(n.$$.fragment),r=N()},m(s,o){w(s,e,o),M(n,e,null),S(e,r),i=!0},p:G,i(s){i||(k(n.$$.fragment,s),i=!0)},o(s){A(n.$$.fragment,s),i=!1},d(s){s&&_(e),P(n)}}}function ul(t){let e,n,r=ve(t[7])+"",i;return{c(){e=E("h3"),n=W("Rentabilidad: "),i=W(r),v(e,"class","mt-1 revenue text-sm")},m(s,o){w(s,e,o),S(e,n),S(e,i)},p(s,o){o&128&&r!==(r=ve(s[7])+"")&&J(i,r)},d(s){s&&_(e)}}}function Mp(t){let e,n,r,i,s,o,a;e=new sl({props:{hideModal:t[6],title:t[4],id:t[9],save:t[1].saving,savings:t[2].saving,removeSaving:t[1].removeSaving}});let l=[Lp,Op],c=[];function u(f,d){return f[0]?0:1}i=u(t,-1),s=c[i]=l[i](t);let h=t[10].length>0&&!t[0]&&ul(t);return{c(){x(e.$$.fragment),n=N(),r=E("div"),s.c(),o=N(),h&&h.c(),v(r,"class","w-64 m-3 relative svelte-1ar7xro"),ge(r,"hightlight",t[5])},m(f,d){M(e,f,d),w(f,n,d),w(f,r,d),c[i].m(r,null),S(r,o),h&&h.m(r,null),a=!0},p(f,[d]){let m={};d&64&&(m.hideModal=f[6]),d&16&&(m.title=f[4]),d&2&&(m.save=f[1].saving),d&4&&(m.savings=f[2].saving),d&2&&(m.removeSaving=f[1].removeSaving),e.$set(m);let p=i;i=u(f,d),i===p?c[i].p(f,d):(ie(),A(c[p],1,1,()=>{c[p]=null}),se(),s=c[i],s?s.p(f,d):(s=c[i]=l[i](f),s.c()),k(s,1),s.m(r,o)),f[10].length>0&&!f[0]?h?h.p(f,d):(h=ul(f),h.c(),h.m(r,null)):h&&(h.d(1),h=null),d&32&&ge(r,"hightlight",f[5])},i(f){a||(k(e.$$.fragment,f),k(s),a=!0)},o(f){A(e.$$.fragment,f),A(s),a=!1},d(f){P(e,f),f&&_(n),f&&_(r),c[i].d(),h&&h.d()}}}function Pp(t,e,n){let r,i,s,{edit:o=!1}=e,{data:a=[]}=e,{props:l={id:"9c72c81f-480d-4575-bdff-45e50afc7a33",title:"Total Title",number:0,hightlight:!1,saving:[]}}=e,{id:c,title:u,number:h,hightlight:f,saving:d}=l,m=!0,p=()=>n(6,m=!m),g={remove:()=>a.remove(c),changeName:()=>a.change(c,"title",u),changeNumber:()=>a.change(c,"number",h),changeHigh:()=>a.change(c,"hightlight",f),toogleHigh:()=>{n(5,f=!f),y()}},{changeName:b,changeNumber:T,changeHigh:y,remove:D,toogleHigh:R}=g,U=[{icon:"delete",style:"tertiary",onClick:D},{icon:"highlight",style:"tertiary",onClick:R},{icon:"saving",style:"tertiary",onClick:p}];function me(){u=this.value,n(4,u)}function we(){h=kt(this.value),n(3,h)}t.$$set=ae=>{"edit"in ae&&n(0,o=ae.edit),"data"in ae&&n(1,a=ae.data),"props"in ae&&n(2,l=ae.props)},t.$$.update=()=>{if(t.$$.dirty&16392){e:n(7,i=h-r)}if(t.$$.dirty&16392){e:n(8,s=(h-r)/r)}};e:n(14,r=d.reduce((ae,Qi)=>ae+Qi.amount,0));return[o,a,l,h,u,f,m,i,s,c,d,b,T,U,r,me,we]}var hl=class extends j{constructor(e){super();z(this,e,Pp,Mp,$,{edit:0,data:1,props:2})}},ls=hl;var kr,Up=new Uint8Array(16);function xp(){if(!kr&&(kr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!kr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kr(Up)}var Vp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Fp(t){return typeof t=="string"&&Vp.test(t)}var be=[];for(var cs=0;cs<256;++cs)be.push((cs+256).toString(16).substr(1));function $p(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(be[t[e+0]]+be[t[e+1]]+be[t[e+2]]+be[t[e+3]]+"-"+be[t[e+4]]+be[t[e+5]]+"-"+be[t[e+6]]+be[t[e+7]]+"-"+be[t[e+8]]+be[t[e+9]]+"-"+be[t[e+10]]+be[t[e+11]]+be[t[e+12]]+be[t[e+13]]+be[t[e+14]]+be[t[e+15]]).toLowerCase();if(!Fp(n))throw TypeError("Stringified UUID is invalid");return n}function us(t,e,n){t=t||{};var r=t.random||(t.rng||xp)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return $p(r)}var jp={title:"Título",number:0,hightlight:!1,saving:[]},qp=()=>{let{subscribe:t,update:e,set:n}=Jt([]),r=()=>{let f=[];return t(d=>f=d),f};return{subscribe:t,update:e,add:()=>e(f=>[...f,{...jp,id:us()}]),set:n,remove:f=>e(d=>d.filter(m=>m.id!==f)),change:(f,d,m)=>{let p=r();p.map(g=>g.id===f?g[d]=m:""),n(p)},balance:()=>r().reduce((m,p)=>m+p.number,0),saving:(f,d,m)=>{let p=r(),g=us();p.map(b=>b.id===f?b.saving=[...b.saving,{id_saving:g,today:d,amount:m}]:""),n(p)},revenue:()=>{let f=r(),d=[];return f.map(p=>p.saving.map(g=>d=[...d,g.amount])),d.reduce((p,g)=>p+g,0)},detectNoSavings:()=>{let f=r(),d=[];return f.map(p=>p.saving.length===0?d=[...d,p.number]:""),d.reduce((p,g)=>p+g,0)},removeSaving:(f,d)=>{let g=r().filter(b=>b.id===f)[0].saving.filter(b=>b.id_saving!=d);e(b=>b.map(T=>T.id==f?{...T,saving:g}:T))}}},oe=qp(),fl=()=>{oe.set([])};function hs(t){let e=t-1;return e*e*e+1}function fs(t,e,n={}){let r=getComputedStyle(t),i=r.transform==="none"?"":r.transform,s=e.from.width/t.clientWidth,o=e.from.height/t.clientHeight,a=(e.from.left-e.to.left)/s,l=(e.from.top-e.to.top)/o,c=Math.sqrt(a*a+l*l),{delay:u=0,duration:h=d=>Math.sqrt(d)*120,easing:f=hs}=n;return{delay:u,duration:vr(h)?h(c):h,easing:f,css:(d,m)=>`transform: ${i} translate(${m*a}px, ${m*l}px);`}}function dl(t,e,n){let r=t.slice();return r[12]=e[n],r}function pl(t,e,n){let r=t.slice();return r[12]=e[n],r[14]=n,r}function Bp(t){let e=[],n=new Map,r,i,s=t[2],o=a=>a[12].id;for(let a=0;a<s.length;a+=1){let l=dl(t,s,a),c=o(l);n.set(c,e[a]=ml(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=ze()},m(a,l){for(let c=0;c<e.length;c+=1)e[c].m(a,l);w(a,r,l),i=!0},p(a,l){l&5&&(s=a[2],ie(),e=At(e,l,o,1,a,s,n,r.parentNode,Xt,ml,r,dl),se())},i(a){if(!i){for(let l=0;l<s.length;l+=1)k(e[l]);i=!0}},o(a){for(let l=0;l<e.length;l+=1)A(e[l]);i=!1},d(a){for(let l=0;l<e.length;l+=1)e[l].d(a);a&&_(r)}}}function zp(t){let e=[],n=new Map,r,i,s=t[2],o=a=>a[12].id;for(let a=0;a<s.length;a+=1){let l=pl(t,s,a),c=o(l);n.set(c,e[a]=gl(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=ze()},m(a,l){for(let c=0;c<e.length;c+=1)e[c].m(a,l);w(a,r,l),i=!0},p(a,l){if(l&127){s=a[2],ie();for(let c=0;c<e.length;c+=1)e[c].r();e=At(e,l,o,1,a,s,n,r.parentNode,Ir,gl,r,pl);for(let c=0;c<e.length;c+=1)e[c].a();se()}},i(a){if(!i){for(let l=0;l<s.length;l+=1)k(e[l]);i=!0}},o(a){for(let l=0;l<e.length;l+=1)A(e[l]);i=!1},d(a){for(let l=0;l<e.length;l+=1)e[l].d(a);a&&_(r)}}}function ml(t,e){let n,r,i,s;return r=new ls({props:{edit:e[0],props:e[12],data:oe}}),{key:t,first:null,c(){n=E("div"),x(r.$$.fragment),i=N(),this.first=n},m(o,a){w(o,n,a),M(r,n,null),S(n,i),s=!0},p(o,a){e=o;let l={};a&1&&(l.edit=e[0]),a&4&&(l.props=e[12]),r.$set(l)},i(o){s||(k(r.$$.fragment,o),s=!0)},o(o){A(r.$$.fragment,o),s=!1},d(o){o&&_(n),P(r)}}}function vl(t){let e,n;function r(){return t[10](t[14])}return e=new he({props:{props:{icon:"up",style:"move",onClick:r}}}),{c(){x(e.$$.fragment)},m(i,s){M(e,i,s),n=!0},p(i,s){t=i;let o={};s&4&&(o.props={icon:"up",style:"move",onClick:r}),e.$set(o)},i(i){n||(k(e.$$.fragment,i),n=!0)},o(i){A(e.$$.fragment,i),n=!1},d(i){P(e,i)}}}function yl(t){let e,n;function r(){return t[11](t[14])}return e=new he({props:{props:{icon:"down",style:"move",onClick:r}}}),{c(){x(e.$$.fragment)},m(i,s){M(e,i,s),n=!0},p(i,s){t=i;let o={};s&4&&(o.props={icon:"down",style:"move",onClick:r}),e.$set(o)},i(i){n||(k(e.$$.fragment,i),n=!0)},o(i){A(e.$$.fragment,i),n=!1},d(i){P(e,i)}}}function gl(t,e){let n,r,i,s,o,a,l,c,u,h=G,f,d,m;i=new ls({props:{edit:e[0],props:e[12],data:oe,index:e[14]}});function p(...D){return e[7](e[14],...D)}function g(...D){return e[8](e[14],...D)}function b(){return e[9](e[14])}let T=e[14]!==0&&vl(e),y=e[14]!==e[2].length-1&&yl(e);return{key:t,first:null,c(){n=E("div"),r=E("div"),x(i.$$.fragment),o=N(),a=E("div"),T&&T.c(),l=N(),y&&y.c(),c=N(),v(r,"class","list-item svelte-1wuvhrt"),v(r,"draggable",s=!0),v(r,"ondragover","return false"),ge(r,"is-active",e[1]===e[14]),v(a,"class","move_btns svelte-1wuvhrt"),v(n,"class","relative"),this.first=n},m(D,R){w(D,n,R),S(n,r),M(i,r,null),S(n,o),S(n,a),T&&T.m(a,null),S(a,l),y&&y.m(a,null),S(n,c),f=!0,d||(m=[le(r,"dragstart",p),le(r,"drop",Zi(g)),le(r,"dragenter",b)],d=!0)},p(D,R){e=D;let U={};R&1&&(U.edit=e[0]),R&4&&(U.props=e[12]),R&4&&(U.index=e[14]),i.$set(U),R&6&&ge(r,"is-active",e[1]===e[14]),e[14]!==0?T?(T.p(e,R),R&4&&k(T,1)):(T=vl(e),T.c(),k(T,1),T.m(a,l)):T&&(ie(),A(T,1,1,()=>{T=null}),se()),e[14]!==e[2].length-1?y?(y.p(e,R),R&4&&k(y,1)):(y=yl(e),y.c(),k(y,1),y.m(a,null)):y&&(ie(),A(y,1,1,()=>{y=null}),se())},r(){u=n.getBoundingClientRect()},f(){wr(n),h()},a(){h(),h=_r(n,u,fs,{})},i(D){f||(k(i.$$.fragment,D),k(T),k(y),f=!0)},o(D){A(i.$$.fragment,D),A(T),A(y),f=!1},d(D){D&&_(n),P(i),T&&T.d(),y&&y.d(),d=!1,xe(m)}}}function Hp(t){let e,n,r,i,s=[zp,Bp],o=[];function a(l,c){return l[2]&&l[0]?0:l[2]&&!l[0]?1:-1}return~(e=a(t,-1))&&(n=o[e]=s[e](t)),{c(){n&&n.c(),r=ze()},m(l,c){~e&&o[e].m(l,c),w(l,r,c),i=!0},p(l,[c]){let u=e;e=a(l,c),e===u?~e&&o[e].p(l,c):(n&&(ie(),A(o[u],1,1,()=>{o[u]=null}),se()),~e?(n=o[e],n?n.p(l,c):(n=o[e]=s[e](l),n.c()),k(n,1),n.m(r.parentNode,r)):n=null)},i(l){i||(k(n),i=!0)},o(l){A(n),i=!1},d(l){~e&&o[e].d(l),l&&_(r)}}}function Kp(t,e,n){let r;Be(t,oe,p=>n(2,r=p));let{edit:i=!1}=e,s=!1,o=(p,g)=>{p.dataTransfer.dropEffect="move";let b=parseInt(p.dataTransfer.getData("text/plain")),T=r;b<g?(T.splice(g+1,0,T[b]),T.splice(b,1)):(T.splice(g,0,T[b]),T.splice(b+1,1)),oe.set(T),n(1,s=!1)},a=(p,g)=>{p.dataTransfer.effectAllowed="move",p.dataTransfer.dropEffect="move";let b=g;p.dataTransfer.setData("text/plain",b)},l=p=>{if(p!==0){let g=r;g.splice(p-1,0,g[p]),g.splice(p+1,1),oe.set(g)}},c=p=>{if(p!==r.length-1){let g=r;g.splice(p+2,0,g[p]),g.splice(p,1),oe.set(g)}},u=(p,g)=>a(g,p),h=(p,g)=>o(g,p),f=p=>n(1,s=p),d=p=>l(p),m=p=>c(p);return t.$$set=p=>{"edit"in p&&n(0,i=p.edit)},[i,s,r,o,a,l,c,u,h,f,d,m]}var _l=class extends j{constructor(e){super();z(this,e,Kp,Hp,$,{edit:0})}},Sr=_l;function Gp(t){let e,n,r,i,s,o=ve(t[0])+"",a,l,c,u=lt(isNaN(t[1])?0:t[1])+"",h;return{c(){e=E("div"),n=E("h6"),n.textContent=`${t[2]}`,r=N(),i=E("div"),s=E("p"),a=W(o),l=N(),c=E("p"),h=W(u),v(n,"class","mb-1"),v(s,"class","euros"),v(c,"class","percent svelte-1yu2d20"),v(i,"class","data svelte-1yu2d20"),v(e,"class","w-64 m-3 relative m-6 svelte-1yu2d20"),ge(e,"hightlight",t[3])},m(f,d){w(f,e,d),S(e,n),S(e,r),S(e,i),S(i,s),S(s,a),S(i,l),S(i,c),S(c,h)},p(f,[d]){d&1&&o!==(o=ve(f[0])+"")&&J(a,o),d&2&&u!==(u=lt(isNaN(f[1])?0:f[1])+"")&&J(h,u)},i:G,o:G,d(f){f&&_(e)}}}function Wp(t,e,n){let{revenue:r=0}=e,{percent:i=0}=e,{props:s={title:"Beneficios",hightlight:!0}}=e,{title:o,hightlight:a}=s;return t.$$set=l=>{"revenue"in l&&n(0,r=l.revenue),"percent"in l&&n(1,i=l.percent),"props"in l&&n(4,s=l.props)},[r,i,o,a,s]}var wl=class extends j{constructor(e){super();z(this,e,Wp,Gp,$,{revenue:0,percent:1,props:4})}},bl=wl;function Yp(t){let e,n,r,i,s,o;return e=new Ka({props:{balance:t[0]}}),r=new bl({props:{revenue:t[1],percent:t[2]}}),s=new Sr({}),{c(){x(e.$$.fragment),n=N(),x(r.$$.fragment),i=N(),x(s.$$.fragment)},m(a,l){M(e,a,l),w(a,n,l),M(r,a,l),w(a,i,l),M(s,a,l),o=!0},p(a,[l]){let c={};l&1&&(c.balance=a[0]),e.$set(c);let u={};l&2&&(u.revenue=a[1]),l&4&&(u.percent=a[2]),r.$set(u)},i(a){o||(k(e.$$.fragment,a),k(r.$$.fragment,a),k(s.$$.fragment,a),o=!0)},o(a){A(e.$$.fragment,a),A(r.$$.fragment,a),A(s.$$.fragment,a),o=!1},d(a){P(e,a),a&&_(n),P(r,a),a&&_(i),P(s,a)}}}function Jp(t,e,n){let r=0,i=0,s=0;return oe.subscribe(o=>{o&&(n(0,r=oe.balance()),n(1,i=oe.balance()-oe.revenue()-oe.detectNoSavings()),n(2,s=(oe.balance()-oe.revenue()-oe.detectNoSavings())/oe.revenue()))}),[r,i,s]}var El=class extends j{constructor(e){super();z(this,e,Jp,Yp,$,{})}},Tl=El;var ds=function(t,e){return ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ds(t,e)};function Zp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ds(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ps=function(){return ps=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ps.apply(this,arguments)};function Ar(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function em(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function tm(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ms(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cr(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Il(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var nm=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)==55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},rm=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{var s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},im={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|c>>6,d=c&63;l||(d=64,o||(f=64)),r.push(n[u],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nm(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rm(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length,a=o?n[t.charAt(i)]:0;++i;var l=i<t.length,c=l?n[t.charAt(i)]:64;++i;var u=i<t.length,h=u?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw Error();var f=s<<2|a>>4;if(r.push(f),c!==64){var d=a<<4&240|c>>2;if(r.push(d),h!==64){var m=c<<6&192|h;r.push(m)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},kl=function(t){try{return im.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};var sm=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();function fe(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rr(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fe())}function Nr(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Dr(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sl(){return fe().indexOf("Electron/")>=0}function Or(){var t=fe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Al(){return fe().indexOf("MSAppHost/")>=0}var om="FirebaseError",Ln=function(t){Zp(e,t);function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name=om,Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,On.prototype.create),s}return e}(Error),On=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+e,o=this.errors[e],a=o?am(o,i):"Error",l=this.serviceName+": "+a+" ("+s+").",c=new Ln(s,l,i);return c},t}();function am(t,e){return t.replace(lm,function(n,r){var i=e[r];return i!=null?String(i):"<"+r+"?>"})}var lm=/\{\$([^}]+)}/g;function Cl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zt(t){for(var e=[],n=function(l,c){Array.isArray(c)?c.forEach(function(u){e.push(encodeURIComponent(l)+"="+encodeURIComponent(u))}):e.push(encodeURIComponent(l)+"="+encodeURIComponent(c))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r],o=s[0],a=s[1];n(o,a)}return e.length?"&"+e.join("&"):""}function Rl(t,e){var n=new cm(t,e);return n.subscribe.bind(n)}var cm=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");um(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=gs),s.error===void 0&&(s.error=gs),s.complete===void 0&&(s.complete=gs);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch(a){}}),this.observers.push(s),o},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function um(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function gs(){}function Fe(t){return t&&t._delegate?t._delegate:t}var ut=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();var ht="[DEFAULT]";var dm=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(e){e===void 0&&(e=ht);var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new sm;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(s){}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n=ps({identifier:ht,optional:!1},e),r=n.identifier,i=n.optional,s=this.normalizeInstanceIdentifier(r);if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(fm(e))try{this.getOrInitializeService({instanceIdentifier:ht})}catch(h){}try{for(var i=ms(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var o=Cr(s.value,2),a=o[0],l=o[1],c=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:c});l.resolve(u)}catch(h){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=ht),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return em(this,void 0,void 0,function(){var e;return tm(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Il(Il([],Cr(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),Cr(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=ht),this.instances.has(e)},t.prototype.initialize=function(e){var n,r;e===void 0&&(e={});var i=e.instanceIdentifier,s=i===void 0?ht:i,o=e.options,a=o===void 0?{}:o,l=this.normalizeInstanceIdentifier(s);if(this.isInitialized(l))throw Error(this.name+"("+l+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:l,options:a});try{for(var u=ms(this.instancesDeferred.entries()),h=u.next();!h.done;h=u.next()){var f=Cr(h.value,2),d=f[0],m=f[1],p=this.normalizeInstanceIdentifier(d);l===p&&m.resolve(c)}}catch(g){n={error:g}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return this.invokeOnInitCallbacks(c,l),c},t.prototype.onInit=function(e){var n=this;return this.onInitCallbacks.add(e),function(){n.onInitCallbacks.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var r,i;try{for(var s=ms(this.onInitCallbacks),o=s.next();!o.done;o=s.next()){var a=o.value;try{a(e,n)}catch(l){}}}catch(l){r={error:l}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,r=e.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:hm(n),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(o){}return s||null},t.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:ht:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function hm(t){return t===ht?void 0:t}function fm(t){return t.instantiationMode==="EAGER"}var pm=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new dm(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function He(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var Ct,Q;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Q||(Q={}));var mm={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},gm=Q.INFO,vm=(Ct={},Ct[Q.DEBUG]="log",Ct[Q.VERBOSE]="log",Ct[Q.INFO]="info",Ct[Q.WARN]="warn",Ct[Q.ERROR]="error",Ct),ym=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),s=vm[e];if(s)console[s].apply(console,He(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},Mn=function(){function t(e){this.name=e,this._logLevel=gm,this._logHandler=ym,this._userLogHandler=null}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Q))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?mm[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,He([this,Q.DEBUG],e)),this._logHandler.apply(this,He([this,Q.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,He([this,Q.VERBOSE],e)),this._logHandler.apply(this,He([this,Q.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,He([this,Q.INFO],e)),this._logHandler.apply(this,He([this,Q.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,He([this,Q.WARN],e)),this._logHandler.apply(this,He([this,Q.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,He([this,Q.ERROR],e)),this._logHandler.apply(this,He([this,Q.ERROR],e))},t}();var Nl=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_m(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function _m(t){let e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}var Dl="@firebase/app-exp",wm="0.0.900-exp.d92a36260";var vs=new Mn("@firebase/app"),bm="@firebase/app-compat",Em="@firebase/analytics-compat",Tm="@firebase/analytics-exp",Im="@firebase/auth-exp",km="@firebase/auth-compat",Sm="@firebase/database",Am="@firebase/database-compat",Cm="@firebase/functions-exp",Rm="@firebase/functions-compat",Nm="@firebase/installations-exp",Dm="@firebase/installations-compat",Om="@firebase/messaging-exp",Lm="@firebase/messaging-compat",Mm="@firebase/performance-exp",Pm="@firebase/performance-compat",Um="@firebase/remote-config-exp",xm="@firebase/remote-config-compat",Vm="@firebase/storage",Fm="@firebase/storage-compat",$m="@firebase/firestore",jm="@firebase/firestore-compat",qm="firebase-exp",Bm="9.0.0-beta.2";var Ol="[DEFAULT]",zm={[Dl]:"fire-core",[bm]:"fire-core-compat",[Tm]:"fire-analytics",[Em]:"fire-analytics-compat",[Im]:"fire-auth",[km]:"fire-auth-compat",[Sm]:"fire-rtdb",[Am]:"fire-rtdb-compat",[Cm]:"fire-fn",[Rm]:"fire-fn-compat",[Nm]:"fire-iid",[Dm]:"fire-iid-compat",[Om]:"fire-fcm",[Lm]:"fire-fcm-compat",[Mm]:"fire-perf",[Pm]:"fire-perf-compat",[Um]:"fire-rc",[xm]:"fire-rc-compat",[Vm]:"fire-gcs",[Fm]:"fire-gcs-compat",[$m]:"fire-fst",[jm]:"fire-fst-compat","fire-js":"fire-js",[qm]:"fire-js-all"};var Lr=new Map,ys=new Map;function Hm(t,e){try{t.container.addComponent(e)}catch(n){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rt(t){let e=t.name;if(ys.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;ys.set(e,t);for(let n of Lr.values())Hm(n,t);return!0}function Pn(t,e){return t.container.getProvider(e)}var Km={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Mr=new On("app","Firebase",Km);var Ll=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app-exp",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}};var Nt=Bm;function _s(t,e={}){typeof e!="object"&&(e={name:e});let n=Object.assign({name:Ol,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Mr.create("bad-app-name",{appName:String(r)});if(Lr.has(r))throw Mr.create("duplicate-app",{appName:r});let i=new pm(r);for(let o of ys.values())i.addComponent(o);let s=new Ll(t,n,i);return Lr.set(r,s),s}function Pr(t=Ol){let e=Lr.get(t);if(!e)throw Mr.create("no-app",{appName:t});return e}function ft(t,e,n){var r;let i=(r=zm[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(a.join(" "));return}Rt(new ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Gm(t){Rt(new ut("platform-logger",e=>new Nl(e),"PRIVATE")),ft(Dl,wm,t),ft("fire-js","")}Gm();var Wm="firebase-exp",Xm="9.0.0-beta.2";ft(Wm,Xm,"app");var Qm={apiKey:"AIzaSyDWiDgqYUOUq1tsA8C5zY3eJR170KRa3qA",authDomain:"finanzas-cfeb0.firebaseapp.com",projectId:"finanzas-cfeb0",storageBucket:"finanzas-cfeb0.appspot.com",messagingSenderId:"245107666949",appId:"1:245107666949:web:f8bac696fa6a205541ac6c",measurementId:"G-LR1WRTGGG2"},iE=_s(Qm);function Ym(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ml=new On("auth","Firebase",Ym());var Pl=new Mn("@firebase/auth-exp");function Ur(t,...e){Pl.logLevel<=Q.ERROR&&Pl.error(`Auth (${Nt}): ${t}`,...e)}function Ze(t,...e){throw ws(t,...e)}function en(t,...e){return ws(t,...e)}function ws(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ml.create(t,...e)}function q(t,e,...n){if(!t)throw ws(e,...n)}function et(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ur(e),new Error(e)}function dt(t,e){t||et(e)}var Ul=new Map;function tt(t){dt(t instanceof Function,"Expected a class definition");let e=Ul.get(t);return e?(dt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ul.set(t,e),e)}function Jm(t,e){let n=Pn(t,"auth-exp");if(n.isInitialized()){let i=n.getImmediate();Ze(i,"already-initialized")}return n.initialize({options:e})}function Zm(t,e){let n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tt);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bs(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eg(){return xl()==="http:"||xl()==="https:"}function xl(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function tg(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eg()||Nr()||"connection"in navigator)?navigator.onLine:!0}function ng(){if(typeof navigator=="undefined")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var tn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,dt(n>e,"Short delay should be less than long delay!"),this.isMobile=Rr()||Dr()}get(){return tg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Es(t,e){dt(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var xr=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var rg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"};var ig=new tn(3e4,6e4);function sg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vr(t,e,n,r,i={}){return Vl(t,i,()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Zt(Object.assign({key:t.config.apiKey},o)).slice(1),l=new(xr.headers());return l.set("Content-Type","application/json"),l.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&l.set("X-Firebase-Locale",t.languageCode),xr.fetch()(Fl(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function Vl(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},rg),e);try{let i=new $l(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Ts(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let l=(s.ok?o.errorMessage:o.error.message).split(" : ")[0];if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ts(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ts(t,"email-already-in-use",o);let c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");Ze(t,c)}}catch(i){if(i instanceof Ln)throw i;Ze(t,"network-request-failed")}}async function og(t,e,n,r,i={}){let s=await Vr(t,e,n,r,i);return"mfaPendingCredential"in s&&Ze(t,"multi-factor-auth-required",{serverResponse:s}),s}function Fl(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Es(t.config,i):`${t.config.apiScheme}://${i}`}var $l=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(en(this.auth,"timeout")),ig.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ts(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=en(t,e,r);return i.customData._tokenResponse=n,i}async function ag(t,e){return Vr(t,"POST","/v1/accounts:delete",e)}async function lg(t,e){return Vr(t,"POST","/v1/accounts:lookup",e)}function Un(t){if(!!t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function cg(t,e=!1){let n=Fe(t),r=await n.getIdToken(e),i=ks(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Un(Is(i.auth_time)),issuedAtTime:Un(Is(i.iat)),expirationTime:Un(Is(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Is(t){return Number(t)*1e3}function ks(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ur("JWT malformed, contained fewer than 3 sections"),null;try{let i=kl(n);return i?JSON.parse(i):(Ur("Failed to decode base64 JWT payload"),null)}catch(i){return Ur("Caught error parsing JWT payload as JSON",i),null}}function ug(t){let e=ks(t);return q(e,"internal-error"),q(typeof e.exp!="undefined","internal-error"),q(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}async function xn(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ln&&hg(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hg({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var jl=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Ss=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Un(this.lastLoginAt),this.creationTime=Un(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Fr(t){var e;let n=t.auth,r=await t.getIdToken(),i=await xn(t,lg(n,{idToken:r}));q(i==null?void 0:i.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?dg(s.providerUserInfo):[],a=fg(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a==null?void 0:a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ss(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function pg(t){let e=Fe(t);await Fr(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fg(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dg(t){return t.map(e=>{var{providerId:n}=e,r=Ar(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function mg(t,e){let n=await Vl(t,{},()=>{let r=Zt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Fl(t,i,"/v1/token",`key=${s}`);return xr.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}var nn=class{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken!="undefined","internal-error"),q(typeof e.refreshToken!="undefined","internal-error");let n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):ug(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return q(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:s}=await mg(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new nn;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nn,this.toJSON())}_performRefresh(){return et("not implemented")}};function pt(t,e){q(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}var mt=class{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ar(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new jl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.metadata=new Ss(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let n=await xn(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cg(this,e)}reload(){return pg(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new mt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fr(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await xn(this,ag(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,d=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,p=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,T=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:y,emailVerified:D,isAnonymous:R,providerData:U,stsTokenManager:me}=n;q(y&&me,e,"internal-error");let we=nn.fromJSON(this.name,me);q(typeof y=="string",e,"internal-error"),pt(h,e.name),pt(f,e.name),q(typeof D=="boolean",e,"internal-error"),q(typeof R=="boolean",e,"internal-error"),pt(d,e.name),pt(m,e.name),pt(p,e.name),pt(g,e.name),pt(b,e.name),pt(T,e.name);let ae=new mt({uid:y,auth:e,email:f,emailVerified:D,displayName:h,isAnonymous:R,photoURL:m,phoneNumber:d,tenantId:p,stsTokenManager:we,createdAt:b,lastLoginAt:T});return U&&Array.isArray(U)&&(ae.providerData=U.map(Qi=>Object.assign({},Qi))),g&&(ae._redirectEventId=g),ae}static async _fromIdTokenResponse(e,n,r=!1){let i=new nn;i.updateFromServerResponse(n);let s=new mt({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Fr(s),s}};var As=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){let n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};As.type="NONE";var ql=As;function $r(t,e,n){return`firebase:${t}:${e}:${n}`}var rn=class{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=$r(this.userKey,i.apiKey,s),this.fullPersistenceKey=$r("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?mt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new rn(tt(ql),e,r);let i=tt(ql);for(let a of n)if(await a._isAvailable()){i=a;break}let s=null,o=$r(r,e.config.apiKey,e.name);for(let a of n)try{let l=await a._get(o);if(l){let c=mt._fromJSON(e,l);a!==i&&(s=c);break}}catch(l){}return s&&await i._set(o,s.toJSON()),await Promise.all(n.map(async a=>{if(a!==i)try{await a._remove(o)}catch(l){}})),new rn(i,e,r)}};function Xl(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hl(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bl(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gl(e))return"Blackberry";if(Wl(e))return"Webos";if(Cs(e))return"Safari";if((e.includes("chrome/")||zl(e))&&!e.includes("edge/"))return"Chrome";if(Kl(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Bl(t=fe()){return/firefox\//i.test(t)}function Cs(t=fe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zl(t=fe()){return/crios\//i.test(t)}function Hl(t=fe()){return/iemobile/i.test(t)}function Kl(t=fe()){return/android/i.test(t)}function Gl(t=fe()){return/blackberry/i.test(t)}function Wl(t=fe()){return/webos/i.test(t)}function jr(t=fe()){return/iphone|ipad|ipod/i.test(t)}function gg(t=fe()){var e;return jr(t)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function vg(){return Or()&&document.documentMode===10}function Ql(t=fe()){return jr(t)||Kl(t)||Wl(t)||Gl(t)||/windows phone/i.test(t)||Hl(t)}function yg(){try{return!!(window&&window!==window.top)}catch(t){return!1}}function Yl(t,e=[]){let n;switch(t){case"Browser":n=Xl(fe());break;case"Worker":n=`${Xl(fe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Nt}/${r}`}var Jl=class{constructor(e,n){this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rs(this),this.idTokenSubscription=new Rs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.redirectInitializerError=null,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ml,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tt(n)),this._initializationPromise=this.queue(async()=>{var r;this._deleted||(this.persistenceManager=await rn.create(this,e),!this._deleted&&(((r=this._popupRedirectResolver)===null||r===void 0?void 0:r._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(n),!this._deleted&&(this._isInitialized=!0)))}),this._initializationPromise.then(()=>{if(this.redirectInitializerError)throw this.redirectInitializerError})}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var n;let r=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=r==null?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===s)&&(o==null?void 0:o.user)&&(r=o.user)}return r?r._redirectEventId?(q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)):this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){this.redirectInitializerError=r,await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fr(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ng()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let n=e?Fe(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(tt(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new On("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&tt(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await rn.create(this,[tt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next,o=this._isInitialized?Promise.resolve():this._initializationPromise;return q(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}};function Ns(t){return Fe(t)}var Rs=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rl(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ds=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return et("not implemented")}_getIdTokenResponse(e){return et("not implemented")}_linkToIdToken(e,n){return et("not implemented")}_getReauthenticationResolver(e){return et("not implemented")}};async function sn(t,e){return og(t,"POST","/v1/accounts:signInWithIdp",sg(t,e))}var _g="http://localhost",Vn=class extends Ds{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){let n=new Vn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ze("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ar(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new Vn(r,i);return Object.assign(o,s),o}_getIdTokenResponse(e){let n=this.buildRequest();return sn(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,sn(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,sn(e,n)}buildRequest(){let e={requestUri:_g,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zt(n)}return e}};var qr=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Os=class extends qr{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Ke=class extends Os{constructor(){super("google.com");this.addScope("profile")}static credential(e,n){return Vn._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ke.credentialFromTaggedObject(e)}static credentialFromError(e){return Ke.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ke.credential(n,r)}catch(i){return null}}};Ke.GOOGLE_SIGN_IN_METHOD="google.com";Ke.PROVIDER_ID="google.com";var Dt=class{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let s=await mt._fromIdTokenResponse(e,r,i),o=Zl(r);return new Dt({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=Zl(r);return new Dt({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function Zl(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Fn=class extends Ln{constructor(e,n,r,i){var s;super(n.code,n.message);this.operationType=r,this.user=i,this.name="FirebaseError",Object.setPrototypeOf(this,Fn.prototype),this.appName=e.name,this.code=n.code,this.tenantId=(s=e.tenantId)!==null&&s!==void 0?s:void 0,this.serverResponse=n.customData.serverResponse}static _fromErrorAndOperation(e,n,r,i){return new Fn(e,n,r,i)}};function ec(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fn._fromErrorAndOperation(t,s,e,r):s})}async function wg(t,e,n=!1){let r=await xn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Dt._forOperation(t,"link",r)}async function bg(t,e,n=!1){let{auth:r}=t,i="reauthenticate";try{let s=await xn(t,ec(r,i,e,t),n);q(s.idToken,r,"internal-error");let o=ks(s.idToken);q(o,r,"internal-error");let{sub:a}=o;return q(t.uid===a,r,"user-mismatch"),Dt._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ze(r,"user-mismatch"),s}}async function Eg(t,e,n=!1){let r="signIn",i=await ec(t,r,e),s=await Dt._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function tc(t,e,n,r){return Fe(t).onAuthStateChanged(e,n,r)}function nc(t){return Fe(t).signOut()}var Tg="@firebase/auth-exp",Ig="0.0.900-exp.d92a36260";var rc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{var i;e(((i=r)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function kg(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Sg(t){Rt(new ut("auth-exp",(e,{options:n})=>{let r=e.getProvider("app-exp").getImmediate(),{apiKey:i,authDomain:s}=r.options;return(o=>{q(i&&!i.includes(":"),"invalid-api-key",{appName:o.name}),q(!(s==null?void 0:s.includes(":")),"argument-error",{appName:o.name});let a={apiKey:i,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yl(t)},l=new Jl(o,a);return Zm(l,n),l})(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rt(new ut("auth-internal",e=>{let n=Ns(e.getProvider("auth-exp").getImmediate());return(r=>new rc(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ft(Tg,Ig,kg(t))}var Br="__sak";var Ls=class{constructor(e,n){this.storage=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Br,"1"),this.storage.removeItem(Br),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}};function Ag(){let t=fe();return Cs(t)||jr(t)}var Cg=1e3,Rg=10,Ms=class extends Ls{constructor(){super(window.localStorage,"LOCAL");this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Ag()&&yg(),this.fallbackToPolling=Ql(),this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}let r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}let i=()=>{let o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);vg()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Rg):i()}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Cg)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){let n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}};Ms.type="LOCAL";var Ng=Ms;function Dg(t){return Promise.all(t.map(async e=>{try{let n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}var $n=class{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;let r=new $n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o==null?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});let a=Array.from(o).map(async c=>c(n.origin,s)),l=await Dg(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};$n.receivers=[];function Og(t="",e=20){return`${t}${Math.floor(Math.random()*Math.pow(10,e))}`}var ic=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{let c=Og();i.port1.start();let u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Ge(){return window}function Lg(t){Ge().location.href=t}function sc(){return typeof Ge().WorkerGlobalScope!="undefined"&&typeof Ge().importScripts=="function"}async function Mg(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function Pg(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ug(){return sc()?self:null}var oc="firebaseLocalStorageDb",xg=1,zr="firebaseLocalStorage",ac="fbase_key",on=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Hr(t,e){return t.transaction([zr],e?"readwrite":"readonly").objectStore(zr)}function Vg(){let t=indexedDB.deleteDatabase(oc);return new on(t).toPromise()}function Ps(){let t=indexedDB.open(oc,xg);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(zr,{keyPath:ac})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;if(r.objectStoreNames.contains(zr))e(r);else return await Vg(),Ps()})})}async function lc(t,e,n){let r=Hr(t,!0).put({[ac]:e,value:n});return new on(r).toPromise()}async function Fg(t,e){let n=Hr(t,!1).get(e),r=await new on(n).toPromise();return r===void 0?null:r.value}function cc(t,e){let n=Hr(t,!0).delete(e);return new on(n).toPromise()}var $g=800,jg=3,Us=class{constructor(){this.type="LOCAL",this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ps(),this.db)}async _withRetries(e){let n=0;for(;;)try{let r=await this._openDb();return await e(r)}catch(r){if(n++>jg)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$n._getInstance(Ug()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Mg(),!this.activeServiceWorker)return;this.sender=new ic(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Pg()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Ps();return await lc(e,Br,"1"),await cc(e,Br),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>lc(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){let n=await this._withRetries(r=>Fg(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cc(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(i=>{let s=Hr(i,!1).getAll();return new on(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;for(let{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(let i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$g)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Us.type="LOCAL";var qg=Us;var Bg=10*60*1e3,uc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zg(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fc(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(en(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Bg&&this.cachedEventUids.clear(),this.cachedEventUids.has(hc(e))}saveEventToCache(e){this.cachedEventUids.add(hc(e)),this.lastProcessedEventTime=Date.now()}};function hc(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fc({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zg(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fc(t);default:return!1}}function Hg(t){return`${t||""}${Math.floor(Math.random()*1e9)}`}async function Kg(t){return Vr(t,"GET","/v1/projects",{})}var Gg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wg=/^https?/;async function Qg(t){if(t.config.emulator)return;let{authorizedDomains:e}=await Kg(t);for(let n of e)try{if(Xg(n))return}catch(r){}Ze(t,"unauthorized-domain")}function Xg(t){let e=bs(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Wg.test(n))return!1;if(Gg.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}function Yg(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Jg(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n,r.type="text/javascript",r.charset="UTF-8",Yg().appendChild(r)})}function Zg(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var ev=new tn(3e4,6e4);function dc(){let t=Ge().___jsl;if(t==null?void 0:t.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tv(t){return new Promise((e,n)=>{var r,i,s;function o(){dc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dc(),n(en(t,"network-request-failed"))},timeout:ev.get()})}if((i=(r=Ge().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0?void 0:i.Iframe)e(gapi.iframes.getContext());else if((s=Ge().gapi)===null||s===void 0?void 0:s.load)o();else{let a=Zg("iframefcb");return Ge()[a]=()=>{gapi.load?o():n(en(t,"network-request-failed"))},Jg(`https://apis.google.com/js/api.js?onload=${a}`)}}).catch(e=>{throw Kr=null,e})}var Kr=null;function nv(t){return Kr=Kr||tv(t),Kr}var rv=new tn(5e3,15e3),iv="__/auth/iframe",sv="emulator/auth/iframe",ov={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},av=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lv(t){let e=t.config;q(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Es(e,sv):`https://${t.config.authDomain}/${iv}`,r={apiKey:e.apiKey,appName:t.name,v:Nt},i=av.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Zt(r).slice(1)}`}async function cv(t){let e=await nv(t),n=Ge().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:lv(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ov,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=en(t,"network-request-failed"),a=Ge().setTimeout(()=>{s(o)},rv.get());function l(){Ge().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}var xs=class extends Ls{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}};xs.type="SESSION";var uv=xs;var hv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fv=500,dv=600,pv="_blank",mv="http://localhost",Vs=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}};function vv(t,e,n,r=fv,i=dv){let s=Math.min((window.screen.availHeight-i)/2,0).toString(),o=Math.min((window.screen.availWidth-r)/2,0).toString(),a="",l=Object.assign(Object.assign({},hv),{width:r.toString(),height:i.toString(),top:s,left:o}),c=fe().toLowerCase();n&&(a=zl(c)?pv:n),Bl(c)&&(e=e||mv,l.scrollbars="yes");let u=Object.entries(l).reduce((f,[d,m])=>`${f}${d}=${m},`,"");if(gg(c)&&a!=="_self")return gv(e||"",a),new Vs(null);let h=window.open(e||"",a,u);q(h,t,"popup-blocked");try{h.focus()}catch(f){}return new Vs(h)}function gv(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}function pc(t,e){return e?tt(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Gr=class extends Ds{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return sn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sn(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function yv(t){return Eg(t.auth,new Gr(t),t.bypassAuthState)}function _v(t){let{auth:e,user:n}=t;return q(n,e,"internal-error"),bg(n,new Gr(t),t.bypassAuthState)}async function wv(t){let{auth:e,user:n}=t;return q(n,e,"internal-error"),wg(n,new Gr(t),t.bypassAuthState)}var mc=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yv;case"linkViaPopup":case"linkViaRedirect":return wv;case"reauthViaPopup":case"reauthViaRedirect":return _v;default:Ze(this.auth,"internal-error")}}resolve(e){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var bv="pendingRedirect",gc=new Map,vc=class extends mc{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r);this.eventId=null}async execute(){let e=gc.get(this.auth._key());if(!e){try{let r=await Ev(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gc.set(this.auth._key(),e)}return e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Ev(t,e){let n=yc(e),r=await Fs(t)._get(n)==="true";return await Fs(t)._remove(n),r}async function Tv(t,e){return Fs(t)._set(yc(e),"true")}function Fs(t){return tt(t._redirectPersistence)}function yc(t){return $r(bv,t.config.apiKey,t.name)}function _c(t,e,n){return Iv(t,e,n)}async function Iv(t,e,n){let r=Ns(t);q(e instanceof qr,t,"argument-error");let i=pc(r,n);return await Tv(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function kv(t,e,n=!1){let r=Ns(t),i=pc(r,e),o=await new vc(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var Sv="__/auth/handler",Av="emulator/auth/handler";function wc(t,e,n,r,i,s){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Nt,eventId:i};if(e instanceof qr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Cl(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof Os){let l=e.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];return`${Cv(t)}?${Zt(a).slice(1)}`}function Cv({config:t}){return t.emulator?Es(t,Av):`https://${t.authDomain}/${Sv}`}var $s="webStorageSupport",bc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uv,this._completeRedirectFn=kv}async _openPopup(e,n,r,i){var s;dt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=wc(e,n,r,bs(),i);return vv(e,o,Hg())}async _openRedirect(e,n,r,i){return await this._originValidation(e),Lg(wc(e,n,r,bs(),i)),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(dt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r}async initAndGetManager(e){let n=await cv(e),r=new uc(e);return n.register("authEvent",i=>(q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($s,{type:$s},i=>{var s;let o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[$s];o!==void 0&&n(!!o),Ze(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Qg(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ql()||Cs()||jr()}},Rv=bc,aE=new tn(3e4,6e4);var lE=new tn(2e3,1e4);function Ec(t=Pr()){let e=Pn(t,"auth-exp");return e.isInitialized()?e.getImmediate():Jm(t,{popupRedirectResolver:Rv,persistence:[qg,Ng]})}Sg("Browser");var Wr=typeof Wr!="undefined"?Wr:typeof self!="undefined"?self:typeof window!="undefined"?window:{};var js=function(t,e){return js=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},js(t,e)};function Nv(t,e){js(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Tc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Dv=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Wr!="undefined"?Wr:typeof self!="undefined"?self:{},O,qs=qs||{},B=Dv||self;function Xr(){}function Bs(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function jn(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Lv(t){return Object.prototype.hasOwnProperty.call(t,zs)&&t[zs]||(t[zs]=++Ov)}var zs="closure_uid_"+(1e9*Math.random()>>>0),Ov=0;function Mv(t,e,n){return t.call.apply(t.bind,arguments)}function Pv(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Se(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Se=Mv:Se=Pv,Se.apply(null,arguments)}function Qr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function We(){return Date.now()}function Re(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function gt(){this.j=this.j,this.i=this.i}var Uv=0;gt.prototype.j=!1;gt.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),Uv!=0))var t=Lv(this)};gt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ic=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},kc=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=typeof t=="string"?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function Vv(t){e:{for(var e=xv,n=t.length,r=typeof t=="string"?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function Sc(t){return Array.prototype.concat.apply([],arguments)}function Hs(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Yr(t){return/^[\s\xa0]*$/.test(t)}var Ac=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ne(t,e){return t.indexOf(e)!=-1}function Ks(t,e){return t<e?-1:t>e?1:0}var De;e:{if(Gs=B.navigator,Gs&&(Ws=Gs.userAgent,Ws)){De=Ws;break e}De=""}var Gs,Ws;function Xs(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Cc(t){var e={};for(var n in t)e[n]=t[n];return e}var Rc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nc(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var s=0;s<Rc.length;s++)n=Rc[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Qs(t){return Qs[" "](t),t}Qs[" "]=Xr;function $v(t,e){var n=Fv;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var jv=Ne(De,"Opera"),vt=Ne(De,"Trident")||Ne(De,"MSIE"),Dc=Ne(De,"Edge"),Ys=Dc||vt,Oc=Ne(De,"Gecko")&&!(Ne(De.toLowerCase(),"webkit")&&!Ne(De,"Edge"))&&!(Ne(De,"Trident")||Ne(De,"MSIE"))&&!Ne(De,"Edge"),qv=Ne(De.toLowerCase(),"webkit")&&!Ne(De,"Edge");function Lc(){var t=B.document;return t?t.documentMode:void 0}var Jr;e:{if(Zr="",ei=function(){var t=De;if(Oc)return/rv:([^\);]+)(\)|;)/.exec(t);if(Dc)return/Edge\/([\d\.]+)/.exec(t);if(vt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(qv)return/WebKit\/(\S+)/.exec(t);if(jv)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),ei&&(Zr=ei?ei[1]:""),vt&&(ti=Lc(),ti!=null&&ti>parseFloat(Zr))){Jr=String(ti);break e}Jr=Zr}var Zr,ei,ti,Fv={};function Mc(t){return $v(t,function(){for(var e=0,n=Ac(String(Jr)).split("."),r=Ac(String(t)).split("."),i=Math.max(n.length,r.length),s=0;e==0&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o[0].length==0&&a[0].length==0)break;e=Ks(o[1].length==0?0:parseInt(o[1],10),a[1].length==0?0:parseInt(a[1],10))||Ks(o[2].length==0,a[2].length==0)||Ks(o[2],a[2]),o=o[3],a=a[3]}while(e==0)}return 0<=e})}var Js;B.document&&vt?(Zs=Lc(),Js=Zs||parseInt(Jr,10)||void 0):Js=void 0;var Zs,Pc=Js,eo=!vt||9<=Number(Pc),Bv=vt&&!Mc("9"),zv=function(){if(!B.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{B.addEventListener("test",Xr,e),B.removeEventListener("test",Xr,e)}catch(n){}return t}();function Ae(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}Ae.prototype.b=function(){this.defaultPrevented=!0};function qn(t,e){if(Ae.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Oc){e:{try{Qs(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Hv[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Re(qn,Ae);var Hv={2:"touch",3:"pen",4:"mouse"};qn.prototype.b=function(){qn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Bv)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Bn="closure_listenable_"+(1e6*Math.random()|0),Kv=0;function Gv(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Kv,this.Y=this.Z=!1}function ni(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ri(t){this.src=t,this.a={},this.b=0}ri.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.a[s],t||(t=this.a[s]=[],this.b++);var o=to(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):(e=new Gv(e,this.src,s,!!r,i),e.Z=n,t.push(e)),e};function no(t,e){var n=e.type;if(n in t.a){var r=t.a[n],i=Ic(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ni(e),t.a[n].length==0&&(delete t.a[n],t.b--))}}function to(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.ca==r)return i}return-1}var ro="closure_lm_"+(1e6*Math.random()|0),io={};function so(t,e,n,r,i){if(r&&r.once)return xc(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)so(t,e[s],n,r,i);return null}return n=oo(n),t&&t[Bn]?t.va(e,n,jn(r)?!!r.capture:!!r,i):Uc(t,e,n,!1,r,i)}function Uc(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=jn(i)?!!i.capture:!!i;if(o&&!eo)return null;var a=ao(t);if(a||(t[ro]=a=new ri(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=Wv(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)zv||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Vc(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Wv(){var t=Xv,e=eo?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function xc(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)xc(t,e[s],n,r,i);return null}return n=oo(n),t&&t[Bn]?t.wa(e,n,jn(r)?!!r.capture:!!r,i):Uc(t,e,n,!0,r,i)}function Fc(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Fc(t,e[s],n,r,i);else r=jn(r)?!!r.capture:!!r,n=oo(n),t&&t[Bn]?(t=t.c,e=String(e).toString(),e in t.a&&(s=t.a[e],n=to(s,n,r,i),-1<n&&(ni(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.a[e],t.b--)))):t&&(t=ao(t))&&(e=t.a[e.toString()],t=-1,e&&(t=to(e,n,r,i)),(n=-1<t?e[t]:null)&&lo(n))}function lo(t){if(typeof t!="number"&&t&&!t.Y){var e=t.src;if(e&&e[Bn])no(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Vc(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ao(e))?(no(n,t),n.b==0&&(n.src=null,e[ro]=null)):ni(t)}}}function Vc(t){return t in io?io[t]:io[t]="on"+t}function $c(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&lo(t),n.call(r,e)}function Xv(t,e){if(t.Y)return!0;if(!eo){if(!e)e:{e=["window","event"];for(var n=B,r=0;r<e.length;r++)if(n=n[e[r]],n==null){e=null;break e}e=n}return e=new qn(e,this),$c(t,e)}return $c(t,new qn(e,this))}function ao(t){return t=t[ro],t instanceof ri?t:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function oo(t){return typeof t=="function"?t:(t[co]||(t[co]=function(e){return t.handleEvent(e)}),t[co])}function $e(){gt.call(this),this.c=new ri(this),this.J=this,this.C=null}Re($e,gt);$e.prototype[Bn]=!0;O=$e.prototype;O.addEventListener=function(t,e,n,r){so(this,t,e,n,r)};O.removeEventListener=function(t,e,n,r){Fc(this,t,e,n,r)};function Ee(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,typeof e=="string")e=new Ae(e,t);else if(e instanceof Ae)e.target=e.target||t;else{var i=e;e=new Ae(r,t),Nc(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=ii(o,r,!0,e)&&i}if(o=e.a=t,i=ii(o,r,!0,e)&&i,i=ii(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.a=n[s],i=ii(o,r,!1,e)&&i}O.G=function(){if($e.X.G.call(this),this.c){var t=this.c,e;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)ni(n[r]);delete t.a[e],t.b--}}this.C=null};O.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)};O.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};function ii(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,l=o.ca||o.src;o.Z&&no(t.c,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var uo=B.JSON.stringify;function jc(){this.b=this.a=null}var qc=new(function(){function t(e,n){this.c=e,this.f=n,this.b=0,this.a=null}return t.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},t}())(function(){return new ho},function(t){t.reset()});jc.prototype.add=function(t,e){var n=qc.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n};function Qv(){var t=Bc,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ho(){this.next=this.b=this.a=null}ho.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};ho.prototype.reset=function(){this.next=this.b=this.a=null};function Yv(t){B.setTimeout(function(){throw t},0)}function zc(t,e){fo||Jv(),po||(fo(),po=!0),Bc.add(t,e)}var fo;function Jv(){var t=B.Promise.resolve(void 0);fo=function(){t.then(Zv)}}var po=!1,Bc=new jc;function Zv(){for(var t;t=Qv();){try{t.a.call(t.b)}catch(n){Yv(n)}var e=qc;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}po=!1}function si(t,e){$e.call(this),this.b=t||1,this.a=e||B,this.f=Se(this.Za,this),this.g=We()}Re(si,$e);O=si.prototype;O.aa=!1;O.M=null;O.Za=function(){if(this.aa){var t=We()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ee(this,"tick"),this.aa&&(mo(this),this.start()))}};O.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=We())};function mo(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}O.G=function(){si.X.G.call(this),mo(this),delete this.a};function go(t,e,n){if(typeof t=="function")n&&(t=Se(t,n));else if(t&&typeof t.handleEvent=="function")t=Se(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:B.setTimeout(t,e||0)}function Hc(t){t.a=go(function(){t.a=null,t.c&&(t.c=!1,Hc(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}var ey=function(t){Nv(e,t);function e(n,r){var i=t.call(this)||this;return i.g=n,i.h=r,i.b=null,i.c=!1,i.a=null,i}return e.prototype.f=function(n){this.b=arguments,this.a?this.c=!0:Hc(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(B.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(gt);function zn(t){gt.call(this),this.b=t,this.a={}}Re(zn,gt);var Kc=[];function Gc(t,e,n,r){Array.isArray(n)||(n&&(Kc[0]=n.toString()),n=Kc);for(var i=0;i<n.length;i++){var s=so(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Wc(t){Xs(t.a,function(e,n){this.a.hasOwnProperty(n)&&lo(e)},t),t.a={}}zn.prototype.G=function(){zn.X.G.call(this),Wc(this)};zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vo(){this.a=!0}function ty(t,e,n,r,i,s){t.info(function(){if(t.a)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function ny(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function an(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+ry(t,n)+(r?" "+r:"")})}function iy(t,e){t.info(function(){return"TIMEOUT: "+e})}vo.prototype.info=function(){};function ry(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return uo(n)}catch(a){return e}}var Ot={},Xc=null;function oi(){return Xc=Xc||new $e}Ot.Fa="serverreachability";function Qc(t){Ae.call(this,Ot.Fa,t)}Re(Qc,Ae);function Hn(t){var e=oi();Ee(e,new Qc(e,t))}Ot.STAT_EVENT="statevent";function Yc(t,e){Ae.call(this,Ot.STAT_EVENT,t),this.stat=e}Re(Yc,Ae);function Oe(t){var e=oi();Ee(e,new Yc(e,t))}Ot.Ga="timingevent";function Jc(t){Ae.call(this,Ot.Ga,t)}Re(Jc,Ae);function Kn(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return B.setTimeout(function(){t()},e)}var ai={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Zc={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function eu(){}eu.prototype.a=null;function tu(t){var e;return(e=t.a)||(e=t.a={}),e}function nu(){}var Gn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function yo(){Ae.call(this,"d")}Re(yo,Ae);function _o(){Ae.call(this,"c")}Re(_o,Ae);var ru;function iu(){}Re(iu,eu);ru=new iu;function Wn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new zn(this),this.P=sy,t=Ys?125:void 0,this.R=new si(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}var sy=45e3,su={},wo={};O=Wn.prototype;O.setTimeout=function(t){this.P=t};function bo(t,e,n){t.H=1,t.i=li(nt(e)),t.j=n,t.I=!0,ou(t,null)}function ou(t,e){t.u=We(),Xn(t),t.l=nt(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),au(n.b,"t",r),t.D=0,t.a=lu(t.g,t.g.C?e:null),0<t.O&&(t.F=new ey(Se(t.Ca,t,t.a),t.O)),Gc(t.J,t.a,"readystatechange",t.Xa),e=t.B?Cc(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Hn(1),ty(t.c,t.m,t.l,t.f,t.S,t.j)}O.Xa=function(t){t=t.target;var e=this.F;e&&yt(t)==3?e.f():this.Ca(t)};O.Ca=function(t){try{if(t==this.a)e:{var e=yt(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||e==3&&!Ys&&!this.a.$())){this.A||e!=4||n==7||(n==8||0>=r?Hn(3):Hn(2)),ci(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=i==200,ny(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){t:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yr(o)){var l=o;break t}}l=null}if(l)an(this.c,this.f,l,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Eo(this,l);else{this.b=!1,this.h=3,Oe(12),ln(this),ui(this);break e}}this.I?(cu(this,e,s),Ys&&this.b&&e==3&&(Gc(this.J,this.R,"tick",this.Wa),this.R.start())):(an(this.c,this.f,s,null),Eo(this,s)),e==4&&ln(this),this.b&&!this.A&&(e==4?uu(this.g,this):(this.b=!1,Xn(this)))}else i==400&&0<s.indexOf("Unknown SID")?(this.h=3,Oe(12)):(this.h=0,Oe(13)),ln(this),ui(this)}}}catch(c){}finally{}};function cu(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=oy(t,n);if(i==wo){e==4&&(t.h=4,Oe(14),r=!1),an(t.c,t.f,null,"[Incomplete Response]");break}else if(i==su){t.h=4,Oe(15),an(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}else an(t.c,t.f,i,null),Eo(t,i)}e==4&&n.length==0&&(t.h=1,Oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,e=t.g,e.a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),To(e),e.F=!0,Oe(11))):(an(t.c,t.f,n,"[Invalid Chunked Response]"),ln(t),ui(t))}O.Wa=function(){if(this.a){var t=yt(this.a),e=this.a.$();this.D<e.length&&(ci(this),cu(this,t,e),this.b&&t!=4&&Xn(this))}};function oy(t,e){var n=t.D,r=e.indexOf(`
`,n);return r==-1?wo:(n=Number(e.substring(n,r)),isNaN(n)?su:(r+=1,r+n>e.length?wo:(e=e.substr(r,n),t.D=r+n,e)))}O.cancel=function(){this.A=!0,ln(this)};function Xn(t){t.T=We()+t.P,hu(t,t.P)}function hu(t,e){if(t.o!=null)throw Error("WatchDog timer not null");t.o=Kn(Se(t.Va,t),e)}function ci(t){t.o&&(B.clearTimeout(t.o),t.o=null)}O.Va=function(){this.o=null;var t=We();0<=t-this.T?(iy(this.c,this.l),this.H!=2&&(Hn(3),Oe(17)),ln(this),this.h=2,ui(this)):hu(this,this.T-t)};function ui(t){t.g.v==0||t.A||uu(t.g,t)}function ln(t){ci(t);var e=t.F;e&&typeof e.ja=="function"&&e.ja(),t.F=null,mo(t.R),Wc(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Eo(t,e){try{var n=t.g;if(n.v!=0&&(n.a==t||Io(n.b,t))){if(n.I=t.N,!t.C&&Io(n.b,t)&&n.v==3){try{var r=n.ka.a.parse(e)}catch(g){r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0)e:if(!n.j){if(n.a)if(n.a.u+3e3<t.u)di(n),hi(n);else break e;Ao(n),Oe(18)}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&n.o==0&&!n.m&&(n.m=Kn(Se(n.Sa,n),6e3));if(1>=fu(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else Lt(n,11)}else if((t.C||n.a==t)&&di(n),!Yr(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],n.v==2)if(i[0]=="c"){n.J=i[1],n.ga=i[2];var s=i[3];s!=null&&(n.ha=s,n.c.info("VER="+n.ha));var o=i[4];o!=null&&(n.pa=o,n.c.info("SVER="+n.pa));var a=i[5];if(a!=null&&typeof a=="number"&&0<a){var l=1.5*a;n.D=l,n.c.info("backChannelRequestTimeoutMs_="+l)}l=n;var c=t.a;if(c){var u=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var h=l.b;!h.a&&(Ne(u,"spdy")||Ne(u,"quic")||Ne(u,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ko(h,h.b),h.b=null))}if(l.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(l.na=f,re(l.B,l.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=We()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),l=n;var d=t;if(l.la=mu(l,l.C?l.ga:null,l.fa),d.C){du(l.b,d);var m=d,p=l.D;p&&m.setTimeout(p),m.o&&(ci(m),Xn(m)),l.a=d}else pu(l);0<n.g.length&&fi(n)}else i[0]!="stop"&&i[0]!="close"||Lt(n,7);else n.v==3&&(i[0]=="stop"||i[0]=="close"?i[0]=="stop"?Lt(n,7):So(n):i[0]!="noop"&&n.f&&n.f.sa(i),n.o=0)}Hn(4)}catch(g){}}function ay(t){if(t.K&&typeof t.K=="function")return t.K();if(typeof t=="string")return t.split("");if(Bs(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return t=e}function Co(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Bs(t)||typeof t=="string")kc(t,e,void 0);else{if(t.L&&typeof t.L=="function")var n=t.L();else if(t.K&&typeof t.K=="function")n=void 0;else if(Bs(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=ay(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function cn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof cn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}O=cn.prototype;O.K=function(){Ro(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t};O.L=function(){return Ro(this),this.a.concat()};function Ro(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Mt(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Mt(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}O.get=function(t,e){return Mt(this.b,t)?this.b[t]:e};O.set=function(t,e){Mt(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e};O.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function Mt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var gu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ly(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Pt(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Pt){this.a=e!==void 0?e:t.a,pi(this,t.f),this.j=t.j,mi(this,t.c),gi(this,t.h),this.g=t.g,e=t.b;var n=new Yn;n.c=e.c,e.a&&(n.a=new cn(e.a),n.b=e.b),vu(this,n),this.i=t.i}else t&&(n=String(t).match(gu))?(this.a=!!e,pi(this,n[1]||"",!0),this.j=Qn(n[2]||""),mi(this,n[3]||"",!0),gi(this,n[4]),this.g=Qn(n[5]||"",!0),vu(this,n[6]||"",!0),this.i=Qn(n[7]||"")):(this.a=!!e,this.b=new Yn(null,this.a))}Pt.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Jn(e,yu,!0),":");var n=this.c;return(n||e=="file")&&(t.push("//"),(e=this.j)&&t.push(Jn(e,yu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,n!=null&&t.push(":",String(n))),(n=this.g)&&(this.c&&n.charAt(0)!="/"&&t.push("/"),t.push(Jn(n,n.charAt(0)=="/"?uy:cy,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Jn(n,hy)),t.join("")};function nt(t){return new Pt(t)}function pi(t,e,n){t.f=n?Qn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function mi(t,e,n){t.c=n?Qn(e,!0):e}function gi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function vu(t,e,n){e instanceof Yn?(t.b=e,dy(t.b,t.a)):(n||(e=Jn(e,fy)),t.b=new Yn(e,t.a))}function re(t,e,n){t.b.set(e,n)}function li(t){return re(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^We()).toString(36)),t}function py(t){return t instanceof Pt?nt(t):new Pt(t,void 0)}function my(t,e,n,r){var i=new Pt(null,void 0);return t&&pi(i,t),e&&mi(i,e),n&&gi(i,n),r&&(i.g=r),i}function Qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Jn(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,gy),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function gy(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var yu=/[#\/\?@]/g,cy=/[#\?:]/g,uy=/[#\?]/g,fy=/[#\?@]/g,hy=/#/g;function Yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function _t(t){t.a||(t.a=new cn,t.b=0,t.c&&ly(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}O=Yn.prototype;O.add=function(t,e){_t(this),this.c=null,t=un(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this};function _u(t,e){_t(t),e=un(t,e),Mt(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Mt(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ro(t)))}function wu(t,e){return _t(t),e=un(t,e),Mt(t.a.b,e)}O.forEach=function(t,e){_t(this),this.a.forEach(function(n,r){kc(n,function(i){t.call(e,i,r,this)},this)},this)};O.L=function(){_t(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};O.K=function(t){_t(this);var e=[];if(typeof t=="string")wu(this,t)&&(e=Sc(e,this.a.get(un(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Sc(e,t[n])}return e};O.set=function(t,e){return _t(this),this.c=null,t=un(this,t),wu(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this};O.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e};function au(t,e,n){_u(t,e),0<n.length&&(t.c=null,t.a.set(un(t,e),Hs(n)),t.b+=n.length)}O.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};function un(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function dy(t,e){e&&!t.f&&(_t(t),t.c=null,t.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(_u(this,r),au(this,i,n))},t)),t.f=e}var vy=function(){function t(e,n){this.b=e,this.a=n}return t}();function bu(t){this.g=t||yy,B.PerformanceNavigationTiming?(t=B.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(B.ia&&B.ia.ya&&B.ia.ya()&&B.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var yy=10;function Eu(t){return t.b?!0:t.a?t.a.size>=t.f:!1}function fu(t){return t.b?1:t.a?t.a.size:0}function Io(t,e){return t.b?t.b==e:t.a?t.a.has(e):!1}function ko(t,e){t.a?t.a.add(e):t.b=e}function du(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}bu.prototype.cancel=function(){var t,e;if(this.c=Tu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&this.a.size!==0){try{for(var n=Tc(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}};function Tu(t){var e,n;if(t.b!=null)return t.c.concat(t.b.s);if(t.a!=null&&t.a.size!==0){var r=t.c;try{for(var i=Tc(t.a.values()),s=i.next();!s.done;s=i.next()){var o=s.value;r=r.concat(o.s)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Hs(t.c)}function No(){}No.prototype.stringify=function(t){return B.JSON.stringify(t,void 0)};No.prototype.parse=function(t){return B.JSON.parse(t,void 0)};function _y(){this.a=new No}function wy(t,e,n){var r=n||"";try{Co(t,function(i,s){var o=i;jn(i)&&(o=uo(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function by(t,e){var n=new vo;if(B.Image){var r=new Image;r.onload=Qr(vi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Qr(vi,n,r,"TestLoadImage: error",!1,e),r.onabort=Qr(vi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Qr(vi,n,r,"TestLoadImage: timeout",!1,e),B.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function vi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}var Ey=B.JSON.parse;function de(t){$e.call(this),this.headers=new cn,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ty,this.D=this.F=!1}Re(de,$e);var Ty="",Iy=/^https?$/i,ky=["POST","PUT"];O=de.prototype;O.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?tu(this.H):tu(ru),this.a.onreadystatechange=Se(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(s){Iu(this,s);return}t=n||"";var i=new cn(this.headers);r&&Co(r,function(s,o){i.set(o,s)}),r=Vv(i.L()),n=B.FormData&&t instanceof B.FormData,!(0<=Ic(ky,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.a.setRequestHeader(o,s)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ku(this),0<this.o&&((this.D=Sy(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Se(this.xa,this)):this.m=go(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(s){Iu(this,s)}};function Sy(t){return vt&&Mc(9)&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function xv(t){return t.toLowerCase()=="content-type"}O.xa=function(){typeof qs!="undefined"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ee(this,"timeout"),this.abort(8))};function Iu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Su(t),yi(t)}function Su(t){t.u||(t.u=!0,Ee(t,"complete"),Ee(t,"error"))}O.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ee(this,"complete"),Ee(this,"abort"),yi(this))};O.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),yi(this,!0)),de.X.G.call(this)};O.za=function(){this.j||(this.A||this.l||this.g?Au(this):this.Ua())};O.Ua=function(){Au(this)};function Au(t){if(t.b&&typeof qs!="undefined"&&(!t.s[1]||yt(t)!=4||t.W()!=2)){if(t.l&&yt(t)==4)go(t.za,0,t);else if(Ee(t,"readystatechange"),yt(t)==4){t.b=!1;try{{var e=t.W();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=e===0){var s=String(t.B).match(gu)[1]||null;if(!s&&B.self&&B.self.location){var o=B.self.location.protocol;s=o.substr(0,o.length-1)}i=!Iy.test(s?s.toLowerCase():"")}r=i}var a=r}if(a)Ee(t,"complete"),Ee(t,"success");else{t.h=6;try{var l=2<yt(t)?t.a.statusText:""}catch(c){l=""}t.f=l+" ["+t.W()+"]",Su(t)}}finally{yi(t)}}}}function yi(t,e){if(t.a){ku(t);var n=t.a,r=t.s[0]?Xr:null;t.a=null,t.s=null,e||Ee(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function ku(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(B.clearTimeout(t.m),t.m=null)}function yt(t){return t.a?t.a.readyState:0}O.W=function(){try{return 2<yt(this)?this.a.status:-1}catch(t){return-1}};O.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}};O.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Ey(e)}};O.ua=function(){return this.h};O.Qa=function(){return typeof this.f=="string"?this.f:String(this.f)};function Ay(t){var e="";return Xs(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Do(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ay(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):re(t,e,n))}function Zn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Cu(t){this.pa=0,this.g=[],this.c=new vo,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Zn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Zn("baseRetryDelayMs",5e3,t),this.Ra=Zn("retryDelaySeedMs",1e4,t),this.Ma=Zn("forwardChannelMaxRetries",2,t),this.ma=Zn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new bu(t&&t.concurrentRequestLimit),this.ka=new _y,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}O=Cu.prototype;O.ha=8;O.v=1;function So(t){if(Ru(t),t.v==3){var e=t.R++,n=nt(t.B);re(n,"SID",t.J),re(n,"RID",e),re(n,"TYPE","terminate"),er(t,n),e=new Wn(t,t.c,e,void 0),e.H=2,e.i=li(nt(n)),n=!1,B.navigator&&B.navigator.sendBeacon&&(n=B.navigator.sendBeacon(e.i.toString(),"")),!n&&B.Image&&(new Image().src=e.i,n=!0),n||(e.a=lu(e.g,null),e.a.ba(e.i)),e.u=We(),Xn(e)}Nu(t)}function hi(t){t.a&&(To(t),t.a.cancel(),t.a=null)}function Ru(t){hi(t),t.j&&(B.clearTimeout(t.j),t.j=null),di(t),t.b.cancel(),t.h&&(typeof t.h=="number"&&B.clearTimeout(t.h),t.h=null)}function Oo(t,e){t.g.push(new vy(t.Oa++,e)),t.v==3&&fi(t)}function fi(t){Eu(t.b)||t.h||(t.h=!0,zc(t.Ba,t),t.u=0)}function Cy(t,e){return fu(t.b)>=t.b.f-(t.h?1:0)?!1:t.h?(t.g=e.s.concat(t.g),!0):t.v==1||t.v==2||t.u>=(t.La?0:t.Ma)?!1:(t.h=Kn(Se(t.Ba,t,e),Du(t,t.u)),t.u++,!0)}O.Ba=function(t){if(this.h)if(this.h=null,this.v==1){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e=new Wn(this,this.c,t,void 0),n=this.l;this.O&&(n?(n=Cc(n),Nc(n,this.O)):n=this.O),this.i===null&&(e.B=n);var r;if(this.da)e:{for(var i=r=0;i<this.g.length;i++){t:{var s=this.g[i];if("__data__"in s.a&&(s=s.a.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.g.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Lu(this,e,r),i=nt(this.B),re(i,"RID",t),re(i,"CVER",22),this.A&&re(i,"X-HTTP-Session-Id",this.A),er(this,i),this.i&&n&&Do(i,this.i,n),ko(this.b,e),this.Ia&&re(i,"TYPE","init"),this.da?(re(i,"$req",r),re(i,"SID","null"),e.U=!0,bo(e,i,null)):bo(e,i,r),this.v=2}}else this.v==3&&(t?Ou(this,t):this.g.length==0||Eu(this.b)||Ou(this))};function Ou(t,e){var n;e?n=e.f:n=t.R++;var r=nt(t.B);re(r,"SID",t.J),re(r,"RID",n),re(r,"AID",t.P),er(t,r),t.i&&t.l&&Do(r,t.i,t.l),n=new Wn(t,t.c,n,t.u+1),t.i===null&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Lu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ko(t.b,n),bo(n,r,e)}function er(t,e){t.f&&Co({},function(n,r){re(e,r,n)})}function Lu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Se(t.f.Ja,t.f,t):null;e:for(var i=t.g,s=-1;;){var o=["count="+n];s==-1?0<n?(s=i[0].b,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,l=0;l<n;l++){var c=i[l].b,u=i[l].a;if(c-=s,0>c)s=Math.max(0,i[l].b-100),a=!1;else try{wy(u,o,"req"+c+"_")}catch(h){r&&r(u)}}if(a){r=o.join("&");break e}}return t=t.g.splice(0,n),e.s=t,r}function pu(t){t.a||t.j||(t.T=1,zc(t.Aa,t),t.o=0)}function Ao(t){return t.a||t.j||3<=t.o?!1:(t.T++,t.j=Kn(Se(t.Aa,t),Du(t,t.o)),t.o++,!0)}O.Aa=function(){if(this.j=null,Mu(this),this.U&&!(this.F||this.a==null||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Kn(Se(this.Ta,this),t)}};O.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Oe(10),hi(this),Mu(this))};function To(t){t.s!=null&&(B.clearTimeout(t.s),t.s=null)}function Mu(t){t.a=new Wn(t,t.c,"rpc",t.T),t.i===null&&(t.a.B=t.l),t.a.O=0;var e=nt(t.la);re(e,"RID","rpc"),re(e,"SID",t.J),re(e,"CI",t.H?"0":"1"),re(e,"AID",t.P),er(t,e),re(e,"TYPE","xmlhttp"),t.i&&t.l&&Do(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=li(nt(e)),n.j=null,n.I=!0,ou(n,t)}O.Sa=function(){this.m!=null&&(this.m=null,hi(this),Ao(this),Oe(19))};function di(t){t.m!=null&&(B.clearTimeout(t.m),t.m=null)}function uu(t,e){var n=null;if(t.a==e){di(t),To(t),t.a=null;var r=2}else if(Io(t.b,e))n=e.s,du(t.b,e),r=1;else return;if(t.I=e.N,t.v!=0){if(e.b)if(r==1){n=e.j?e.j.length:0,e=We()-e.u;var i=t.u;r=oi(),Ee(r,new Jc(r,n,e,i)),fi(t)}else pu(t);else if(i=e.h,i==3||i==0&&0<t.I||!(r==1&&Cy(t,e)||r==2&&Ao(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Lt(t,5);break;case 4:Lt(t,10);break;case 3:Lt(t,6);break;default:Lt(t,2)}}}function Du(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Lt(t,e){if(t.c.info("Error code "+e),e==2){var n=null;t.f&&(n=null);var r=Se(t.Ya,t);n||(n=new Pt("//www.google.com/images/cleardot.gif"),B.location&&B.location.protocol=="http"||pi(n,"https"),li(n)),by(n.toString(),r)}else Oe(2);t.v=0,t.f&&t.f.ra(e),Nu(t),Ru(t)}O.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Oe(2)):(this.c.info("Failed to ping google.com"),Oe(1))};function Nu(t){t.v=0,t.I=-1,t.f&&((Tu(t.b).length!=0||t.g.length!=0)&&(t.b.c.length=0,Hs(t.g),t.g.length=0),t.f.qa())}function mu(t,e,n){var r=py(n);if(r.c!="")e&&mi(r,e+"."+r.c),gi(r,r.h);else{var i=B.location;r=my(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Xs(t.V,function(s,o){re(r,o,s)}),e=t.A,n=t.na,e&&n&&re(r,e,n),re(r,"VER",t.ha),er(t,r),r}function lu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new de(t.Na),e.F=t.C,e}function Pu(){}O=Pu.prototype;O.ta=function(){};O.sa=function(){};O.ra=function(){};O.qa=function(){};O.Ja=function(){};function _i(){if(vt&&!(10<=Number(Pc)))throw Error("Environmental error: no available transport.")}_i.prototype.a=function(t,e){return new je(t,e)};function je(t,e){$e.call(this),this.a=new Cu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Yr(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yr(e)&&(this.a.A=e,t=this.b,t!==null&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new hn(this)}Re(je,$e);je.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Oe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=mu(t,null,t.fa),fi(t)};je.prototype.close=function(){So(this.a)};je.prototype.h=function(t){if(typeof t=="string"){var e={};e.__data__=t,Oo(this.a,e)}else this.l?(e={},e.__data__=uo(t),Oo(this.a,e)):Oo(this.a,t)};je.prototype.G=function(){this.a.f=null,delete this.f,So(this.a),delete this.a,je.X.G.call(this)};function Uu(t){yo.call(this);var e=t.__sm__;if(e){e:{for(var n in e){t=n;break e}t=void 0}(this.c=t)?(t=this.c,this.data=e!==null&&t in e?e[t]:void 0):this.data=e}else this.data=t}Re(Uu,yo);function xu(){_o.call(this),this.status=1}Re(xu,_o);function hn(t){this.a=t}Re(hn,Pu);hn.prototype.ta=function(){Ee(this.a,"a")};hn.prototype.sa=function(t){Ee(this.a,new Uu(t))};hn.prototype.ra=function(t){Ee(this.a,new xu(t))};hn.prototype.qa=function(){Ee(this.a,"b")};_i.prototype.createWebChannel=_i.prototype.a;je.prototype.send=je.prototype.h;je.prototype.open=je.prototype.g;je.prototype.close=je.prototype.close;ai.NO_ERROR=0;ai.TIMEOUT=8;ai.HTTP_ERROR=6;Zc.COMPLETE="complete";nu.EventType=Gn;Gn.OPEN="a";Gn.CLOSE="b";Gn.ERROR="c";Gn.MESSAGE="d";$e.prototype.listen=$e.prototype.va;de.prototype.listenOnce=de.prototype.wa;de.prototype.getLastError=de.prototype.Qa;de.prototype.getLastErrorCode=de.prototype.ua;de.prototype.getStatus=de.prototype.W;de.prototype.getResponseJson=de.prototype.Pa;de.prototype.getResponseText=de.prototype.$;de.prototype.send=de.prototype.ba;var Ry=function(){return new _i},Ny=function(){return oi()},Lo=ai,Dy=Zc,Oy=Ot,Vu={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},wi=nu,Ly=de;var fn="8.6.1";var bi=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.t(r),this.i=r=>n.writeSequenceNumber(r))}t(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.i&&this.i(e),e}};bi.o=-1;var I={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ut=new Mn("@firebase/firestore");function Fu(){return Ut.logLevel}function L(t,...e){if(Ut.logLevel<=Q.DEBUG){let n=e.map(Mo);Ut.debug(`Firestore (${fn}): ${t}`,...n)}}function wt(t,...e){if(Ut.logLevel<=Q.ERROR){let n=e.map(Mo);Ut.error(`Firestore (${fn}): ${t}`,...n)}}function $u(t,...e){if(Ut.logLevel<=Q.WARN){let n=e.map(Mo);Ut.warn(`Firestore (${fn}): ${t}`,...n)}}function Mo(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}function H(t="Unexpected state"){let e=`FIRESTORE (${fn}) INTERNAL ASSERTION FAILED: `+t;throw wt(e),new Error(e)}function ee(t,e){t||H()}function K(t,e){return t}function My(t){let e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Po=class{static u(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=My(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Z(t,e){return t<e?-1:t>e?1:0}function dn(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Me=class{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Me(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new Me(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};function ju(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ei(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qu(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var pn=class{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(),r===void 0?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pn.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof pn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},te=class extends pn{construct(e,n,r){return new te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(I.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new te(n)}static emptyPath(){return new te([])}},Py=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ce=class extends pn{construct(e,n,r){return new Ce(e,n,r)}static isValidIdentifier(e){return Py.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ce.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ce(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new V(I.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(I.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new V(I.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(I.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ce(n)}static emptyPath(){return new Ce([])}};var Ti=class{constructor(e){this.fields=e,e.sort(Ce.comparator)}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dn(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Te=class{constructor(e){this.binaryString=e}static fromBase64String(e){let n=atob(e);return new Te(n)}static fromUint8Array(e){let n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Te(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Te.EMPTY_BYTE_STRING=new Te("");var Uy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bt(t){if(ee(!!t),typeof t=="string"){let e=0,n=Uy.exec(t);if(ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ce(t.seconds),nanos:ce(t.nanos)}}function ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mn(t){return typeof t=="string"?Te.fromBase64String(t):Te.fromUint8Array(t)}function Bu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function zu(t){let e=t.mapValue.fields.__previous_value__;return Bu(e)?zu(e):e}function tr(t){let e=bt(t.mapValue.fields.__local_write_time__.timestampValue);return new Me(e.seconds,e.nanos)}function gn(t){return t==null}function Ii(t){return t===0&&1/t==-1/0}function xy(t){return typeof t=="number"&&Number.isInteger(t)&&!Ii(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var F=class{constructor(e){this.path=e}static fromPath(e){return new F(te.fromString(e))}static fromName(e){return new F(te.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new te(e.slice()))}};function Et(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bu(t)?4:10:H()}function Xe(t,e){let n=Et(t);if(n!==Et(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tr(t).isEqual(tr(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;let s=bt(r.timestampValue),o=bt(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return mn(r.bytesValue).isEqual(mn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return ce(r.geoPointValue.latitude)===ce(i.geoPointValue.latitude)&&ce(r.geoPointValue.longitude)===ce(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ce(r.integerValue)===ce(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){let s=ce(r.doubleValue),o=ce(i.doubleValue);return s===o?Ii(s)===Ii(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return dn(t.arrayValue.values||[],e.arrayValue.values||[],Xe);case 10:return function(r,i){let s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(ju(s)!==ju(o))return!1;for(let a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Xe(s[a],o[a])))return!1;return!0}(t,e);default:return H()}}function nr(t,e){return(t.values||[]).find(n=>Xe(n,e))!==void 0}function vn(t,e){let n=Et(t),r=Et(e);if(n!==r)return Z(n,r);switch(n){case 0:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(i,s){let o=ce(i.integerValue||i.doubleValue),a=ce(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Hu(t.timestampValue,e.timestampValue);case 4:return Hu(tr(t),tr(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(i,s){let o=mn(i),a=mn(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){let o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){let c=Z(o[l],a[l]);if(c!==0)return c}return Z(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){let o=Z(ce(i.latitude),ce(s.latitude));return o!==0?o:Z(ce(i.longitude),ce(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){let o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){let c=vn(o[l],a[l]);if(c)return c}return Z(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){let o=i.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){let h=Z(a[u],c[u]);if(h!==0)return h;let f=vn(o[a[u]],l[c[u]]);if(f!==0)return f}return Z(a.length,c.length)}(t.mapValue,e.mapValue);default:throw H()}}function Hu(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);let n=bt(t),r=bt(e),i=Z(n.seconds,r.seconds);return i!==0?i:Z(n.nanos,r.nanos)}function xo(t){return Uo(t)}function Uo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){let i=bt(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?mn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,F.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(let o of r.values||[])s?s=!1:i+=",",i+=Uo(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){let i=Object.keys(r.fields||{}).sort(),s="{",o=!0;for(let a of i)o?o=!1:s+=",",s+=`${a}:${Uo(r.fields[a])}`;return s+"}"}(t.mapValue):H();var e,n}function Vo(t){return!!t&&"integerValue"in t}function Fo(t){return!!t&&"arrayValue"in t}function Ku(t){return!!t&&"nullValue"in t}function Gu(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $o(t){return!!t&&"mapValue"in t}var Pe=class{constructor(e){this.overlayMap=new Map,this.partialValue=e}static empty(){return new Pe({mapValue:{}})}field(e){return Pe.extractNestedValue(this.buildProto(),e)}toProto(){return this.field(Ce.emptyPath())}set(e,n){this.setOverlay(e,n)}setAll(e){e.forEach((n,r)=>{n?this.set(r,n):this.delete(r)})}delete(e){this.setOverlay(e,null)}isEqual(e){return Xe(this.buildProto(),e.buildProto())}setOverlay(e,n){let r=this.overlayMap;for(let i=0;i<e.length-1;++i){let s=e.get(i),o=r.get(s);o instanceof Map?r=o:o&&Et(o)===10?(o=new Map(Object.entries(o.mapValue.fields||{})),r.set(s,o),r=o):(o=new Map,r.set(s,o),r=o)}r.set(e.lastSegment(),n)}applyOverlay(e,n){let r=!1,i=Pe.extractNestedValue(this.partialValue,e),s=$o(i)?Object.assign({},i.mapValue.fields):{};return n.forEach((o,a)=>{if(o instanceof Map){let l=this.applyOverlay(e.child(a),o);l!=null&&(s[a]=l,r=!0)}else o!==null?(s[a]=o,r=!0):s.hasOwnProperty(a)&&(delete s[a],r=!0)}),r?{mapValue:{fields:s}}:null}buildProto(){let e=this.applyOverlay(Ce.emptyPath(),this.overlayMap);return e!=null&&(this.partialValue=e,this.overlayMap.clear()),this.partialValue}static extractNestedValue(e,n){if(n.isEmpty())return e;{let r=e;for(let i=0;i<n.length-1;++i)if(!r.mapValue.fields||(r=r.mapValue.fields[n.get(i)],!$o(r)))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}clone(){return new Pe(this.buildProto())}};function Wu(t){let e=[];return Ei(t.fields||{},(n,r)=>{let i=new Ce([n]);if($o(r)){let s=Wu(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ti(e)}var Ie=class{constructor(e,n,r,i,s){this.key=e,this.documentType=n,this.version=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new Ie(e,0,Y.min(),Pe.empty(),0)}static newFoundDocument(e,n,r){return new Ie(e,1,n,r,0)}static newNoDocument(e,n){return new Ie(e,2,n,Pe.empty(),0)}static newUnknownDocument(e,n){return new Ie(e,3,n,Pe.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pe.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ie&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Ie(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.toProto())}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Xu=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.h=null}};function Qu(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Xu(t,e,n,r,i,s,o)}function jo(t){let e=K(t);if(e.h===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),gn(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ki(e.startAt)),e.endAt&&(n+="|ub:",n+=ki(e.endAt)),e.h=n}return e.h}function Fy(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${xo(r.value)}`;var r}).join(", ")}]`),gn(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+ki(t.startAt)),t.endAt&&(e+=", endAt: "+ki(t.endAt)),`Target(${e})`}function qo(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!$y(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Xe(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yu(t.startAt,e.startAt)&&Yu(t.endAt,e.endAt)}function Bo(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Le=class extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.l(e,n,r):new Ju(e,n,r):n==="array-contains"?new th(e,r):n==="in"?new nh(e,r):n==="not-in"?new rh(e,r):n==="array-contains-any"?new ih(e,r):new Le(e,n,r)}static l(e,n,r){return n==="in"?new Zu(e,r):new eh(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.m(vn(n,this.value)):n!==null&&Et(this.value)===Et(n)&&this.m(vn(n,this.value))}m(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}g(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}};function Vy(t){return t.field.canonicalString()+t.op.toString()+xo(t.value)}var Ju=class extends Le{constructor(e,n,r){super(e,n,r),this.key=F.fromName(r.referenceValue)}matches(e){let n=F.comparator(e.key,this.key);return this.m(n)}},Zu=class extends Le{constructor(e,n){super(e,"in",n),this.keys=sh("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},eh=class extends Le{constructor(e,n){super(e,"not-in",n),this.keys=sh("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function sh(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>F.fromName(r.referenceValue))}var th=class extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Fo(n)&&nr(n.arrayValue,this.value)}},nh=class extends Le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&nr(this.value.arrayValue,n)}},rh=class extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(nr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!nr(this.value.arrayValue,n)}},ih=class extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Fo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nr(this.value.arrayValue,r))}},Si=class{constructor(e,n){this.position=e,this.before=n}};function ki(t){return`${t.before?"b":"a"}:${t.position.map(e=>xo(e)).join(",")}`}var yn=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function $y(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function oh(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=F.comparator(F.fromName(o.referenceValue),n.key):r=vn(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function Yu(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xe(t.position[n],e.position[n]))return!1;return!0}var rr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.p=null,this.T=null,this.startAt,this.endAt}};function jy(t,e,n,r,i,s,o,a){return new rr(t,e,n,r,i,s,o,a)}function zo(t){return new rr(t)}function Ai(t){return!gn(t.limit)&&t.limitType==="F"}function Ho(t){return!gn(t.limit)&&t.limitType==="L"}function qy(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function By(t){for(let e of t.filters)if(e.g())return e.field;return null}function zy(t){return t.collectionGroup!==null}function ir(t){let e=K(t);if(e.p===null){e.p=[];let n=By(e),r=qy(e);if(n!==null&&r===null)n.isKeyField()||e.p.push(new yn(n)),e.p.push(new yn(Ce.keyField(),"asc"));else{let i=!1;for(let s of e.explicitOrderBy)e.p.push(s),s.field.isKeyField()&&(i=!0);if(!i){let s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new yn(Ce.keyField(),s))}}}return e.p}function xt(t){let e=K(t);if(!e.T)if(e.limitType==="F")e.T=Qu(e.path,e.collectionGroup,ir(e),e.filters,e.limit,e.startAt,e.endAt);else{let n=[];for(let s of ir(e)){let o=s.dir==="desc"?"asc":"desc";n.push(new yn(s.field,o))}let r=e.endAt?new Si(e.endAt.position,!e.endAt.before):null,i=e.startAt?new Si(e.startAt.position,!e.startAt.before):null;e.T=Qu(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.T}function Hy(t,e,n){return new rr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ci(t,e){return qo(xt(t),xt(e))&&t.limitType===e.limitType}function ah(t){return`${jo(xt(t))}|lt:${t.limitType}`}function Ko(t){return`Query(target=${Fy(xt(t))}; limitType=${t.limitType})`}function Ri(t,e){return e.isFoundDocument()&&function(n,r){let i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):F.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(let i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(let i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!oh(n.startAt,ir(n),r)||n.endAt&&oh(n.endAt,ir(n),r))}(t,e)}function lh(t){return(e,n)=>{let r=!1;for(let i of ir(t)){let s=Ky(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Ky(t,e,n){let r=t.field.isKeyField()?F.comparator(e.key,n.key):function(i,s,o){let a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?vn(a,l):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}function ch(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ii(e)?"-0":e}}function uh(t){return{integerValue:""+t}}function Gy(t,e){return xy(e)?uh(e):ch(t,e)}var sr=class{constructor(){this._=void 0}};function Wy(t,e,n){return t instanceof or?function(r,i){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof _n?fh(t,e):t instanceof wn?dh(t,e):function(r,i){let s=hh(r,i),o=ph(s)+ph(r.A);return Vo(s)&&Vo(r.A)?uh(o):ch(r.R,o)}(t,e)}function Xy(t,e,n){return t instanceof _n?fh(t,e):t instanceof wn?dh(t,e):n}function hh(t,e){return t instanceof ar?Vo(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}var or=class extends sr{},_n=class extends sr{constructor(e){super(),this.elements=e}};function fh(t,e){let n=mh(e);for(let r of t.elements)n.some(i=>Xe(i,r))||n.push(r);return{arrayValue:{values:n}}}var wn=class extends sr{constructor(e){super(),this.elements=e}};function dh(t,e){let n=mh(e);for(let r of t.elements)n=n.filter(i=>!Xe(i,r));return{arrayValue:{values:n}}}var ar=class extends sr{constructor(e,n){super(),this.R=e,this.A=n}};function ph(t){return ce(t.integerValue||t.doubleValue)}function mh(t){return Fo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Qy(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof _n&&r instanceof _n||n instanceof wn&&r instanceof wn?dn(n.elements,r.elements,Xe):n instanceof ar&&r instanceof ar?Xe(n.A,r.A):n instanceof or&&r instanceof or}(t.transform,e.transform)}var gh=class{constructor(e,n){this.version=e,this.transformResults=n}},Vt=class{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vt}static exists(e){return new Vt(void 0,e)}static updateTime(e){return new Vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ni(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var lr=class{};function Yy(t,e,n){t instanceof cr?function(r,i,s){let o=r.value.clone(),a=yh(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ft?function(r,i,s){if(!Ni(r.precondition,i))return void i.convertToUnknownDocument(s.version);let o=yh(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(vh(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Go(t,e,n){t instanceof cr?function(r,i,s){if(!Ni(r.precondition,i))return;let o=r.value.clone(),a=wh(r.fieldTransforms,s,i);o.setAll(a),i.convertToFoundDocument(_h(i),o).setHasLocalMutations()}(t,e,n):t instanceof Ft?function(r,i,s){if(!Ni(r.precondition,i))return;let o=wh(r.fieldTransforms,s,i),a=i.data;a.setAll(vh(r)),a.setAll(o),i.convertToFoundDocument(_h(i),a).setHasLocalMutations()}(t,e,n):function(r,i){Ni(r.precondition,i)&&i.convertToNoDocument(Y.min())}(t,e)}function Jy(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=hh(r.transform,i||null);s!=null&&(n==null&&(n=Pe.empty()),n.set(r.field,s))}return n||null}function bh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&dn(n,r,(i,s)=>Qy(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function _h(t){return t.isFoundDocument()?t.version:Y.min()}var cr=class extends lr{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}},Ft=class extends lr{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}};function vh(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function yh(t,e,n){let r=new Map;ee(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Xy(o,a,n[i]))}return r}function wh(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Wy(s,o,e))}return r}var Eh=class extends lr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}},Th=class extends lr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}};var Ih=class{constructor(e){this.count=e}};var ue,X;function Zy(t){switch(t){case I.OK:return H();case I.CANCELLED:case I.UNKNOWN:case I.DEADLINE_EXCEEDED:case I.RESOURCE_EXHAUSTED:case I.INTERNAL:case I.UNAVAILABLE:case I.UNAUTHENTICATED:return!1;case I.INVALID_ARGUMENT:case I.NOT_FOUND:case I.ALREADY_EXISTS:case I.PERMISSION_DENIED:case I.FAILED_PRECONDITION:case I.ABORTED:case I.OUT_OF_RANGE:case I.UNIMPLEMENTED:case I.DATA_LOSS:return!0;default:return H()}}function kh(t){if(t===void 0)return wt("GRPC error has no .code"),I.UNKNOWN;switch(t){case ue.OK:return I.OK;case ue.CANCELLED:return I.CANCELLED;case ue.UNKNOWN:return I.UNKNOWN;case ue.DEADLINE_EXCEEDED:return I.DEADLINE_EXCEEDED;case ue.RESOURCE_EXHAUSTED:return I.RESOURCE_EXHAUSTED;case ue.INTERNAL:return I.INTERNAL;case ue.UNAVAILABLE:return I.UNAVAILABLE;case ue.UNAUTHENTICATED:return I.UNAUTHENTICATED;case ue.INVALID_ARGUMENT:return I.INVALID_ARGUMENT;case ue.NOT_FOUND:return I.NOT_FOUND;case ue.ALREADY_EXISTS:return I.ALREADY_EXISTS;case ue.PERMISSION_DENIED:return I.PERMISSION_DENIED;case ue.FAILED_PRECONDITION:return I.FAILED_PRECONDITION;case ue.ABORTED:return I.ABORTED;case ue.OUT_OF_RANGE:return I.OUT_OF_RANGE;case ue.UNIMPLEMENTED:return I.UNIMPLEMENTED;case ue.DATA_LOSS:return I.DATA_LOSS;default:return H()}}(X=ue||(ue={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var ke=class{constructor(e,n){this.comparator=e,this.root=n||ye.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ye.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ye.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ur(this.root,e,this.comparator,!0)}},ur=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ye=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ye.RED,this.left=i??ye.EMPTY,this.right=s??ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ye(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ye.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};ye.EMPTY=null,ye.RED=!0,ye.BLACK=!1;ye.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(t,e,n,r,i){return this}insert(t,e,n){return new ye(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _e=class{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Wo(this.data.getIterator())}getIteratorFrom(e){return new Wo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _e)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new _e(this.comparator);return n.data=e,n}},Wo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var e_=new ke(F.comparator);function $t(){return e_}var t_=new ke(F.comparator);function Xo(){return t_}var n_=new ke(F.comparator);function r_(){return n_}var i_=new _e(F.comparator);function ne(...t){let e=i_;for(let n of t)e=e.add(n);return e}var s_=new _e(Z);function Sh(){return s_}var hr=class{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){let r=new Map;return r.set(e,bn.createSynthesizedTargetChangeForCurrentChange(e,n)),new hr(Y.min(),r,Sh(),$t(),ne())}},bn=class{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new bn(Te.EMPTY_BYTE_STRING,n,ne(),ne(),ne())}};var fr=class{constructor(e,n,r,i){this.P=e,this.removedTargetIds=n,this.key=r,this.v=i}},Qo=class{constructor(e,n){this.targetId=e,this.V=n}},Yo=class{constructor(e,n,r=Te.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Jo=class{constructor(){this.S=0,this.D=Ah(),this.C=Te.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}get current(){return this.N}get resumeToken(){return this.C}get $(){return this.S!==0}get O(){return this.k}M(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)}F(){let e=ne(),n=ne(),r=ne();return this.D.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H()}}),new bn(this.C,this.N,e,n,r)}L(){this.k=!1,this.D=Ah()}B(e,n){this.k=!0,this.D=this.D.insert(e,n)}U(e){this.k=!0,this.D=this.D.remove(e)}q(){this.S+=1}K(){this.S-=1}j(){this.k=!0,this.N=!0}},Ch=class{constructor(e){this.W=e,this.G=new Map,this.H=$t(),this.J=Rh(),this.Y=new _e(Z)}X(e){for(let n of e.P)e.v&&e.v.isFoundDocument()?this.Z(n,e.v):this.tt(n,e.key,e.v);for(let n of e.removedTargetIds)this.tt(n,e.key,e.v)}et(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.st(n)&&r.M(e.resumeToken);break;case 1:r.K(),r.$||r.L(),r.M(e.resumeToken);break;case 2:r.K(),r.$||this.removeTarget(n);break;case 3:this.st(n)&&(r.j(),r.M(e.resumeToken));break;case 4:this.st(n)&&(this.it(n),r.M(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.G.forEach((r,i)=>{this.st(i)&&n(i)})}rt(e){let n=e.targetId,r=e.V.count,i=this.ot(n);if(i){let s=i.target;if(Bo(s))if(r===0){let o=new F(s.path);this.tt(n,o,Ie.newNoDocument(o,Y.min()))}else ee(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}}at(e){let n=new Map;this.G.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&Bo(a.target)){let l=new F(a.target.path);this.H.get(l)!==null||this.ut(o,l)||this.tt(o,l,Ie.newNoDocument(l,e))}s.O&&(n.set(o,s.F()),s.L())}});let r=ne();this.J.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let c=this.ot(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))});let i=new hr(e,n,this.Y,this.H,r);return this.H=$t(),this.J=Rh(),this.Y=new _e(Z),i}Z(e,n){if(!this.st(e))return;let r=this.ut(e,n.key)?2:0;this.nt(e).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(e))}tt(e,n,r){if(!this.st(e))return;let i=this.nt(e);this.ut(e,n)?i.B(n,1):i.U(n),this.J=this.J.insert(n,this.ht(n).delete(e)),r&&(this.H=this.H.insert(n,r))}removeTarget(e){this.G.delete(e)}ct(e){let n=this.nt(e).F();return this.W.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}q(e){this.nt(e).q()}nt(e){let n=this.G.get(e);return n||(n=new Jo,this.G.set(e,n)),n}ht(e){let n=this.J.get(e);return n||(n=new _e(Z),this.J=this.J.insert(e,n)),n}st(e){let n=this.ot(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.G.get(e);return n&&n.$?null:this.W.lt(e)}it(e){this.G.set(e,new Jo),this.W.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}ut(e,n){return this.W.getRemoteKeysForTarget(e).has(n)}};function Rh(){return new ke(F.comparator)}function Ah(){return new ke(F.comparator)}var o_=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),a_=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Nh=class{constructor(e,n){this.databaseId=e,this.I=n}};function Di(t,e){return t.I?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dh(t,e){return t.I?e.toBase64():e.toUint8Array()}function l_(t,e){return Di(t,e.toTimestamp())}function rt(t){return ee(!!t),Y.fromTimestamp(function(e){let n=bt(e);return new Me(n.seconds,n.nanos)}(t))}function Zo(t,e){return function(n){return new te(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Lh(t){let e=te.fromString(t);return ee(Oh(e)),e}function ea(t,e){return Zo(t.databaseId,e.path)}function ta(t,e){let n=Lh(e);if(n.get(1)!==t.databaseId.projectId)throw new V(I.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(I.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(Mh(n))}function na(t,e){return Zo(t.databaseId,e)}function c_(t){let e=Lh(t);return e.length===4?te.emptyPath():Mh(e)}function ra(t){return new te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mh(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ph(t,e,n){return{name:ea(t,e),fields:n.toProto().mapValue.fields}}function u_(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,c){return l.I?(ee(c===void 0||typeof c=="string"),Te.fromBase64String(c||"")):(ee(c===void 0||c instanceof Uint8Array),Te.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let c=l.code===void 0?I.UNKNOWN:kh(l.code);return new V(c,l.message||"")}(o);n=new Yo(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ta(t,r.document.name),s=rt(r.document.updateTime),o=new Pe({mapValue:{fields:r.document.fields}}),a=Ie.newFoundDocument(i,s,o),l=r.targetIds||[],c=r.removedTargetIds||[];n=new fr(l,c,a.key,a)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ta(t,r.document),s=r.readTime?rt(r.readTime):Y.min(),o=Ie.newNoDocument(i,s),a=r.removedTargetIds||[];n=new fr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ta(t,r.document),s=r.removedTargetIds||[];n=new fr([],s,i,null)}else{if(!("filter"in e))return H();{e.filter;let r=e.filter;r.targetId;let i=r.count||0,s=new Ih(i),o=r.targetId;n=new Qo(o,s)}}return n}function f_(t,e){let n;if(e instanceof cr)n={update:Ph(t,e.key,e.value)};else if(e instanceof Eh)n={delete:ea(t,e.key)};else if(e instanceof Ft)n={update:Ph(t,e.key,e.data),updateMask:h_(e.fieldMask)};else{if(!(e instanceof Th))return H();n={verify:ea(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){let o=s.transform;if(o instanceof or)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof _n)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof wn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ar)return{fieldPath:s.field.canonicalString(),increment:o.A};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:l_(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:H()}(t,e.precondition)),n}function d_(t,e){return t&&t.length>0?(ee(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?rt(r.updateTime):rt(i);return s.isEqual(Y.min())&&(s=rt(i)),new gh(s,r.transformResults||[])}(n,e))):[]}function p_(t,e){return{documents:[na(t,e.path)]}}function v_(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=na(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=na(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(a){if(a.length===0)return;let l=a.map(c=>function(u){if(u.op==="=="){if(Gu(u.value))return{unaryFilter:{field:En(u.field),op:"IS_NAN"}};if(Ku(u.value))return{unaryFilter:{field:En(u.field),op:"IS_NULL"}}}else if(u.op==="!="){if(Gu(u.value))return{unaryFilter:{field:En(u.field),op:"IS_NOT_NAN"}};if(Ku(u.value))return{unaryFilter:{field:En(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:En(u.field),op:g_(u.op),value:u.value}}}(c));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);i&&(n.structuredQuery.where=i);let s=function(a){if(a.length!==0)return a.map(l=>function(c){return{field:En(c.field),direction:m_(c.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let o=function(a,l){return a.I||gn(l)?l:{value:l}}(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Uh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Uh(e.endAt)),n}function y_(t){let e=c_(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ee(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=xh(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new yn(Tn(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,gn(h)?null:h}(n.limit));let l=null;n.startAt&&(l=Vh(n.startAt));let c=null;return n.endAt&&(c=Vh(n.endAt)),jy(e,i,o,s,a,"F",l,c)}function __(t,e){let n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return H()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function xh(t){return t?t.unaryFilter!==void 0?[b_(t)]:t.fieldFilter!==void 0?[w_(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>xh(e)).reduce((e,n)=>e.concat(n)):H():[]}function Uh(t){return{before:t.before,values:t.position}}function Vh(t){let e=!!t.before,n=t.values||[];return new Si(n,e)}function m_(t){return o_[t]}function g_(t){return a_[t]}function En(t){return{fieldPath:t.canonicalString()}}function Tn(t){return Ce.fromServerFormat(t.fieldPath)}function w_(t){return Le.create(Tn(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}function b_(t){switch(t.unaryFilter.op){case"IS_NAN":let e=Tn(t.unaryFilter.field);return Le.create(e,"==",{doubleValue:NaN});case"IS_NULL":let n=Tn(t.unaryFilter.field);return Le.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=Tn(t.unaryFilter.field);return Le.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=Tn(t.unaryFilter.field);return Le.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return H()}}function h_(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Oh(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var E_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};var In=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var C=class{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new C((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof C?n:C.resolve(n)}catch(n){return C.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):C.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):C.reject(n)}static resolve(e){return new C((n,r)=>{n(e)})}static reject(e){return new C((n,r)=>{r(e)})}static waitFor(e){return new C((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=C.resolve(!1);for(let r of e)n=n.next(i=>i?C.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}};function dr(t){return t.name==="IndexedDbTransactionError"}var $h=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Yy(s,e,r[i])}}applyToLocalView(e){for(let n of this.baseMutations)n.key.isEqual(e.key)&&Go(n,e,this.localWriteTime);for(let n of this.mutations)n.key.isEqual(e.key)&&Go(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{let r=e.get(n.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Y.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&dn(this.mutations,e.mutations,(n,r)=>bh(n,r))&&dn(this.baseMutations,e.baseMutations,(n,r)=>bh(n,r))}},Oi=class{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length);let i=r_(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Oi(e,n,r,i)}};var Tt=class{constructor(e,n,r,i,s=Y.min(),o=Y.min(),a=Te.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Tt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Tt(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Tt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}};var jh=class{constructor(e){this.Lt=e}};function T_(t){let e=y_({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hy(e,e.limit,"L"):e}var qh=class{constructor(){this.Bt=new Bh}addToCollectionParentIndex(e,n){return this.Bt.add(n),C.resolve()}getCollectionParents(e,n){return C.resolve(this.Bt.getEntries(n))}},Bh=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new _e(te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _e(te.comparator)).toArray()}};var jt=class{constructor(e){this.Ht=e}next(){return this.Ht+=2,this.Ht}static Jt(){return new jt(0)}static Yt(){return new jt(-1)}};async function pr(t){if(t.code!==I.FAILED_PRECONDITION||t.message!==E_)throw t;L("LocalStore","Unexpectedly lost primary lease")}var kn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n])}else this.inner[r]=[[e,n]]}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1}forEach(e){Ei(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return qu(this.inner)}};var zh=class{constructor(){this.changes=new kn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){let n=this.changes.get(e);return n?n.readTime:Y.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:Ie.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?C.resolve(r.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ia=class{constructor(e,n,r){this.qe=e,this._n=n,this.qt=r}mn(e,n){return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.gn(e,n,r))}gn(e,n,r){return this.qe.getEntry(e,n).next(i=>{for(let s of r)s.applyToLocalView(i);return i})}yn(e,n){e.forEach((r,i)=>{for(let s of n)s.applyToLocalView(i)})}pn(e,n){return this.qe.getEntries(e,n).next(r=>this.En(e,r).next(()=>r))}En(e,n){return this._n.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.yn(n,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return F.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(e,n.path):zy(n)?this.In(e,n,r):this.An(e,n,r)}Tn(e,n){return this.mn(e,new F(n)).next(r=>{let i=Xo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}In(e,n,r){let i=n.collectionGroup,s=Xo();return this.qt.getCollectionParents(e,i).next(o=>C.forEach(o,a=>{let l=function(c,u){return new rr(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(i));return this.An(e,l,r).next(c=>{c.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}An(e,n,r){let i,s;return this.qe.getDocumentsMatchingQuery(e,n,r).next(o=>(i=o,this._n.getAllMutationBatchesAffectingQuery(e,n))).next(o=>(s=o,this.Rn(e,s,i).next(a=>{i=a;for(let l of s)for(let c of l.mutations){let u=c.key,h=i.get(u);h==null&&(h=Ie.newInvalidDocument(u),i=i.insert(u,h)),Go(c,h,l.localWriteTime),h.isFoundDocument()||(i=i.remove(u))}}))).next(()=>(i.forEach((o,a)=>{Ri(n,a)||(i=i.remove(o))}),i))}Rn(e,n,r){let i=ne();for(let o of n)for(let a of o.mutations)a instanceof Ft&&r.get(a.key)===null&&(i=i.add(a.key));let s=r;return this.qe.getEntries(e,i).next(o=>(o.forEach((a,l)=>{l.isFoundDocument()&&(s=s.insert(a,l))}),s))}};var Li=class{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pn=r,this.bn=i}static vn(e,n){let r=ne(),i=ne();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Li(e,n.fromCache,r,i)}};var Hh=class{Vn(e){this.Sn=e}getDocumentsMatchingQuery(e,n,r,i){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(Y.min())?this.Dn(e,n):this.Sn.pn(e,i).next(s=>{let o=this.Cn(n,s);return(Ai(n)||Ho(n))&&this.Nn(n.limitType,o,i,r)?this.Dn(e,n):(Fu()<=Q.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ko(n)),this.Sn.getDocumentsMatchingQuery(e,n,r).next(a=>(o.forEach(l=>{a=a.insert(l.key,l)}),a)))})}Cn(e,n){let r=new _e(lh(e));return n.forEach((i,s)=>{Ri(e,s)&&(r=r.add(s))}),r}Nn(e,n,r,i){if(r.size!==n.size)return!0;let s=e==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Dn(e,n){return Fu()<=Q.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Ko(n)),this.Sn.getDocumentsMatchingQuery(e,n,Y.min())}};var Kh=class{constructor(e,n,r,i){this.persistence=e,this.xn=n,this.R=i,this.kn=new ke(Z),this.$n=new kn(s=>jo(s),qo),this.On=Y.min(),this._n=e.getMutationQueue(r),this.Mn=e.getRemoteDocumentCache(),this.Ue=e.getTargetCache(),this.Fn=new ia(this.Mn,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Fn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.kn))}};function I_(t,e,n,r){return new Kh(t,e,n,r)}async function Gh(t,e){let n=K(t),r=n._n,i=n.Fn,s=await n.persistence.runTransaction("Handle user change","readonly",o=>{let a;return n._n.getAllMutationBatches(o).next(l=>(a=l,r=n.persistence.getMutationQueue(e),i=new ia(n.Mn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(o))).next(l=>{let c=[],u=[],h=ne();for(let f of a){c.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}for(let f of l){u.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}return i.pn(o,h).next(f=>({Ln:f,removedBatchIds:c,addedBatchIds:u}))})});return n._n=r,n.Fn=i,n.xn.Vn(n.Fn),s}function k_(t,e){let n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.Mn.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){let u=l.batch,h=u.keys(),f=C.resolve();return h.forEach(d=>{f=f.next(()=>c.getEntry(a,d)).next(m=>{let p=l.docVersions.get(d);ee(p!==null),m.version.compareTo(p)<0&&(u.applyToRemoteDocument(m,l),m.isValidDocument()&&c.addEntry(m,l.commitVersion))})}),f.next(()=>o._n.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n._n.performConsistencyCheck(r)).next(()=>n.Fn.pn(r,i))})}function Wh(t){let e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ue.getLastRemoteSnapshotVersion(n))}function A_(t,e){let n=K(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.Mn.newChangeBuffer({trackRemovals:!0});i=n.kn;let a=[];e.targetChanges.forEach((c,u)=>{let h=i.get(u);if(!h)return;a.push(n.Ue.removeMatchingKeys(s,c.removedDocuments,u).next(()=>n.Ue.addMatchingKeys(s,c.addedDocuments,u)));let f=c.resumeToken;if(f.approximateByteSize()>0){let d=h.withResumeToken(f,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(u,d),function(m,p,g){return ee(p.resumeToken.approximateByteSize()>0),m.resumeToken.approximateByteSize()===0||p.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(h,d,c)&&a.push(n.Ue.updateTargetData(s,d))}});let l=$t();if(e.documentUpdates.forEach((c,u)=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(S_(s,o,e.documentUpdates,r,void 0).next(c=>{l=c})),!r.isEqual(Y.min())){let c=n.Ue.getLastRemoteSnapshotVersion(s).next(u=>n.Ue.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return C.waitFor(a).next(()=>o.apply(s)).next(()=>n.Fn.En(s,l)).next(()=>l)}).then(s=>(n.kn=i,s))}function S_(t,e,n,r,i){let s=ne();return n.forEach(o=>s=s.add(o)),e.getEntries(t,s).next(o=>{let a=$t();return n.forEach((l,c)=>{let u=o.get(l),h=(i==null?void 0:i.get(l))||r;c.isNoDocument()&&c.version.isEqual(Y.min())?(e.removeEntry(l,h),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c,h),a=a.insert(l,c)):L("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),a})}function C_(t,e){let n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n._n.getNextMutationBatchAfterBatchId(r,e)))}function R_(t,e){let n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ue.getTargetData(r,e).next(s=>s?(i=s,C.resolve(i)):n.Ue.allocateTargetId(r).next(o=>(i=new Tt(e,o,0,r.currentSequenceNumber),n.Ue.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.$n.set(e,r.targetId)),r})}async function sa(t,e,n){let r=K(t),i=r.kn.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!dr(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.kn=r.kn.remove(e),r.$n.delete(i.target)}function Xh(t,e,n){let r=K(t),i=Y.min(),s=ne();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){let u=K(a),h=u.$n.get(c);return h!==void 0?C.resolve(u.kn.get(h)):u.Ue.getTargetData(l,c)}(r,o,xt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ue.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.xn.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ne())).next(a=>({documents:a,Bn:s})))}var Qh=class{constructor(e){this.R=e,this.Qn=new Map,this.jn=new Map}getBundleMetadata(e,n){return C.resolve(this.Qn.get(n))}saveBundleMetadata(e,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:rt(r.createTime)}),C.resolve()}getNamedQuery(e,n){return C.resolve(this.jn.get(n))}saveNamedQuery(e,n){return this.jn.set(n.name,function(r){return{name:r.name,query:T_(r.bundledQuery),readTime:rt(r.readTime)}}(n)),C.resolve()}};var Mi=class{constructor(){this.Wn=new _e(pe.Gn),this.zn=new _e(pe.Hn)}isEmpty(){return this.Wn.isEmpty()}addReference(e,n){let r=new pe(e,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)}Jn(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Yn(new pe(e,n))}Xn(e,n){e.forEach(r=>this.removeReference(r,n))}Zn(e){let n=new F(new te([])),r=new pe(n,e),i=new pe(n,e+1),s=[];return this.zn.forEachInRange([r,i],o=>{this.Yn(o),s.push(o.key)}),s}ts(){this.Wn.forEach(e=>this.Yn(e))}Yn(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)}es(e){let n=new F(new te([])),r=new pe(n,e),i=new pe(n,e+1),s=ne();return this.zn.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new pe(e,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},pe=class{constructor(e,n){this.key=e,this.ns=n}static Gn(e,n){return F.comparator(e.key,n.key)||Z(e.ns,n.ns)}static Hn(e,n){return Z(e.ns,n.ns)||F.comparator(e.key,n.key)}};var Yh=class{constructor(e,n){this.qt=e,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new _e(pe.Gn)}checkEmpty(e){return C.resolve(this._n.length===0)}addMutationBatch(e,n,r,i){let s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];let o=new $h(s,n,r,i);this._n.push(o);for(let a of i)this.rs=this.rs.add(new pe(a.key,s)),this.qt.addToCollectionParentIndex(e,a.key.path.popLast());return C.resolve(o)}lookupMutationBatch(e,n){return C.resolve(this.os(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.cs(r),s=i<0?0:i;return C.resolve(this._n.length>s?this._n[s]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(this._n.length===0?-1:this.ss-1)}getAllMutationBatches(e){return C.resolve(this._n.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new pe(n,0),i=new pe(n,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],o=>{let a=this.os(o.ns);s.push(a)}),C.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _e(Z);return n.forEach(i=>{let s=new pe(i,0),o=new pe(i,Number.POSITIVE_INFINITY);this.rs.forEachInRange([s,o],a=>{r=r.add(a.ns)})}),C.resolve(this.us(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;F.isDocumentKey(s)||(s=s.child(""));let o=new pe(new F(s),0),a=new _e(Z);return this.rs.forEachWhile(l=>{let c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.ns)),!0)},o),C.resolve(this.us(a))}us(e){let n=[];return e.forEach(r=>{let i=this.os(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.hs(n.batchId,"removed")===0),this._n.shift();let r=this.rs;return C.forEach(n.mutations,i=>{let s=new pe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.rs=r})}Gt(e){}containsKey(e,n){let r=new pe(n,0),i=this.rs.firstAfterOrEqual(r);return C.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this._n.length,C.resolve()}hs(e,n){return this.cs(e)}cs(e){return this._n.length===0?0:e-this._n[0].batchId}os(e){let n=this.cs(e);return n<0||n>=this._n.length?null:this._n[n]}};var Jh=class{constructor(e,n){this.qt=e,this.ls=n,this.docs=new ke(F.comparator),this.size=0}addEntry(e,n,r){let i=n.key,s=this.docs.get(i),o=s?s.size:0,a=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:a,readTime:r}),this.size+=a-o,this.qt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return C.resolve(r?r.document.clone():Ie.newInvalidDocument(n))}getEntries(e,n){let r=$t();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.clone():Ie.newInvalidDocument(i))}),C.resolve(r)}getDocumentsMatchingQuery(e,n,r){let i=$t(),s=new F(n.path.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){let{key:a,value:{document:l,readTime:c}}=o.getNext();if(!n.path.isPrefixOf(a.path))break;c.compareTo(r)<=0||Ri(n,l)&&(i=i.insert(l.key,l.clone()))}return C.resolve(i)}fs(e,n){return C.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Zh(this)}getSize(e){return C.resolve(this.size)}},Zh=class extends zh{constructor(e){super(),this.Ie=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?n.push(this.Ie.addEntry(e,i.document,this.getReadTime(r))):this.Ie.removeEntry(r)}),C.waitFor(n)}getFromCache(e,n){return this.Ie.getEntry(e,n)}getAllFromCache(e,n){return this.Ie.getEntries(e,n)}};var ef=class{constructor(e){this.persistence=e,this.ds=new kn(n=>jo(n),qo),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.ws=0,this._s=new Mi,this.targetCount=0,this.gs=jt.Jt()}forEachTarget(e,n){return this.ds.forEach((r,i)=>n(i)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.ws)}allocateTargetId(e){return this.highestTargetId=this.gs.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),C.resolve()}te(e){this.ds.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.gs=new jt(n),this.highestTargetId=n),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)}addTargetData(e,n){return this.te(n),this.targetCount+=1,C.resolve()}updateTargetData(e,n){return this.te(n),C.resolve()}removeTargetData(e,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.ds.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ds.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),C.waitFor(s).next(()=>i)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,n){let r=this.ds.get(n)||null;return C.resolve(r)}addMatchingKeys(e,n,r){return this._s.Jn(n,r),C.resolve()}removeMatchingKeys(e,n,r){this._s.Xn(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),C.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._s.Zn(n),C.resolve()}getMatchingKeysForTargetId(e,n){let r=this._s.es(n);return C.resolve(r)}containsKey(e,n){return C.resolve(this._s.containsKey(n))}};var tf=class{constructor(e,n){this.ys={},this.Ne=new bi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.Ue=new ef(this),this.qt=new qh,this.qe=function(r,i){return new Jh(r,i)}(this.qt,r=>this.referenceDelegate.ps(r)),this.R=new jh(n),this.Ke=new Qh(this.R)}start(){return Promise.resolve()}shutdown(){return this.xe=!1,Promise.resolve()}get started(){return this.xe}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.qt}getMutationQueue(e){let n=this.ys[e.toKey()];return n||(n=new Yh(this.qt,this.referenceDelegate),this.ys[e.toKey()]=n),n}getTargetCache(){return this.Ue}getRemoteDocumentCache(){return this.qe}getBundleCache(){return this.Ke}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);let i=new nf(this.Ne.next());return this.referenceDelegate.Es(),r(i).next(s=>this.referenceDelegate.Ts(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Is(e,n){return C.or(Object.values(this.ys).map(r=>()=>r.containsKey(e,n)))}},nf=class extends Fh{constructor(e){super(),this.currentSequenceNumber=e}},Pi=class{constructor(e){this.persistence=e,this.As=new Mi,this.Rs=null}static Ps(e){return new Pi(e)}get bs(){if(this.Rs)return this.Rs;throw H()}addReference(e,n,r){return this.As.addReference(r,n),this.bs.delete(r.toString()),C.resolve()}removeReference(e,n,r){return this.As.removeReference(r,n),this.bs.add(r.toString()),C.resolve()}markPotentiallyOrphaned(e,n){return this.bs.add(n.toString()),C.resolve()}removeTarget(e,n){this.As.Zn(n.targetId).forEach(i=>this.bs.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.bs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Es(){this.Rs=new Set}Ts(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.bs,r=>{let i=F.fromPath(r);return this.vs(e,i).next(s=>{s||n.removeEntry(i)})}).next(()=>(this.Rs=null,n.apply(e)))}updateLimboDocument(e,n){return this.vs(e,n).next(r=>{r?this.bs.delete(n.toString()):this.bs.add(n.toString())})}ps(e){return 0}vs(e,n){return C.or([()=>C.resolve(this.As.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Is(e,n)])}};var qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid");var oa=class{constructor(){this.activeTargetIds=Sh()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}Cs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},rf=class{constructor(){this.li=new oa,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.li.Ds(e),this.fi[e]||"not-current"}updateQueryState(e,n,r){this.fi[e]=n}removeLocalQueryTarget(e){this.li.Cs(e)}isLocalQueryTarget(e){return this.li.activeTargetIds.has(e)}clearQueryState(e){delete this.fi[e]}getAllActiveQueryTargets(){return this.li.activeTargetIds}isActiveQueryTarget(e){return this.li.activeTargetIds.has(e)}start(){return this.li=new oa,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}};var sf=class{di(e){}shutdown(){}};var aa=class{constructor(){this.wi=()=>this._i(),this.mi=()=>this.gi(),this.yi=[],this.pi()}di(e){this.yi.push(e)}shutdown(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)}pi(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)}_i(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.yi)e(0)}gi(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.yi)e(1)}static gt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var N_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};var of=class{constructor(e){this.Ei=e.Ei,this.Ti=e.Ti}Ii(e){this.Ai=e}Ri(e){this.Pi=e}onMessage(e){this.bi=e}close(){this.Ti()}send(e){this.Ei(e)}vi(){this.Ai()}Vi(e){this.Pi(e)}Si(e){this.bi(e)}};var af=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http";this.Di=n+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Ni(e,n,r,i){let s=this.xi(e,n);L("RestConnection","Sending: ",s,r);let o={};return this.ki(o,i),this.$i(e,s,o,r).then(a=>(L("RestConnection","Received: ",a),a),a=>{throw $u("RestConnection",`${e} failed with error: `,a,"url: ",s,"request:",r),a})}Oi(e,n,r,i){return this.Ni(e,n,r,i)}ki(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+fn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(let r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])}xi(e,n){let r=N_[e];return`${this.Di}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling}$i(e,n,r,i){return new Promise((s,o)=>{let a=new Ly;a.listenOnce(Dy.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Lo.NO_ERROR:let c=a.getResponseJson();L("Connection","XHR received:",JSON.stringify(c)),s(c);break;case Lo.TIMEOUT:L("Connection",'RPC "'+e+'" timed out'),o(new V(I.DEADLINE_EXCEEDED,"Request time out"));break;case Lo.HTTP_ERROR:let u=a.getStatus();if(L("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let h=a.getResponseJson().error;if(h&&h.status&&h.message){let f=function(d){let m=d.toLowerCase().replace(/_/g,"-");return Object.values(I).indexOf(m)>=0?m:I.UNKNOWN}(h.status);o(new V(f,h.message))}else o(new V(I.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new V(I.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{L("Connection",'RPC "'+e+'" completed.')}});let l=JSON.stringify(i);a.send(n,"POST",l,r,15)})}Mi(e,n){let r=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ry(),s=Ny(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.ki(o.initMessageHeaders,n),Rr()||Dr()||Sl()||Or()||Al()||Nr()||(o.httpHeadersOverwriteParam="$httpHeaders");let a=r.join("");L("Connection","Creating WebChannel: "+a,o);let l=i.createWebChannel(a,o),c=!1,u=!1,h=new of({Ei:d=>{u?L("Connection","Not sending because WebChannel is closed:",d):(c||(L("Connection","Opening WebChannel transport."),l.open(),c=!0),L("Connection","WebChannel sending:",d),l.send(d))},Ti:()=>l.close()}),f=(d,m,p)=>{d.listen(m,g=>{try{p(g)}catch(b){setTimeout(()=>{throw b},0)}})};return f(l,wi.EventType.OPEN,()=>{u||L("Connection","WebChannel transport opened.")}),f(l,wi.EventType.CLOSE,()=>{u||(u=!0,L("Connection","WebChannel transport closed"),h.Vi())}),f(l,wi.EventType.ERROR,d=>{u||(u=!0,$u("Connection","WebChannel transport errored:",d),h.Vi(new V(I.UNAVAILABLE,"The operation could not be completed")))}),f(l,wi.EventType.MESSAGE,d=>{var m;if(!u){let p=d.data[0];ee(!!p);let g=p,b=g.error||((m=g[0])===null||m===void 0?void 0:m.error);if(b){L("Connection","WebChannel received error:",b);let T=b.status,y=function(R){let U=ue[R];if(U!==void 0)return kh(U)}(T),D=b.message;y===void 0&&(y=I.INTERNAL,D="Unknown error status: "+T+" with message "+b.message),u=!0,h.Vi(new V(y,D)),l.close()}else L("Connection","WebChannel received:",p),h.Si(p)}}),f(s,Oy.STAT_EVENT,d=>{d.stat===Vu.PROXY?L("Connection","Detected buffering proxy"):d.stat===Vu.NOPROXY&&L("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.vi()},0),h}};function la(){return typeof document!="undefined"?document:null}function Ui(t){return new Nh(t,!0)}var ca=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Se=e,this.timerId=n,this.Fi=r,this.Li=i,this.Bi=s,this.Ui=0,this.qi=null,this.Ki=Date.now(),this.reset()}reset(){this.Ui=0}Qi(){this.Ui=this.Bi}ji(e){this.cancel();let n=Math.floor(this.Ui+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ui} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qi=this.Se.enqueueAfterDelay(this.timerId,i,()=>(this.Ki=Date.now(),e())),this.Ui*=this.Li,this.Ui<this.Fi&&(this.Ui=this.Fi),this.Ui>this.Bi&&(this.Ui=this.Bi)}Gi(){this.qi!==null&&(this.qi.skipDelay(),this.qi=null)}cancel(){this.qi!==null&&(this.qi.cancel(),this.qi=null)}Wi(){return(Math.random()-.5)*this.Ui}};var ua=class{constructor(e,n,r,i,s,o){this.Se=e,this.zi=r,this.Hi=i,this.Ji=s,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new ca(e,n)}tr(){return this.state===1||this.state===2||this.state===4}er(){return this.state===2}start(){this.state!==3?this.auth():this.nr()}async stop(){this.tr()&&await this.close(0)}sr(){this.state=0,this.Zi.reset()}ir(){this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,()=>this.rr()))}cr(e){this.ar(),this.stream.send(e)}async rr(){if(this.er())return this.close(0)}ar(){this.Xi&&(this.Xi.cancel(),this.Xi=null)}async close(e,n){this.ar(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():n&&n.code===I.RESOURCE_EXHAUSTED?(wt(n.toString()),wt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===I.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ur(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ri(n)}ur(){}auth(){this.state=1;let e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(r=>{this.Yi===n&&this.lr(r)},r=>{e(()=>{let i=new V(I.UNKNOWN,"Fetching auth token failed: "+r.message);return this.dr(i)})})}lr(e){let n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(()=>{n(()=>(this.state=2,this.listener.Ii()))}),this.stream.Ri(r=>{n(()=>this.dr(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}nr(){this.state=4,this.Zi.ji(async()=>{this.state=0,this.start()})}dr(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}hr(e){return n=>{this.Se.enqueueAndForget(()=>this.Yi===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},lf=class extends ua{constructor(e,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s),this.R=i}wr(e){return this.Hi.Mi("Listen",e)}onMessage(e){this.Zi.reset();let n=u_(this.R,e),r=function(i){if(!("targetChange"in i))return Y.min();let s=i.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?rt(s.readTime):Y.min()}(e);return this.listener._r(n,r)}mr(e){let n={};n.database=ra(this.R),n.addTarget=function(i,s){let o,a=s.target;return o=Bo(a)?{documents:p_(i,a)}:{query:v_(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=Dh(i,s.resumeToken):s.snapshotVersion.compareTo(Y.min())>0&&(o.readTime=Di(i,s.snapshotVersion.toTimestamp())),o}(this.R,e);let r=__(this.R,e);r&&(n.labels=r),this.cr(n)}gr(e){let n={};n.database=ra(this.R),n.removeTarget=e,this.cr(n)}},cf=class extends ua{constructor(e,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle",n,r,s),this.R=i,this.yr=!1}get pr(){return this.yr}start(){this.yr=!1,this.lastStreamToken=void 0,super.start()}ur(){this.yr&&this.Er([])}wr(e){return this.Hi.Mi("Write",e)}onMessage(e){if(ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.yr){this.Zi.reset();let n=d_(e.writeResults,e.commitTime),r=rt(e.commitTime);return this.listener.Tr(r,n)}return ee(!e.writeResults||e.writeResults.length===0),this.yr=!0,this.listener.Ir()}Ar(){let e={};e.database=ra(this.R),this.cr(e)}Er(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>f_(this.R,r))};this.cr(n)}};var uf=class extends class{}{constructor(e,n,r){super(),this.credentials=e,this.Hi=n,this.R=r,this.Rr=!1}Pr(){if(this.Rr)throw new V(I.FAILED_PRECONDITION,"The client has already been terminated.")}Ni(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Ni(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===I.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new V(I.UNKNOWN,i.toString())})}Oi(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Oi(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===I.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new V(I.UNKNOWN,i.toString())})}terminate(){this.Rr=!0}},hf=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.br=0,this.vr=null,this.Vr=!0}Sr(){this.br===0&&(this.Dr("Unknown"),this.vr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.vr=null,this.Cr("Backend didn't respond within 10 seconds."),this.Dr("Offline"),Promise.resolve())))}Nr(e){this.state==="Online"?this.Dr("Unknown"):(this.br++,this.br>=1&&(this.kr(),this.Cr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Dr("Offline")))}set(e){this.kr(),this.br=0,e==="Online"&&(this.Vr=!1),this.Dr(e)}Dr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Cr(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(wt(n),this.Vr=!1):L("OnlineStateTracker",n)}kr(){this.vr!==null&&(this.vr.cancel(),this.vr=null)}};var ff=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.$r=[],this.Or=new Map,this.Mr=new Set,this.Fr=[],this.Lr=s,this.Lr.di(o=>{r.enqueueAndForget(async()=>{qt(this)&&(L("RemoteStore","Restarting streams for network reachability change."),await async function(a){let l=K(a);l.Mr.add(4),await mr(l),l.Br.set("Unknown"),l.Mr.delete(4),await xi(l)}(this))})}),this.Br=new hf(r,i)}};async function xi(t){if(qt(t))for(let e of t.Fr)await e(!0)}async function mr(t){for(let e of t.Fr)await e(!1)}function df(t,e){let n=K(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),da(n)?fa(n):Sn(n).er()&&ha(n,e))}function mf(t,e){let n=K(t),r=Sn(n);n.Or.delete(e),r.er()&&pf(n,e),n.Or.size===0&&(r.er()?r.ir():qt(n)&&n.Br.set("Unknown"))}function ha(t,e){t.Ur.q(e.targetId),Sn(t).mr(e)}function pf(t,e){t.Ur.q(e),Sn(t).gr(e)}function fa(t){t.Ur=new Ch({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.Or.get(e)||null}),Sn(t).start(),t.Br.Sr()}function da(t){return qt(t)&&!Sn(t).tr()&&t.Or.size>0}function qt(t){return K(t).Mr.size===0}function gf(t){t.Ur=void 0}async function D_(t){t.Or.forEach((e,n)=>{ha(t,e)})}async function O_(t,e){gf(t),da(t)?(t.Br.Nr(e),fa(t)):t.Br.set("Unknown")}async function L_(t,e,n){if(t.Br.set("Online"),e instanceof Yo&&e.state===2&&e.cause)try{await async function(r,i){let s=i.cause;for(let o of i.targetIds)r.Or.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Or.delete(o),r.Ur.removeTarget(o))}(t,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vi(t,r)}else if(e instanceof fr?t.Ur.X(e):e instanceof Qo?t.Ur.rt(e):t.Ur.et(e),!n.isEqual(Y.min()))try{let r=await Wh(t.localStore);n.compareTo(r)>=0&&await function(i,s){let o=i.Ur.at(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){let c=i.Or.get(l);c&&i.Or.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{let l=i.Or.get(a);if(!l)return;i.Or.set(a,l.withResumeToken(Te.EMPTY_BYTE_STRING,l.snapshotVersion)),pf(i,a);let c=new Tt(l.target,a,1,l.sequenceNumber);ha(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){L("RemoteStore","Failed to raise snapshot:",r),await Vi(t,r)}}async function Vi(t,e,n){if(!dr(e))throw e;t.Mr.add(1),await mr(t),t.Br.set("Offline"),n||(n=()=>Wh(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{L("RemoteStore","Retrying IndexedDB access"),await n(),t.Mr.delete(1),await xi(t)})}function vf(t,e){return e().catch(n=>Vi(t,n,e))}async function Fi(t){let e=K(t),n=It(e),r=e.$r.length>0?e.$r[e.$r.length-1].batchId:-1;for(;M_(e);)try{let i=await C_(e.localStore,r);if(i===null){e.$r.length===0&&n.ir();break}r=i.batchId,P_(e,i)}catch(i){await Vi(e,i)}yf(e)&&_f(e)}function M_(t){return qt(t)&&t.$r.length<10}function P_(t,e){t.$r.push(e);let n=It(t);n.er()&&n.pr&&n.Er(e.mutations)}function yf(t){return qt(t)&&!It(t).tr()&&t.$r.length>0}function _f(t){It(t).start()}async function U_(t){It(t).Ar()}async function x_(t){let e=It(t);for(let n of t.$r)e.Er(n.mutations)}async function V_(t,e,n){let r=t.$r.shift(),i=Oi.from(r,e,n);await vf(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Fi(t)}async function F_(t,e){e&&It(t).pr&&await async function(n,r){if(i=r.code,Zy(i)&&i!==I.ABORTED){let s=n.$r.shift();It(n).sr(),await vf(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Fi(n)}var i}(t,e),yf(t)&&_f(t)}async function $_(t,e){let n=K(t);e?(n.Mr.delete(2),await xi(n)):e||(n.Mr.add(2),await mr(n),n.Br.set("Unknown"))}function Sn(t){return t.qr||(t.qr=function(e,n,r){let i=K(e);return i.Pr(),new lf(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:D_.bind(null,t),Ri:O_.bind(null,t),_r:L_.bind(null,t)}),t.Fr.push(async e=>{e?(t.qr.sr(),da(t)?fa(t):t.Br.set("Unknown")):(await t.qr.stop(),gf(t))})),t.qr}function It(t){return t.Kr||(t.Kr=function(e,n,r){let i=K(e);return i.Pr(),new cf(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:U_.bind(null,t),Ri:F_.bind(null,t),Ir:x_.bind(null,t),Tr:V_.bind(null,t)}),t.Fr.push(async e=>{e?(t.Kr.sr(),await Fi(t)):(await t.Kr.stop(),t.$r.length>0&&(L("RemoteStore",`Stopping write stream with ${t.$r.length} pending writes`),t.$r=[]))})),t.Kr}var $i=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new $i(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(I.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function pa(t,e){if(wt("AsyncQueue",`${e}: ${t}`),dr(t))return new V(I.UNAVAILABLE,`${e}: ${t}`);throw t}var Bt=class{constructor(e){this.comparator=e?(n,r)=>e(n,r)||F.comparator(n.key,r.key):(n,r)=>F.comparator(n.key,r.key),this.keyedMap=Xo(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new Bt(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new Bt;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var ma=class{constructor(){this.Qr=new ke(F.comparator)}track(e){let n=e.doc.key,r=this.Qr.get(n);r?e.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,e):e.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Qr=this.Qr.remove(n):e.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):H():this.Qr=this.Qr.insert(n,e)}jr(){let e=[];return this.Qr.inorderTraversal((n,r)=>{e.push(r)}),e}},zt=class{constructor(e,n,r,i,s,o,a,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,r,i){let s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new zt(e,n,Bt.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ci(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var wf=class{constructor(){this.Wr=void 0,this.listeners=[]}},bf=class{constructor(){this.queries=new kn(e=>ah(e),Ci),this.onlineState="Unknown",this.Gr=new Set}};async function j_(t,e){let n=K(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new wf),i)try{s.Wr=await n.onListen(r)}catch(o){let a=pa(o,`Initialization of query '${Ko(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&ga(n)}async function q_(t,e){let n=K(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function B_(t,e){let n=K(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.Hr(i)&&(r=!0);o.Wr=i}}r&&ga(n)}function z_(t,e,n){let r=K(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function ga(t){t.Gr.forEach(e=>{e.next()})}var Ef=class{constructor(e,n,r){this.query=e,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}Hr(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new zt(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),n=!0):this.eo(e,this.onlineState)&&(this.no(e),n=!0),this.Xr=e,n}onError(e){this.Jr.error(e)}zr(e){this.onlineState=e;let n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),n=!0),n}eo(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.so||!r)&&(!e.docs.isEmpty()||n==="Offline")}Zr(e){if(e.docChanges.length>0)return!0;let n=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}no(e){e=zt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)}};var va=class{constructor(e){this.key=e}},ya=class{constructor(e){this.key=e}},Tf=class{constructor(e,n){this.query=e,this.ao=n,this.uo=null,this.current=!1,this.ho=ne(),this.mutatedKeys=ne(),this.lo=lh(e),this.fo=new Bt(this.lo)}get wo(){return this.ao}_o(e,n){let r=n?n.mo:new ma,i=n?n.fo:this.fo,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,l=Ai(this.query)&&i.size===this.query.limit?i.last():null,c=Ho(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let f=i.get(u),d=Ri(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations),g=!1;f&&d?f.data.isEqual(d.data)?m!==p&&(r.track({type:3,doc:d}),g=!0):this.yo(f,d)||(r.track({type:2,doc:d}),g=!0,(l&&this.lo(d,l)>0||c&&this.lo(d,c)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),g=!0):f&&!d&&(r.track({type:1,doc:f}),g=!0,(l||c)&&(a=!0)),g&&(d?(o=o.add(d),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),Ai(this.query)||Ho(this.query))for(;o.size>this.query.limit;){let u=Ai(this.query)?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}}yo(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){let i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;let s=e.mo.jr();s.sort((c,u)=>function(h,f){let d=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return d(h)-d(f)}(c.type,u.type)||this.lo(c.doc,u.doc)),this.po(r);let o=n?this.Eo():[],a=this.ho.size===0&&this.current?1:0,l=a!==this.uo;return this.uo=a,s.length!==0||l?{snapshot:new zt(this.query,e.fo,i,s,e.mutatedKeys,a===0,l,!1),To:o}:{To:o}}zr(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ma,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}}Io(e){return!this.ao.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations}po(e){e&&(e.addedDocuments.forEach(n=>this.ao=this.ao.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ao=this.ao.delete(n)),this.current=e.current)}Eo(){if(!this.current)return[];let e=this.ho;this.ho=ne(),this.fo.forEach(r=>{this.Io(r.key)&&(this.ho=this.ho.add(r.key))});let n=[];return e.forEach(r=>{this.ho.has(r)||n.push(new ya(r))}),this.ho.forEach(r=>{e.has(r)||n.push(new va(r))}),n}Ao(e){this.ao=e.Bn,this.ho=ne();let n=this._o(e.documents);return this.applyChanges(n,!0)}Ro(){return zt.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.uo===0)}},If=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},kf=class{constructor(e){this.key=e,this.Po=!1}},Sf=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.bo={},this.vo=new kn(a=>ah(a),Ci),this.Vo=new Map,this.So=new Set,this.Do=new ke(F.comparator),this.Co=new Map,this.No=new Mi,this.xo={},this.ko=new Map,this.$o=jt.Yt(),this.onlineState="Unknown",this.Oo=void 0}get isPrimaryClient(){return this.Oo===!0}};async function G_(t,e){let n=K_(t),r,i,s=n.vo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro();else{let o=await R_(n.localStore,xt(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await H_(n,e,r,a==="current"),n.isPrimaryClient&&df(n.remoteStore,o)}return i}async function H_(t,e,n,r){t.Mo=(u,h,f)=>async function(d,m,p,g){let b=m.view._o(p);b.Nn&&(b=await Xh(d.localStore,m.query,!1).then(({documents:D})=>m.view._o(D,b)));let T=g&&g.targetChanges.get(m.targetId),y=m.view.applyChanges(b,d.isPrimaryClient,T);return Af(d,m.targetId,y.To),y.snapshot}(t,u,h,f);let i=await Xh(t.localStore,e,!0),s=new Tf(e,i.Bn),o=s._o(i.documents),a=bn.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),l=s.applyChanges(o,t.isPrimaryClient,a);Af(t,n,l.To);let c=new If(e,n,s);return t.vo.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),l.snapshot}async function W_(t,e){let n=K(t),r=n.vo.get(e),i=n.Vo.get(r.targetId);if(i.length>1)return n.Vo.set(r.targetId,i.filter(s=>!Ci(s,e))),void n.vo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await sa(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),mf(n.remoteStore,r.targetId),_a(n,r.targetId)}).catch(pr)):(_a(n,r.targetId),await sa(n.localStore,r.targetId,!0))}async function Q_(t,e,n){let r=X_(t);try{let i=await function(s,o){let a=K(s),l=Me.now(),c=o.reduce((h,f)=>h.add(f.key),ne()),u;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>a.Fn.pn(h,c).next(f=>{u=f;let d=[];for(let m of o){let p=Jy(m,u.get(m.key));p!=null&&d.push(new Ft(m.key,p,Wu(p.toProto().mapValue),Vt.exists(!0)))}return a._n.addMutationBatch(h,l,d,o)})).then(h=>(h.applyToLocalDocumentSet(u),{batchId:h.batchId,changes:u}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.xo[s.currentUser.toKey()];l||(l=new ke(Z)),l=l.insert(o,a),s.xo[s.currentUser.toKey()]=l}(r,i.batchId,n),await gr(r,i.changes),await Fi(r.remoteStore)}catch(i){let s=pa(i,"Failed to persist write");n.reject(s)}}async function Cf(t,e){let n=K(t);try{let r=await A_(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Co.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Po=!0:i.modifiedDocuments.size>0?ee(o.Po):i.removedDocuments.size>0&&(ee(o.Po),o.Po=!1))}),await gr(n,r,e)}catch(r){await pr(r)}}function Rf(t,e,n){let r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.vo.forEach((s,o)=>{let a=o.view.zr(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){let a=K(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(let h of u.listeners)h.zr(o)&&(l=!0)}),l&&ga(a)}(r.eventManager,e),i.length&&r.bo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Y_(t,e,n){let r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Co.get(e),s=i&&i.key;if(s){let o=new ke(F.comparator);o=o.insert(s,Ie.newNoDocument(s,Y.min()));let a=ne().add(s),l=new hr(Y.min(),new Map,new _e(Z),o,a);await Cf(r,l),r.Do=r.Do.remove(s),r.Co.delete(e),wa(r)}else await sa(r.localStore,e,!1).then(()=>_a(r,e,n)).catch(pr)}async function J_(t,e){let n=K(t),r=e.batch.batchId;try{let i=await k_(n.localStore,e);Df(n,r,null),Nf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gr(n,i)}catch(i){await pr(i)}}async function Z_(t,e,n){let r=K(t);try{let i=await function(s,o){let a=K(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a._n.lookupMutationBatch(l,o).next(u=>(ee(u!==null),c=u.keys(),a._n.removeMutationBatch(l,u))).next(()=>a._n.performConsistencyCheck(l)).next(()=>a.Fn.pn(l,c))})}(r.localStore,e);Df(r,e,n),Nf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gr(r,i)}catch(i){await pr(i)}}function Nf(t,e){(t.ko.get(e)||[]).forEach(n=>{n.resolve()}),t.ko.delete(e)}function Df(t,e,n){let r=K(t),i=r.xo[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function _a(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Vo.get(e))t.vo.delete(r),n&&t.bo.Fo(r,n);t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(r=>{t.No.containsKey(r)||Of(t,r)})}function Of(t,e){t.So.delete(e.path.canonicalString());let n=t.Do.get(e);n!==null&&(mf(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),wa(t))}function Af(t,e,n){for(let r of n)r instanceof va?(t.No.addReference(r.key,e),e0(t,r)):r instanceof ya?(L("SyncEngine","Document no longer in limbo: "+r.key),t.No.removeReference(r.key,e),t.No.containsKey(r.key)||Of(t,r.key)):H()}function e0(t,e){let n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(L("SyncEngine","New document in limbo: "+n),t.So.add(r),wa(t))}function wa(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){let e=t.So.values().next().value;t.So.delete(e);let n=new F(te.fromString(e)),r=t.$o.next();t.Co.set(r,new kf(n)),t.Do=t.Do.insert(n,r),df(t.remoteStore,new Tt(xt(zo(n.path)),r,2,bi.o))}}async function gr(t,e,n){let r=K(t),i=[],s=[],o=[];r.vo.isEmpty()||(r.vo.forEach((a,l)=>{o.push(r.Mo(l,e,n).then(c=>{if(c){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),i.push(c);let u=Li.vn(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.bo._r(i),await async function(a,l){let c=K(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>C.forEach(l,h=>C.forEach(h.Pn,f=>c.persistence.referenceDelegate.addReference(u,h.targetId,f)).next(()=>C.forEach(h.bn,f=>c.persistence.referenceDelegate.removeReference(u,h.targetId,f)))))}catch(u){if(!dr(u))throw u;L("LocalStore","Failed to update sequence numbers: "+u)}for(let u of l){let h=u.targetId;if(!u.fromCache){let f=c.kn.get(h),d=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(d);c.kn=c.kn.insert(h,m)}}}(r.localStore,s))}async function t0(t,e){let n=K(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let r=await Gh(n.localStore,e);n.currentUser=e,function(i,s){i.ko.forEach(o=>{o.forEach(a=>{a.reject(new V(I.CANCELLED,s))})}),i.ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gr(n,r.Ln)}}function n0(t,e){let n=K(t),r=n.Co.get(e);if(r&&r.Po)return ne().add(r.key);{let i=ne(),s=n.Vo.get(e);if(!s)return i;for(let o of s){let a=n.vo.get(o);i=i.unionWith(a.view.wo)}return i}}function K_(t){let e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y_.bind(null,e),e.bo._r=B_.bind(null,e.eventManager),e.bo.Fo=z_.bind(null,e.eventManager),e}function X_(t){let e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=J_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z_.bind(null,e),e}var Lf=class{constructor(){this.synchronizeTabs=!1}async initialize(e){this.R=Ui(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.Uo(e),await this.persistence.start(),this.gcScheduler=this.qo(e),this.localStore=this.Ko(e)}qo(e){return null}Ko(e){return I_(this.persistence,new Hh,e.initialUser,this.R)}Uo(e){return new tf(Pi.Ps,this.R)}Bo(e){return new rf}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}},Mf=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=t0.bind(null,this.syncEngine),await $_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new bf}createDatastore(e){let n=Ui(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new af(i));var i;return function(s,o,a){return new uf(s,o,a)}(e.credentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>Rf(this.syncEngine,a,0),o=aa.gt()?new aa:new sf,new ff(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,c){let u=new Sf(r,i,s,o,a,l);return c&&(u.Oo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){let n=K(e);L("RemoteStore","RemoteStore shutting down."),n.Mr.add(5),await mr(n),n.Lr.shutdown(),n.Br.set("Unknown")}(this.remoteStore)}};var Pf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.jo(this.observer.next,e)}error(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Wo(){this.muted=!0}jo(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Uf=class{constructor(e,n,r){this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=qe.UNAUTHENTICATED,this.clientId=Po.u(),this.credentialListener=()=>Promise.resolve(),this.credentials.setChangeListener(n,async i=>{L("FirestoreClient","Received user=",i.uid),await this.credentialListener(i),this.user=i})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(I.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.removeChangeListener(),e.resolve()}catch(n){let r=pa(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function r0(t,e){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Gh(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function s0(t,e){t.asyncQueue.verifyOperationInProgress();let n=await i0(t);L("FirestoreClient","Initializing OnlineComponentProvider");let r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>async function(s,o){let a=K(s);a.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let l=qt(a);a.Mr.add(3),await mr(a),l&&a.Br.set("Unknown"),await a.remoteSyncer.handleCredentialChange(o),a.Mr.delete(3),await xi(a)}(e.remoteStore,i)),t.onlineComponents=e}async function i0(t){return t.offlineComponents||(L("FirestoreClient","Using default OfflineComponentProvider"),await r0(t,new Lf)),t.offlineComponents}async function xf(t){return t.onlineComponents||(L("FirestoreClient","Using default OnlineComponentProvider"),await s0(t,new Mf)),t.onlineComponents}function o0(t){return xf(t).then(e=>e.syncEngine)}async function a0(t){let e=await xf(t),n=e.eventManager;return n.onListen=G_.bind(null,e.syncEngine),n.onUnlisten=W_.bind(null,e.syncEngine),n}function l0(t,e,n={}){let r=new In;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){let c=new Pf({next:h=>{s.enqueueAndForget(()=>q_(i,u));let f=h.docs.has(o);!f&&h.fromCache?l.reject(new V(I.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&a&&a.source==="server"?l.reject(new V(I.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new Ef(zo(o.path),c,{includeMetadataChanges:!0,so:!0});return j_(i,u)}(await a0(t),t.asyncQueue,e,n,r)),r.promise}var Vf=class{constructor(e,n,r,i,s,o,a){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a}},An=class{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof An&&e.projectId===this.projectId&&e.database===this.database}};var Ff=new Map;var $f=class{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}},ba=class{constructor(){this.changeListener=null}getToken(){return Promise.resolve(null)}invalidateToken(){}setChangeListener(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(qe.UNAUTHENTICATED))}removeChangeListener(){this.changeListener=null}},jf=class{constructor(e){this.currentUser=qe.UNAUTHENTICATED,this.oc=new In,this.cc=0,this.changeListener=()=>Promise.resolve(),this.ac=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=()=>{this.cc++,this.currentUser=this.hc(),this.oc.resolve(),this.ac&&this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser))};let n=r=>{L("FirebaseCredentialsProvider","Auth detected"),this.auth=r,this.lc(),this.auth.addAuthTokenListener(this.uc)};e.onInit(r=>n(r)),setTimeout(()=>{if(!this.auth){let r=e.getImmediate({optional:!0});r?n(r):this.ac&&(L("FirebaseCredentialsProvider","Auth not yet detected"),this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser)))}},0)}getToken(){let e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.cc!==e?(L("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new $f(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}setChangeListener(e,n){this.ac=!0,this.asyncQueue=e,this.changeListener=n}removeChangeListener(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=()=>Promise.resolve()}hc(){let e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new qe(e)}lc(){this.ac&&(this.ac=!1,this.asyncQueue.enqueueRetryable(async()=>{await this.oc.promise,await this.changeListener(this.currentUser),this.ac=!0}))}},qf=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r,this.type="FirstParty",this.user=qe.FIRST_PARTY}get authHeaders(){let e={"X-Goog-AuthUser":this.dc},n=this.fc.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.wc&&(e["X-Goog-Iam-Authorization-Token"]=this.wc),e}},Bf=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r}getToken(){return Promise.resolve(new qf(this.fc,this.dc,this.wc))}setChangeListener(e,n){e.enqueueRetryable(()=>n(qe.FIRST_PARTY))}removeChangeListener(){}invalidateToken(){}};function zf(t,e,n){if(!n)throw new V(I.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Hf(t){if(!F.isDocumentKey(t))throw new V(I.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Kf(t){if(F.isDocumentKey(t))throw new V(I.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ea(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(n){if(n.constructor){let r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function ji(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(I.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ea(t);throw new V(I.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Ta=class{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new V(I.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,function(r,i,s,o){if(i===!0&&o===!0)throw new V(I.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties}};var qi=class{constructor(e,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ta({}),this._settingsFrozen=!1,e instanceof An?(this._databaseId=e,this._credentials=new ba):(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new V(I.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new An(r.options.projectId)}(e),this._credentials=new jf(n))}get app(){if(!this._app)throw new V(I.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(I.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ta(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new ba;switch(n.type){case"gapi":let r=n.client;return ee(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Bf(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new V(I.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let n=Ff.get(e);n&&(L("ComponentProvider","Removing Datastore"),Ff.delete(e),n.terminate())}(this),Promise.resolve()}};var Ue=class{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new it(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}},Bi=class{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}},it=class extends Bi{constructor(e,n,r){super(e,n,zo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new F(e))}withConverter(e){return new it(this.firestore,e,this._path)}};function Gf(t,e,...n){if(t=Fe(t),zf("collection","path",e),t instanceof qi){let r=te.fromString(e,...n);return Kf(r),new it(t,null,r)}{if(!(t instanceof Ue||t instanceof it))throw new V(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=te.fromString(t.path,...n).child(te.fromString(e));return Kf(r),new it(t.firestore,null,r)}}function Ia(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=Po.u()),zf("doc","path",e),t instanceof qi){let r=te.fromString(e,...n);return Hf(r),new Ue(t,null,new F(r))}{if(!(t instanceof Ue||t instanceof it))throw new V(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(te.fromString(e,...n));return Hf(r),new Ue(t.firestore,t instanceof it?t.converter:null,new F(r))}}var Wf=class{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new ca(this,"async_queue_retry"),this.Ac=()=>{let n=la();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Zi.Gi()};let e=la();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Ac)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Rc(),this.Pc(e)}enterRestrictedMode(){if(!this.gc){this.gc=!0;let e=la();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Ac)}}enqueue(e){return this.Rc(),this.gc?new Promise(n=>{}):this.Pc(e)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.bc()))}async bc(){if(this.mc.length!==0){try{await this.mc[0](),this.mc.shift(),this.Zi.reset()}catch(e){if(!dr(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.mc.length>0&&this.Zi.ji(()=>this.bc())}}Pc(e){let n=this._c.then(()=>(this.Tc=!0,e().catch(r=>{throw this.Ec=r,this.Tc=!1,wt("INTERNAL UNHANDLED ERROR: ",function(i){let s=i.message||"";return i.stack&&(s=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),s}(r)),r}).then(r=>(this.Tc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.Rc(),this.Ic.indexOf(e)>-1&&(n=0);let i=$i.createAndSchedule(this,e,n,r,s=>this.vc(s));return this.yc.push(i),i}Rc(){this.Ec&&H()}verifyOperationInProgress(){}async Vc(){let e;do e=this._c,await e;while(e!==this._c)}Sc(e){for(let n of this.yc)if(n.timerId===e)return!0;return!1}Dc(e){return this.Vc().then(()=>{this.yc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.yc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vc()})}Cc(e){this.Ic.push(e)}vc(e){let n=this.yc.indexOf(e);this.yc.splice(n,1)}},zi=class extends qi{constructor(e,n){super(e,n),this.type="firestore",this._queue=new Wf,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Xf(this),this._firestoreClient.terminate()}};function Qf(t=Pr()){return Pn(t,"firestore-exp").getImmediate()}function Yf(t){return t._firestoreClient||Xf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Xf(t){var e;let n=t._freezeSettings(),r=function(i,s,o,a){return new Vf(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Uf(t._credentials,t._queue,r)}var Hi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(I.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ce(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ht=class{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ht(Te.fromBase64String(e))}catch(n){throw new V(I.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ht(Te.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ka=class{constructor(e){this._methodName=e}};var Ki=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(I.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(I.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}};var c0=/^__.*__$/,Jf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ft(e,this.data,this.fieldMask,n,this.fieldTransforms):new cr(e,this.data,n,this.fieldTransforms)}};function Zf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var Gi=class{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Nc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get xc(){return this.settings.xc}kc(e){return new Gi(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}$c(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.kc({path:r,Oc:!1});return i.Mc(e),i}Fc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.kc({path:r,Oc:!1});return i.Nc(),i}Lc(e){return this.kc({path:void 0,Oc:!0})}Bc(e){return Wi(e,this.settings.methodName,this.settings.Uc||!1,this.path,this.settings.qc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Nc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(e.length===0)throw this.Bc("Document fields must not be empty");if(Zf(this.xc)&&c0.test(e))throw this.Bc('Document fields cannot begin and end with "__"')}},ed=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.R=r||Ui(e)}Kc(e,n,r,i=!1){return new Gi({xc:e,methodName:n,qc:r,path:Ce.emptyPath(),Oc:!1,Uc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)}};function u0(t){let e=t._freezeSettings(),n=Ui(t._databaseId);return new ed(t._databaseId,!!e.ignoreUndefinedProperties,n)}function d0(t,e,n,r,i,s={}){let o=t.Kc(s.merge||s.mergeFields?2:0,e,n,i);nd("Data must be an object, but it was:",o,r);let a=td(r,o),l,c;if(s.merge)l=new Ti(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let h of s.mergeFields){let f=h0(e,h,n);if(!o.contains(f))throw new V(I.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);f0(u,f)||u.push(f)}l=new Ti(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new Jf(new Pe(a),l,c)}function rd(t,e){if(id(t=Fe(t)))return nd("Unsupported field value:",e,t),td(t,e);if(t instanceof ka)return function(n,r){if(!Zf(r.xc))throw r.Bc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bc(`${n._methodName}() is not currently supported inside arrays`);let i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oc&&e.xc!==4)throw e.Bc("Nested arrays are not supported");return function(n,r){let i=[],s=0;for(let o of n){let a=rd(o,r.Lc(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Fe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Gy(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let i=Me.fromDate(n);return{timestampValue:Di(r.R,i)}}if(n instanceof Me){let i=new Me(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Di(r.R,i)}}if(n instanceof Ki)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ht)return{bytesValue:Dh(r.R,n._byteString)};if(n instanceof Ue){let i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Bc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zo(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Bc(`Unsupported field value: ${Ea(n)}`)}(t,e)}function td(t,e){let n={};return qu(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(t,(r,i)=>{let s=rd(i,e.$c(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function id(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof Ki||t instanceof Ht||t instanceof Ue||t instanceof ka)}function nd(t,e,n){if(!id(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let r=Ea(n);throw r==="an object"?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function h0(t,e,n){if((e=Fe(e))instanceof Hi)return e._internalPath;if(typeof e=="string")return sd(t,e);throw Wi("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var p0=new RegExp("[~\\*/\\[\\]]");function sd(t,e,n){if(e.search(p0)>=0)throw Wi(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hi(...e.split("."))._internalPath}catch(r){throw Wi(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wi(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new V(I.INVALID_ARGUMENT,a+t+l)}function f0(t,e){return t.some(n=>n.isEqual(e))}var Sa=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new od(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.toProto())}}get(e){if(this._document){let n=this._document.data.field(ad("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},od=class extends Sa{data(){return super.data()}};function ad(t,e){return typeof e=="string"?sd(t,e):e instanceof Hi?e._internalPath:e._delegate._internalPath}var ld=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Aa=class extends Sa{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.toProto(),e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(ad("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},cd=class extends Aa{data(e={}){return super.data(e)}};var ud=class{convertValue(e,n="none"){switch(Et(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){let r={};return Ei(e.fields||{},(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Ki(ce(e.latitude),ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=zu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tr(e));default:return null}}convertTimestamp(e){let n=bt(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=te.fromString(e);ee(Oh(r));let i=new An(r.get(1),r.get(3)),s=new F(r.popFirst(5));return i.isEqual(n)||wt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function m0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function hd(t){t=ji(t,Ue);let e=ji(t.firestore,zi);return l0(Yf(e),t._key).then(n=>g0(e,t,n))}var fd=class extends ud{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}};function dd(t,e,n){t=ji(t,Ue);let r=ji(t.firestore,zi),i=m0(t.converter,e,n);return v0(r,[d0(u0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Vt.none())])}function v0(t,e){return function(n,r){let i=new In;return n.asyncQueue.enqueueAndForget(async()=>Q_(await o0(n),r,i)),i.promise}(Yf(t),e)}function g0(t,e,n){let r=n.docs.get(e._key),i=new fd(t);return new Aa(t,i,e._key,r,new ld(n.hasPendingWrites,n.fromCache),e.converter)}var y0;(function(t){fn=t})(Nt),Rt(new ut("firestore-exp",(t,{options:e})=>{let n=t.getProvider("app-exp").getImmediate(),r=new zi(n,t.getProvider("auth-internal"));return e&&r._setSettings(e),r},"PUBLIC")),ft("@firebase/firestore","0.0.900-exp.d92a36260",y0);var pd=Qf(),Ca=async(t,e)=>{let n=Ia(pd,t,e),r=await hd(n),i="";return r.exists()?i=r.data():console.log("No such document!"),i},Ra=async(t,e,n)=>{let r=Gf(pd,t);n&&await dd(Ia(r,e),{[t]:n})};var Na=Ec(),_0=new Ke,Xi=()=>_c(Na,_0),md=()=>nc(Na),w0=()=>{Ba(),fl(),za()},b0=t=>{Ye.set(t)},E0=t=>{Ca("goal",t).then(e=>e?Je.set(e.goal):""),Ca("data",t).then(e=>e?oe.set(e.data):"")};tc(Na,t=>{t?(console.log("👌 you are logged 👌"),b0(t),E0(t.uid),Je.subscribe(e=>Ra("goal",t.uid,e)),oe.subscribe(e=>e.length>0?Ra("data",t.uid,e):"")):(console.log("👋 you are not logged 👋"),w0())});function gd(t,e,n){let r=t.slice();return r[3]=e[n].label,r[4]=e[n].icon,r[5]=e[n].style,r[6]=e[n].onClick,r[7]=e[n].name,r}function I0(t){let e,n,r,i,s;return i=new Dn({props:{label:"Iniciar sesión",$$slots:{default:[T0]},$$scope:{ctx:t}}}),{c(){e=E("h2"),e.textContent="Haz click para iniciar sesión",n=N(),r=E("div"),x(i.$$.fragment),v(e,"class","text-center"),v(r,"class","m-2 flex flex-col")},m(o,a){w(o,e,a),w(o,n,a),w(o,r,a),M(i,r,null),s=!0},p(o,a){let l={};a&1024&&(l.$$scope={dirty:a,ctx:o}),i.$set(l)},i(o){s||(k(i.$$.fragment,o),s=!0)},o(o){A(i.$$.fragment,o),s=!1},d(o){o&&_(e),o&&_(n),o&&_(r),P(i)}}}function k0(t){let e,n,r,i,s,o=t[0].displayName+"",a,l,c,u=t[0].email+"",h,f,d=[],m=new Map,p,g,b=t[1],T=y=>y[7];for(let y=0;y<b.length;y+=1){let D=gd(t,b,y),R=T(D);m.set(R,d[y]=vd(R,D))}return{c(){e=E("img"),r=N(),i=E("div"),s=E("h2"),a=W(o),l=N(),c=E("h2"),h=W(u),f=N();for(let y=0;y<d.length;y+=1)d[y].c();p=ze(),v(e,"class","mx-auto rounded-lg"),e.src!==(n=t[0].photoURL)&&v(e,"src",n),v(e,"alt","user"),v(i,"class","my-8")},m(y,D){w(y,e,D),w(y,r,D),w(y,i,D),S(i,s),S(s,a),S(i,l),S(i,c),S(c,h),w(y,f,D);for(let R=0;R<d.length;R+=1)d[R].m(y,D);w(y,p,D),g=!0},p(y,D){(!g||D&1&&e.src!==(n=y[0].photoURL))&&v(e,"src",n),(!g||D&1)&&o!==(o=y[0].displayName+"")&&J(a,o),(!g||D&1)&&u!==(u=y[0].email+"")&&J(h,u),D&2&&(b=y[1],ie(),d=At(d,D,T,1,y,b,m,p.parentNode,Xt,vd,p,gd),se())},i(y){if(!g){for(let D=0;D<b.length;D+=1)k(d[D]);g=!0}},o(y){for(let D=0;D<d.length;D+=1)A(d[D]);g=!1},d(y){y&&_(e),y&&_(r),y&&_(i),y&&_(f);for(let D=0;D<d.length;D+=1)d[D].d(y);y&&_(p)}}}function T0(t){let e,n;return e=new he({props:{props:t[2]}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p:G,i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function S0(t){let e,n;return e=new he({props:{props:{icon:t[4],style:t[5],onClick:t[6]}}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p:G,i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function vd(t,e){let n,r,i,s;return r=new Dn({props:{label:e[3],$$slots:{default:[S0]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=E("div"),x(r.$$.fragment),i=N(),v(n,"class","m-2 flex flex-col"),this.first=n},m(o,a){w(o,n,a),M(r,n,null),S(n,i),s=!0},p(o,a){e=o;let l={};a&1024&&(l.$$scope={dirty:a,ctx:e}),r.$set(l)},i(o){s||(k(r.$$.fragment,o),s=!0)},o(o){A(r.$$.fragment,o),s=!1},d(o){o&&_(n),P(r)}}}function A0(t){let e,n,r,i,s=[k0,I0],o=[];function a(l,c){return l[0]?0:1}return e=a(t,-1),n=o[e]=s[e](t),{c(){n.c(),r=ze()},m(l,c){o[e].m(l,c),w(l,r,c),i=!0},p(l,c){let u=e;e=a(l,c),e===u?o[e].p(l,c):(ie(),A(o[u],1,1,()=>{o[u]=null}),se(),n=o[e],n?n.p(l,c):(n=o[e]=s[e](l),n.c()),k(n,1),n.m(r.parentNode,r))},i(l){i||(k(n),i=!0)},o(l){A(n),i=!1},d(l){o[e].d(l),l&&_(r)}}}function C0(t){let e,n;return e=new ct({props:{$$slots:{default:[A0]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,[i]){let s={};i&1025&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function R0(t,e,n){let r;return Be(t,Ye,o=>n(0,r=o)),[r,[{name:"SignOut",label:"Cerrar sesión",icon:"logout",style:"primary",onClick:md}],{icon:"login",style:"primary",onClick:Xi}]}var yd=class extends j{constructor(e){super();z(this,e,R0,C0,$,{})}},_d=yd;function wd(t,e,n){let r=t.slice();return r[4]=e[n],r}function bd(t){let e,n;function r(){return t[3](t[4])}return e=new he({props:{props:t[4],current:t[0]}}),e.$on("click",r),{c(){x(e.$$.fragment)},m(i,s){M(e,i,s),n=!0},p(i,s){t=i;let o={};s&1&&(o.current=t[0]),e.$set(o)},i(i){n||(k(e.$$.fragment,i),n=!0)},o(i){A(e.$$.fragment,i),n=!1},d(i){P(e,i)}}}function N0(t){let e,n,r=t[2],i=[];for(let o=0;o<r.length;o+=1)i[o]=bd(wd(t,r,o));let s=o=>A(i[o],1,1,()=>{i[o]=null});return{c(){e=E("div");for(let o=0;o<i.length;o+=1)i[o].c();v(e,"class","container fixed svelte-1xfd7dv")},m(o,a){w(o,e,a);for(let l=0;l<i.length;l+=1)i[l].m(e,null);n=!0},p(o,[a]){if(a&7){r=o[2];let l;for(l=0;l<r.length;l+=1){let c=wd(o,r,l);i[l]?(i[l].p(c,a),k(i[l],1)):(i[l]=bd(c),i[l].c(),k(i[l],1),i[l].m(e,null))}for(ie(),l=r.length;l<i.length;l+=1)s(l);se()}},i(o){if(!n){for(let a=0;a<r.length;a+=1)k(i[a]);n=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)A(i[a]);n=!1},d(o){o&&_(e),Qe(i,o)}}}function D0(t,e,n){let r=[{icon:"home",style:"secondary",selected:!1},{icon:"lightning",style:"secondary",selected:!1},{icon:"profile",style:"secondary",selected:!1}],{current:i="Home"}=e,{selectedBtn:s=()=>{}}=e,o=a=>s(a.icon);return t.$$set=a=>{"current"in a&&n(0,i=a.current),"selectedBtn"in a&&n(1,s=a.selectedBtn)},[i,s,r,o]}var Ed=class extends j{constructor(e){super();z(this,e,D0,N0,$,{current:0,selectedBtn:1})}},Td=Ed;function O0(t){let e,n,r,i,s,o,a;function l(u){t[1](u)}let c={label:"Objetivo",type:"text"};return t[0]!==void 0&&(c.value=t[0]),s=new Nn({props:c}),at.push(()=>Qt(s,"value",l)),{c(){e=E("h1"),e.textContent="Opciones",n=N(),r=E("h3"),r.textContent="Configura tus fuentes de ingresos",i=N(),x(s.$$.fragment)},m(u,h){w(u,e,h),w(u,n,h),w(u,r,h),w(u,i,h),M(s,u,h),a=!0},p(u,h){let f={};!o&&h&1&&(o=!0,f.value=u[0],Wt(()=>o=!1)),s.$set(f)},i(u){a||(k(s.$$.fragment,u),a=!0)},o(u){A(s.$$.fragment,u),a=!1},d(u){u&&_(e),u&&_(n),u&&_(r),u&&_(i),P(s,u)}}}function L0(t){let e,n,r,i,s,o,a;return e=new ct({props:{$$slots:{default:[O0]},$$scope:{ctx:t}}}),i=new he({props:{props:{icon:"add",style:"secondary"}}}),i.$on("click",oe.add),o=new Sr({props:{edit:!0}}),{c(){x(e.$$.fragment),n=N(),r=E("div"),x(i.$$.fragment),s=N(),x(o.$$.fragment)},m(l,c){M(e,l,c),w(l,n,c),w(l,r,c),M(i,r,null),w(l,s,c),M(o,l,c),a=!0},p(l,[c]){let u={};c&5&&(u.$$scope={dirty:c,ctx:l}),e.$set(u)},i(l){a||(k(e.$$.fragment,l),k(i.$$.fragment,l),k(o.$$.fragment,l),a=!0)},o(l){A(e.$$.fragment,l),A(i.$$.fragment,l),A(o.$$.fragment,l),a=!1},d(l){P(e,l),l&&_(n),l&&_(r),P(i),l&&_(s),P(o,l)}}}function M0(t,e,n){let r;Be(t,Je,s=>n(0,r=s));function i(s){r=s,Je.set(r)}return[r,i]}var Id=class extends j{constructor(e){super();z(this,e,M0,L0,$,{})}},kd=Id;var Sd=class extends j{constructor(e){super();z(this,e,null,null,$,{})}},Ad=Sd;function P0(t){let e,n,r;return{c(){e=E("button"),n=E("img"),v(n,"class","w-12 h-12 rounded-full"),n.src!==(r=t[0])&&v(n,"src",r),v(n,"alt","Avatar")},m(i,s){w(i,e,s),S(e,n)},p(i,[s]){s&1&&n.src!==(r=i[0])&&v(n,"src",r)},i:G,o:G,d(i){i&&_(e)}}}function U0(t,e,n){let{img:r="icons/user.svg"}=e;return t.$$set=i=>{"img"in i&&n(0,r=i.img)},[r]}var Cd=class extends j{constructor(e){super();z(this,e,U0,P0,$,{img:0})}},Rd=Cd;function x0(t){let e,n,r,i,s,o;return r=new Rd({props:{img:t[0]}}),{c(){e=E("div"),n=E("div"),x(r.$$.fragment),v(n,"class","float-right"),v(e,"class","w-screen p-8")},m(a,l){w(a,e,l),S(e,n),M(r,n,null),i=!0,s||(o=le(n,"click",Xi),s=!0)},p(a,[l]){let c={};l&1&&(c.img=a[0]),r.$set(c)},i(a){i||(k(r.$$.fragment,a),i=!0)},o(a){A(r.$$.fragment,a),i=!1},d(a){a&&_(e),P(r),s=!1,o()}}}function V0(t,e,n){let r,i;return Be(t,Ye,s=>n(1,i=s)),t.$$.update=()=>{if(t.$$.dirty&2){e:n(0,r=i.photoURL?i.photoURL:"icons/user.svg")}},[r,i]}var Nd=class extends j{constructor(e){super();z(this,e,V0,x0,$,{})}},Dd=Nd;function F0(t){let e,n,r,i,s,o;e=new Dd({});var a=t[1];function l(c){return{}}return a&&(r=new a(l(t))),s=new Td({props:{current:t[0],selectedBtn:t[2]}}),{c(){x(e.$$.fragment),n=N(),r&&x(r.$$.fragment),i=N(),x(s.$$.fragment)},m(c,u){M(e,c,u),w(c,n,u),r&&M(r,c,u),w(c,i,u),M(s,c,u),o=!0},p(c,[u]){if(a!==(a=c[1])){if(r){ie();let f=r;A(f.$$.fragment,1,0,()=>{P(f,1)}),se()}a?(r=new a(l(c)),x(r.$$.fragment),k(r.$$.fragment,1),M(r,i.parentNode,i)):r=null}let h={};u&1&&(h.current=c[0]),s.$set(h)},i(c){o||(k(e.$$.fragment,c),r&&k(r.$$.fragment,c),k(s.$$.fragment,c),o=!0)},o(c){A(e.$$.fragment,c),r&&A(r.$$.fragment,c),A(s.$$.fragment,c),o=!1},d(c){P(e,c),c&&_(n),r&&P(r,c),c&&_(i),P(s,c)}}}function $0(t,e,n){let r,i="home",s=a=>{n(0,i=a)},o={home:Tl,profile:_d,lightning:kd,bell:Ad};return t.$$.update=()=>{if(t.$$.dirty&1){e:n(1,r=o[i])}},[i,r,s]}var Od=class extends j{constructor(e){super();z(this,e,$0,F0,$,{})}},Ld=Od;import.meta.env=Yi;var Md=new Ld({target:document.body}),j0=Md;import.meta?.hot&&((void 0).accept(),(void 0).dispose(()=>{Md.$destroy()}));export{j0 as default};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=index.js.map

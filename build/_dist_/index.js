var md=Object.defineProperty;var gd=(t,e)=>{for(var n in e)md(t,n,{get:e[n],enumerable:!0})};var Hi={};gd(Hi,{MODE:()=>vd,NODE_ENV:()=>yd,SSR:()=>_d});var vd="production",yd="production",_d=!1;function X(){}function wd(t,e){for(let n in e)t[n]=e[n];return t}function ya(t){return t()}function _a(){return Object.create(null)}function ze(t){t.forEach(ya)}function Ed(t){return typeof t=="function"}function H(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function bd(t){return Object.keys(t).length===0}function Td(t,...e){if(t==null)return X;let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function qe(t,e,n){t.$$.on_destroy.push(Td(e,n))}function Tt(t,e,n,r){if(t){let i=wa(t,e,n,r);return t[0](i)}}function wa(t,e,n,r){return t[1]&&r?wd(n.ctx.slice(),t[1](r(e))):n.ctx}function Id(t,e,n,r){if(t[2]&&r){let i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){let s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function It(t,e,n,r,i,s,o){let a=Id(e,r,i,s);if(a){let c=wa(e,n,r,o);t.p(c,a)}}function zt(t){return t??""}function I(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function Qe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function G(t){return document.createTextNode(t)}function N(){return G(" ")}function Ke(){return G("")}function Ae(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function St(t){return t===""?null:+t}function Sd(t){return Array.from(t.childNodes)}function J(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function xe(t,e){t.value=e??""}function Le(t,e,n){t.classList[n?"add":"remove"](e)}var Ea;function mr(t){Ea=t}function zi(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r(e))}var Sn=[],st=[],gr=[],Ki=[],kd=Promise.resolve(),Gi=!1;function Ad(){Gi||(Gi=!0,kd.then(ba))}function Wi(t){gr.push(t)}function Kt(t){Ki.push(t)}var Xi=!1,Qi=new Set;function ba(){if(!Xi){Xi=!0;do{for(let t=0;t<Sn.length;t+=1){let e=Sn[t];mr(e),Cd(e.$$)}for(mr(null),Sn.length=0;st.length;)st.pop()();for(let t=0;t<gr.length;t+=1){let e=gr[t];Qi.has(e)||(Qi.add(e),e())}gr.length=0}while(Sn.length);for(;Ki.length;)Ki.pop()();Gi=!1,Xi=!1,Qi.clear()}}function Cd(t){if(t.fragment!==null){t.update(),ze(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Wi)}}var vr=new Set,kt;function ae(){kt={r:0,c:[],p:kt}}function ce(){kt.r||ze(kt.c),kt=kt.p}function b(t,e){t&&t.i&&(vr.delete(t),t.i(e))}function S(t,e,n,r){if(t&&t.o){if(vr.has(t))return;vr.add(t),kt.c.push(()=>{vr.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function kn(t,e){S(t,1,1,()=>{e.delete(t.key)})}function An(t,e,n,r,i,s,o,a,c,l,u,h){let f=t.length,d=s.length,p=f,g={};for(;p--;)g[t[p].key]=p;let m=[],T=new Map,A=new Map;for(p=d;p--;){let V=h(i,s,p),de=n(V),ve=o.get(de);ve?r&&ve.p(V,e):(ve=l(de,V),ve.c()),T.set(de,m[p]=ve),de in g&&A.set(de,Math.abs(p-g[de]))}let C=new Set,F=new Set;function D(V){b(V,1),V.m(a,u),o.set(V.key,V),u=V.first,d--}for(;f&&d;){let V=m[d-1],de=t[f-1],ve=V.key,ie=de.key;V===de?(u=V.first,f--,d--):T.has(ie)?!o.has(ve)||C.has(ve)?D(V):F.has(ie)?f--:A.get(ve)>A.get(ie)?(F.add(ve),D(V)):(C.add(ie),f--):(c(de,o),f--)}for(;f--;){let V=t[f];T.has(V.key)||c(V,o)}for(;d;)D(m[d-1]);return m}function Gt(t,e,n){let r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function U(t){t&&t.c()}function P(t,e,n,r){let{fragment:i,on_mount:s,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,n),r||Wi(()=>{let c=s.map(ya).filter(Ed);o?o.push(...c):ze(c),t.$$.on_mount=[]}),a.forEach(Wi)}function M(t,e){let n=t.$$;n.fragment!==null&&(ze(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Rd(t,e){t.$$.dirty[0]===-1&&(Sn.push(t),Ad(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(t,e,n,r,i,s,o=[-1]){let a=Ea;mr(t);let c=t.$$={fragment:null,ctx:null,props:s,update:X,not_equal:i,bound:_a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:e.context||[]),callbacks:_a(),dirty:o,skip_bound:!1},l=!1;if(c.ctx=n?n(t,e.props||{},(u,h,...f)=>{let d=f.length?f[0]:h;return c.ctx&&i(c.ctx[u],c.ctx[u]=d)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](d),l&&Rd(t,u)),h}):[],c.update(),l=!0,ze(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){let u=Sd(e.target);c.fragment&&c.fragment.l(u),u.forEach(v)}else c.fragment&&c.fragment.c();e.intro&&b(t.$$.fragment),P(t,e.target,e.anchor,e.customElement),ba()}mr(a)}var z=class{$destroy(){M(this,1),this.$destroy=X}$on(e,n){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{let i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!bd(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var pe=t=>new Intl.NumberFormat("es",{notation:"compact",style:"currency",currency:"EUR"}).format(t),Yi=t=>new Intl.NumberFormat("es",{style:"currency",currency:"EUR"}).format(t),ot=t=>new Intl.NumberFormat("en",{style:"percent"}).format(t),Ta=new Date().toISOString().slice(0,10);function Nd(t){let e,n,r,i=pe(t[0])+"",s;return{c(){e=E("p"),e.textContent="Objetivo logrado",n=N(),r=E("h6"),s=G(i),_(e,"class","euros text-xs text-center"),_(r,"class","euros text-xs text-center svelte-bssdtf")},m(o,a){y(o,e,a),y(o,n,a),y(o,r,a),I(r,s)},p(o,a){a&1&&i!==(i=pe(o[0])+"")&&J(s,i)},d(o){o&&v(e),o&&v(n),o&&v(r)}}}function Dd(t){let e,n,r=pe(t[1])+"",i,s,o,a,c=pe(t[0])+"",l;return{c(){e=E("p"),n=G("a "),i=G(r),s=N(),o=E("h6"),a=G("de "),l=G(c),_(e,"class","euros text-sm text-center"),_(o,"class","euros text-xs text-center svelte-bssdtf")},m(u,h){y(u,e,h),I(e,n),I(e,i),y(u,s,h),y(u,o,h),I(o,a),I(o,l)},p(u,h){h&2&&r!==(r=pe(u[1])+"")&&J(i,r),h&1&&c!==(c=pe(u[0])+"")&&J(l,c)},d(u){u&&v(e),u&&v(s),u&&v(o)}}}function Od(t){let e,n,r,i,s;function o(l,u){return(s==null||u&4)&&(s=!!l[2]()),s?Dd:Nd}let a=o(t,-1),c=a(t);return{c(){e=E("div"),n=E("img"),i=N(),c.c(),_(n,"class","m-auto"),n.src!==(r="icons/goal.svg")&&_(n,"src",r),_(n,"alt","goal"),_(e,"class","goal  float-right bg-red-500 p-5  svelte-bssdtf")},m(l,u){y(l,e,u),I(e,n),I(e,i),c.m(e,null)},p(l,[u]){a===(a=o(l,u))&&c?c.p(l,u):(c.d(1),c=a(l),c&&(c.c(),c.m(e,null)))},i:X,o:X,d(l){l&&v(e),c.d()}}}function Ld(t,e,n){let r,{goal:i=0}=e,{road:s=0}=e,{balance:o=0}=e;return t.$$set=a=>{"goal"in a&&n(0,i=a.goal),"road"in a&&n(1,s=a.road),"balance"in a&&n(3,o=a.balance)},t.$$.update=()=>{if(t.$$.dirty&9){e:n(2,r=()=>i>o)}},[i,s,r,o]}var Ia=class extends z{constructor(e){super();K(this,e,Ld,Od,H,{goal:0,road:1,balance:3})}},Sa=Ia;function Pd(t){let e,n,r=t[1].default,i=Tt(r,t,t[0],null);return{c(){e=E("div"),i&&i.c(),_(e,"class","card__background h-auto sm:w-96 w-11/12 mb-12 p-8 shadow-2xl relative")},m(s,o){y(s,e,o),i&&i.m(e,null),n=!0},p(s,[o]){i&&i.p&&(!n||o&1)&&It(i,r,s,s[0],o,null,null)},i(s){n||(b(i,s),n=!0)},o(s){S(i,s),n=!1},d(s){s&&v(e),i&&i.d(s)}}}function Md(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=s=>{"$$scope"in s&&n(0,i=s.$$scope)},[i,r]}var ka=class extends z{constructor(e){super();K(this,e,Md,Pd,H,{})}},at=ka;var Wt=[];function Xt(t,e=X){let n,r=[];function i(a){if(H(t,a)&&(t=a,n)){let c=!Wt.length;for(let l=0;l<r.length;l+=1){let u=r[l];u[1](),Wt.push(u,t)}if(c){for(let l=0;l<Wt.length;l+=2)Wt[l][0](Wt[l+1]);Wt.length=0}}}function s(a){i(a(t))}function o(a,c=X){let l=[a,c];return r.push(l),r.length===1&&(n=e(i)||X),a(t),()=>{let u=r.indexOf(l);u!==-1&&r.splice(u,1),r.length===0&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}var Ye=Xt({displayName:"",photoURL:"icons/user.svg",email:"",uid:""}),Aa=()=>Ye.set(0);var Je=Xt(),Ca=()=>Je.set(0);function Ud(t){let e,n,r,i,s,o,a,c,l,u=pe(t[0])+"",h,f,d,p;return d=new Sa({props:{balance:t[0],goal:t[1],road:t[2]}}),{c(){e=E("h1"),n=G("Hola "),r=G(t[3]),i=N(),s=E("h3"),s.textContent="Bienvenido de nuevo",o=N(),a=E("h3"),a.textContent="Balance",c=N(),l=E("p"),h=G(u),f=N(),U(d.$$.fragment),_(a,"class","mt-8"),_(l,"class","euros")},m(g,m){y(g,e,m),I(e,n),I(e,r),y(g,i,m),y(g,s,m),y(g,o,m),y(g,a,m),y(g,c,m),y(g,l,m),I(l,h),y(g,f,m),P(d,g,m),p=!0},p(g,m){(!p||m&8)&&J(r,g[3]),(!p||m&1)&&u!==(u=pe(g[0])+"")&&J(h,u);let T={};m&1&&(T.balance=g[0]),m&2&&(T.goal=g[1]),m&4&&(T.road=g[2]),d.$set(T)},i(g){p||(b(d.$$.fragment,g),p=!0)},o(g){S(d.$$.fragment,g),p=!1},d(g){g&&v(e),g&&v(i),g&&v(s),g&&v(o),g&&v(a),g&&v(c),g&&v(l),g&&v(f),M(d,g)}}}function xd(t){let e,n;return e=new at({props:{$$slots:{default:[Ud]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,[i]){let s={};i&47&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Vd(t,e,n){let r,i,s,o;qe(t,Je,c=>n(1,s=c)),qe(t,Ye,c=>n(4,o=c));let{balance:a=0}=e;return t.$$set=c=>{"balance"in c&&n(0,a=c.balance)},t.$$.update=()=>{if(t.$$.dirty&3){e:n(2,r=s-a)}if(t.$$.dirty&16){e:n(3,i=o.displayName?o.displayName.split(" ")[0]:"crack")}},[a,s,r,i,o]}var Ra=class extends z{constructor(e){super();K(this,e,Vd,xd,H,{balance:0})}},Na=Ra;function Fd(t){let e,n,r,i,s,o,a;return{c(){e=E("div"),n=E("button"),r=E("img"),r.src!==(i=`icons/${t[1]}.svg`)&&_(r,"src",i),_(r,"alt",t[1]),_(r,"class","svelte-qgfubh"),Le(r,"selected__icon",t[0]===t[1]),_(e,"class",s=""+(zt(t[2])+" svelte-qgfubh")),Le(e,"selected",t[0]===t[1])},m(c,l){y(c,e,l),I(e,n),I(n,r),o||(a=[Ae(n,"click",t[3]),Ae(e,"click",t[5])],o=!0)},p(c,[l]){l&3&&Le(r,"selected__icon",c[0]===c[1]),l&3&&Le(e,"selected",c[0]===c[1])},i:X,o:X,d(c){c&&v(e),o=!1,ze(a)}}}function $d(t,e,n){let{props:r={icon:"menu",style:"primary",onClick:()=>console.log("click")}}=e,{current:i="profile"}=e,{icon:s,style:o,onClick:a}=r;function c(l){zi(t,l)}return t.$$set=l=>{"props"in l&&n(4,r=l.props),"current"in l&&n(0,i=l.current)},[i,s,o,a,r,c]}var Da=class extends z{constructor(e){super();K(this,e,$d,Fd,H,{props:4,current:0})}},Te=Da;function jd(t){let e,n,r,i;n=new Te({props:{props:t[1]}});let s=t[2].default,o=Tt(s,t,t[3],null);return{c(){e=E("div"),U(n.$$.fragment),r=N(),o&&o.c(),_(e,"class","btn--close svelte-1hoiz49")},m(a,c){y(a,e,c),P(n,e,null),y(a,r,c),o&&o.m(a,c),i=!0},p(a,c){o&&o.p&&(!i||c&8)&&It(o,s,a,a[3],c,null,null)},i(a){i||(b(n.$$.fragment,a),b(o,a),i=!0)},o(a){S(n.$$.fragment,a),S(o,a),i=!1},d(a){a&&v(e),M(n),a&&v(r),o&&o.d(a)}}}function qd(t){let e,n,r,i;return n=new at({props:{$$slots:{default:[jd]},$$scope:{ctx:t}}}),{c(){e=E("div"),U(n.$$.fragment),_(e,"class",r=""+(zt(t[0]?"hideModal":"modal")+" svelte-1hoiz49"))},m(s,o){y(s,e,o),P(n,e,null),i=!0},p(s,[o]){let a={};o&8&&(a.$$scope={dirty:o,ctx:s}),n.$set(a),(!i||o&1&&r!==(r=""+(zt(s[0]?"hideModal":"modal")+" svelte-1hoiz49")))&&_(e,"class",r)},i(s){i||(b(n.$$.fragment,s),i=!0)},o(s){S(n.$$.fragment,s),i=!1},d(s){s&&v(e),M(n)}}}function Bd(t,e,n){let{$$slots:r={},$$scope:i}=e,{hideModal:s=!0}=e,a={icon:"delete",style:"tertiary",onClick:()=>n(0,s=!s)};return t.$$set=c=>{"hideModal"in c&&n(0,s=c.hideModal),"$$scope"in c&&n(3,i=c.$$scope)},[s,a,r,i]}var Oa=class extends z{constructor(e){super();K(this,e,Bd,qd,H,{hideModal:0})}},La=Oa;function Hd(t){let e,n,r,i;return{c(){e=E("input"),_(e,"type","text"),_(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),_(e,"placeholder",t[2])},m(s,o){y(s,e,o),xe(e,t[0]),r||(i=Ae(e,"input",t[8]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&_(e,"class",n),o&4&&_(e,"placeholder",s[2]),o&1&&e.value!==s[0]&&xe(e,s[0])},d(s){s&&v(e),r=!1,i()}}}function zd(t){let e,n,r,i;return{c(){e=E("input"),_(e,"type","date"),_(e,"class",n="input__"+t[1]+" svelte-17e1blc"),_(e,"placeholder",t[2])},m(s,o){y(s,e,o),xe(e,t[0]),r||(i=Ae(e,"input",t[7]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" svelte-17e1blc")&&_(e,"class",n),o&4&&_(e,"placeholder",s[2]),o&1&&xe(e,s[0])},d(s){s&&v(e),r=!1,i()}}}function Kd(t){let e,n,r,i;return{c(){e=E("input"),_(e,"type","number"),_(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),_(e,"placeholder",t[2])},m(s,o){y(s,e,o),xe(e,t[0]),r||(i=Ae(e,"input",t[6]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&_(e,"class",n),o&4&&_(e,"placeholder",s[2]),o&1&&St(e.value)!==s[0]&&xe(e,s[0])},d(s){s&&v(e),r=!1,i()}}}function Gd(t){let e,n,r,i;function s(c,l){if(c[4]==="number")return Kd;if(c[4]==="date")return zd;if(c[4]==="text")return Hd}let o=s(t,-1),a=o&&o(t);return{c(){e=E("div"),n=E("h3"),r=G(t[3]),i=N(),a&&a.c(),_(n,"class","mt-8 mb-1"),_(e,"class","svelte-17e1blc")},m(c,l){y(c,e,l),I(e,n),I(n,r),I(e,i),a&&a.m(e,null)},p(c,[l]){l&8&&J(r,c[3]),o===(o=s(c,l))&&a?a.p(c,l):(a&&a.d(1),a=o&&o(c),a&&(a.c(),a.m(e,null)))},i:X,o:X,d(c){c&&v(e),a&&a.d()}}}function Wd(t,e,n){let{icon:r="menu"}=e,{style:i="primary"}=e,{placeholder:s="0€"}=e,{value:o=""}=e,{label:a=""}=e,{type:c="number"}=e;function l(){o=St(this.value),n(0,o)}function u(){o=this.value,n(0,o)}function h(){o=this.value,n(0,o)}return t.$$set=f=>{"icon"in f&&n(5,r=f.icon),"style"in f&&n(1,i=f.style),"placeholder"in f&&n(2,s=f.placeholder),"value"in f&&n(0,o=f.value),"label"in f&&n(3,a=f.label),"type"in f&&n(4,c=f.type)},[o,i,s,a,c,r,l,u,h]}var Pa=class extends z{constructor(e){super();K(this,e,Wd,Gd,H,{icon:5,style:1,placeholder:2,value:0,label:3,type:4})}},Cn=Pa;function Xd(t){let e,n,r,i,s,o=t[2].default,a=Tt(o,t,t[1],null);return{c(){e=E("div"),a&&a.c(),n=N(),r=E("span"),i=G(t[0]),_(r,"class","tooltiptext svelte-1betoo6"),_(e,"class","tooltip svelte-1betoo6")},m(c,l){y(c,e,l),a&&a.m(e,null),I(e,n),I(e,r),I(r,i),s=!0},p(c,[l]){a&&a.p&&(!s||l&2)&&It(a,o,c,c[1],l,null,null),(!s||l&1)&&J(i,c[0])},i(c){s||(b(a,c),s=!0)},o(c){S(a,c),s=!1},d(c){c&&v(e),a&&a.d(c)}}}function Qd(t,e,n){let{$$slots:r={},$$scope:i}=e,{label:s="Soy un tooltip"}=e;return t.$$set=o=>{"label"in o&&n(0,s=o.label),"$$scope"in o&&n(1,i=o.$$scope)},[s,i,r]}var Ma=class extends z{constructor(e){super();K(this,e,Qd,Xd,H,{label:0})}},Rn=Ma;function Ua(t,e,n){let r=t.slice();return r[4]=e[n].today,r[5]=e[n].amount,r[6]=e[n].id_saving,r}function xa(t){let e,n,r=t[4]+"",i,s,o,a=Yi(t[5])+"",c,l,u,h,f,d;function p(){return t[3](t[6])}return h=new Te({props:{props:{icon:"delete",style:"tertiary",onClick:p}}}),{c(){e=E("tr"),n=E("td"),i=G(r),s=N(),o=E("td"),c=G(a),l=N(),u=E("td"),U(h.$$.fragment),f=N(),_(n,"class","svelte-1q78vq1"),_(o,"class","svelte-1q78vq1"),_(u,"class","svelte-1q78vq1")},m(g,m){y(g,e,m),I(e,n),I(n,i),I(e,s),I(e,o),I(o,c),I(e,l),I(e,u),P(h,u,null),I(e,f),d=!0},p(g,m){t=g,(!d||m&2)&&r!==(r=t[4]+"")&&J(i,r),(!d||m&2)&&a!==(a=Yi(t[5])+"")&&J(c,a);let T={};m&7&&(T.props={icon:"delete",style:"tertiary",onClick:p}),h.$set(T)},i(g){d||(b(h.$$.fragment,g),d=!0)},o(g){S(h.$$.fragment,g),d=!1},d(g){g&&v(e),M(h)}}}function Yd(t){let e,n,r,i,s,o=t[1],a=[];for(let l=0;l<o.length;l+=1)a[l]=xa(Ua(t,o,l));let c=l=>S(a[l],1,1,()=>{a[l]=null});return{c(){e=E("table"),n=E("thead"),n.innerHTML=`<tr><th class="svelte-1q78vq1">FECHA</th> 

			<th class="svelte-1q78vq1">CANTIDAD</th></tr>`,r=N(),i=E("tbody");for(let l=0;l<a.length;l+=1)a[l].c();_(e,"class","text-center w-full")},m(l,u){y(l,e,u),I(e,n),I(e,r),I(e,i);for(let h=0;h<a.length;h+=1)a[h].m(i,null);s=!0},p(l,[u]){if(u&7){o=l[1];let h;for(h=0;h<o.length;h+=1){let f=Ua(l,o,h);a[h]?(a[h].p(f,u),b(a[h],1)):(a[h]=xa(f),a[h].c(),b(a[h],1),a[h].m(i,null))}for(ae(),h=o.length;h<a.length;h+=1)c(h);ce()}},i(l){if(!s){for(let u=0;u<o.length;u+=1)b(a[u]);s=!0}},o(l){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)S(a[u]);s=!1},d(l){l&&v(e),Qe(a,l)}}}function Jd(t,e,n){let{removeSaving:r=()=>{}}=e,{savings:i=[]}=e,{id:s=0}=e,o=a=>r(s,a);return t.$$set=a=>{"removeSaving"in a&&n(0,r=a.removeSaving),"savings"in a&&n(1,i=a.savings),"id"in a&&n(2,s=a.id)},[r,i,s,o]}var Va=class extends z{constructor(e){super();K(this,e,Jd,Yd,H,{removeSaving:0,savings:1,id:2})}},Fa=Va;function $a(t,e,n){let r=t.slice();return r[15]=e[n].label,r[16]=e[n].icon,r[17]=e[n].style,r[18]=e[n].onClick,r}function Zd(t){let e,n,r;return n=new Te({props:{props:t[9][1]}}),{c(){e=E("div"),U(n.$$.fragment),_(e,"class","float-right  mt-5 flex flex-row")},m(i,s){y(i,e,s),P(n,e,null),r=!0},p:X,i(i){r||(b(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&v(e),M(n)}}}function ep(t){let e,n,r,i,s,o=t[9],a=[];for(let l=0;l<o.length;l+=1)a[l]=ja($a(t,o,l));let c=l=>S(a[l],1,1,()=>{a[l]=null});return i=new Fa({props:{savings:t[8],removeSaving:t[2],id:t[4]}}),{c(){e=E("div");for(let l=0;l<a.length;l+=1)a[l].c();n=N(),r=E("div"),U(i.$$.fragment),_(e,"class","float-right  mt-5 flex flex-row"),_(r,"class","mt-20 svelte-gm1d5i"),Le(r,"hide",!t[5])},m(l,u){y(l,e,u);for(let h=0;h<a.length;h+=1)a[h].m(e,null);y(l,n,u),y(l,r,u),P(i,r,null),s=!0},p(l,u){if(u&512){o=l[9];let f;for(f=0;f<o.length;f+=1){let d=$a(l,o,f);a[f]?(a[f].p(d,u),b(a[f],1)):(a[f]=ja(d),a[f].c(),b(a[f],1),a[f].m(e,null))}for(ae(),f=o.length;f<a.length;f+=1)c(f);ce()}let h={};u&256&&(h.savings=l[8]),u&4&&(h.removeSaving=l[2]),u&16&&(h.id=l[4]),i.$set(h),u&32&&Le(r,"hide",!l[5])},i(l){if(!s){for(let u=0;u<o.length;u+=1)b(a[u]);b(i.$$.fragment,l),s=!0}},o(l){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)S(a[u]);S(i.$$.fragment,l),s=!1},d(l){l&&v(e),Qe(a,l),l&&v(n),l&&v(r),M(i)}}}function tp(t){let e,n,r;return e=new Te({props:{props:{icon:t[16],style:t[17],onClick:t[18]}}}),{c(){U(e.$$.fragment),n=N()},m(i,s){P(e,i,s),y(i,n,s),r=!0},p:X,i(i){r||(b(e.$$.fragment,i),r=!0)},o(i){S(e.$$.fragment,i),r=!1},d(i){M(e,i),i&&v(n)}}}function ja(t){let e,n;return e=new Rn({props:{label:t[15],$$slots:{default:[tp]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,i){let s={};i&2097152&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function np(t){let e,n,r,i,s,o,a,c,l,u,h,f,d;function p(D){t[11](D)}let g={label:"añade la cantidad",type:"number"};t[6]!==void 0&&(g.value=t[6]),i=new Cn({props:g}),st.push(()=>Gt(i,"value",p));function m(D){t[12](D)}let T={label:"¿Cuándo añadiste los fondos?",type:"date"};t[7]!==void 0&&(T.value=t[7]),a=new Cn({props:T}),st.push(()=>Gt(a,"value",m));let A=[ep,Zd],C=[];function F(D,V){return D[1].length>0?0:1}return u=F(t,-1),h=C[u]=A[u](t),{c(){e=E("h1"),n=G(t[3]),r=N(),U(i.$$.fragment),o=N(),U(a.$$.fragment),l=N(),h.c(),f=Ke(),_(e,"class","noselect text-2xl")},m(D,V){y(D,e,V),I(e,n),y(D,r,V),P(i,D,V),y(D,o,V),P(a,D,V),y(D,l,V),C[u].m(D,V),y(D,f,V),d=!0},p(D,V){(!d||V&8)&&J(n,D[3]);let de={};!s&&V&64&&(s=!0,de.value=D[6],Kt(()=>s=!1)),i.$set(de);let ve={};!c&&V&128&&(c=!0,ve.value=D[7],Kt(()=>c=!1)),a.$set(ve);let ie=u;u=F(D,V),u===ie?C[u].p(D,V):(ae(),S(C[ie],1,1,()=>{C[ie]=null}),ce(),h=C[u],h?h.p(D,V):(h=C[u]=A[u](D),h.c()),b(h,1),h.m(f.parentNode,f))},i(D){d||(b(i.$$.fragment,D),b(a.$$.fragment,D),b(h),d=!0)},o(D){S(i.$$.fragment,D),S(a.$$.fragment,D),S(h),d=!1},d(D){D&&v(e),D&&v(r),M(i,D),D&&v(o),M(a,D),D&&v(l),C[u].d(D),D&&v(f)}}}function rp(t){let e,n;return e=new La({props:{hideModal:t[0],$$slots:{default:[np]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,[i]){let s={};i&1&&(s.hideModal=r[0]),i&2097662&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function ip(t,e,n){let r,{hideModal:i=!0}=e,{save:s=()=>{}}=e,{savings:o=[]}=e,{removeSaving:a=()=>{}}=e,{title:c="Title"}=e,{id:l="0"}=e,u=!1,h=()=>n(5,u=!u),f=0,d=()=>n(0,i=!i),p=[{icon:"history",label:"Ver el historial ",style:"modal",onClick:h},{icon:"saving",label:"Guardar Datos",style:"modal",onClick:()=>{s(l,g,f)}}],g=Ta;function m(A){f=A,n(6,f)}function T(A){g=A,n(7,g)}return t.$$set=A=>{"hideModal"in A&&n(0,i=A.hideModal),"save"in A&&n(10,s=A.save),"savings"in A&&n(1,o=A.savings),"removeSaving"in A&&n(2,a=A.removeSaving),"title"in A&&n(3,c=A.title),"id"in A&&n(4,l=A.id)},t.$$.update=()=>{if(t.$$.dirty&2){e:n(8,r=o.sort((A,C)=>(A=A.today.split("-").join(""),C=C.today.split("-").join(""),C-A)))}},[i,o,a,c,l,u,f,g,r,p,s,m,T]}var qa=class extends z{constructor(e){super();K(this,e,ip,rp,H,{hideModal:0,save:10,savings:1,removeSaving:2,title:3,id:4})}},Ba=qa;function Ha(t,e,n){let r=t.slice();return r[22]=e[n],r}function sp(t){let e,n,r,i,s,o=pe(t[3])+"",a,c,l=isFinite(t[8]),u=l&&za(t);return{c(){e=E("h6"),n=G(t[4]),r=N(),i=E("div"),s=E("p"),a=G(o),c=N(),u&&u.c(),_(e,"class","mb-1"),_(s,"class","euros"),_(i,"class","data svelte-1ar7xro")},m(h,f){y(h,e,f),I(e,n),y(h,r,f),y(h,i,f),I(i,s),I(s,a),I(i,c),u&&u.m(i,null)},p(h,f){f&16&&J(n,h[4]),f&8&&o!==(o=pe(h[3])+"")&&J(a,o),f&256&&(l=isFinite(h[8])),l?u?u.p(h,f):(u=za(h),u.c(),u.m(i,null)):u&&(u.d(1),u=null)},i:X,o:X,d(h){h&&v(e),h&&v(r),h&&v(i),u&&u.d()}}}function op(t){let e,n,r,i,s,o=isFinite(t[8]),a,c,l,u,h,f=o&&Ka(t),d=t[13],p=[];for(let m=0;m<d.length;m+=1)p[m]=Ga(Ha(t,d,m));let g=m=>S(p[m],1,1,()=>{p[m]=null});return{c(){e=E("input"),n=N(),r=E("div"),i=E("input"),s=N(),f&&f.c(),a=N(),c=E("div");for(let m=0;m<p.length;m+=1)p[m].c();_(e,"name","title"),_(e,"class","title w-64 svelte-1ar7xro"),_(e,"type","text"),_(i,"name","number"),_(i,"type","number"),_(i,"class","svelte-1ar7xro"),_(r,"class","data svelte-1ar7xro"),_(c,"class"," flex flex-row float-right")},m(m,T){y(m,e,T),xe(e,t[4]),y(m,n,T),y(m,r,T),I(r,i),xe(i,t[3]),I(r,s),f&&f.m(r,null),y(m,a,T),y(m,c,T);for(let A=0;A<p.length;A+=1)p[A].m(c,null);l=!0,u||(h=[Ae(e,"change",t[11]),Ae(e,"input",t[15]),Ae(i,"change",t[12]),Ae(i,"input",t[16])],u=!0)},p(m,T){if(T&16&&e.value!==m[4]&&xe(e,m[4]),T&8&&St(i.value)!==m[3]&&xe(i,m[3]),T&256&&(o=isFinite(m[8])),o?f?f.p(m,T):(f=Ka(m),f.c(),f.m(r,null)):f&&(f.d(1),f=null),T&8192){d=m[13];let A;for(A=0;A<d.length;A+=1){let C=Ha(m,d,A);p[A]?(p[A].p(C,T),b(p[A],1)):(p[A]=Ga(C),p[A].c(),b(p[A],1),p[A].m(c,null))}for(ae(),A=d.length;A<p.length;A+=1)g(A);ce()}},i(m){if(!l){for(let T=0;T<d.length;T+=1)b(p[T]);l=!0}},o(m){p=p.filter(Boolean);for(let T=0;T<p.length;T+=1)S(p[T]);l=!1},d(m){m&&v(e),m&&v(n),m&&v(r),f&&f.d(),m&&v(a),m&&v(c),Qe(p,m),u=!1,ze(h)}}}function za(t){let e,n=ot(t[8])+"",r;return{c(){e=E("p"),r=G(n),_(e,"class"," percent svelte-1ar7xro")},m(i,s){y(i,e,s),I(e,r)},p(i,s){s&256&&n!==(n=ot(i[8])+"")&&J(r,n)},d(i){i&&v(e)}}}function Ka(t){let e,n=ot(t[8])+"",r;return{c(){e=E("p"),r=G(n),_(e,"class"," percent svelte-1ar7xro")},m(i,s){y(i,e,s),I(e,r)},p(i,s){s&256&&n!==(n=ot(i[8])+"")&&J(r,n)},d(i){i&&v(e)}}}function Ga(t){let e,n,r,i;return n=new Te({props:{props:t[22]}}),{c(){e=E("div"),U(n.$$.fragment),r=N()},m(s,o){y(s,e,o),P(n,e,null),I(e,r),i=!0},p:X,i(s){i||(b(n.$$.fragment,s),i=!0)},o(s){S(n.$$.fragment,s),i=!1},d(s){s&&v(e),M(n)}}}function Wa(t){let e,n,r=pe(t[7])+"",i;return{c(){e=E("h3"),n=G("Rentabilidad: "),i=G(r),_(e,"class","mt-1 revenue text-sm")},m(s,o){y(s,e,o),I(e,n),I(e,i)},p(s,o){o&128&&r!==(r=pe(s[7])+"")&&J(i,r)},d(s){s&&v(e)}}}function ap(t){let e,n,r,i,s,o,a;e=new Ba({props:{hideModal:t[6],title:t[4],id:t[9],save:t[1].saving,savings:t[2].saving,removeSaving:t[1].removeSaving}});let c=[op,sp],l=[];function u(f,d){return f[0]?0:1}i=u(t,-1),s=l[i]=c[i](t);let h=t[10].length>0&&!t[0]&&Wa(t);return{c(){U(e.$$.fragment),n=N(),r=E("div"),s.c(),o=N(),h&&h.c(),_(r,"class","w-64 m-3 relative svelte-1ar7xro"),Le(r,"hightlight",t[5])},m(f,d){P(e,f,d),y(f,n,d),y(f,r,d),l[i].m(r,null),I(r,o),h&&h.m(r,null),a=!0},p(f,[d]){let p={};d&64&&(p.hideModal=f[6]),d&16&&(p.title=f[4]),d&2&&(p.save=f[1].saving),d&4&&(p.savings=f[2].saving),d&2&&(p.removeSaving=f[1].removeSaving),e.$set(p);let g=i;i=u(f,d),i===g?l[i].p(f,d):(ae(),S(l[g],1,1,()=>{l[g]=null}),ce(),s=l[i],s?s.p(f,d):(s=l[i]=c[i](f),s.c()),b(s,1),s.m(r,o)),f[10].length>0&&!f[0]?h?h.p(f,d):(h=Wa(f),h.c(),h.m(r,null)):h&&(h.d(1),h=null),d&32&&Le(r,"hightlight",f[5])},i(f){a||(b(e.$$.fragment,f),b(s),a=!0)},o(f){S(e.$$.fragment,f),S(s),a=!1},d(f){M(e,f),f&&v(n),f&&v(r),l[i].d(),h&&h.d()}}}function cp(t,e,n){let r,i,s,{edit:o=!1}=e,{data:a=[]}=e,{props:c={id:"9c72c81f-480d-4575-bdff-45e50afc7a33",title:"Total Title",number:0,hightlight:!1,saving:[]}}=e,{id:l,title:u,number:h,hightlight:f,saving:d}=c,p=!0,g=()=>n(6,p=!p),m={remove:()=>a.remove(l),changeName:()=>a.change(l,"title",u),changeNumber:()=>a.change(l,"number",h),changeHigh:()=>a.change(l,"hightlight",f),toogleHigh:()=>{n(5,f=!f),C()}},{changeName:T,changeNumber:A,changeHigh:C,remove:F,toogleHigh:D}=m,V=[{icon:"delete",style:"tertiary",onClick:F},{icon:"highlight",style:"tertiary",onClick:D},{icon:"saving",style:"tertiary",onClick:g}];function de(){u=this.value,n(4,u)}function ve(){h=St(this.value),n(3,h)}t.$$set=ie=>{"edit"in ie&&n(0,o=ie.edit),"data"in ie&&n(1,a=ie.data),"props"in ie&&n(2,c=ie.props)},t.$$.update=()=>{if(t.$$.dirty&16392){e:n(7,i=h-r)}if(t.$$.dirty&16392){e:n(8,s=(h-r)/r)}};e:n(14,r=d.reduce((ie,Bi)=>ie+Bi.amount,0));return[o,a,c,h,u,f,p,i,s,l,d,T,A,V,r,de,ve]}var Xa=class extends z{constructor(e){super();K(this,e,cp,ap,H,{edit:0,data:1,props:2})}},Qa=Xa;var yr,lp=new Uint8Array(16);function up(){if(!yr&&(yr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!yr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yr(lp)}var hp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function fp(t){return typeof t=="string"&&hp.test(t)}var ye=[];for(var Ji=0;Ji<256;++Ji)ye.push((Ji+256).toString(16).substr(1));function dp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ye[t[e+0]]+ye[t[e+1]]+ye[t[e+2]]+ye[t[e+3]]+"-"+ye[t[e+4]]+ye[t[e+5]]+"-"+ye[t[e+6]]+ye[t[e+7]]+"-"+ye[t[e+8]]+ye[t[e+9]]+"-"+ye[t[e+10]]+ye[t[e+11]]+ye[t[e+12]]+ye[t[e+13]]+ye[t[e+14]]+ye[t[e+15]]).toLowerCase();if(!fp(n))throw TypeError("Stringified UUID is invalid");return n}function Zi(t,e,n){t=t||{};var r=t.random||(t.rng||up)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return dp(r)}var pp={title:"Título",number:0,revenue:0,percent:0,hightlight:!1,saving:[]},mp=()=>{let{subscribe:t,update:e,set:n}=Xt(),r=()=>{let f=[];return t(d=>f=d),f};return{subscribe:t,update:e,add:()=>e(f=>[...f,{...pp,id:Zi()}]),set:n,remove:f=>e(d=>d.filter(p=>p.id!==f)),change:(f,d,p)=>{let g=r();g.map(m=>m.id===f?m[d]=p:""),n(g)},balance:()=>r().reduce((p,g)=>p+g.number,0),saving:(f,d,p)=>{let g=r(),m=Zi();g.map(T=>T.id===f?T.saving=[...T.saving,{id_saving:m,today:d,amount:p}]:""),n(g)},revenue:()=>{let f=r(),d=[];return f.map(g=>g.saving.map(m=>d=[...d,m.amount])),d.reduce((g,m)=>g+m,0)},detectNoSavings:()=>{let f=r(),d=[];return f.map(g=>g.saving.length===0?d=[...d,g.number]:""),d.reduce((g,m)=>g+m,0)},removeSaving:(f,d)=>{let m=r().filter(T=>T.id===f)[0].saving.filter(T=>T.id_saving!=d);e(T=>T.map(A=>A.id==f?{...A,saving:m}:A))}}},le=mp(),Ya=()=>{le.set([])};function Ja(t,e,n){let r=t.slice();return r[2]=e[n],r}function ec(t){let e=[],n=new Map,r,i,s=t[1],o=a=>a[2].id;for(let a=0;a<s.length;a+=1){let c=Ja(t,s,a),l=o(c);n.set(l,e[a]=Za(l,c))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=Ke()},m(a,c){for(let l=0;l<e.length;l+=1)e[l].m(a,c);y(a,r,c),i=!0},p(a,c){c&3&&(s=a[1],ae(),e=An(e,c,o,1,a,s,n,r.parentNode,kn,Za,r,Ja),ce())},i(a){if(!i){for(let c=0;c<s.length;c+=1)b(e[c]);i=!0}},o(a){for(let c=0;c<e.length;c+=1)S(e[c]);i=!1},d(a){for(let c=0;c<e.length;c+=1)e[c].d(a);a&&v(r)}}}function Za(t,e){let n,r,i;return r=new Qa({props:{edit:e[0],props:e[2],data:le}}),{key:t,first:null,c(){n=Ke(),U(r.$$.fragment),this.first=n},m(s,o){y(s,n,o),P(r,s,o),i=!0},p(s,o){e=s;let a={};o&1&&(a.edit=e[0]),o&2&&(a.props=e[2]),r.$set(a)},i(s){i||(b(r.$$.fragment,s),i=!0)},o(s){S(r.$$.fragment,s),i=!1},d(s){s&&v(n),M(r,s)}}}function gp(t){let e,n,r=t[1]&&ec(t);return{c(){r&&r.c(),e=Ke()},m(i,s){r&&r.m(i,s),y(i,e,s),n=!0},p(i,[s]){i[1]?r?(r.p(i,s),s&2&&b(r,1)):(r=ec(i),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(ae(),S(r,1,1,()=>{r=null}),ce())},i(i){n||(b(r),n=!0)},o(i){S(r),n=!1},d(i){r&&r.d(i),i&&v(e)}}}function vp(t,e,n){let r;qe(t,le,s=>n(1,r=s));let{edit:i=!1}=e;return t.$$set=s=>{"edit"in s&&n(0,i=s.edit)},[i,r]}var tc=class extends z{constructor(e){super();K(this,e,vp,gp,H,{edit:0})}},_r=tc;function yp(t){let e,n,r,i,s,o=pe(t[0])+"",a,c,l,u=ot(t[1])+"",h;return{c(){e=E("div"),n=E("h6"),n.textContent=`${t[2]}`,r=N(),i=E("div"),s=E("p"),a=G(o),c=N(),l=E("p"),h=G(u),_(n,"class","mb-1"),_(s,"class","euros"),_(l,"class","percent svelte-1yu2d20"),_(i,"class","data svelte-1yu2d20"),_(e,"class","w-64 m-3 relative m-6 svelte-1yu2d20"),Le(e,"hightlight",t[3])},m(f,d){y(f,e,d),I(e,n),I(e,r),I(e,i),I(i,s),I(s,a),I(i,c),I(i,l),I(l,h)},p(f,[d]){d&1&&o!==(o=pe(f[0])+"")&&J(a,o),d&2&&u!==(u=ot(f[1])+"")&&J(h,u)},i:X,o:X,d(f){f&&v(e)}}}function _p(t,e,n){let{revenue:r=0}=e,{percent:i=0}=e,{props:s={title:"Beneficios",hightlight:!0}}=e,{title:o,hightlight:a}=s;return t.$$set=c=>{"revenue"in c&&n(0,r=c.revenue),"percent"in c&&n(1,i=c.percent),"props"in c&&n(4,s=c.props)},[r,i,o,a,s]}var nc=class extends z{constructor(e){super();K(this,e,_p,yp,H,{revenue:0,percent:1,props:4})}},rc=nc;function wp(t){let e,n,r,i,s,o;return e=new Na({props:{balance:t[0]}}),r=new rc({props:{revenue:t[1],percent:t[2]}}),s=new _r({}),{c(){U(e.$$.fragment),n=N(),U(r.$$.fragment),i=N(),U(s.$$.fragment)},m(a,c){P(e,a,c),y(a,n,c),P(r,a,c),y(a,i,c),P(s,a,c),o=!0},p(a,[c]){let l={};c&1&&(l.balance=a[0]),e.$set(l);let u={};c&2&&(u.revenue=a[1]),c&4&&(u.percent=a[2]),r.$set(u)},i(a){o||(b(e.$$.fragment,a),b(r.$$.fragment,a),b(s.$$.fragment,a),o=!0)},o(a){S(e.$$.fragment,a),S(r.$$.fragment,a),S(s.$$.fragment,a),o=!1},d(a){M(e,a),a&&v(n),M(r,a),a&&v(i),M(s,a)}}}function Ep(t,e,n){let r=0,i=0,s=0;return le.subscribe(o=>{o&&(n(0,r=le.balance()),n(1,i=le.balance()-le.revenue()-le.detectNoSavings()),n(2,s=(le.balance()-le.revenue()-le.detectNoSavings())/le.revenue()))}),[r,i,s]}var ic=class extends z{constructor(e){super();K(this,e,Ep,wp,H,{})}},sc=ic;var es=function(t,e){return es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},es(t,e)};function bp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");es(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ts=function(){return ts=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ts.apply(this,arguments)};function wr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Tp(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Ip(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ns(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Er(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function oc(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var Sp=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)==55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},kp=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{var s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ap={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,d=l&63;c||(d=64,o||(f=64)),r.push(n[u],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sp(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kp(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length,a=o?n[t.charAt(i)]:0;++i;var c=i<t.length,l=c?n[t.charAt(i)]:64;++i;var u=i<t.length,h=u?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw Error();var f=s<<2|a>>4;if(r.push(f),l!==64){var d=a<<4&240|l>>2;if(r.push(d),h!==64){var p=l<<6&192|h;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ac=function(t){try{return Ap.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};var Cp=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();function ue(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function br(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ue())}function Tr(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ir(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cc(){return ue().indexOf("Electron/")>=0}function Sr(){var t=ue();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lc(){return ue().indexOf("MSAppHost/")>=0}var Rp="FirebaseError",Dn=function(t){bp(e,t);function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name=Rp,Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,Nn.prototype.create),s}return e}(Error),Nn=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+e,o=this.errors[e],a=o?Np(o,i):"Error",c=this.serviceName+": "+a+" ("+s+").",l=new Dn(s,c,i);return l},t}();function Np(t,e){return t.replace(Dp,function(n,r){var i=e[r];return i!=null?String(i):"<"+r+"?>"})}var Dp=/\{\$([^}]+)}/g;function uc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qt(t){for(var e=[],n=function(c,l){Array.isArray(l)?l.forEach(function(u){e.push(encodeURIComponent(c)+"="+encodeURIComponent(u))}):e.push(encodeURIComponent(c)+"="+encodeURIComponent(l))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r],o=s[0],a=s[1];n(o,a)}return e.length?"&"+e.join("&"):""}function hc(t,e){var n=new Op(t,e);return n.subscribe.bind(n)}var Op=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Lp(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=rs),s.error===void 0&&(s.error=rs),s.complete===void 0&&(s.complete=rs);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch(a){}}),this.observers.push(s),o},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function Lp(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function rs(){}function Ve(t){return t&&t._delegate?t._delegate:t}var ct=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();var lt="[DEFAULT]";var Up=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(e){e===void 0&&(e=lt);var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new Cp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(s){}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n=ts({identifier:lt,optional:!1},e),r=n.identifier,i=n.optional,s=this.normalizeInstanceIdentifier(r);if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(Mp(e))try{this.getOrInitializeService({instanceIdentifier:lt})}catch(h){}try{for(var i=ns(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var o=Er(s.value,2),a=o[0],c=o[1],l=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:l});c.resolve(u)}catch(h){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=lt),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return Tp(this,void 0,void 0,function(){var e;return Ip(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(oc(oc([],Er(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),Er(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=lt),this.instances.has(e)},t.prototype.initialize=function(e){var n,r;e===void 0&&(e={});var i=e.instanceIdentifier,s=i===void 0?lt:i,o=e.options,a=o===void 0?{}:o,c=this.normalizeInstanceIdentifier(s);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:c,options:a});try{for(var u=ns(this.instancesDeferred.entries()),h=u.next();!h.done;h=u.next()){var f=Er(h.value,2),d=f[0],p=f[1],g=this.normalizeInstanceIdentifier(d);c===g&&p.resolve(l)}}catch(m){n={error:m}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return this.invokeOnInitCallbacks(l,c),l},t.prototype.onInit=function(e){var n=this;return this.onInitCallbacks.add(e),function(){n.onInitCallbacks.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var r,i;try{for(var s=ns(this.onInitCallbacks),o=s.next();!o.done;o=s.next()){var a=o.value;try{a(e,n)}catch(c){}}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,r=e.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Pp(n),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(o){}return s||null},t.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:lt:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function Pp(t){return t===lt?void 0:t}function Mp(t){return t.instantiationMode==="EAGER"}var xp=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new Up(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function Be(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var At,Q;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Q||(Q={}));var Vp={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},Fp=Q.INFO,$p=(At={},At[Q.DEBUG]="log",At[Q.VERBOSE]="log",At[Q.INFO]="info",At[Q.WARN]="warn",At[Q.ERROR]="error",At),jp=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),s=$p[e];if(s)console[s].apply(console,Be(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},On=function(){function t(e){this.name=e,this._logLevel=Fp,this._logHandler=jp,this._userLogHandler=null}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Q))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?Vp[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Be([this,Q.DEBUG],e)),this._logHandler.apply(this,Be([this,Q.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Be([this,Q.VERBOSE],e)),this._logHandler.apply(this,Be([this,Q.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Be([this,Q.INFO],e)),this._logHandler.apply(this,Be([this,Q.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Be([this,Q.WARN],e)),this._logHandler.apply(this,Be([this,Q.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Be([this,Q.ERROR],e)),this._logHandler.apply(this,Be([this,Q.ERROR],e))},t}();var fc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qp(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function qp(t){let e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}var dc="@firebase/app-exp",Bp="0.0.900-exp.d92a36260";var is=new On("@firebase/app"),Hp="@firebase/app-compat",zp="@firebase/analytics-compat",Kp="@firebase/analytics-exp",Gp="@firebase/auth-exp",Wp="@firebase/auth-compat",Xp="@firebase/database",Qp="@firebase/database-compat",Yp="@firebase/functions-exp",Jp="@firebase/functions-compat",Zp="@firebase/installations-exp",em="@firebase/installations-compat",tm="@firebase/messaging-exp",nm="@firebase/messaging-compat",rm="@firebase/performance-exp",im="@firebase/performance-compat",sm="@firebase/remote-config-exp",om="@firebase/remote-config-compat",am="@firebase/storage",cm="@firebase/storage-compat",lm="@firebase/firestore",um="@firebase/firestore-compat",hm="firebase-exp",fm="9.0.0-beta.2";var pc="[DEFAULT]",dm={[dc]:"fire-core",[Hp]:"fire-core-compat",[Kp]:"fire-analytics",[zp]:"fire-analytics-compat",[Gp]:"fire-auth",[Wp]:"fire-auth-compat",[Xp]:"fire-rtdb",[Qp]:"fire-rtdb-compat",[Yp]:"fire-fn",[Jp]:"fire-fn-compat",[Zp]:"fire-iid",[em]:"fire-iid-compat",[tm]:"fire-fcm",[nm]:"fire-fcm-compat",[rm]:"fire-perf",[im]:"fire-perf-compat",[sm]:"fire-rc",[om]:"fire-rc-compat",[am]:"fire-gcs",[cm]:"fire-gcs-compat",[lm]:"fire-fst",[um]:"fire-fst-compat","fire-js":"fire-js",[hm]:"fire-js-all"};var kr=new Map,ss=new Map;function pm(t,e){try{t.container.addComponent(e)}catch(n){is.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ct(t){let e=t.name;if(ss.has(e))return is.debug(`There were multiple attempts to register component ${e}.`),!1;ss.set(e,t);for(let n of kr.values())pm(n,t);return!0}function Ln(t,e){return t.container.getProvider(e)}var mm={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Ar=new Nn("app","Firebase",mm);var mc=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ct("app-exp",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}};var Rt=fm;function os(t,e={}){typeof e!="object"&&(e={name:e});let n=Object.assign({name:pc,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Ar.create("bad-app-name",{appName:String(r)});if(kr.has(r))throw Ar.create("duplicate-app",{appName:r});let i=new xp(r);for(let o of ss.values())i.addComponent(o);let s=new mc(t,n,i);return kr.set(r,s),s}function Cr(t=pc){let e=kr.get(t);if(!e)throw Ar.create("no-app",{appName:t});return e}function ut(t,e,n){var r;let i=(r=dm[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),is.warn(a.join(" "));return}Ct(new ct(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function gm(t){Ct(new ct("platform-logger",e=>new fc(e),"PRIVATE")),ut(dc,Bp,t),ut("fire-js","")}gm();var vm="firebase-exp",ym="9.0.0-beta.2";ut(vm,ym,"app");var _m={apiKey:"AIzaSyDWiDgqYUOUq1tsA8C5zY3eJR170KRa3qA",authDomain:"finanzas-cfeb0.firebaseapp.com",projectId:"finanzas-cfeb0",storageBucket:"finanzas-cfeb0.appspot.com",messagingSenderId:"245107666949",appId:"1:245107666949:web:f8bac696fa6a205541ac6c",measurementId:"G-LR1WRTGGG2"},Zw=os(_m);function wm(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var gc=new Nn("auth","Firebase",wm());var vc=new On("@firebase/auth-exp");function Rr(t,...e){vc.logLevel<=Q.ERROR&&vc.error(`Auth (${Rt}): ${t}`,...e)}function Ze(t,...e){throw as(t,...e)}function Yt(t,...e){return as(t,...e)}function as(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gc.create(t,...e)}function $(t,e,...n){if(!t)throw as(e,...n)}function et(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Rr(e),new Error(e)}function ht(t,e){t||et(e)}var yc=new Map;function tt(t){ht(t instanceof Function,"Expected a class definition");let e=yc.get(t);return e?(ht(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yc.set(t,e),e)}function Em(t,e){let n=Ln(t,"auth-exp");if(n.isInitialized()){let i=n.getImmediate();Ze(i,"already-initialized")}return n.initialize({options:e})}function bm(t,e){let n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tt);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function cs(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Tm(){return _c()==="http:"||_c()==="https:"}function _c(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Im(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Tm()||Tr()||"connection"in navigator)?navigator.onLine:!0}function Sm(){if(typeof navigator=="undefined")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Jt=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ht(n>e,"Short delay should be less than long delay!"),this.isMobile=br()||Ir()}get(){return Im()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ls(t,e){ht(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Nr=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var km={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"};var Am=new Jt(3e4,6e4);function Cm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Dr(t,e,n,r,i={}){return wc(t,i,()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Qt(Object.assign({key:t.config.apiKey},o)).slice(1),c=new(Nr.headers());return c.set("Content-Type","application/json"),c.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&c.set("X-Firebase-Locale",t.languageCode),Nr.fetch()(Ec(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function wc(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},km),e);try{let i=new bc(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw us(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=(s.ok?o.errorMessage:o.error.message).split(" : ")[0];if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw us(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw us(t,"email-already-in-use",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");Ze(t,l)}}catch(i){if(i instanceof Dn)throw i;Ze(t,"network-request-failed")}}async function Rm(t,e,n,r,i={}){let s=await Dr(t,e,n,r,i);return"mfaPendingCredential"in s&&Ze(t,"multi-factor-auth-required",{serverResponse:s}),s}function Ec(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?ls(t.config,i):`${t.config.apiScheme}://${i}`}var bc=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yt(this.auth,"timeout")),Am.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function us(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Yt(t,e,r);return i.customData._tokenResponse=n,i}async function Nm(t,e){return Dr(t,"POST","/v1/accounts:delete",e)}async function Dm(t,e){return Dr(t,"POST","/v1/accounts:lookup",e)}function Pn(t){if(!!t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function Om(t,e=!1){let n=Ve(t),r=await n.getIdToken(e),i=fs(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pn(hs(i.auth_time)),issuedAtTime:Pn(hs(i.iat)),expirationTime:Pn(hs(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hs(t){return Number(t)*1e3}function fs(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rr("JWT malformed, contained fewer than 3 sections"),null;try{let i=ac(n);return i?JSON.parse(i):(Rr("Failed to decode base64 JWT payload"),null)}catch(i){return Rr("Caught error parsing JWT payload as JSON",i),null}}function Lm(t){let e=fs(t);return $(e,"internal-error"),$(typeof e.exp!="undefined","internal-error"),$(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}async function Mn(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dn&&Pm(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Pm({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Tc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ds=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pn(this.lastLoginAt),this.creationTime=Pn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Or(t){var e;let n=t.auth,r=await t.getIdToken(),i=await Mn(t,Dm(n,{idToken:r}));$(i==null?void 0:i.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?Um(s.providerUserInfo):[],a=Mm(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(a==null?void 0:a.length),u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ds(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function xm(t){let e=Ve(t);await Or(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Mm(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Um(t){return t.map(e=>{var{providerId:n}=e,r=wr(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function Vm(t,e){let n=await wc(t,{},()=>{let r=Qt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Ec(t,i,"/v1/token",`key=${s}`);return Nr.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}var Zt=class{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken!="undefined","internal-error"),$(typeof e.refreshToken!="undefined","internal-error");let n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):Lm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return $(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:s}=await Vm(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Zt;return r&&($(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&($(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&($(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zt,this.toJSON())}_performRefresh(){return et("not implemented")}};function ft(t,e){$(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}var dt=class{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=wr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Tc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.metadata=new ds(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let n=await Mn(this,this.stsTokenManager.getToken(this.auth,e));return $(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Om(this,e)}reload(){return xm(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new dt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Or(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await Mn(this,Nm(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,d=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,T=(l=n.createdAt)!==null&&l!==void 0?l:void 0,A=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:C,emailVerified:F,isAnonymous:D,providerData:V,stsTokenManager:de}=n;$(C&&de,e,"internal-error");let ve=Zt.fromJSON(this.name,de);$(typeof C=="string",e,"internal-error"),ft(h,e.name),ft(f,e.name),$(typeof F=="boolean",e,"internal-error"),$(typeof D=="boolean",e,"internal-error"),ft(d,e.name),ft(p,e.name),ft(g,e.name),ft(m,e.name),ft(T,e.name),ft(A,e.name);let ie=new dt({uid:C,auth:e,email:f,emailVerified:F,displayName:h,isAnonymous:D,photoURL:p,phoneNumber:d,tenantId:g,stsTokenManager:ve,createdAt:T,lastLoginAt:A});return V&&Array.isArray(V)&&(ie.providerData=V.map(Bi=>Object.assign({},Bi))),m&&(ie._redirectEventId=m),ie}static async _fromIdTokenResponse(e,n,r=!1){let i=new Zt;i.updateFromServerResponse(n);let s=new dt({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Or(s),s}};var ps=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){let n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};ps.type="NONE";var Ic=ps;function Lr(t,e,n){return`firebase:${t}:${e}:${n}`}var en=class{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Lr(this.userKey,i.apiKey,s),this.fullPersistenceKey=Lr("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?dt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new en(tt(Ic),e,r);let i=tt(Ic);for(let a of n)if(await a._isAvailable()){i=a;break}let s=null,o=Lr(r,e.config.apiKey,e.name);for(let a of n)try{let c=await a._get(o);if(c){let l=dt._fromJSON(e,c);a!==i&&(s=l);break}}catch(c){}return s&&await i._set(o,s.toJSON()),await Promise.all(n.map(async a=>{if(a!==i)try{await a._remove(o)}catch(c){}})),new en(i,e,r)}};function Dc(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ac(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sc(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rc(e))return"Blackberry";if(Nc(e))return"Webos";if(ms(e))return"Safari";if((e.includes("chrome/")||kc(e))&&!e.includes("edge/"))return"Chrome";if(Cc(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Sc(t=ue()){return/firefox\//i.test(t)}function ms(t=ue()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kc(t=ue()){return/crios\//i.test(t)}function Ac(t=ue()){return/iemobile/i.test(t)}function Cc(t=ue()){return/android/i.test(t)}function Rc(t=ue()){return/blackberry/i.test(t)}function Nc(t=ue()){return/webos/i.test(t)}function Pr(t=ue()){return/iphone|ipad|ipod/i.test(t)}function Fm(t=ue()){var e;return Pr(t)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function $m(){return Sr()&&document.documentMode===10}function Oc(t=ue()){return Pr(t)||Cc(t)||Nc(t)||Rc(t)||/windows phone/i.test(t)||Ac(t)}function jm(){try{return!!(window&&window!==window.top)}catch(t){return!1}}function Lc(t,e=[]){let n;switch(t){case"Browser":n=Dc(ue());break;case"Worker":n=`${Dc(ue())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rt}/${r}`}var Pc=class{constructor(e,n){this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gs(this),this.idTokenSubscription=new gs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.redirectInitializerError=null,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gc,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tt(n)),this._initializationPromise=this.queue(async()=>{var r;this._deleted||(this.persistenceManager=await en.create(this,e),!this._deleted&&(((r=this._popupRedirectResolver)===null||r===void 0?void 0:r._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(n),!this._deleted&&(this._isInitialized=!0)))}),this._initializationPromise.then(()=>{if(this.redirectInitializerError)throw this.redirectInitializerError})}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var n;let r=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=r==null?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===s)&&(o==null?void 0:o.user)&&(r=o.user)}return r?r._redirectEventId?($(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)):this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){this.redirectInitializerError=r,await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Or(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Sm()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let n=e?Ve(e):null;return n&&$(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(tt(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&tt(e)||this._popupRedirectResolver;$(n,this,"argument-error"),this.redirectPersistenceManager=await en.create(this,[tt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next,o=this._isInitialized?Promise.resolve():this._initializationPromise;return $(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}};function vs(t){return Ve(t)}var gs=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=hc(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ys=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return et("not implemented")}_getIdTokenResponse(e){return et("not implemented")}_linkToIdToken(e,n){return et("not implemented")}_getReauthenticationResolver(e){return et("not implemented")}};async function tn(t,e){return Rm(t,"POST","/v1/accounts:signInWithIdp",Cm(t,e))}var qm="http://localhost",Un=class extends ys{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){let n=new Un(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ze("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=wr(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new Un(r,i);return Object.assign(o,s),o}_getIdTokenResponse(e){let n=this.buildRequest();return tn(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,tn(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,tn(e,n)}buildRequest(){let e={requestUri:qm,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qt(n)}return e}};var Mr=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var _s=class extends Mr{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var He=class extends _s{constructor(){super("google.com");this.addScope("profile")}static credential(e,n){return Un._fromParams({providerId:He.PROVIDER_ID,signInMethod:He.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return He.credentialFromTaggedObject(e)}static credentialFromError(e){return He.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return He.credential(n,r)}catch(i){return null}}};He.GOOGLE_SIGN_IN_METHOD="google.com";He.PROVIDER_ID="google.com";var Nt=class{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let s=await dt._fromIdTokenResponse(e,r,i),o=Mc(r);return new Nt({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=Mc(r);return new Nt({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function Mc(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var xn=class extends Dn{constructor(e,n,r,i){var s;super(n.code,n.message);this.operationType=r,this.user=i,this.name="FirebaseError",Object.setPrototypeOf(this,xn.prototype),this.appName=e.name,this.code=n.code,this.tenantId=(s=e.tenantId)!==null&&s!==void 0?s:void 0,this.serverResponse=n.customData.serverResponse}static _fromErrorAndOperation(e,n,r,i){return new xn(e,n,r,i)}};function Uc(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xn._fromErrorAndOperation(t,s,e,r):s})}async function Bm(t,e,n=!1){let r=await Mn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nt._forOperation(t,"link",r)}async function Hm(t,e,n=!1){let{auth:r}=t,i="reauthenticate";try{let s=await Mn(t,Uc(r,i,e,t),n);$(s.idToken,r,"internal-error");let o=fs(s.idToken);$(o,r,"internal-error");let{sub:a}=o;return $(t.uid===a,r,"user-mismatch"),Nt._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ze(r,"user-mismatch"),s}}async function zm(t,e,n=!1){let r="signIn",i=await Uc(t,r,e),s=await Nt._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function xc(t,e,n,r){return Ve(t).onAuthStateChanged(e,n,r)}function Vc(t){return Ve(t).signOut()}var Km="@firebase/auth-exp",Gm="0.0.900-exp.d92a36260";var Fc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{var i;e(((i=r)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Wm(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Xm(t){Ct(new ct("auth-exp",(e,{options:n})=>{let r=e.getProvider("app-exp").getImmediate(),{apiKey:i,authDomain:s}=r.options;return(o=>{$(i&&!i.includes(":"),"invalid-api-key",{appName:o.name}),$(!(s==null?void 0:s.includes(":")),"argument-error",{appName:o.name});let a={apiKey:i,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lc(t)},c=new Pc(o,a);return bm(c,n),c})(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ct(new ct("auth-internal",e=>{let n=vs(e.getProvider("auth-exp").getImmediate());return(r=>new Fc(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ut(Km,Gm,Wm(t))}var Ur="__sak";var ws=class{constructor(e,n){this.storage=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ur,"1"),this.storage.removeItem(Ur),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}};function Qm(){let t=ue();return ms(t)||Pr(t)}var Ym=1e3,Jm=10,Es=class extends ws{constructor(){super(window.localStorage,"LOCAL");this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Qm()&&jm(),this.fallbackToPolling=Oc(),this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}let r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}let i=()=>{let o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$m()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Jm):i()}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ym)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){let n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}};Es.type="LOCAL";var Zm=Es;function eg(t){return Promise.all(t.map(async e=>{try{let n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}var Vn=class{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;let r=new Vn(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o==null?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});let a=Array.from(o).map(async l=>l(n.origin,s)),c=await eg(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};Vn.receivers=[];function tg(t="",e=20){return`${t}${Math.floor(Math.random()*Math.pow(10,e))}`}var $c=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=tg();i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Ge(){return window}function ng(t){Ge().location.href=t}function jc(){return typeof Ge().WorkerGlobalScope!="undefined"&&typeof Ge().importScripts=="function"}async function rg(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function ig(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sg(){return jc()?self:null}var qc="firebaseLocalStorageDb",og=1,xr="firebaseLocalStorage",Bc="fbase_key",nn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Vr(t,e){return t.transaction([xr],e?"readwrite":"readonly").objectStore(xr)}function ag(){let t=indexedDB.deleteDatabase(qc);return new nn(t).toPromise()}function bs(){let t=indexedDB.open(qc,og);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(xr,{keyPath:Bc})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;if(r.objectStoreNames.contains(xr))e(r);else return await ag(),bs()})})}async function Hc(t,e,n){let r=Vr(t,!0).put({[Bc]:e,value:n});return new nn(r).toPromise()}async function cg(t,e){let n=Vr(t,!1).get(e),r=await new nn(n).toPromise();return r===void 0?null:r.value}function zc(t,e){let n=Vr(t,!0).delete(e);return new nn(n).toPromise()}var lg=800,ug=3,Ts=class{constructor(){this.type="LOCAL",this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bs(),this.db)}async _withRetries(e){let n=0;for(;;)try{let r=await this._openDb();return await e(r)}catch(r){if(n++>ug)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vn._getInstance(sg()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rg(),!this.activeServiceWorker)return;this.sender=new $c(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ig()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await bs();return await Hc(e,Ur,"1"),await zc(e,Ur),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hc(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){let n=await this._withRetries(r=>cg(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zc(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(i=>{let s=Vr(i,!1).getAll();return new nn(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;for(let{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(let i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lg)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Ts.type="LOCAL";var hg=Ts;var fg=10*60*1e3,Kc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dg(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Wc(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fg&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gc(e))}saveEventToCache(e){this.cachedEventUids.add(Gc(e)),this.lastProcessedEventTime=Date.now()}};function Gc(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Wc({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dg(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wc(t);default:return!1}}function pg(t){return`${t||""}${Math.floor(Math.random()*1e9)}`}async function mg(t){return Dr(t,"GET","/v1/projects",{})}var gg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vg=/^https?/;async function _g(t){if(t.config.emulator)return;let{authorizedDomains:e}=await mg(t);for(let n of e)try{if(yg(n))return}catch(r){}Ze(t,"unauthorized-domain")}function yg(t){let e=cs(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vg.test(n))return!1;if(gg.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}function wg(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Eg(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n,r.type="text/javascript",r.charset="UTF-8",wg().appendChild(r)})}function bg(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Tg=new Jt(3e4,6e4);function Xc(){let t=Ge().___jsl;if(t==null?void 0:t.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ig(t){return new Promise((e,n)=>{var r,i,s;function o(){Xc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xc(),n(Yt(t,"network-request-failed"))},timeout:Tg.get()})}if((i=(r=Ge().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0?void 0:i.Iframe)e(gapi.iframes.getContext());else if((s=Ge().gapi)===null||s===void 0?void 0:s.load)o();else{let a=bg("iframefcb");return Ge()[a]=()=>{gapi.load?o():n(Yt(t,"network-request-failed"))},Eg(`https://apis.google.com/js/api.js?onload=${a}`)}}).catch(e=>{throw Fr=null,e})}var Fr=null;function Sg(t){return Fr=Fr||Ig(t),Fr}var kg=new Jt(5e3,15e3),Ag="__/auth/iframe",Cg="emulator/auth/iframe",Rg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Ng=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dg(t){let e=t.config;$(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?ls(e,Cg):`https://${t.config.authDomain}/${Ag}`,r={apiKey:e.apiKey,appName:t.name,v:Rt},i=Ng.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qt(r).slice(1)}`}async function Og(t){let e=await Sg(t),n=Ge().gapi;return $(n,t,"internal-error"),e.open({where:document.body,url:Dg(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rg,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Yt(t,"network-request-failed"),a=Ge().setTimeout(()=>{s(o)},kg.get());function c(){Ge().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var Is=class extends ws{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}};Is.type="SESSION";var Lg=Is;var Pg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mg=500,Ug=600,xg="_blank",Vg="http://localhost",Ss=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}};function $g(t,e,n,r=Mg,i=Ug){let s=Math.min((window.screen.availHeight-i)/2,0).toString(),o=Math.min((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Pg),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ue().toLowerCase();n&&(a=kc(l)?xg:n),Sc(l)&&(e=e||Vg,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[d,p])=>`${f}${d}=${p},`,"");if(Fm(l)&&a!=="_self")return Fg(e||"",a),new Ss(null);let h=window.open(e||"",a,u);$(h,t,"popup-blocked");try{h.focus()}catch(f){}return new Ss(h)}function Fg(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}function Qc(t,e){return e?tt(e):($(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var $r=class extends ys{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return tn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return tn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return tn(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function jg(t){return zm(t.auth,new $r(t),t.bypassAuthState)}function qg(t){let{auth:e,user:n}=t;return $(n,e,"internal-error"),Hm(n,new $r(t),t.bypassAuthState)}async function Bg(t){let{auth:e,user:n}=t;return $(n,e,"internal-error"),Bm(n,new $r(t),t.bypassAuthState)}var Yc=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jg;case"linkViaPopup":case"linkViaRedirect":return Bg;case"reauthViaPopup":case"reauthViaRedirect":return qg;default:Ze(this.auth,"internal-error")}}resolve(e){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Hg="pendingRedirect",Jc=new Map,Zc=class extends Yc{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r);this.eventId=null}async execute(){let e=Jc.get(this.auth._key());if(!e){try{let r=await zg(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jc.set(this.auth._key(),e)}return e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function zg(t,e){let n=el(e),r=await ks(t)._get(n)==="true";return await ks(t)._remove(n),r}async function Kg(t,e){return ks(t)._set(el(e),"true")}function ks(t){return tt(t._redirectPersistence)}function el(t){return Lr(Hg,t.config.apiKey,t.name)}function tl(t,e,n){return Gg(t,e,n)}async function Gg(t,e,n){let r=vs(t);$(e instanceof Mr,t,"argument-error");let i=Qc(r,n);return await Kg(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Wg(t,e,n=!1){let r=vs(t),i=Qc(r,e),o=await new Zc(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var Xg="__/auth/handler",Qg="emulator/auth/handler";function nl(t,e,n,r,i,s){$(t.config.authDomain,t,"auth-domain-config-required"),$(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Rt,eventId:i};if(e instanceof Mr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[c,l]of Object.entries(s||{}))o[c]=l}if(e instanceof _s){let c=e.getScopes().filter(l=>l!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let c of Object.keys(a))a[c]===void 0&&delete a[c];return`${Yg(t)}?${Qt(a).slice(1)}`}function Yg({config:t}){return t.emulator?ls(t,Qg):`https://${t.authDomain}/${Xg}`}var As="webStorageSupport",rl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lg,this._completeRedirectFn=Wg}async _openPopup(e,n,r,i){var s;ht((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=nl(e,n,r,cs(),i);return $g(e,o,pg())}async _openRedirect(e,n,r,i){return await this._originValidation(e),ng(nl(e,n,r,cs(),i)),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ht(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r}async initAndGetManager(e){let n=await Og(e),r=new Kc(e);return n.register("authEvent",i=>($(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(As,{type:As},i=>{var s;let o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[As];o!==void 0&&n(!!o),Ze(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_g(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Oc()||ms()||Pr()}},Jg=rl,nE=new Jt(3e4,6e4);var rE=new Jt(2e3,1e4);function il(t=Cr()){let e=Ln(t,"auth-exp");return e.isInitialized()?e.getImmediate():Em(t,{popupRedirectResolver:Jg,persistence:[hg,Zm]})}Xm("Browser");var jr=typeof jr!="undefined"?jr:typeof self!="undefined"?self:typeof window!="undefined"?window:{};var Cs=function(t,e){return Cs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Cs(t,e)};function Zg(t,e){Cs(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function sl(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ev=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof jr!="undefined"?jr:typeof self!="undefined"?self:{},R,Rs=Rs||{},j=ev||self;function qr(){}function Ns(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Fn(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function nv(t){return Object.prototype.hasOwnProperty.call(t,Ds)&&t[Ds]||(t[Ds]=++tv)}var Ds="closure_uid_"+(1e9*Math.random()>>>0),tv=0;function rv(t,e,n){return t.call.apply(t.bind,arguments)}function iv(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ie(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ie=rv:Ie=iv,Ie.apply(null,arguments)}function Br(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function We(){return Date.now()}function Ce(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function pt(){this.j=this.j,this.i=this.i}var sv=0;pt.prototype.j=!1;pt.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),sv!=0))var t=nv(this)};pt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ol=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},al=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=typeof t=="string"?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function av(t){e:{for(var e=ov,n=t.length,r=typeof t=="string"?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function cl(t){return Array.prototype.concat.apply([],arguments)}function Os(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Hr(t){return/^[\s\xa0]*$/.test(t)}var ll=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Re(t,e){return t.indexOf(e)!=-1}function Ls(t,e){return t<e?-1:t>e?1:0}var Ne;e:{if(Ps=j.navigator,Ps&&(Ms=Ps.userAgent,Ms)){Ne=Ms;break e}Ne=""}var Ps,Ms;function Us(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ul(t){var e={};for(var n in t)e[n]=t[n];return e}var hl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fl(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var s=0;s<hl.length;s++)n=hl[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function xs(t){return xs[" "](t),t}xs[" "]=qr;function lv(t,e){var n=cv;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var uv=Re(Ne,"Opera"),mt=Re(Ne,"Trident")||Re(Ne,"MSIE"),dl=Re(Ne,"Edge"),Vs=dl||mt,pl=Re(Ne,"Gecko")&&!(Re(Ne.toLowerCase(),"webkit")&&!Re(Ne,"Edge"))&&!(Re(Ne,"Trident")||Re(Ne,"MSIE"))&&!Re(Ne,"Edge"),hv=Re(Ne.toLowerCase(),"webkit")&&!Re(Ne,"Edge");function ml(){var t=j.document;return t?t.documentMode:void 0}var zr;e:{if(Kr="",Gr=function(){var t=Ne;if(pl)return/rv:([^\);]+)(\)|;)/.exec(t);if(dl)return/Edge\/([\d\.]+)/.exec(t);if(mt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(hv)return/WebKit\/(\S+)/.exec(t);if(uv)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Gr&&(Kr=Gr?Gr[1]:""),mt&&(Wr=ml(),Wr!=null&&Wr>parseFloat(Kr))){zr=String(Wr);break e}zr=Kr}var Kr,Gr,Wr,cv={};function gl(t){return lv(t,function(){for(var e=0,n=ll(String(zr)).split("."),r=ll(String(t)).split("."),i=Math.max(n.length,r.length),s=0;e==0&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o[0].length==0&&a[0].length==0)break;e=Ls(o[1].length==0?0:parseInt(o[1],10),a[1].length==0?0:parseInt(a[1],10))||Ls(o[2].length==0,a[2].length==0)||Ls(o[2],a[2]),o=o[3],a=a[3]}while(e==0)}return 0<=e})}var Fs;j.document&&mt?($s=ml(),Fs=$s||parseInt(zr,10)||void 0):Fs=void 0;var $s,vl=Fs,js=!mt||9<=Number(vl),fv=mt&&!gl("9"),dv=function(){if(!j.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{j.addEventListener("test",qr,e),j.removeEventListener("test",qr,e)}catch(n){}return t}();function Se(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}Se.prototype.b=function(){this.defaultPrevented=!0};function $n(t,e){if(Se.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(pl){e:{try{xs(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:pv[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ce($n,Se);var pv={2:"touch",3:"pen",4:"mouse"};$n.prototype.b=function(){$n.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,fv)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var jn="closure_listenable_"+(1e6*Math.random()|0),mv=0;function gv(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++mv,this.Y=this.Z=!1}function Xr(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Qr(t){this.src=t,this.a={},this.b=0}Qr.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.a[s],t||(t=this.a[s]=[],this.b++);var o=qs(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):(e=new gv(e,this.src,s,!!r,i),e.Z=n,t.push(e)),e};function Bs(t,e){var n=e.type;if(n in t.a){var r=t.a[n],i=ol(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Xr(e),t.a[n].length==0&&(delete t.a[n],t.b--))}}function qs(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.ca==r)return i}return-1}var Hs="closure_lm_"+(1e6*Math.random()|0),zs={};function Ks(t,e,n,r,i){if(r&&r.once)return _l(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ks(t,e[s],n,r,i);return null}return n=Gs(n),t&&t[jn]?t.va(e,n,Fn(r)?!!r.capture:!!r,i):yl(t,e,n,!1,r,i)}function yl(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Fn(i)?!!i.capture:!!i;if(o&&!js)return null;var a=Ws(t);if(a||(t[Hs]=a=new Qr(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=vv(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)dv||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wl(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function vv(){var t=yv,e=js?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function _l(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)_l(t,e[s],n,r,i);return null}return n=Gs(n),t&&t[jn]?t.wa(e,n,Fn(r)?!!r.capture:!!r,i):yl(t,e,n,!0,r,i)}function El(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)El(t,e[s],n,r,i);else r=Fn(r)?!!r.capture:!!r,n=Gs(n),t&&t[jn]?(t=t.c,e=String(e).toString(),e in t.a&&(s=t.a[e],n=qs(s,n,r,i),-1<n&&(Xr(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.a[e],t.b--)))):t&&(t=Ws(t))&&(e=t.a[e.toString()],t=-1,e&&(t=qs(e,n,r,i)),(n=-1<t?e[t]:null)&&Xs(n))}function Xs(t){if(typeof t!="number"&&t&&!t.Y){var e=t.src;if(e&&e[jn])Bs(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wl(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ws(e))?(Bs(n,t),n.b==0&&(n.src=null,e[Hs]=null)):Xr(t)}}}function wl(t){return t in zs?zs[t]:zs[t]="on"+t}function bl(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Xs(t),n.call(r,e)}function yv(t,e){if(t.Y)return!0;if(!js){if(!e)e:{e=["window","event"];for(var n=j,r=0;r<e.length;r++)if(n=n[e[r]],n==null){e=null;break e}e=n}return e=new $n(e,this),bl(t,e)}return bl(t,new $n(e,this))}function Ws(t){return t=t[Hs],t instanceof Qr?t:null}var Qs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gs(t){return typeof t=="function"?t:(t[Qs]||(t[Qs]=function(e){return t.handleEvent(e)}),t[Qs])}function Fe(){pt.call(this),this.c=new Qr(this),this.J=this,this.C=null}Ce(Fe,pt);Fe.prototype[jn]=!0;R=Fe.prototype;R.addEventListener=function(t,e,n,r){Ks(this,t,e,n,r)};R.removeEventListener=function(t,e,n,r){El(this,t,e,n,r)};function _e(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,typeof e=="string")e=new Se(e,t);else if(e instanceof Se)e.target=e.target||t;else{var i=e;e=new Se(r,t),fl(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=Yr(o,r,!0,e)&&i}if(o=e.a=t,i=Yr(o,r,!0,e)&&i,i=Yr(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.a=n[s],i=Yr(o,r,!1,e)&&i}R.G=function(){if(Fe.X.G.call(this),this.c){var t=this.c,e;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Xr(n[r]);delete t.a[e],t.b--}}this.C=null};R.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)};R.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};function Yr(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,c=o.ca||o.src;o.Z&&Bs(t.c,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ys=j.JSON.stringify;function Tl(){this.b=this.a=null}var Il=new(function(){function t(e,n){this.c=e,this.f=n,this.b=0,this.a=null}return t.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},t}())(function(){return new Js},function(t){t.reset()});Tl.prototype.add=function(t,e){var n=Il.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n};function _v(){var t=Sl,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Js(){this.next=this.b=this.a=null}Js.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};Js.prototype.reset=function(){this.next=this.b=this.a=null};function wv(t){j.setTimeout(function(){throw t},0)}function kl(t,e){Zs||Ev(),eo||(Zs(),eo=!0),Sl.add(t,e)}var Zs;function Ev(){var t=j.Promise.resolve(void 0);Zs=function(){t.then(bv)}}var eo=!1,Sl=new Tl;function bv(){for(var t;t=_v();){try{t.a.call(t.b)}catch(n){wv(n)}var e=Il;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}eo=!1}function Jr(t,e){Fe.call(this),this.b=t||1,this.a=e||j,this.f=Ie(this.Za,this),this.g=We()}Ce(Jr,Fe);R=Jr.prototype;R.aa=!1;R.M=null;R.Za=function(){if(this.aa){var t=We()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),_e(this,"tick"),this.aa&&(to(this),this.start()))}};R.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=We())};function to(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}R.G=function(){Jr.X.G.call(this),to(this),delete this.a};function no(t,e,n){if(typeof t=="function")n&&(t=Ie(t,n));else if(t&&typeof t.handleEvent=="function")t=Ie(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:j.setTimeout(t,e||0)}function Al(t){t.a=no(function(){t.a=null,t.c&&(t.c=!1,Al(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}var Tv=function(t){Zg(e,t);function e(n,r){var i=t.call(this)||this;return i.g=n,i.h=r,i.b=null,i.c=!1,i.a=null,i}return e.prototype.f=function(n){this.b=arguments,this.a?this.c=!0:Al(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(j.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(pt);function qn(t){pt.call(this),this.b=t,this.a={}}Ce(qn,pt);var Cl=[];function Rl(t,e,n,r){Array.isArray(n)||(n&&(Cl[0]=n.toString()),n=Cl);for(var i=0;i<n.length;i++){var s=Ks(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Nl(t){Us(t.a,function(e,n){this.a.hasOwnProperty(n)&&Xs(e)},t),t.a={}}qn.prototype.G=function(){qn.X.G.call(this),Nl(this)};qn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ro(){this.a=!0}function Iv(t,e,n,r,i,s){t.info(function(){if(t.a)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Sv(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function rn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+kv(t,n)+(r?" "+r:"")})}function Av(t,e){t.info(function(){return"TIMEOUT: "+e})}ro.prototype.info=function(){};function kv(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Ys(n)}catch(a){return e}}var Dt={},Dl=null;function Zr(){return Dl=Dl||new Fe}Dt.Fa="serverreachability";function Ol(t){Se.call(this,Dt.Fa,t)}Ce(Ol,Se);function Bn(t){var e=Zr();_e(e,new Ol(e,t))}Dt.STAT_EVENT="statevent";function Ll(t,e){Se.call(this,Dt.STAT_EVENT,t),this.stat=e}Ce(Ll,Se);function De(t){var e=Zr();_e(e,new Ll(e,t))}Dt.Ga="timingevent";function Pl(t){Se.call(this,Dt.Ga,t)}Ce(Pl,Se);function Hn(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return j.setTimeout(function(){t()},e)}var ei={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ml={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ul(){}Ul.prototype.a=null;function xl(t){var e;return(e=t.a)||(e=t.a={}),e}function Vl(){}var zn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function io(){Se.call(this,"d")}Ce(io,Se);function so(){Se.call(this,"c")}Ce(so,Se);var Fl;function $l(){}Ce($l,Ul);Fl=new $l;function Kn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new qn(this),this.P=Cv,t=Vs?125:void 0,this.R=new Jr(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}var Cv=45e3,jl={},oo={};R=Kn.prototype;R.setTimeout=function(t){this.P=t};function ao(t,e,n){t.H=1,t.i=ti(nt(e)),t.j=n,t.I=!0,ql(t,null)}function ql(t,e){t.u=We(),Gn(t),t.l=nt(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Bl(n.b,"t",r),t.D=0,t.a=Hl(t.g,t.g.C?e:null),0<t.O&&(t.F=new Tv(Ie(t.Ca,t,t.a),t.O)),Rl(t.J,t.a,"readystatechange",t.Xa),e=t.B?ul(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Bn(1),Iv(t.c,t.m,t.l,t.f,t.S,t.j)}R.Xa=function(t){t=t.target;var e=this.F;e&&gt(t)==3?e.f():this.Ca(t)};R.Ca=function(t){try{if(t==this.a)e:{var e=gt(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||e==3&&!Vs&&!this.a.$())){this.A||e!=4||n==7||(n==8||0>=r?Bn(3):Bn(2)),ni(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=i==200,Sv(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){t:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hr(o)){var c=o;break t}}c=null}if(c)rn(this.c,this.f,c,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,co(this,c);else{this.b=!1,this.h=3,De(12),sn(this),ri(this);break e}}this.I?(zl(this,e,s),Vs&&this.b&&e==3&&(Rl(this.J,this.R,"tick",this.Wa),this.R.start())):(rn(this.c,this.f,s,null),co(this,s)),e==4&&sn(this),this.b&&!this.A&&(e==4?Kl(this.g,this):(this.b=!1,Gn(this)))}else i==400&&0<s.indexOf("Unknown SID")?(this.h=3,De(12)):(this.h=0,De(13)),sn(this),ri(this)}}}catch(l){}finally{}};function zl(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Rv(t,n);if(i==oo){e==4&&(t.h=4,De(14),r=!1),rn(t.c,t.f,null,"[Incomplete Response]");break}else if(i==jl){t.h=4,De(15),rn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}else rn(t.c,t.f,i,null),co(t,i)}e==4&&n.length==0&&(t.h=1,De(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,e=t.g,e.a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),lo(e),e.F=!0,De(11))):(rn(t.c,t.f,n,"[Invalid Chunked Response]"),sn(t),ri(t))}R.Wa=function(){if(this.a){var t=gt(this.a),e=this.a.$();this.D<e.length&&(ni(this),zl(this,t,e),this.b&&t!=4&&Gn(this))}};function Rv(t,e){var n=t.D,r=e.indexOf(`
`,n);return r==-1?oo:(n=Number(e.substring(n,r)),isNaN(n)?jl:(r+=1,r+n>e.length?oo:(e=e.substr(r,n),t.D=r+n,e)))}R.cancel=function(){this.A=!0,sn(this)};function Gn(t){t.T=We()+t.P,Gl(t,t.P)}function Gl(t,e){if(t.o!=null)throw Error("WatchDog timer not null");t.o=Hn(Ie(t.Va,t),e)}function ni(t){t.o&&(j.clearTimeout(t.o),t.o=null)}R.Va=function(){this.o=null;var t=We();0<=t-this.T?(Av(this.c,this.l),this.H!=2&&(Bn(3),De(17)),sn(this),this.h=2,ri(this)):Gl(this,this.T-t)};function ri(t){t.g.v==0||t.A||Kl(t.g,t)}function sn(t){ni(t);var e=t.F;e&&typeof e.ja=="function"&&e.ja(),t.F=null,to(t.R),Nl(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function co(t,e){try{var n=t.g;if(n.v!=0&&(n.a==t||uo(n.b,t))){if(n.I=t.N,!t.C&&uo(n.b,t)&&n.v==3){try{var r=n.ka.a.parse(e)}catch(m){r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0)e:if(!n.j){if(n.a)if(n.a.u+3e3<t.u)oi(n),ii(n);else break e;po(n),De(18)}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&n.o==0&&!n.m&&(n.m=Hn(Ie(n.Sa,n),6e3));if(1>=Wl(n.b)&&n.ea){try{n.ea()}catch(m){}n.ea=void 0}}else Ot(n,11)}else if((t.C||n.a==t)&&oi(n),!Hr(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],n.v==2)if(i[0]=="c"){n.J=i[1],n.ga=i[2];var s=i[3];s!=null&&(n.ha=s,n.c.info("VER="+n.ha));var o=i[4];o!=null&&(n.pa=o,n.c.info("SVER="+n.pa));var a=i[5];if(a!=null&&typeof a=="number"&&0<a){var c=1.5*a;n.D=c,n.c.info("backChannelRequestTimeoutMs_="+c)}c=n;var l=t.a;if(l){var u=l.a?l.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var h=c.b;!h.a&&(Re(u,"spdy")||Re(u,"quic")||Re(u,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ho(h,h.b),h.b=null))}if(c.A){var f=l.a?l.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(c.na=f,re(c.B,c.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=We()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),c=n;var d=t;if(c.la=Yl(c,c.C?c.ga:null,c.fa),d.C){Xl(c.b,d);var p=d,g=c.D;g&&p.setTimeout(g),p.o&&(ni(p),Gn(p)),c.a=d}else Ql(c);0<n.g.length&&si(n)}else i[0]!="stop"&&i[0]!="close"||Ot(n,7);else n.v==3&&(i[0]=="stop"||i[0]=="close"?i[0]=="stop"?Ot(n,7):fo(n):i[0]!="noop"&&n.f&&n.f.sa(i),n.o=0)}Bn(4)}catch(m){}}function Nv(t){if(t.K&&typeof t.K=="function")return t.K();if(typeof t=="string")return t.split("");if(Ns(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return t=e}function mo(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ns(t)||typeof t=="string")al(t,e,void 0);else{if(t.L&&typeof t.L=="function")var n=t.L();else if(t.K&&typeof t.K=="function")n=void 0;else if(Ns(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=Nv(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function on(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof on)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}R=on.prototype;R.K=function(){go(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t};R.L=function(){return go(this),this.a.concat()};function go(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Lt(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Lt(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}R.get=function(t,e){return Lt(this.b,t)?this.b[t]:e};R.set=function(t,e){Lt(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e};R.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function Lt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Jl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dv(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Pt(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Pt){this.a=e!==void 0?e:t.a,ai(this,t.f),this.j=t.j,ci(this,t.c),li(this,t.h),this.g=t.g,e=t.b;var n=new Xn;n.c=e.c,e.a&&(n.a=new on(e.a),n.b=e.b),Zl(this,n),this.i=t.i}else t&&(n=String(t).match(Jl))?(this.a=!!e,ai(this,n[1]||"",!0),this.j=Wn(n[2]||""),ci(this,n[3]||"",!0),li(this,n[4]),this.g=Wn(n[5]||"",!0),Zl(this,n[6]||"",!0),this.i=Wn(n[7]||"")):(this.a=!!e,this.b=new Xn(null,this.a))}Pt.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Qn(e,eu,!0),":");var n=this.c;return(n||e=="file")&&(t.push("//"),(e=this.j)&&t.push(Qn(e,eu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,n!=null&&t.push(":",String(n))),(n=this.g)&&(this.c&&n.charAt(0)!="/"&&t.push("/"),t.push(Qn(n,n.charAt(0)=="/"?Lv:Ov,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Qn(n,Pv)),t.join("")};function nt(t){return new Pt(t)}function ai(t,e,n){t.f=n?Wn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ci(t,e,n){t.c=n?Wn(e,!0):e}function li(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Zl(t,e,n){e instanceof Xn?(t.b=e,Uv(t.b,t.a)):(n||(e=Qn(e,Mv)),t.b=new Xn(e,t.a))}function re(t,e,n){t.b.set(e,n)}function ti(t){return re(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^We()).toString(36)),t}function xv(t){return t instanceof Pt?nt(t):new Pt(t,void 0)}function Vv(t,e,n,r){var i=new Pt(null,void 0);return t&&ai(i,t),e&&ci(i,e),n&&li(i,n),r&&(i.g=r),i}function Wn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qn(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Fv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Fv(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var eu=/[#\/\?@]/g,Ov=/[#\?:]/g,Lv=/[#\?]/g,Mv=/[#\?@]/g,Pv=/#/g;function Xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function vt(t){t.a||(t.a=new on,t.b=0,t.c&&Dv(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}R=Xn.prototype;R.add=function(t,e){vt(this),this.c=null,t=an(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this};function tu(t,e){vt(t),e=an(t,e),Lt(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Lt(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&go(t)))}function nu(t,e){return vt(t),e=an(t,e),Lt(t.a.b,e)}R.forEach=function(t,e){vt(this),this.a.forEach(function(n,r){al(n,function(i){t.call(e,i,r,this)},this)},this)};R.L=function(){vt(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};R.K=function(t){vt(this);var e=[];if(typeof t=="string")nu(this,t)&&(e=cl(e,this.a.get(an(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=cl(e,t[n])}return e};R.set=function(t,e){return vt(this),this.c=null,t=an(this,t),nu(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this};R.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e};function Bl(t,e,n){tu(t,e),0<n.length&&(t.c=null,t.a.set(an(t,e),Os(n)),t.b+=n.length)}R.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};function an(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Uv(t,e){e&&!t.f&&(vt(t),t.c=null,t.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(tu(this,r),Bl(this,i,n))},t)),t.f=e}var $v=function(){function t(e,n){this.b=e,this.a=n}return t}();function ru(t){this.g=t||jv,j.PerformanceNavigationTiming?(t=j.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(j.ia&&j.ia.ya&&j.ia.ya()&&j.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var jv=10;function iu(t){return t.b?!0:t.a?t.a.size>=t.f:!1}function Wl(t){return t.b?1:t.a?t.a.size:0}function uo(t,e){return t.b?t.b==e:t.a?t.a.has(e):!1}function ho(t,e){t.a?t.a.add(e):t.b=e}function Xl(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}ru.prototype.cancel=function(){var t,e;if(this.c=su(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&this.a.size!==0){try{for(var n=sl(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}};function su(t){var e,n;if(t.b!=null)return t.c.concat(t.b.s);if(t.a!=null&&t.a.size!==0){var r=t.c;try{for(var i=sl(t.a.values()),s=i.next();!s.done;s=i.next()){var o=s.value;r=r.concat(o.s)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Os(t.c)}function vo(){}vo.prototype.stringify=function(t){return j.JSON.stringify(t,void 0)};vo.prototype.parse=function(t){return j.JSON.parse(t,void 0)};function qv(){this.a=new vo}function Bv(t,e,n){var r=n||"";try{mo(t,function(i,s){var o=i;Fn(i)&&(o=Ys(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Hv(t,e){var n=new ro;if(j.Image){var r=new Image;r.onload=Br(ui,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Br(ui,n,r,"TestLoadImage: error",!1,e),r.onabort=Br(ui,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Br(ui,n,r,"TestLoadImage: timeout",!1,e),j.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ui(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}var zv=j.JSON.parse;function he(t){Fe.call(this),this.headers=new on,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Kv,this.D=this.F=!1}Ce(he,Fe);var Kv="",Gv=/^https?$/i,Wv=["POST","PUT"];R=he.prototype;R.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?xl(this.H):xl(Fl),this.a.onreadystatechange=Ie(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(s){ou(this,s);return}t=n||"";var i=new on(this.headers);r&&mo(r,function(s,o){i.set(o,s)}),r=av(i.L()),n=j.FormData&&t instanceof j.FormData,!(0<=ol(Wv,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.a.setRequestHeader(o,s)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{au(this),0<this.o&&((this.D=Xv(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Ie(this.xa,this)):this.m=no(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(s){ou(this,s)}};function Xv(t){return mt&&gl(9)&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function ov(t){return t.toLowerCase()=="content-type"}R.xa=function(){typeof Rs!="undefined"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,_e(this,"timeout"),this.abort(8))};function ou(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,cu(t),hi(t)}function cu(t){t.u||(t.u=!0,_e(t,"complete"),_e(t,"error"))}R.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,_e(this,"complete"),_e(this,"abort"),hi(this))};R.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),hi(this,!0)),he.X.G.call(this)};R.za=function(){this.j||(this.A||this.l||this.g?lu(this):this.Ua())};R.Ua=function(){lu(this)};function lu(t){if(t.b&&typeof Rs!="undefined"&&(!t.s[1]||gt(t)!=4||t.W()!=2)){if(t.l&&gt(t)==4)no(t.za,0,t);else if(_e(t,"readystatechange"),gt(t)==4){t.b=!1;try{{var e=t.W();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=e===0){var s=String(t.B).match(Jl)[1]||null;if(!s&&j.self&&j.self.location){var o=j.self.location.protocol;s=o.substr(0,o.length-1)}i=!Gv.test(s?s.toLowerCase():"")}r=i}var a=r}if(a)_e(t,"complete"),_e(t,"success");else{t.h=6;try{var c=2<gt(t)?t.a.statusText:""}catch(l){c=""}t.f=c+" ["+t.W()+"]",cu(t)}}finally{hi(t)}}}}function hi(t,e){if(t.a){au(t);var n=t.a,r=t.s[0]?qr:null;t.a=null,t.s=null,e||_e(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function au(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(j.clearTimeout(t.m),t.m=null)}function gt(t){return t.a?t.a.readyState:0}R.W=function(){try{return 2<gt(this)?this.a.status:-1}catch(t){return-1}};R.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}};R.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),zv(e)}};R.ua=function(){return this.h};R.Qa=function(){return typeof this.f=="string"?this.f:String(this.f)};function Qv(t){var e="";return Us(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function yo(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Qv(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):re(t,e,n))}function Yn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function uu(t){this.pa=0,this.g=[],this.c=new ro,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Yn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Yn("baseRetryDelayMs",5e3,t),this.Ra=Yn("retryDelaySeedMs",1e4,t),this.Ma=Yn("forwardChannelMaxRetries",2,t),this.ma=Yn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ru(t&&t.concurrentRequestLimit),this.ka=new qv,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}R=uu.prototype;R.ha=8;R.v=1;function fo(t){if(hu(t),t.v==3){var e=t.R++,n=nt(t.B);re(n,"SID",t.J),re(n,"RID",e),re(n,"TYPE","terminate"),Jn(t,n),e=new Kn(t,t.c,e,void 0),e.H=2,e.i=ti(nt(n)),n=!1,j.navigator&&j.navigator.sendBeacon&&(n=j.navigator.sendBeacon(e.i.toString(),"")),!n&&j.Image&&(new Image().src=e.i,n=!0),n||(e.a=Hl(e.g,null),e.a.ba(e.i)),e.u=We(),Gn(e)}fu(t)}function ii(t){t.a&&(lo(t),t.a.cancel(),t.a=null)}function hu(t){ii(t),t.j&&(j.clearTimeout(t.j),t.j=null),oi(t),t.b.cancel(),t.h&&(typeof t.h=="number"&&j.clearTimeout(t.h),t.h=null)}function _o(t,e){t.g.push(new $v(t.Oa++,e)),t.v==3&&si(t)}function si(t){iu(t.b)||t.h||(t.h=!0,kl(t.Ba,t),t.u=0)}function Yv(t,e){return Wl(t.b)>=t.b.f-(t.h?1:0)?!1:t.h?(t.g=e.s.concat(t.g),!0):t.v==1||t.v==2||t.u>=(t.La?0:t.Ma)?!1:(t.h=Hn(Ie(t.Ba,t,e),du(t,t.u)),t.u++,!0)}R.Ba=function(t){if(this.h)if(this.h=null,this.v==1){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e=new Kn(this,this.c,t,void 0),n=this.l;this.O&&(n?(n=ul(n),fl(n,this.O)):n=this.O),this.i===null&&(e.B=n);var r;if(this.da)e:{for(var i=r=0;i<this.g.length;i++){t:{var s=this.g[i];if("__data__"in s.a&&(s=s.a.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.g.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=mu(this,e,r),i=nt(this.B),re(i,"RID",t),re(i,"CVER",22),this.A&&re(i,"X-HTTP-Session-Id",this.A),Jn(this,i),this.i&&n&&yo(i,this.i,n),ho(this.b,e),this.Ia&&re(i,"TYPE","init"),this.da?(re(i,"$req",r),re(i,"SID","null"),e.U=!0,ao(e,i,null)):ao(e,i,r),this.v=2}}else this.v==3&&(t?pu(this,t):this.g.length==0||iu(this.b)||pu(this))};function pu(t,e){var n;e?n=e.f:n=t.R++;var r=nt(t.B);re(r,"SID",t.J),re(r,"RID",n),re(r,"AID",t.P),Jn(t,r),t.i&&t.l&&yo(r,t.i,t.l),n=new Kn(t,t.c,n,t.u+1),t.i===null&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=mu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ho(t.b,n),ao(n,r,e)}function Jn(t,e){t.f&&mo({},function(n,r){re(e,r,n)})}function mu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ie(t.f.Ja,t.f,t):null;e:for(var i=t.g,s=-1;;){var o=["count="+n];s==-1?0<n?(s=i[0].b,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,c=0;c<n;c++){var l=i[c].b,u=i[c].a;if(l-=s,0>l)s=Math.max(0,i[c].b-100),a=!1;else try{Bv(u,o,"req"+l+"_")}catch(h){r&&r(u)}}if(a){r=o.join("&");break e}}return t=t.g.splice(0,n),e.s=t,r}function Ql(t){t.a||t.j||(t.T=1,kl(t.Aa,t),t.o=0)}function po(t){return t.a||t.j||3<=t.o?!1:(t.T++,t.j=Hn(Ie(t.Aa,t),du(t,t.o)),t.o++,!0)}R.Aa=function(){if(this.j=null,gu(this),this.U&&!(this.F||this.a==null||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Hn(Ie(this.Ta,this),t)}};R.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,De(10),ii(this),gu(this))};function lo(t){t.s!=null&&(j.clearTimeout(t.s),t.s=null)}function gu(t){t.a=new Kn(t,t.c,"rpc",t.T),t.i===null&&(t.a.B=t.l),t.a.O=0;var e=nt(t.la);re(e,"RID","rpc"),re(e,"SID",t.J),re(e,"CI",t.H?"0":"1"),re(e,"AID",t.P),Jn(t,e),re(e,"TYPE","xmlhttp"),t.i&&t.l&&yo(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ti(nt(e)),n.j=null,n.I=!0,ql(n,t)}R.Sa=function(){this.m!=null&&(this.m=null,ii(this),po(this),De(19))};function oi(t){t.m!=null&&(j.clearTimeout(t.m),t.m=null)}function Kl(t,e){var n=null;if(t.a==e){oi(t),lo(t),t.a=null;var r=2}else if(uo(t.b,e))n=e.s,Xl(t.b,e),r=1;else return;if(t.I=e.N,t.v!=0){if(e.b)if(r==1){n=e.j?e.j.length:0,e=We()-e.u;var i=t.u;r=Zr(),_e(r,new Pl(r,n,e,i)),si(t)}else Ql(t);else if(i=e.h,i==3||i==0&&0<t.I||!(r==1&&Yv(t,e)||r==2&&po(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ot(t,5);break;case 4:Ot(t,10);break;case 3:Ot(t,6);break;default:Ot(t,2)}}}function du(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ot(t,e){if(t.c.info("Error code "+e),e==2){var n=null;t.f&&(n=null);var r=Ie(t.Ya,t);n||(n=new Pt("//www.google.com/images/cleardot.gif"),j.location&&j.location.protocol=="http"||ai(n,"https"),ti(n)),Hv(n.toString(),r)}else De(2);t.v=0,t.f&&t.f.ra(e),fu(t),hu(t)}R.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),De(2)):(this.c.info("Failed to ping google.com"),De(1))};function fu(t){t.v=0,t.I=-1,t.f&&((su(t.b).length!=0||t.g.length!=0)&&(t.b.c.length=0,Os(t.g),t.g.length=0),t.f.qa())}function Yl(t,e,n){var r=xv(n);if(r.c!="")e&&ci(r,e+"."+r.c),li(r,r.h);else{var i=j.location;r=Vv(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Us(t.V,function(s,o){re(r,o,s)}),e=t.A,n=t.na,e&&n&&re(r,e,n),re(r,"VER",t.ha),Jn(t,r),r}function Hl(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new he(t.Na),e.F=t.C,e}function vu(){}R=vu.prototype;R.ta=function(){};R.sa=function(){};R.ra=function(){};R.qa=function(){};R.Ja=function(){};function fi(){if(mt&&!(10<=Number(vl)))throw Error("Environmental error: no available transport.")}fi.prototype.a=function(t,e){return new $e(t,e)};function $e(t,e){Fe.call(this),this.a=new uu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Hr(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hr(e)&&(this.a.A=e,t=this.b,t!==null&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new cn(this)}Ce($e,Fe);$e.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;De(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Yl(t,null,t.fa),si(t)};$e.prototype.close=function(){fo(this.a)};$e.prototype.h=function(t){if(typeof t=="string"){var e={};e.__data__=t,_o(this.a,e)}else this.l?(e={},e.__data__=Ys(t),_o(this.a,e)):_o(this.a,t)};$e.prototype.G=function(){this.a.f=null,delete this.f,fo(this.a),delete this.a,$e.X.G.call(this)};function yu(t){io.call(this);var e=t.__sm__;if(e){e:{for(var n in e){t=n;break e}t=void 0}(this.c=t)?(t=this.c,this.data=e!==null&&t in e?e[t]:void 0):this.data=e}else this.data=t}Ce(yu,io);function _u(){so.call(this),this.status=1}Ce(_u,so);function cn(t){this.a=t}Ce(cn,vu);cn.prototype.ta=function(){_e(this.a,"a")};cn.prototype.sa=function(t){_e(this.a,new yu(t))};cn.prototype.ra=function(t){_e(this.a,new _u(t))};cn.prototype.qa=function(){_e(this.a,"b")};fi.prototype.createWebChannel=fi.prototype.a;$e.prototype.send=$e.prototype.h;$e.prototype.open=$e.prototype.g;$e.prototype.close=$e.prototype.close;ei.NO_ERROR=0;ei.TIMEOUT=8;ei.HTTP_ERROR=6;Ml.COMPLETE="complete";Vl.EventType=zn;zn.OPEN="a";zn.CLOSE="b";zn.ERROR="c";zn.MESSAGE="d";Fe.prototype.listen=Fe.prototype.va;he.prototype.listenOnce=he.prototype.wa;he.prototype.getLastError=he.prototype.Qa;he.prototype.getLastErrorCode=he.prototype.ua;he.prototype.getStatus=he.prototype.W;he.prototype.getResponseJson=he.prototype.Pa;he.prototype.getResponseText=he.prototype.$;he.prototype.send=he.prototype.ba;var Jv=function(){return new fi},Zv=function(){return Zr()},wo=ei,ey=Ml,ty=Dt,wu={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},di=Vl,ny=he;var ln="8.6.1";var pi=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.t(r),this.i=r=>n.writeSequenceNumber(r))}t(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.i&&this.i(e),e}};pi.o=-1;var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Mt=new On("@firebase/firestore");function Eu(){return Mt.logLevel}function O(t,...e){if(Mt.logLevel<=Q.DEBUG){let n=e.map(Eo);Mt.debug(`Firestore (${ln}): ${t}`,...n)}}function yt(t,...e){if(Mt.logLevel<=Q.ERROR){let n=e.map(Eo);Mt.error(`Firestore (${ln}): ${t}`,...n)}}function bu(t,...e){if(Mt.logLevel<=Q.WARN){let n=e.map(Eo);Mt.warn(`Firestore (${ln}): ${t}`,...n)}}function Eo(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}function q(t="Unexpected state"){let e=`FIRESTORE (${ln}) INTERNAL ASSERTION FAILED: `+t;throw yt(e),new Error(e)}function ee(t,e){t||q()}function B(t,e){return t}function ry(t){let e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var bo=class{static u(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=ry(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Z(t,e){return t<e?-1:t>e?1:0}function un(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Pe=class{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Pe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new Pe(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};function Tu(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Iu(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var hn=class{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(),r===void 0?r=e.length-n:r>e.length-n&&q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hn.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},te=class extends hn{construct(e,n,r){return new te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new te(n)}static emptyPath(){return new te([])}},iy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ke=class extends hn{construct(e,n,r){return new ke(e,n,r)}static isValidIdentifier(e){return iy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ke(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new L(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new L(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new L(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ke(n)}static emptyPath(){return new ke([])}};var gi=class{constructor(e){this.fields=e,e.sort(ke.comparator)}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return un(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var we=class{constructor(e){this.binaryString=e}static fromBase64String(e){let n=atob(e);return new we(n)}static fromUint8Array(e){let n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new we(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};we.EMPTY_BYTE_STRING=new we("");var sy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _t(t){if(ee(!!t),typeof t=="string"){let e=0,n=sy.exec(t);if(ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:se(t.seconds),nanos:se(t.nanos)}}function se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fn(t){return typeof t=="string"?we.fromBase64String(t):we.fromUint8Array(t)}function Su(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ku(t){let e=t.mapValue.fields.__previous_value__;return Su(e)?ku(e):e}function Zn(t){let e=_t(t.mapValue.fields.__local_write_time__.timestampValue);return new Pe(e.seconds,e.nanos)}function dn(t){return t==null}function vi(t){return t===0&&1/t==-1/0}function oy(t){return typeof t=="number"&&Number.isInteger(t)&&!vi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var x=class{constructor(e){this.path=e}static fromPath(e){return new x(te.fromString(e))}static fromName(e){return new x(te.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new x(new te(e.slice()))}};function wt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Su(t)?4:10:q()}function Xe(t,e){let n=wt(t);if(n!==wt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zn(t).isEqual(Zn(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;let s=_t(r.timestampValue),o=_t(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return fn(r.bytesValue).isEqual(fn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return se(r.geoPointValue.latitude)===se(i.geoPointValue.latitude)&&se(r.geoPointValue.longitude)===se(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return se(r.integerValue)===se(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){let s=se(r.doubleValue),o=se(i.doubleValue);return s===o?vi(s)===vi(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return un(t.arrayValue.values||[],e.arrayValue.values||[],Xe);case 10:return function(r,i){let s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Tu(s)!==Tu(o))return!1;for(let a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Xe(s[a],o[a])))return!1;return!0}(t,e);default:return q()}}function er(t,e){return(t.values||[]).find(n=>Xe(n,e))!==void 0}function pn(t,e){let n=wt(t),r=wt(e);if(n!==r)return Z(n,r);switch(n){case 0:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(i,s){let o=se(i.integerValue||i.doubleValue),a=se(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Au(t.timestampValue,e.timestampValue);case 4:return Au(Zn(t),Zn(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(i,s){let o=fn(i),a=fn(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){let o=i.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){let l=Z(o[c],a[c]);if(l!==0)return l}return Z(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){let o=Z(se(i.latitude),se(s.latitude));return o!==0?o:Z(se(i.longitude),se(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){let o=i.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){let l=pn(o[c],a[c]);if(l)return l}return Z(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){let o=i.fields||{},a=Object.keys(o),c=s.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){let h=Z(a[u],l[u]);if(h!==0)return h;let f=pn(o[a[u]],c[l[u]]);if(f!==0)return f}return Z(a.length,l.length)}(t.mapValue,e.mapValue);default:throw q()}}function Au(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);let n=_t(t),r=_t(e),i=Z(n.seconds,r.seconds);return i!==0?i:Z(n.nanos,r.nanos)}function Io(t){return To(t)}function To(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){let i=_t(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?fn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,x.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(let o of r.values||[])s?s=!1:i+=",",i+=To(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){let i=Object.keys(r.fields||{}).sort(),s="{",o=!0;for(let a of i)o?o=!1:s+=",",s+=`${a}:${To(r.fields[a])}`;return s+"}"}(t.mapValue):q();var e,n}function So(t){return!!t&&"integerValue"in t}function ko(t){return!!t&&"arrayValue"in t}function Cu(t){return!!t&&"nullValue"in t}function Ru(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ao(t){return!!t&&"mapValue"in t}var Me=class{constructor(e){this.overlayMap=new Map,this.partialValue=e}static empty(){return new Me({mapValue:{}})}field(e){return Me.extractNestedValue(this.buildProto(),e)}toProto(){return this.field(ke.emptyPath())}set(e,n){this.setOverlay(e,n)}setAll(e){e.forEach((n,r)=>{n?this.set(r,n):this.delete(r)})}delete(e){this.setOverlay(e,null)}isEqual(e){return Xe(this.buildProto(),e.buildProto())}setOverlay(e,n){let r=this.overlayMap;for(let i=0;i<e.length-1;++i){let s=e.get(i),o=r.get(s);o instanceof Map?r=o:o&&wt(o)===10?(o=new Map(Object.entries(o.mapValue.fields||{})),r.set(s,o),r=o):(o=new Map,r.set(s,o),r=o)}r.set(e.lastSegment(),n)}applyOverlay(e,n){let r=!1,i=Me.extractNestedValue(this.partialValue,e),s=Ao(i)?Object.assign({},i.mapValue.fields):{};return n.forEach((o,a)=>{if(o instanceof Map){let c=this.applyOverlay(e.child(a),o);c!=null&&(s[a]=c,r=!0)}else o!==null?(s[a]=o,r=!0):s.hasOwnProperty(a)&&(delete s[a],r=!0)}),r?{mapValue:{fields:s}}:null}buildProto(){let e=this.applyOverlay(ke.emptyPath(),this.overlayMap);return e!=null&&(this.partialValue=e,this.overlayMap.clear()),this.partialValue}static extractNestedValue(e,n){if(n.isEmpty())return e;{let r=e;for(let i=0;i<n.length-1;++i)if(!r.mapValue.fields||(r=r.mapValue.fields[n.get(i)],!Ao(r)))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}clone(){return new Me(this.buildProto())}};function Nu(t){let e=[];return mi(t.fields||{},(n,r)=>{let i=new ke([n]);if(Ao(r)){let s=Nu(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new gi(e)}var Ee=class{constructor(e,n,r,i,s){this.key=e,this.documentType=n,this.version=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new Ee(e,0,Y.min(),Me.empty(),0)}static newFoundDocument(e,n,r){return new Ee(e,1,n,r,0)}static newNoDocument(e,n){return new Ee(e,2,n,Me.empty(),0)}static newUnknownDocument(e,n){return new Ee(e,3,n,Me.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Me.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ee&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Ee(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.toProto())}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Du=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.h=null}};function Ou(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Du(t,e,n,r,i,s,o)}function Co(t){let e=B(t);if(e.h===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ay(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),dn(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=yi(e.startAt)),e.endAt&&(n+="|ub:",n+=yi(e.endAt)),e.h=n}return e.h}function cy(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Io(r.value)}`;var r}).join(", ")}]`),dn(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+yi(t.startAt)),t.endAt&&(e+=", endAt: "+yi(t.endAt)),`Target(${e})`}function Ro(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!ly(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Xe(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lu(t.startAt,e.startAt)&&Lu(t.endAt,e.endAt)}function No(t){return x.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Oe=class extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.l(e,n,r):new Pu(e,n,r):n==="array-contains"?new xu(e,r):n==="in"?new Vu(e,r):n==="not-in"?new Fu(e,r):n==="array-contains-any"?new $u(e,r):new Oe(e,n,r)}static l(e,n,r){return n==="in"?new Mu(e,r):new Uu(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.m(pn(n,this.value)):n!==null&&wt(this.value)===wt(n)&&this.m(pn(n,this.value))}m(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}g(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}};function ay(t){return t.field.canonicalString()+t.op.toString()+Io(t.value)}var Pu=class extends Oe{constructor(e,n,r){super(e,n,r),this.key=x.fromName(r.referenceValue)}matches(e){let n=x.comparator(e.key,this.key);return this.m(n)}},Mu=class extends Oe{constructor(e,n){super(e,"in",n),this.keys=ju("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Uu=class extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=ju("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ju(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>x.fromName(r.referenceValue))}var xu=class extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ko(n)&&er(n.arrayValue,this.value)}},Vu=class extends Oe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&er(this.value.arrayValue,n)}},Fu=class extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(er(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!er(this.value.arrayValue,n)}},$u=class extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ko(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>er(this.value.arrayValue,r))}},_i=class{constructor(e,n){this.position=e,this.before=n}};function yi(t){return`${t.before?"b":"a"}:${t.position.map(e=>Io(e)).join(",")}`}var mn=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function ly(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function qu(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=x.comparator(x.fromName(o.referenceValue),n.key):r=pn(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function Lu(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xe(t.position[n],e.position[n]))return!1;return!0}var tr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt}};function uy(t,e,n,r,i,s,o,a){return new tr(t,e,n,r,i,s,o,a)}function Do(t){return new tr(t)}function wi(t){return!dn(t.limit)&&t.limitType==="F"}function Oo(t){return!dn(t.limit)&&t.limitType==="L"}function hy(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function fy(t){for(let e of t.filters)if(e.g())return e.field;return null}function dy(t){return t.collectionGroup!==null}function nr(t){let e=B(t);if(e.p===null){e.p=[];let n=fy(e),r=hy(e);if(n!==null&&r===null)n.isKeyField()||e.p.push(new mn(n)),e.p.push(new mn(ke.keyField(),"asc"));else{let i=!1;for(let s of e.explicitOrderBy)e.p.push(s),s.field.isKeyField()&&(i=!0);if(!i){let s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new mn(ke.keyField(),s))}}}return e.p}function Ut(t){let e=B(t);if(!e.T)if(e.limitType==="F")e.T=Ou(e.path,e.collectionGroup,nr(e),e.filters,e.limit,e.startAt,e.endAt);else{let n=[];for(let s of nr(e)){let o=s.dir==="desc"?"asc":"desc";n.push(new mn(s.field,o))}let r=e.endAt?new _i(e.endAt.position,!e.endAt.before):null,i=e.startAt?new _i(e.startAt.position,!e.startAt.before):null;e.T=Ou(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.T}function py(t,e,n){return new tr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ei(t,e){return Ro(Ut(t),Ut(e))&&t.limitType===e.limitType}function Bu(t){return`${Co(Ut(t))}|lt:${t.limitType}`}function Lo(t){return`Query(target=${cy(Ut(t))}; limitType=${t.limitType})`}function bi(t,e){return e.isFoundDocument()&&function(n,r){let i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):x.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(let i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(let i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!qu(n.startAt,nr(n),r)||n.endAt&&qu(n.endAt,nr(n),r))}(t,e)}function Hu(t){return(e,n)=>{let r=!1;for(let i of nr(t)){let s=my(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function my(t,e,n){let r=t.field.isKeyField()?x.comparator(e.key,n.key):function(i,s,o){let a=s.data.field(i),c=o.data.field(i);return a!==null&&c!==null?pn(a,c):q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}function zu(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vi(e)?"-0":e}}function Ku(t){return{integerValue:""+t}}function gy(t,e){return oy(e)?Ku(e):zu(t,e)}var rr=class{constructor(){this._=void 0}};function vy(t,e,n){return t instanceof ir?function(r,i){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof gn?Wu(t,e):t instanceof vn?Xu(t,e):function(r,i){let s=Gu(r,i),o=Qu(s)+Qu(r.A);return So(s)&&So(r.A)?Ku(o):zu(r.R,o)}(t,e)}function yy(t,e,n){return t instanceof gn?Wu(t,e):t instanceof vn?Xu(t,e):n}function Gu(t,e){return t instanceof sr?So(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}var ir=class extends rr{},gn=class extends rr{constructor(e){super(),this.elements=e}};function Wu(t,e){let n=Yu(e);for(let r of t.elements)n.some(i=>Xe(i,r))||n.push(r);return{arrayValue:{values:n}}}var vn=class extends rr{constructor(e){super(),this.elements=e}};function Xu(t,e){let n=Yu(e);for(let r of t.elements)n=n.filter(i=>!Xe(i,r));return{arrayValue:{values:n}}}var sr=class extends rr{constructor(e,n){super(),this.R=e,this.A=n}};function Qu(t){return se(t.integerValue||t.doubleValue)}function Yu(t){return ko(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _y(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof gn&&r instanceof gn||n instanceof vn&&r instanceof vn?un(n.elements,r.elements,Xe):n instanceof sr&&r instanceof sr?Xe(n.A,r.A):n instanceof ir&&r instanceof ir}(t.transform,e.transform)}var Ju=class{constructor(e,n){this.version=e,this.transformResults=n}},xt=class{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xt}static exists(e){return new xt(void 0,e)}static updateTime(e){return new xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ti(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var or=class{};function wy(t,e,n){t instanceof ar?function(r,i,s){let o=r.value.clone(),a=eh(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Vt?function(r,i,s){if(!Ti(r.precondition,i))return void i.convertToUnknownDocument(s.version);let o=eh(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(Zu(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Po(t,e,n){t instanceof ar?function(r,i,s){if(!Ti(r.precondition,i))return;let o=r.value.clone(),a=nh(r.fieldTransforms,s,i);o.setAll(a),i.convertToFoundDocument(th(i),o).setHasLocalMutations()}(t,e,n):t instanceof Vt?function(r,i,s){if(!Ti(r.precondition,i))return;let o=nh(r.fieldTransforms,s,i),a=i.data;a.setAll(Zu(r)),a.setAll(o),i.convertToFoundDocument(th(i),a).setHasLocalMutations()}(t,e,n):function(r,i){Ti(r.precondition,i)&&i.convertToNoDocument(Y.min())}(t,e)}function Ey(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=Gu(r.transform,i||null);s!=null&&(n==null&&(n=Me.empty()),n.set(r.field,s))}return n||null}function rh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&un(n,r,(i,s)=>_y(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function th(t){return t.isFoundDocument()?t.version:Y.min()}var ar=class extends or{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}},Vt=class extends or{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}};function Zu(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function eh(t,e,n){let r=new Map;ee(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,yy(o,a,n[i]))}return r}function nh(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,vy(s,o,e))}return r}var ih=class extends or{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}},sh=class extends or{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}};var oh=class{constructor(e){this.count=e}};var oe,W;function by(t){switch(t){case w.OK:return q();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0;default:return q()}}function ah(t){if(t===void 0)return yt("GRPC error has no .code"),w.UNKNOWN;switch(t){case oe.OK:return w.OK;case oe.CANCELLED:return w.CANCELLED;case oe.UNKNOWN:return w.UNKNOWN;case oe.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case oe.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case oe.INTERNAL:return w.INTERNAL;case oe.UNAVAILABLE:return w.UNAVAILABLE;case oe.UNAUTHENTICATED:return w.UNAUTHENTICATED;case oe.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case oe.NOT_FOUND:return w.NOT_FOUND;case oe.ALREADY_EXISTS:return w.ALREADY_EXISTS;case oe.PERMISSION_DENIED:return w.PERMISSION_DENIED;case oe.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case oe.ABORTED:return w.ABORTED;case oe.OUT_OF_RANGE:return w.OUT_OF_RANGE;case oe.UNIMPLEMENTED:return w.UNIMPLEMENTED;case oe.DATA_LOSS:return w.DATA_LOSS;default:return q()}}(W=oe||(oe={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var be=class{constructor(e,n){this.comparator=e,this.root=n||me.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,me.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,me.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cr(this.root,e,this.comparator,!1)}getReverseIterator(){return new cr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cr(this.root,e,this.comparator,!0)}},cr=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},me=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??me.RED,this.left=i??me.EMPTY,this.right=s??me.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new me(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return me.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return me.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,me.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,me.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};me.EMPTY=null,me.RED=!0,me.BLACK=!1;me.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(t,e,n,r,i){return this}insert(t,e,n){return new me(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ge=class{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mo(this.data.getIterator())}getIteratorFrom(e){return new Mo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ge)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new ge(this.comparator);return n.data=e,n}},Mo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ty=new be(x.comparator);function Ft(){return Ty}var Iy=new be(x.comparator);function Uo(){return Iy}var Sy=new be(x.comparator);function ky(){return Sy}var Ay=new ge(x.comparator);function ne(...t){let e=Ay;for(let n of t)e=e.add(n);return e}var Cy=new ge(Z);function ch(){return Cy}var lr=class{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){let r=new Map;return r.set(e,yn.createSynthesizedTargetChangeForCurrentChange(e,n)),new lr(Y.min(),r,ch(),Ft(),ne())}},yn=class{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new yn(we.EMPTY_BYTE_STRING,n,ne(),ne(),ne())}};var ur=class{constructor(e,n,r,i){this.P=e,this.removedTargetIds=n,this.key=r,this.v=i}},xo=class{constructor(e,n){this.targetId=e,this.V=n}},Vo=class{constructor(e,n,r=we.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Fo=class{constructor(){this.S=0,this.D=lh(),this.C=we.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}get current(){return this.N}get resumeToken(){return this.C}get $(){return this.S!==0}get O(){return this.k}M(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)}F(){let e=ne(),n=ne(),r=ne();return this.D.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q()}}),new yn(this.C,this.N,e,n,r)}L(){this.k=!1,this.D=lh()}B(e,n){this.k=!0,this.D=this.D.insert(e,n)}U(e){this.k=!0,this.D=this.D.remove(e)}q(){this.S+=1}K(){this.S-=1}j(){this.k=!0,this.N=!0}},uh=class{constructor(e){this.W=e,this.G=new Map,this.H=Ft(),this.J=hh(),this.Y=new ge(Z)}X(e){for(let n of e.P)e.v&&e.v.isFoundDocument()?this.Z(n,e.v):this.tt(n,e.key,e.v);for(let n of e.removedTargetIds)this.tt(n,e.key,e.v)}et(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.st(n)&&r.M(e.resumeToken);break;case 1:r.K(),r.$||r.L(),r.M(e.resumeToken);break;case 2:r.K(),r.$||this.removeTarget(n);break;case 3:this.st(n)&&(r.j(),r.M(e.resumeToken));break;case 4:this.st(n)&&(this.it(n),r.M(e.resumeToken));break;default:q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.G.forEach((r,i)=>{this.st(i)&&n(i)})}rt(e){let n=e.targetId,r=e.V.count,i=this.ot(n);if(i){let s=i.target;if(No(s))if(r===0){let o=new x(s.path);this.tt(n,o,Ee.newNoDocument(o,Y.min()))}else ee(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}}at(e){let n=new Map;this.G.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&No(a.target)){let c=new x(a.target.path);this.H.get(c)!==null||this.ut(o,c)||this.tt(o,c,Ee.newNoDocument(c,e))}s.O&&(n.set(o,s.F()),s.L())}});let r=ne();this.J.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))});let i=new lr(e,n,this.Y,this.H,r);return this.H=Ft(),this.J=hh(),this.Y=new ge(Z),i}Z(e,n){if(!this.st(e))return;let r=this.ut(e,n.key)?2:0;this.nt(e).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(e))}tt(e,n,r){if(!this.st(e))return;let i=this.nt(e);this.ut(e,n)?i.B(n,1):i.U(n),this.J=this.J.insert(n,this.ht(n).delete(e)),r&&(this.H=this.H.insert(n,r))}removeTarget(e){this.G.delete(e)}ct(e){let n=this.nt(e).F();return this.W.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}q(e){this.nt(e).q()}nt(e){let n=this.G.get(e);return n||(n=new Fo,this.G.set(e,n)),n}ht(e){let n=this.J.get(e);return n||(n=new ge(Z),this.J=this.J.insert(e,n)),n}st(e){let n=this.ot(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.G.get(e);return n&&n.$?null:this.W.lt(e)}it(e){this.G.set(e,new Fo),this.W.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}ut(e,n){return this.W.getRemoteKeysForTarget(e).has(n)}};function hh(){return new be(x.comparator)}function lh(){return new be(x.comparator)}var Ry=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Ny=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),fh=class{constructor(e,n){this.databaseId=e,this.I=n}};function Ii(t,e){return t.I?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dh(t,e){return t.I?e.toBase64():e.toUint8Array()}function Dy(t,e){return Ii(t,e.toTimestamp())}function rt(t){return ee(!!t),Y.fromTimestamp(function(e){let n=_t(e);return new Pe(n.seconds,n.nanos)}(t))}function $o(t,e){return function(n){return new te(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function mh(t){let e=te.fromString(t);return ee(ph(e)),e}function jo(t,e){return $o(t.databaseId,e.path)}function qo(t,e){let n=mh(e);if(n.get(1)!==t.databaseId.projectId)throw new L(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new x(gh(n))}function Bo(t,e){return $o(t.databaseId,e)}function Oy(t){let e=mh(t);return e.length===4?te.emptyPath():gh(e)}function Ho(t){return new te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gh(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vh(t,e,n){return{name:jo(t,e),fields:n.toProto().mapValue.fields}}function Ly(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.I?(ee(l===void 0||typeof l=="string"),we.fromBase64String(l||"")):(ee(l===void 0||l instanceof Uint8Array),we.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?w.UNKNOWN:ah(c.code);return new L(l,c.message||"")}(o);n=new Vo(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=qo(t,r.document.name),s=rt(r.document.updateTime),o=new Me({mapValue:{fields:r.document.fields}}),a=Ee.newFoundDocument(i,s,o),c=r.targetIds||[],l=r.removedTargetIds||[];n=new ur(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=qo(t,r.document),s=r.readTime?rt(r.readTime):Y.min(),o=Ee.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ur([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=qo(t,r.document),s=r.removedTargetIds||[];n=new ur([],s,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let i=r.count||0,s=new oh(i),o=r.targetId;n=new xo(o,s)}}return n}function My(t,e){let n;if(e instanceof ar)n={update:vh(t,e.key,e.value)};else if(e instanceof ih)n={delete:jo(t,e.key)};else if(e instanceof Vt)n={update:vh(t,e.key,e.data),updateMask:Py(e.fieldMask)};else{if(!(e instanceof sh))return q();n={verify:jo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){let o=s.transform;if(o instanceof ir)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof gn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof vn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof sr)return{fieldPath:s.field.canonicalString(),increment:o.A};throw q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Dy(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:q()}(t,e.precondition)),n}function Uy(t,e){return t&&t.length>0?(ee(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?rt(r.updateTime):rt(i);return s.isEqual(Y.min())&&(s=rt(i)),new Ju(s,r.transformResults||[])}(n,e))):[]}function xy(t,e){return{documents:[Bo(t,e.path)]}}function $y(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Bo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Bo(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(a){if(a.length===0)return;let c=a.map(l=>function(u){if(u.op==="=="){if(Ru(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NAN"}};if(Cu(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NULL"}}}else if(u.op==="!="){if(Ru(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NOT_NAN"}};if(Cu(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_n(u.field),op:Fy(u.op),value:u.value}}}(l));return c.length===1?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);i&&(n.structuredQuery.where=i);let s=function(a){if(a.length!==0)return a.map(c=>function(l){return{field:_n(l.field),direction:Vy(l.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let o=function(a,c){return a.I||dn(c)?c:{value:c}}(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=yh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=yh(e.endAt)),n}function jy(t){let e=Oy(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ee(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=_h(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new mn(wn(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,dn(h)?null:h}(n.limit));let c=null;n.startAt&&(c=wh(n.startAt));let l=null;return n.endAt&&(l=wh(n.endAt)),uy(e,i,o,s,a,"F",c,l)}function qy(t,e){let n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return q()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function _h(t){return t?t.unaryFilter!==void 0?[Hy(t)]:t.fieldFilter!==void 0?[By(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>_h(e)).reduce((e,n)=>e.concat(n)):q():[]}function yh(t){return{before:t.before,values:t.position}}function wh(t){let e=!!t.before,n=t.values||[];return new _i(n,e)}function Vy(t){return Ry[t]}function Fy(t){return Ny[t]}function _n(t){return{fieldPath:t.canonicalString()}}function wn(t){return ke.fromServerFormat(t.fieldPath)}function By(t){return Oe.create(wn(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}function Hy(t){switch(t.unaryFilter.op){case"IS_NAN":let e=wn(t.unaryFilter.field);return Oe.create(e,"==",{doubleValue:NaN});case"IS_NULL":let n=wn(t.unaryFilter.field);return Oe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=wn(t.unaryFilter.field);return Oe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=wn(t.unaryFilter.field);return Oe.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return q()}}function Py(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ph(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var zy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Eh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};var En=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var k=class{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new k((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):k.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):k.reject(n)}static resolve(e){return new k((n,r)=>{n(e)})}static reject(e){return new k((n,r)=>{r(e)})}static waitFor(e){return new k((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=k.resolve(!1);for(let r of e)n=n.next(i=>i?k.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}};function hr(t){return t.name==="IndexedDbTransactionError"}var bh=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&wy(s,e,r[i])}}applyToLocalView(e){for(let n of this.baseMutations)n.key.isEqual(e.key)&&Po(n,e,this.localWriteTime);for(let n of this.mutations)n.key.isEqual(e.key)&&Po(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{let r=e.get(n.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Y.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&un(this.mutations,e.mutations,(n,r)=>rh(n,r))&&un(this.baseMutations,e.baseMutations,(n,r)=>rh(n,r))}},Si=class{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length);let i=ky(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Si(e,n,r,i)}};var Et=class{constructor(e,n,r,i,s=Y.min(),o=Y.min(),a=we.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Et(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Et(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Et(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}};var Th=class{constructor(e){this.Lt=e}};function Ky(t){let e=jy({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?py(e,e.limit,"L"):e}var Ih=class{constructor(){this.Bt=new Sh}addToCollectionParentIndex(e,n){return this.Bt.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.Bt.getEntries(n))}},Sh=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ge(te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ge(te.comparator)).toArray()}};var $t=class{constructor(e){this.Ht=e}next(){return this.Ht+=2,this.Ht}static Jt(){return new $t(0)}static Yt(){return new $t(-1)}};async function fr(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==zy)throw t;O("LocalStore","Unexpectedly lost primary lease")}var bn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n])}else this.inner[r]=[[e,n]]}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1}forEach(e){mi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Iu(this.inner)}};var kh=class{constructor(){this.changes=new bn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){let n=this.changes.get(e);return n?n.readTime:Y.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:Ee.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var zo=class{constructor(e,n,r){this.qe=e,this._n=n,this.qt=r}mn(e,n){return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.gn(e,n,r))}gn(e,n,r){return this.qe.getEntry(e,n).next(i=>{for(let s of r)s.applyToLocalView(i);return i})}yn(e,n){e.forEach((r,i)=>{for(let s of n)s.applyToLocalView(i)})}pn(e,n){return this.qe.getEntries(e,n).next(r=>this.En(e,r).next(()=>r))}En(e,n){return this._n.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.yn(n,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return x.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(e,n.path):dy(n)?this.In(e,n,r):this.An(e,n,r)}Tn(e,n){return this.mn(e,new x(n)).next(r=>{let i=Uo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}In(e,n,r){let i=n.collectionGroup,s=Uo();return this.qt.getCollectionParents(e,i).next(o=>k.forEach(o,a=>{let c=function(l,u){return new tr(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(i));return this.An(e,c,r).next(l=>{l.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}An(e,n,r){let i,s;return this.qe.getDocumentsMatchingQuery(e,n,r).next(o=>(i=o,this._n.getAllMutationBatchesAffectingQuery(e,n))).next(o=>(s=o,this.Rn(e,s,i).next(a=>{i=a;for(let c of s)for(let l of c.mutations){let u=l.key,h=i.get(u);h==null&&(h=Ee.newInvalidDocument(u),i=i.insert(u,h)),Po(l,h,c.localWriteTime),h.isFoundDocument()||(i=i.remove(u))}}))).next(()=>(i.forEach((o,a)=>{bi(n,a)||(i=i.remove(o))}),i))}Rn(e,n,r){let i=ne();for(let o of n)for(let a of o.mutations)a instanceof Vt&&r.get(a.key)===null&&(i=i.add(a.key));let s=r;return this.qe.getEntries(e,i).next(o=>(o.forEach((a,c)=>{c.isFoundDocument()&&(s=s.insert(a,c))}),s))}};var ki=class{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pn=r,this.bn=i}static vn(e,n){let r=ne(),i=ne();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ki(e,n.fromCache,r,i)}};var Ah=class{Vn(e){this.Sn=e}getDocumentsMatchingQuery(e,n,r,i){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(Y.min())?this.Dn(e,n):this.Sn.pn(e,i).next(s=>{let o=this.Cn(n,s);return(wi(n)||Oo(n))&&this.Nn(n.limitType,o,i,r)?this.Dn(e,n):(Eu()<=Q.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lo(n)),this.Sn.getDocumentsMatchingQuery(e,n,r).next(a=>(o.forEach(c=>{a=a.insert(c.key,c)}),a)))})}Cn(e,n){let r=new ge(Hu(e));return n.forEach((i,s)=>{bi(e,s)&&(r=r.add(s))}),r}Nn(e,n,r,i){if(r.size!==n.size)return!0;let s=e==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Dn(e,n){return Eu()<=Q.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Lo(n)),this.Sn.getDocumentsMatchingQuery(e,n,Y.min())}};var Ch=class{constructor(e,n,r,i){this.persistence=e,this.xn=n,this.R=i,this.kn=new be(Z),this.$n=new bn(s=>Co(s),Ro),this.On=Y.min(),this._n=e.getMutationQueue(r),this.Mn=e.getRemoteDocumentCache(),this.Ue=e.getTargetCache(),this.Fn=new zo(this.Mn,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Fn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.kn))}};function Gy(t,e,n,r){return new Ch(t,e,n,r)}async function Rh(t,e){let n=B(t),r=n._n,i=n.Fn,s=await n.persistence.runTransaction("Handle user change","readonly",o=>{let a;return n._n.getAllMutationBatches(o).next(c=>(a=c,r=n.persistence.getMutationQueue(e),i=new zo(n.Mn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(o))).next(c=>{let l=[],u=[],h=ne();for(let f of a){l.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}for(let f of c){u.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}return i.pn(o,h).next(f=>({Ln:f,removedBatchIds:l,addedBatchIds:u}))})});return n._n=r,n.Fn=i,n.xn.Vn(n.Fn),s}function Wy(t,e){let n=B(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.Mn.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){let u=c.batch,h=u.keys(),f=k.resolve();return h.forEach(d=>{f=f.next(()=>l.getEntry(a,d)).next(p=>{let g=c.docVersions.get(d);ee(g!==null),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,c),p.isValidDocument()&&l.addEntry(p,c.commitVersion))})}),f.next(()=>o._n.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n._n.performConsistencyCheck(r)).next(()=>n.Fn.pn(r,i))})}function Nh(t){let e=B(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ue.getLastRemoteSnapshotVersion(n))}function Qy(t,e){let n=B(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.Mn.newChangeBuffer({trackRemovals:!0});i=n.kn;let a=[];e.targetChanges.forEach((l,u)=>{let h=i.get(u);if(!h)return;a.push(n.Ue.removeMatchingKeys(s,l.removedDocuments,u).next(()=>n.Ue.addMatchingKeys(s,l.addedDocuments,u)));let f=l.resumeToken;if(f.approximateByteSize()>0){let d=h.withResumeToken(f,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(u,d),function(p,g,m){return ee(g.resumeToken.approximateByteSize()>0),p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(h,d,l)&&a.push(n.Ue.updateTargetData(s,d))}});let c=Ft();if(e.documentUpdates.forEach((l,u)=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(Xy(s,o,e.documentUpdates,r,void 0).next(l=>{c=l})),!r.isEqual(Y.min())){let l=n.Ue.getLastRemoteSnapshotVersion(s).next(u=>n.Ue.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>n.Fn.En(s,c)).next(()=>c)}).then(s=>(n.kn=i,s))}function Xy(t,e,n,r,i){let s=ne();return n.forEach(o=>s=s.add(o)),e.getEntries(t,s).next(o=>{let a=Ft();return n.forEach((c,l)=>{let u=o.get(c),h=(i==null?void 0:i.get(c))||r;l.isNoDocument()&&l.version.isEqual(Y.min())?(e.removeEntry(c,h),a=a.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l,h),a=a.insert(c,l)):O("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),a})}function Yy(t,e){let n=B(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n._n.getNextMutationBatchAfterBatchId(r,e)))}function Jy(t,e){let n=B(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ue.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):n.Ue.allocateTargetId(r).next(o=>(i=new Et(e,o,0,r.currentSequenceNumber),n.Ue.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.$n.set(e,r.targetId)),r})}async function Ko(t,e,n){let r=B(t),i=r.kn.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!hr(o))throw o;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.kn=r.kn.remove(e),r.$n.delete(i.target)}function Dh(t,e,n){let r=B(t),i=Y.min(),s=ne();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){let u=B(a),h=u.$n.get(l);return h!==void 0?k.resolve(u.kn.get(h)):u.Ue.getTargetData(c,l)}(r,o,Ut(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ue.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.xn.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ne())).next(a=>({documents:a,Bn:s})))}var Oh=class{constructor(e){this.R=e,this.Qn=new Map,this.jn=new Map}getBundleMetadata(e,n){return k.resolve(this.Qn.get(n))}saveBundleMetadata(e,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:rt(r.createTime)}),k.resolve()}getNamedQuery(e,n){return k.resolve(this.jn.get(n))}saveNamedQuery(e,n){return this.jn.set(n.name,function(r){return{name:r.name,query:Ky(r.bundledQuery),readTime:rt(r.readTime)}}(n)),k.resolve()}};var Ai=class{constructor(){this.Wn=new ge(fe.Gn),this.zn=new ge(fe.Hn)}isEmpty(){return this.Wn.isEmpty()}addReference(e,n){let r=new fe(e,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)}Jn(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Yn(new fe(e,n))}Xn(e,n){e.forEach(r=>this.removeReference(r,n))}Zn(e){let n=new x(new te([])),r=new fe(n,e),i=new fe(n,e+1),s=[];return this.zn.forEachInRange([r,i],o=>{this.Yn(o),s.push(o.key)}),s}ts(){this.Wn.forEach(e=>this.Yn(e))}Yn(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)}es(e){let n=new x(new te([])),r=new fe(n,e),i=new fe(n,e+1),s=ne();return this.zn.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new fe(e,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},fe=class{constructor(e,n){this.key=e,this.ns=n}static Gn(e,n){return x.comparator(e.key,n.key)||Z(e.ns,n.ns)}static Hn(e,n){return Z(e.ns,n.ns)||x.comparator(e.key,n.key)}};var Lh=class{constructor(e,n){this.qt=e,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new ge(fe.Gn)}checkEmpty(e){return k.resolve(this._n.length===0)}addMutationBatch(e,n,r,i){let s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];let o=new bh(s,n,r,i);this._n.push(o);for(let a of i)this.rs=this.rs.add(new fe(a.key,s)),this.qt.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.os(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.cs(r),s=i<0?0:i;return k.resolve(this._n.length>s?this._n[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this._n.length===0?-1:this.ss-1)}getAllMutationBatches(e){return k.resolve(this._n.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new fe(n,0),i=new fe(n,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],o=>{let a=this.os(o.ns);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ge(Z);return n.forEach(i=>{let s=new fe(i,0),o=new fe(i,Number.POSITIVE_INFINITY);this.rs.forEachInRange([s,o],a=>{r=r.add(a.ns)})}),k.resolve(this.us(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;x.isDocumentKey(s)||(s=s.child(""));let o=new fe(new x(s),0),a=new ge(Z);return this.rs.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.ns)),!0)},o),k.resolve(this.us(a))}us(e){let n=[];return e.forEach(r=>{let i=this.os(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.hs(n.batchId,"removed")===0),this._n.shift();let r=this.rs;return k.forEach(n.mutations,i=>{let s=new fe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.rs=r})}Gt(e){}containsKey(e,n){let r=new fe(n,0),i=this.rs.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this._n.length,k.resolve()}hs(e,n){return this.cs(e)}cs(e){return this._n.length===0?0:e-this._n[0].batchId}os(e){let n=this.cs(e);return n<0||n>=this._n.length?null:this._n[n]}};var Ph=class{constructor(e,n){this.qt=e,this.ls=n,this.docs=new be(x.comparator),this.size=0}addEntry(e,n,r){let i=n.key,s=this.docs.get(i),o=s?s.size:0,a=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:a,readTime:r}),this.size+=a-o,this.qt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.clone():Ee.newInvalidDocument(n))}getEntries(e,n){let r=Ft();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.clone():Ee.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r){let i=Ft(),s=new x(n.path.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){let{key:a,value:{document:c,readTime:l}}=o.getNext();if(!n.path.isPrefixOf(a.path))break;l.compareTo(r)<=0||bi(n,c)&&(i=i.insert(c.key,c.clone()))}return k.resolve(i)}fs(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Mh(this)}getSize(e){return k.resolve(this.size)}},Mh=class extends kh{constructor(e){super(),this.Ie=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?n.push(this.Ie.addEntry(e,i.document,this.getReadTime(r))):this.Ie.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.Ie.getEntry(e,n)}getAllFromCache(e,n){return this.Ie.getEntries(e,n)}};var Uh=class{constructor(e){this.persistence=e,this.ds=new bn(n=>Co(n),Ro),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.ws=0,this._s=new Ai,this.targetCount=0,this.gs=$t.Jt()}forEachTarget(e,n){return this.ds.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.ws)}allocateTargetId(e){return this.highestTargetId=this.gs.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),k.resolve()}te(e){this.ds.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.gs=new $t(n),this.highestTargetId=n),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)}addTargetData(e,n){return this.te(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.te(n),k.resolve()}removeTargetData(e,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.ds.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ds.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.ds.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this._s.Jn(n,r),k.resolve()}removeMatchingKeys(e,n,r){this._s.Xn(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._s.Zn(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this._s.es(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this._s.containsKey(n))}};var xh=class{constructor(e,n){this.ys={},this.Ne=new pi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.Ue=new Uh(this),this.qt=new Ih,this.qe=function(r,i){return new Ph(r,i)}(this.qt,r=>this.referenceDelegate.ps(r)),this.R=new Th(n),this.Ke=new Oh(this.R)}start(){return Promise.resolve()}shutdown(){return this.xe=!1,Promise.resolve()}get started(){return this.xe}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.qt}getMutationQueue(e){let n=this.ys[e.toKey()];return n||(n=new Lh(this.qt,this.referenceDelegate),this.ys[e.toKey()]=n),n}getTargetCache(){return this.Ue}getRemoteDocumentCache(){return this.qe}getBundleCache(){return this.Ke}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new Vh(this.Ne.next());return this.referenceDelegate.Es(),r(i).next(s=>this.referenceDelegate.Ts(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Is(e,n){return k.or(Object.values(this.ys).map(r=>()=>r.containsKey(e,n)))}},Vh=class extends Eh{constructor(e){super(),this.currentSequenceNumber=e}},Ci=class{constructor(e){this.persistence=e,this.As=new Ai,this.Rs=null}static Ps(e){return new Ci(e)}get bs(){if(this.Rs)return this.Rs;throw q()}addReference(e,n,r){return this.As.addReference(r,n),this.bs.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.As.removeReference(r,n),this.bs.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.bs.add(n.toString()),k.resolve()}removeTarget(e,n){this.As.Zn(n.targetId).forEach(i=>this.bs.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.bs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Es(){this.Rs=new Set}Ts(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.bs,r=>{let i=x.fromPath(r);return this.vs(e,i).next(s=>{s||n.removeEntry(i)})}).next(()=>(this.Rs=null,n.apply(e)))}updateLimboDocument(e,n){return this.vs(e,n).next(r=>{r?this.bs.delete(n.toString()):this.bs.add(n.toString())})}ps(e){return 0}vs(e,n){return k.or([()=>k.resolve(this.As.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Is(e,n)])}};var je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};je.UNAUTHENTICATED=new je(null),je.GOOGLE_CREDENTIALS=new je("google-credentials-uid"),je.FIRST_PARTY=new je("first-party-uid");var Go=class{constructor(){this.activeTargetIds=ch()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}Cs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Fh=class{constructor(){this.li=new Go,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.li.Ds(e),this.fi[e]||"not-current"}updateQueryState(e,n,r){this.fi[e]=n}removeLocalQueryTarget(e){this.li.Cs(e)}isLocalQueryTarget(e){return this.li.activeTargetIds.has(e)}clearQueryState(e){delete this.fi[e]}getAllActiveQueryTargets(){return this.li.activeTargetIds}isActiveQueryTarget(e){return this.li.activeTargetIds.has(e)}start(){return this.li=new Go,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}};var $h=class{di(e){}shutdown(){}};var Wo=class{constructor(){this.wi=()=>this._i(),this.mi=()=>this.gi(),this.yi=[],this.pi()}di(e){this.yi.push(e)}shutdown(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)}pi(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)}_i(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.yi)e(0)}gi(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.yi)e(1)}static gt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Zy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};var jh=class{constructor(e){this.Ei=e.Ei,this.Ti=e.Ti}Ii(e){this.Ai=e}Ri(e){this.Pi=e}onMessage(e){this.bi=e}close(){this.Ti()}send(e){this.Ei(e)}vi(){this.Ai()}Vi(e){this.Pi(e)}Si(e){this.bi(e)}};var qh=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http";this.Di=n+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Ni(e,n,r,i){let s=this.xi(e,n);O("RestConnection","Sending: ",s,r);let o={};return this.ki(o,i),this.$i(e,s,o,r).then(a=>(O("RestConnection","Received: ",a),a),a=>{throw bu("RestConnection",`${e} failed with error: `,a,"url: ",s,"request:",r),a})}Oi(e,n,r,i){return this.Ni(e,n,r,i)}ki(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+ln,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(let r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])}xi(e,n){let r=Zy[e];return`${this.Di}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling}$i(e,n,r,i){return new Promise((s,o)=>{let a=new ny;a.listenOnce(ey.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case wo.NO_ERROR:let l=a.getResponseJson();O("Connection","XHR received:",JSON.stringify(l)),s(l);break;case wo.TIMEOUT:O("Connection",'RPC "'+e+'" timed out'),o(new L(w.DEADLINE_EXCEEDED,"Request time out"));break;case wo.HTTP_ERROR:let u=a.getStatus();if(O("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let h=a.getResponseJson().error;if(h&&h.status&&h.message){let f=function(d){let p=d.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(p)>=0?p:w.UNKNOWN}(h.status);o(new L(f,h.message))}else o(new L(w.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new L(w.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{O("Connection",'RPC "'+e+'" completed.')}});let c=JSON.stringify(i);a.send(n,"POST",c,r,15)})}Mi(e,n){let r=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Jv(),s=Zv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.ki(o.initMessageHeaders,n),br()||Ir()||cc()||Sr()||lc()||Tr()||(o.httpHeadersOverwriteParam="$httpHeaders");let a=r.join("");O("Connection","Creating WebChannel: "+a,o);let c=i.createWebChannel(a,o),l=!1,u=!1,h=new jh({Ei:d=>{u?O("Connection","Not sending because WebChannel is closed:",d):(l||(O("Connection","Opening WebChannel transport."),c.open(),l=!0),O("Connection","WebChannel sending:",d),c.send(d))},Ti:()=>c.close()}),f=(d,p,g)=>{d.listen(p,m=>{try{g(m)}catch(T){setTimeout(()=>{throw T},0)}})};return f(c,di.EventType.OPEN,()=>{u||O("Connection","WebChannel transport opened.")}),f(c,di.EventType.CLOSE,()=>{u||(u=!0,O("Connection","WebChannel transport closed"),h.Vi())}),f(c,di.EventType.ERROR,d=>{u||(u=!0,bu("Connection","WebChannel transport errored:",d),h.Vi(new L(w.UNAVAILABLE,"The operation could not be completed")))}),f(c,di.EventType.MESSAGE,d=>{var p;if(!u){let g=d.data[0];ee(!!g);let m=g,T=m.error||((p=m[0])===null||p===void 0?void 0:p.error);if(T){O("Connection","WebChannel received error:",T);let A=T.status,C=function(D){let V=oe[D];if(V!==void 0)return ah(V)}(A),F=T.message;C===void 0&&(C=w.INTERNAL,F="Unknown error status: "+A+" with message "+T.message),u=!0,h.Vi(new L(C,F)),c.close()}else O("Connection","WebChannel received:",g),h.Si(g)}}),f(s,ty.STAT_EVENT,d=>{d.stat===wu.PROXY?O("Connection","Detected buffering proxy"):d.stat===wu.NOPROXY&&O("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.vi()},0),h}};function Xo(){return typeof document!="undefined"?document:null}function Ri(t){return new fh(t,!0)}var Qo=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Se=e,this.timerId=n,this.Fi=r,this.Li=i,this.Bi=s,this.Ui=0,this.qi=null,this.Ki=Date.now(),this.reset()}reset(){this.Ui=0}Qi(){this.Ui=this.Bi}ji(e){this.cancel();let n=Math.floor(this.Ui+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ui} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qi=this.Se.enqueueAfterDelay(this.timerId,i,()=>(this.Ki=Date.now(),e())),this.Ui*=this.Li,this.Ui<this.Fi&&(this.Ui=this.Fi),this.Ui>this.Bi&&(this.Ui=this.Bi)}Gi(){this.qi!==null&&(this.qi.skipDelay(),this.qi=null)}cancel(){this.qi!==null&&(this.qi.cancel(),this.qi=null)}Wi(){return(Math.random()-.5)*this.Ui}};var Yo=class{constructor(e,n,r,i,s,o){this.Se=e,this.zi=r,this.Hi=i,this.Ji=s,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Qo(e,n)}tr(){return this.state===1||this.state===2||this.state===4}er(){return this.state===2}start(){this.state!==3?this.auth():this.nr()}async stop(){this.tr()&&await this.close(0)}sr(){this.state=0,this.Zi.reset()}ir(){this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,()=>this.rr()))}cr(e){this.ar(),this.stream.send(e)}async rr(){if(this.er())return this.close(0)}ar(){this.Xi&&(this.Xi.cancel(),this.Xi=null)}async close(e,n){this.ar(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(yt(n.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===w.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ur(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ri(n)}ur(){}auth(){this.state=1;let e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(r=>{this.Yi===n&&this.lr(r)},r=>{e(()=>{let i=new L(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.dr(i)})})}lr(e){let n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(()=>{n(()=>(this.state=2,this.listener.Ii()))}),this.stream.Ri(r=>{n(()=>this.dr(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}nr(){this.state=4,this.Zi.ji(async()=>{this.state=0,this.start()})}dr(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}hr(e){return n=>{this.Se.enqueueAndForget(()=>this.Yi===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Bh=class extends Yo{constructor(e,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s),this.R=i}wr(e){return this.Hi.Mi("Listen",e)}onMessage(e){this.Zi.reset();let n=Ly(this.R,e),r=function(i){if(!("targetChange"in i))return Y.min();let s=i.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?rt(s.readTime):Y.min()}(e);return this.listener._r(n,r)}mr(e){let n={};n.database=Ho(this.R),n.addTarget=function(i,s){let o,a=s.target;return o=No(a)?{documents:xy(i,a)}:{query:$y(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=dh(i,s.resumeToken):s.snapshotVersion.compareTo(Y.min())>0&&(o.readTime=Ii(i,s.snapshotVersion.toTimestamp())),o}(this.R,e);let r=qy(this.R,e);r&&(n.labels=r),this.cr(n)}gr(e){let n={};n.database=Ho(this.R),n.removeTarget=e,this.cr(n)}},Hh=class extends Yo{constructor(e,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle",n,r,s),this.R=i,this.yr=!1}get pr(){return this.yr}start(){this.yr=!1,this.lastStreamToken=void 0,super.start()}ur(){this.yr&&this.Er([])}wr(e){return this.Hi.Mi("Write",e)}onMessage(e){if(ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.yr){this.Zi.reset();let n=Uy(e.writeResults,e.commitTime),r=rt(e.commitTime);return this.listener.Tr(r,n)}return ee(!e.writeResults||e.writeResults.length===0),this.yr=!0,this.listener.Ir()}Ar(){let e={};e.database=Ho(this.R),this.cr(e)}Er(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>My(this.R,r))};this.cr(n)}};var zh=class extends class{}{constructor(e,n,r){super(),this.credentials=e,this.Hi=n,this.R=r,this.Rr=!1}Pr(){if(this.Rr)throw new L(w.FAILED_PRECONDITION,"The client has already been terminated.")}Ni(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Ni(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===w.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new L(w.UNKNOWN,i.toString())})}Oi(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Oi(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===w.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new L(w.UNKNOWN,i.toString())})}terminate(){this.Rr=!0}},Kh=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.br=0,this.vr=null,this.Vr=!0}Sr(){this.br===0&&(this.Dr("Unknown"),this.vr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.vr=null,this.Cr("Backend didn't respond within 10 seconds."),this.Dr("Offline"),Promise.resolve())))}Nr(e){this.state==="Online"?this.Dr("Unknown"):(this.br++,this.br>=1&&(this.kr(),this.Cr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Dr("Offline")))}set(e){this.kr(),this.br=0,e==="Online"&&(this.Vr=!1),this.Dr(e)}Dr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Cr(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(yt(n),this.Vr=!1):O("OnlineStateTracker",n)}kr(){this.vr!==null&&(this.vr.cancel(),this.vr=null)}};var Gh=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.$r=[],this.Or=new Map,this.Mr=new Set,this.Fr=[],this.Lr=s,this.Lr.di(o=>{r.enqueueAndForget(async()=>{jt(this)&&(O("RemoteStore","Restarting streams for network reachability change."),await async function(a){let c=B(a);c.Mr.add(4),await dr(c),c.Br.set("Unknown"),c.Mr.delete(4),await Ni(c)}(this))})}),this.Br=new Kh(r,i)}};async function Ni(t){if(jt(t))for(let e of t.Fr)await e(!0)}async function dr(t){for(let e of t.Fr)await e(!1)}function Wh(t,e){let n=B(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),ea(n)?Zo(n):Tn(n).er()&&Jo(n,e))}function Qh(t,e){let n=B(t),r=Tn(n);n.Or.delete(e),r.er()&&Xh(n,e),n.Or.size===0&&(r.er()?r.ir():jt(n)&&n.Br.set("Unknown"))}function Jo(t,e){t.Ur.q(e.targetId),Tn(t).mr(e)}function Xh(t,e){t.Ur.q(e),Tn(t).gr(e)}function Zo(t){t.Ur=new uh({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.Or.get(e)||null}),Tn(t).start(),t.Br.Sr()}function ea(t){return jt(t)&&!Tn(t).tr()&&t.Or.size>0}function jt(t){return B(t).Mr.size===0}function Yh(t){t.Ur=void 0}async function e_(t){t.Or.forEach((e,n)=>{Jo(t,e)})}async function t_(t,e){Yh(t),ea(t)?(t.Br.Nr(e),Zo(t)):t.Br.set("Unknown")}async function n_(t,e,n){if(t.Br.set("Online"),e instanceof Vo&&e.state===2&&e.cause)try{await async function(r,i){let s=i.cause;for(let o of i.targetIds)r.Or.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Or.delete(o),r.Ur.removeTarget(o))}(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Di(t,r)}else if(e instanceof ur?t.Ur.X(e):e instanceof xo?t.Ur.rt(e):t.Ur.et(e),!n.isEqual(Y.min()))try{let r=await Nh(t.localStore);n.compareTo(r)>=0&&await function(i,s){let o=i.Ur.at(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){let l=i.Or.get(c);l&&i.Or.set(c,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{let c=i.Or.get(a);if(!c)return;i.Or.set(a,c.withResumeToken(we.EMPTY_BYTE_STRING,c.snapshotVersion)),Xh(i,a);let l=new Et(c.target,a,1,c.sequenceNumber);Jo(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){O("RemoteStore","Failed to raise snapshot:",r),await Di(t,r)}}async function Di(t,e,n){if(!hr(e))throw e;t.Mr.add(1),await dr(t),t.Br.set("Offline"),n||(n=()=>Nh(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{O("RemoteStore","Retrying IndexedDB access"),await n(),t.Mr.delete(1),await Ni(t)})}function Jh(t,e){return e().catch(n=>Di(t,n,e))}async function Oi(t){let e=B(t),n=bt(e),r=e.$r.length>0?e.$r[e.$r.length-1].batchId:-1;for(;r_(e);)try{let i=await Yy(e.localStore,r);if(i===null){e.$r.length===0&&n.ir();break}r=i.batchId,i_(e,i)}catch(i){await Di(e,i)}Zh(e)&&ef(e)}function r_(t){return jt(t)&&t.$r.length<10}function i_(t,e){t.$r.push(e);let n=bt(t);n.er()&&n.pr&&n.Er(e.mutations)}function Zh(t){return jt(t)&&!bt(t).tr()&&t.$r.length>0}function ef(t){bt(t).start()}async function s_(t){bt(t).Ar()}async function o_(t){let e=bt(t);for(let n of t.$r)e.Er(n.mutations)}async function a_(t,e,n){let r=t.$r.shift(),i=Si.from(r,e,n);await Jh(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Oi(t)}async function c_(t,e){e&&bt(t).pr&&await async function(n,r){if(i=r.code,by(i)&&i!==w.ABORTED){let s=n.$r.shift();bt(n).sr(),await Jh(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Oi(n)}var i}(t,e),Zh(t)&&ef(t)}async function l_(t,e){let n=B(t);e?(n.Mr.delete(2),await Ni(n)):e||(n.Mr.add(2),await dr(n),n.Br.set("Unknown"))}function Tn(t){return t.qr||(t.qr=function(e,n,r){let i=B(e);return i.Pr(),new Bh(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:e_.bind(null,t),Ri:t_.bind(null,t),_r:n_.bind(null,t)}),t.Fr.push(async e=>{e?(t.qr.sr(),ea(t)?Zo(t):t.Br.set("Unknown")):(await t.qr.stop(),Yh(t))})),t.qr}function bt(t){return t.Kr||(t.Kr=function(e,n,r){let i=B(e);return i.Pr(),new Hh(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:s_.bind(null,t),Ri:c_.bind(null,t),Ir:o_.bind(null,t),Tr:a_.bind(null,t)}),t.Fr.push(async e=>{e?(t.Kr.sr(),await Oi(t)):(await t.Kr.stop(),t.$r.length>0&&(O("RemoteStore",`Stopping write stream with ${t.$r.length} pending writes`),t.$r=[]))})),t.Kr}var Li=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new Li(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ta(t,e){if(yt("AsyncQueue",`${e}: ${t}`),hr(t))return new L(w.UNAVAILABLE,`${e}: ${t}`);throw t}var qt=class{constructor(e){this.comparator=e?(n,r)=>e(n,r)||x.comparator(n.key,r.key):(n,r)=>x.comparator(n.key,r.key),this.keyedMap=Uo(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new qt(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new qt;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var na=class{constructor(){this.Qr=new be(x.comparator)}track(e){let n=e.doc.key,r=this.Qr.get(n);r?e.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,e):e.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Qr=this.Qr.remove(n):e.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):q():this.Qr=this.Qr.insert(n,e)}jr(){let e=[];return this.Qr.inorderTraversal((n,r)=>{e.push(r)}),e}},Bt=class{constructor(e,n,r,i,s,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c}static fromInitialDocuments(e,n,r,i){let s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Bt(e,n,qt.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ei(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var tf=class{constructor(){this.Wr=void 0,this.listeners=[]}},nf=class{constructor(){this.queries=new bn(e=>Bu(e),Ei),this.onlineState="Unknown",this.Gr=new Set}};async function u_(t,e){let n=B(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new tf),i)try{s.Wr=await n.onListen(r)}catch(o){let a=ta(o,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&ra(n)}async function h_(t,e){let n=B(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function f_(t,e){let n=B(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.Hr(i)&&(r=!0);o.Wr=i}}r&&ra(n)}function d_(t,e,n){let r=B(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function ra(t){t.Gr.forEach(e=>{e.next()})}var rf=class{constructor(e,n,r){this.query=e,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}Hr(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Bt(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),n=!0):this.eo(e,this.onlineState)&&(this.no(e),n=!0),this.Xr=e,n}onError(e){this.Jr.error(e)}zr(e){this.onlineState=e;let n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),n=!0),n}eo(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.so||!r)&&(!e.docs.isEmpty()||n==="Offline")}Zr(e){if(e.docChanges.length>0)return!0;let n=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}no(e){e=Bt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)}};var ia=class{constructor(e){this.key=e}},sa=class{constructor(e){this.key=e}},sf=class{constructor(e,n){this.query=e,this.ao=n,this.uo=null,this.current=!1,this.ho=ne(),this.mutatedKeys=ne(),this.lo=Hu(e),this.fo=new qt(this.lo)}get wo(){return this.ao}_o(e,n){let r=n?n.mo:new na,i=n?n.fo:this.fo,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=wi(this.query)&&i.size===this.query.limit?i.last():null,l=Oo(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let f=i.get(u),d=bi(this.query,h)?h:null,p=!!f&&this.mutatedKeys.has(f.key),g=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations),m=!1;f&&d?f.data.isEqual(d.data)?p!==g&&(r.track({type:3,doc:d}),m=!0):this.yo(f,d)||(r.track({type:2,doc:d}),m=!0,(c&&this.lo(d,c)>0||l&&this.lo(d,l)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),m=!0):f&&!d&&(r.track({type:1,doc:f}),m=!0,(c||l)&&(a=!0)),m&&(d?(o=o.add(d),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),wi(this.query)||Oo(this.query))for(;o.size>this.query.limit;){let u=wi(this.query)?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}}yo(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){let i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;let s=e.mo.jr();s.sort((l,u)=>function(h,f){let d=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return d(h)-d(f)}(l.type,u.type)||this.lo(l.doc,u.doc)),this.po(r);let o=n?this.Eo():[],a=this.ho.size===0&&this.current?1:0,c=a!==this.uo;return this.uo=a,s.length!==0||c?{snapshot:new Bt(this.query,e.fo,i,s,e.mutatedKeys,a===0,c,!1),To:o}:{To:o}}zr(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new na,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}}Io(e){return!this.ao.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations}po(e){e&&(e.addedDocuments.forEach(n=>this.ao=this.ao.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ao=this.ao.delete(n)),this.current=e.current)}Eo(){if(!this.current)return[];let e=this.ho;this.ho=ne(),this.fo.forEach(r=>{this.Io(r.key)&&(this.ho=this.ho.add(r.key))});let n=[];return e.forEach(r=>{this.ho.has(r)||n.push(new sa(r))}),this.ho.forEach(r=>{e.has(r)||n.push(new ia(r))}),n}Ao(e){this.ao=e.Bn,this.ho=ne();let n=this._o(e.documents);return this.applyChanges(n,!0)}Ro(){return Bt.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.uo===0)}},of=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},af=class{constructor(e){this.key=e,this.Po=!1}},cf=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.bo={},this.vo=new bn(a=>Bu(a),Ei),this.Vo=new Map,this.So=new Set,this.Do=new be(x.comparator),this.Co=new Map,this.No=new Ai,this.xo={},this.ko=new Map,this.$o=$t.Yt(),this.onlineState="Unknown",this.Oo=void 0}get isPrimaryClient(){return this.Oo===!0}};async function g_(t,e){let n=m_(t),r,i,s=n.vo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro();else{let o=await Jy(n.localStore,Ut(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await p_(n,e,r,a==="current"),n.isPrimaryClient&&Wh(n.remoteStore,o)}return i}async function p_(t,e,n,r){t.Mo=(u,h,f)=>async function(d,p,g,m){let T=p.view._o(g);T.Nn&&(T=await Dh(d.localStore,p.query,!1).then(({documents:F})=>p.view._o(F,T)));let A=m&&m.targetChanges.get(p.targetId),C=p.view.applyChanges(T,d.isPrimaryClient,A);return lf(d,p.targetId,C.To),C.snapshot}(t,u,h,f);let i=await Dh(t.localStore,e,!0),s=new sf(e,i.Bn),o=s._o(i.documents),a=yn.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),c=s.applyChanges(o,t.isPrimaryClient,a);lf(t,n,c.To);let l=new of(e,n,s);return t.vo.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot}async function v_(t,e){let n=B(t),r=n.vo.get(e),i=n.Vo.get(r.targetId);if(i.length>1)return n.Vo.set(r.targetId,i.filter(s=>!Ei(s,e))),void n.vo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ko(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Qh(n.remoteStore,r.targetId),oa(n,r.targetId)}).catch(fr)):(oa(n,r.targetId),await Ko(n.localStore,r.targetId,!0))}async function __(t,e,n){let r=y_(t);try{let i=await function(s,o){let a=B(s),c=Pe.now(),l=o.reduce((h,f)=>h.add(f.key),ne()),u;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>a.Fn.pn(h,l).next(f=>{u=f;let d=[];for(let p of o){let g=Ey(p,u.get(p.key));g!=null&&d.push(new Vt(p.key,g,Nu(g.toProto().mapValue),xt.exists(!0)))}return a._n.addMutationBatch(h,c,d,o)})).then(h=>(h.applyToLocalDocumentSet(u),{batchId:h.batchId,changes:u}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let c=s.xo[s.currentUser.toKey()];c||(c=new be(Z)),c=c.insert(o,a),s.xo[s.currentUser.toKey()]=c}(r,i.batchId,n),await pr(r,i.changes),await Oi(r.remoteStore)}catch(i){let s=ta(i,"Failed to persist write");n.reject(s)}}async function uf(t,e){let n=B(t);try{let r=await Qy(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Co.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Po=!0:i.modifiedDocuments.size>0?ee(o.Po):i.removedDocuments.size>0&&(ee(o.Po),o.Po=!1))}),await pr(n,r,e)}catch(r){await fr(r)}}function hf(t,e,n){let r=B(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.vo.forEach((s,o)=>{let a=o.view.zr(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){let a=B(s);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(let h of u.listeners)h.zr(o)&&(c=!0)}),c&&ra(a)}(r.eventManager,e),i.length&&r.bo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function w_(t,e,n){let r=B(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Co.get(e),s=i&&i.key;if(s){let o=new be(x.comparator);o=o.insert(s,Ee.newNoDocument(s,Y.min()));let a=ne().add(s),c=new lr(Y.min(),new Map,new ge(Z),o,a);await uf(r,c),r.Do=r.Do.remove(s),r.Co.delete(e),aa(r)}else await Ko(r.localStore,e,!1).then(()=>oa(r,e,n)).catch(fr)}async function E_(t,e){let n=B(t),r=e.batch.batchId;try{let i=await Wy(n.localStore,e);df(n,r,null),ff(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pr(n,i)}catch(i){await fr(i)}}async function b_(t,e,n){let r=B(t);try{let i=await function(s,o){let a=B(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a._n.lookupMutationBatch(c,o).next(u=>(ee(u!==null),l=u.keys(),a._n.removeMutationBatch(c,u))).next(()=>a._n.performConsistencyCheck(c)).next(()=>a.Fn.pn(c,l))})}(r.localStore,e);df(r,e,n),ff(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pr(r,i)}catch(i){await fr(i)}}function ff(t,e){(t.ko.get(e)||[]).forEach(n=>{n.resolve()}),t.ko.delete(e)}function df(t,e,n){let r=B(t),i=r.xo[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function oa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Vo.get(e))t.vo.delete(r),n&&t.bo.Fo(r,n);t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(r=>{t.No.containsKey(r)||pf(t,r)})}function pf(t,e){t.So.delete(e.path.canonicalString());let n=t.Do.get(e);n!==null&&(Qh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),aa(t))}function lf(t,e,n){for(let r of n)r instanceof ia?(t.No.addReference(r.key,e),T_(t,r)):r instanceof sa?(O("SyncEngine","Document no longer in limbo: "+r.key),t.No.removeReference(r.key,e),t.No.containsKey(r.key)||pf(t,r.key)):q()}function T_(t,e){let n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(O("SyncEngine","New document in limbo: "+n),t.So.add(r),aa(t))}function aa(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){let e=t.So.values().next().value;t.So.delete(e);let n=new x(te.fromString(e)),r=t.$o.next();t.Co.set(r,new af(n)),t.Do=t.Do.insert(n,r),Wh(t.remoteStore,new Et(Ut(Do(n.path)),r,2,pi.o))}}async function pr(t,e,n){let r=B(t),i=[],s=[],o=[];r.vo.isEmpty()||(r.vo.forEach((a,c)=>{o.push(r.Mo(c,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),i.push(l);let u=ki.vn(c.targetId,l);s.push(u)}}))}),await Promise.all(o),r.bo._r(i),await async function(a,c){let l=B(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>k.forEach(c,h=>k.forEach(h.Pn,f=>l.persistence.referenceDelegate.addReference(u,h.targetId,f)).next(()=>k.forEach(h.bn,f=>l.persistence.referenceDelegate.removeReference(u,h.targetId,f)))))}catch(u){if(!hr(u))throw u;O("LocalStore","Failed to update sequence numbers: "+u)}for(let u of c){let h=u.targetId;if(!u.fromCache){let f=l.kn.get(h),d=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(d);l.kn=l.kn.insert(h,p)}}}(r.localStore,s))}async function I_(t,e){let n=B(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=await Rh(n.localStore,e);n.currentUser=e,function(i,s){i.ko.forEach(o=>{o.forEach(a=>{a.reject(new L(w.CANCELLED,s))})}),i.ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pr(n,r.Ln)}}function S_(t,e){let n=B(t),r=n.Co.get(e);if(r&&r.Po)return ne().add(r.key);{let i=ne(),s=n.Vo.get(e);if(!s)return i;for(let o of s){let a=n.vo.get(o);i=i.unionWith(a.view.wo)}return i}}function m_(t){let e=B(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w_.bind(null,e),e.bo._r=f_.bind(null,e.eventManager),e.bo.Fo=d_.bind(null,e.eventManager),e}function y_(t){let e=B(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b_.bind(null,e),e}var mf=class{constructor(){this.synchronizeTabs=!1}async initialize(e){this.R=Ri(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.Uo(e),await this.persistence.start(),this.gcScheduler=this.qo(e),this.localStore=this.Ko(e)}qo(e){return null}Ko(e){return Gy(this.persistence,new Ah,e.initialUser,this.R)}Uo(e){return new xh(Ci.Ps,this.R)}Bo(e){return new Fh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}},gf=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=I_.bind(null,this.syncEngine),await l_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new nf}createDatastore(e){let n=Ri(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new qh(i));var i;return function(s,o,a){return new zh(s,o,a)}(e.credentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>hf(this.syncEngine,a,0),o=Wo.gt()?new Wo:new $h,new Gh(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,c,l){let u=new cf(r,i,s,o,a,c);return l&&(u.Oo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){let n=B(e);O("RemoteStore","RemoteStore shutting down."),n.Mr.add(5),await dr(n),n.Lr.shutdown(),n.Br.set("Unknown")}(this.remoteStore)}};var vf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.jo(this.observer.next,e)}error(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Wo(){this.muted=!0}jo(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var yf=class{constructor(e,n,r){this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=je.UNAUTHENTICATED,this.clientId=bo.u(),this.credentialListener=()=>Promise.resolve(),this.credentials.setChangeListener(n,async i=>{O("FirestoreClient","Received user=",i.uid),await this.credentialListener(i),this.user=i})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.removeChangeListener(),e.resolve()}catch(n){let r=ta(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function k_(t,e){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Rh(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function C_(t,e){t.asyncQueue.verifyOperationInProgress();let n=await A_(t);O("FirestoreClient","Initializing OnlineComponentProvider");let r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>async function(s,o){let a=B(s);a.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let c=jt(a);a.Mr.add(3),await dr(a),c&&a.Br.set("Unknown"),await a.remoteSyncer.handleCredentialChange(o),a.Mr.delete(3),await Ni(a)}(e.remoteStore,i)),t.onlineComponents=e}async function A_(t){return t.offlineComponents||(O("FirestoreClient","Using default OfflineComponentProvider"),await k_(t,new mf)),t.offlineComponents}async function _f(t){return t.onlineComponents||(O("FirestoreClient","Using default OnlineComponentProvider"),await C_(t,new gf)),t.onlineComponents}function R_(t){return _f(t).then(e=>e.syncEngine)}async function N_(t){let e=await _f(t),n=e.eventManager;return n.onListen=g_.bind(null,e.syncEngine),n.onUnlisten=v_.bind(null,e.syncEngine),n}function D_(t,e,n={}){let r=new En;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,c){let l=new vf({next:h=>{s.enqueueAndForget(()=>h_(i,u));let f=h.docs.has(o);!f&&h.fromCache?c.reject(new L(w.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&a&&a.source==="server"?c.reject(new L(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new rf(Do(o.path),l,{includeMetadataChanges:!0,so:!0});return u_(i,u)}(await N_(t),t.asyncQueue,e,n,r)),r.promise}var wf=class{constructor(e,n,r,i,s,o,a){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a}},In=class{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof In&&e.projectId===this.projectId&&e.database===this.database}};var Ef=new Map;var bf=class{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}},ca=class{constructor(){this.changeListener=null}getToken(){return Promise.resolve(null)}invalidateToken(){}setChangeListener(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(je.UNAUTHENTICATED))}removeChangeListener(){this.changeListener=null}},Tf=class{constructor(e){this.currentUser=je.UNAUTHENTICATED,this.oc=new En,this.cc=0,this.changeListener=()=>Promise.resolve(),this.ac=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=()=>{this.cc++,this.currentUser=this.hc(),this.oc.resolve(),this.ac&&this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser))};let n=r=>{O("FirebaseCredentialsProvider","Auth detected"),this.auth=r,this.lc(),this.auth.addAuthTokenListener(this.uc)};e.onInit(r=>n(r)),setTimeout(()=>{if(!this.auth){let r=e.getImmediate({optional:!0});r?n(r):this.ac&&(O("FirebaseCredentialsProvider","Auth not yet detected"),this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser)))}},0)}getToken(){let e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.cc!==e?(O("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new bf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}setChangeListener(e,n){this.ac=!0,this.asyncQueue=e,this.changeListener=n}removeChangeListener(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=()=>Promise.resolve()}hc(){let e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new je(e)}lc(){this.ac&&(this.ac=!1,this.asyncQueue.enqueueRetryable(async()=>{await this.oc.promise,await this.changeListener(this.currentUser),this.ac=!0}))}},If=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r,this.type="FirstParty",this.user=je.FIRST_PARTY}get authHeaders(){let e={"X-Goog-AuthUser":this.dc},n=this.fc.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.wc&&(e["X-Goog-Iam-Authorization-Token"]=this.wc),e}},Sf=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r}getToken(){return Promise.resolve(new If(this.fc,this.dc,this.wc))}setChangeListener(e,n){e.enqueueRetryable(()=>n(je.FIRST_PARTY))}removeChangeListener(){}invalidateToken(){}};function kf(t,e,n){if(!n)throw new L(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Af(t){if(!x.isDocumentKey(t))throw new L(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cf(t){if(x.isDocumentKey(t))throw new L(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function la(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(n){if(n.constructor){let r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q()}function Pi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=la(t);throw new L(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var ua=class{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new L(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,function(r,i,s,o){if(i===!0&&o===!0)throw new L(w.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties}};var Mi=class{constructor(e,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ua({}),this._settingsFrozen=!1,e instanceof In?(this._databaseId=e,this._credentials=new ca):(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new L(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new In(r.options.projectId)}(e),this._credentials=new Tf(n))}get app(){if(!this._app)throw new L(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ua(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new ca;switch(n.type){case"gapi":let r=n.client;return ee(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Sf(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new L(w.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let n=Ef.get(e);n&&(O("ComponentProvider","Removing Datastore"),Ef.delete(e),n.terminate())}(this),Promise.resolve()}};var Ue=class{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new it(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}},Ui=class{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}},it=class extends Ui{constructor(e,n,r){super(e,n,Do(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new x(e))}withConverter(e){return new it(this.firestore,e,this._path)}};function Rf(t,e,...n){if(t=Ve(t),kf("collection","path",e),t instanceof Mi){let r=te.fromString(e,...n);return Cf(r),new it(t,null,r)}{if(!(t instanceof Ue||t instanceof it))throw new L(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=te.fromString(t.path,...n).child(te.fromString(e));return Cf(r),new it(t.firestore,null,r)}}function ha(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=bo.u()),kf("doc","path",e),t instanceof Mi){let r=te.fromString(e,...n);return Af(r),new Ue(t,null,new x(r))}{if(!(t instanceof Ue||t instanceof it))throw new L(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(te.fromString(e,...n));return Af(r),new Ue(t.firestore,t instanceof it?t.converter:null,new x(r))}}var Nf=class{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new Qo(this,"async_queue_retry"),this.Ac=()=>{let n=Xo();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Zi.Gi()};let e=Xo();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Ac)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Rc(),this.Pc(e)}enterRestrictedMode(){if(!this.gc){this.gc=!0;let e=Xo();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Ac)}}enqueue(e){return this.Rc(),this.gc?new Promise(n=>{}):this.Pc(e)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.bc()))}async bc(){if(this.mc.length!==0){try{await this.mc[0](),this.mc.shift(),this.Zi.reset()}catch(e){if(!hr(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.mc.length>0&&this.Zi.ji(()=>this.bc())}}Pc(e){let n=this._c.then(()=>(this.Tc=!0,e().catch(r=>{throw this.Ec=r,this.Tc=!1,yt("INTERNAL UNHANDLED ERROR: ",function(i){let s=i.message||"";return i.stack&&(s=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),s}(r)),r}).then(r=>(this.Tc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.Rc(),this.Ic.indexOf(e)>-1&&(n=0);let i=Li.createAndSchedule(this,e,n,r,s=>this.vc(s));return this.yc.push(i),i}Rc(){this.Ec&&q()}verifyOperationInProgress(){}async Vc(){let e;do e=this._c,await e;while(e!==this._c)}Sc(e){for(let n of this.yc)if(n.timerId===e)return!0;return!1}Dc(e){return this.Vc().then(()=>{this.yc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.yc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vc()})}Cc(e){this.Ic.push(e)}vc(e){let n=this.yc.indexOf(e);this.yc.splice(n,1)}},xi=class extends Mi{constructor(e,n){super(e,n),this.type="firestore",this._queue=new Nf,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Df(this),this._firestoreClient.terminate()}};function Of(t=Cr()){return Ln(t,"firestore-exp").getImmediate()}function Lf(t){return t._firestoreClient||Df(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Df(t){var e;let n=t._freezeSettings(),r=function(i,s,o,a){return new wf(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new yf(t._credentials,t._queue,r)}var Vi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ht=class{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ht(we.fromBase64String(e))}catch(n){throw new L(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ht(we.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var fa=class{constructor(e){this._methodName=e}};var Fi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}};var O_=/^__.*__$/,Pf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vt(e,this.data,this.fieldMask,n,this.fieldTransforms):new ar(e,this.data,n,this.fieldTransforms)}};function Mf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var $i=class{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Nc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get xc(){return this.settings.xc}kc(e){return new $i(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}$c(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.kc({path:r,Oc:!1});return i.Mc(e),i}Fc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.kc({path:r,Oc:!1});return i.Nc(),i}Lc(e){return this.kc({path:void 0,Oc:!0})}Bc(e){return ji(e,this.settings.methodName,this.settings.Uc||!1,this.path,this.settings.qc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Nc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(e.length===0)throw this.Bc("Document fields must not be empty");if(Mf(this.xc)&&O_.test(e))throw this.Bc('Document fields cannot begin and end with "__"')}},Uf=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.R=r||Ri(e)}Kc(e,n,r,i=!1){return new $i({xc:e,methodName:n,qc:r,path:ke.emptyPath(),Oc:!1,Uc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)}};function L_(t){let e=t._freezeSettings(),n=Ri(t._databaseId);return new Uf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function U_(t,e,n,r,i,s={}){let o=t.Kc(s.merge||s.mergeFields?2:0,e,n,i);Vf("Data must be an object, but it was:",o,r);let a=xf(r,o),c,l;if(s.merge)c=new gi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let h of s.mergeFields){let f=P_(e,h,n);if(!o.contains(f))throw new L(w.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);M_(u,f)||u.push(f)}c=new gi(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new Pf(new Me(a),c,l)}function Ff(t,e){if($f(t=Ve(t)))return Vf("Unsupported field value:",e,t),xf(t,e);if(t instanceof fa)return function(n,r){if(!Mf(r.xc))throw r.Bc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bc(`${n._methodName}() is not currently supported inside arrays`);let i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oc&&e.xc!==4)throw e.Bc("Nested arrays are not supported");return function(n,r){let i=[],s=0;for(let o of n){let a=Ff(o,r.Lc(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Ve(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return gy(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let i=Pe.fromDate(n);return{timestampValue:Ii(r.R,i)}}if(n instanceof Pe){let i=new Pe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ii(r.R,i)}}if(n instanceof Fi)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ht)return{bytesValue:dh(r.R,n._byteString)};if(n instanceof Ue){let i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Bc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$o(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Bc(`Unsupported field value: ${la(n)}`)}(t,e)}function xf(t,e){let n={};return Iu(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mi(t,(r,i)=>{let s=Ff(i,e.$c(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $f(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof Fi||t instanceof Ht||t instanceof Ue||t instanceof fa)}function Vf(t,e,n){if(!$f(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let r=la(n);throw r==="an object"?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function P_(t,e,n){if((e=Ve(e))instanceof Vi)return e._internalPath;if(typeof e=="string")return jf(t,e);throw ji("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var x_=new RegExp("[~\\*/\\[\\]]");function jf(t,e,n){if(e.search(x_)>=0)throw ji(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vi(...e.split("."))._internalPath}catch(r){throw ji(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ji(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new L(w.INVALID_ARGUMENT,a+t+c)}function M_(t,e){return t.some(n=>n.isEqual(e))}var da=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.toProto())}}get(e){if(this._document){let n=this._document.data.field(Bf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},qf=class extends da{data(){return super.data()}};function Bf(t,e){return typeof e=="string"?jf(t,e):e instanceof Vi?e._internalPath:e._delegate._internalPath}var Hf=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},pa=class extends da{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.toProto(),e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Bf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},zf=class extends pa{data(e={}){return super.data(e)}};var Kf=class{convertValue(e,n="none"){switch(wt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw q()}}convertObject(e,n){let r={};return mi(e.fields||{},(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Fi(se(e.latitude),se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=ku(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zn(e));default:return null}}convertTimestamp(e){let n=_t(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=te.fromString(e);ee(ph(r));let i=new In(r.get(1),r.get(3)),s=new x(r.popFirst(5));return i.isEqual(n)||yt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function V_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function Gf(t){t=Pi(t,Ue);let e=Pi(t.firestore,xi);return D_(Lf(e),t._key).then(n=>F_(e,t,n))}var Wf=class extends Kf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}};function Xf(t,e,n){t=Pi(t,Ue);let r=Pi(t.firestore,xi),i=V_(t.converter,e,n);return $_(r,[U_(L_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xt.none())])}function $_(t,e){return function(n,r){let i=new En;return n.asyncQueue.enqueueAndForget(async()=>__(await R_(n),r,i)),i.promise}(Lf(t),e)}function F_(t,e,n){let r=n.docs.get(e._key),i=new Wf(t);return new pa(t,i,e._key,r,new Hf(n.hasPendingWrites,n.fromCache),e.converter)}var j_;(function(t){ln=t})(Rt),Ct(new ct("firestore-exp",(t,{options:e})=>{let n=t.getProvider("app-exp").getImmediate(),r=new xi(n,t.getProvider("auth-internal"));return e&&r._setSettings(e),r},"PUBLIC")),ut("@firebase/firestore","0.0.900-exp.d92a36260",j_);var Qf=Of(),ma=async(t,e)=>{let n=ha(Qf,t,e),r=await Gf(n),i="";return r.exists()?i=r.data():console.log("No such document!"),i},ga=async(t,e,n)=>{let r=Rf(Qf,t);n&&await Xf(ha(r,e),{[t]:n})};var va=il(),q_=new He,qi=()=>tl(va,q_),Yf=()=>Vc(va),B_=()=>{Aa(),Ya(),Ca()},H_=t=>{Ye.set(t)},z_=t=>{ma("goal",t).then(e=>e?Je.set(e.goal):""),ma("data",t).then(e=>e?le.set(e.data):"")};xc(va,t=>{t?(console.log("👌 you are logged 👌"),H_(t),z_(t.uid),Je.subscribe(e=>ga("goal",t.uid,e)),le.subscribe(e=>ga("data",t.uid,e))):(console.log("👋 you are not logged 👋"),B_())});function Jf(t,e,n){let r=t.slice();return r[3]=e[n].label,r[4]=e[n].icon,r[5]=e[n].style,r[6]=e[n].onClick,r[7]=e[n].name,r}function G_(t){let e,n,r,i,s;return i=new Rn({props:{label:"Iniciar sesión",$$slots:{default:[K_]},$$scope:{ctx:t}}}),{c(){e=E("h2"),e.textContent="Haz click para iniciar sesión",n=N(),r=E("div"),U(i.$$.fragment),_(e,"class","text-center"),_(r,"class","m-2 flex flex-col")},m(o,a){y(o,e,a),y(o,n,a),y(o,r,a),P(i,r,null),s=!0},p(o,a){let c={};a&1024&&(c.$$scope={dirty:a,ctx:o}),i.$set(c)},i(o){s||(b(i.$$.fragment,o),s=!0)},o(o){S(i.$$.fragment,o),s=!1},d(o){o&&v(e),o&&v(n),o&&v(r),M(i)}}}function W_(t){let e,n,r,i,s,o=t[0].displayName+"",a,c,l,u=t[0].email+"",h,f,d=[],p=new Map,g,m,T=t[1],A=C=>C[7];for(let C=0;C<T.length;C+=1){let F=Jf(t,T,C),D=A(F);p.set(D,d[C]=Zf(D,F))}return{c(){e=E("img"),r=N(),i=E("div"),s=E("h2"),a=G(o),c=N(),l=E("h2"),h=G(u),f=N();for(let C=0;C<d.length;C+=1)d[C].c();g=Ke(),_(e,"class","mx-auto rounded-lg"),e.src!==(n=t[0].photoURL)&&_(e,"src",n),_(e,"alt","user"),_(i,"class","my-8")},m(C,F){y(C,e,F),y(C,r,F),y(C,i,F),I(i,s),I(s,a),I(i,c),I(i,l),I(l,h),y(C,f,F);for(let D=0;D<d.length;D+=1)d[D].m(C,F);y(C,g,F),m=!0},p(C,F){(!m||F&1&&e.src!==(n=C[0].photoURL))&&_(e,"src",n),(!m||F&1)&&o!==(o=C[0].displayName+"")&&J(a,o),(!m||F&1)&&u!==(u=C[0].email+"")&&J(h,u),F&2&&(T=C[1],ae(),d=An(d,F,A,1,C,T,p,g.parentNode,kn,Zf,g,Jf),ce())},i(C){if(!m){for(let F=0;F<T.length;F+=1)b(d[F]);m=!0}},o(C){for(let F=0;F<d.length;F+=1)S(d[F]);m=!1},d(C){C&&v(e),C&&v(r),C&&v(i),C&&v(f);for(let F=0;F<d.length;F+=1)d[F].d(C);C&&v(g)}}}function K_(t){let e,n;return e=new Te({props:{props:t[2]}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p:X,i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function X_(t){let e,n;return e=new Te({props:{props:{icon:t[4],style:t[5],onClick:t[6]}}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p:X,i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Zf(t,e){let n,r,i,s;return r=new Rn({props:{label:e[3],$$slots:{default:[X_]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=E("div"),U(r.$$.fragment),i=N(),_(n,"class","m-2 flex flex-col"),this.first=n},m(o,a){y(o,n,a),P(r,n,null),I(n,i),s=!0},p(o,a){e=o;let c={};a&1024&&(c.$$scope={dirty:a,ctx:e}),r.$set(c)},i(o){s||(b(r.$$.fragment,o),s=!0)},o(o){S(r.$$.fragment,o),s=!1},d(o){o&&v(n),M(r)}}}function Q_(t){let e,n,r,i,s=[W_,G_],o=[];function a(c,l){return c[0]?0:1}return e=a(t,-1),n=o[e]=s[e](t),{c(){n.c(),r=Ke()},m(c,l){o[e].m(c,l),y(c,r,l),i=!0},p(c,l){let u=e;e=a(c,l),e===u?o[e].p(c,l):(ae(),S(o[u],1,1,()=>{o[u]=null}),ce(),n=o[e],n?n.p(c,l):(n=o[e]=s[e](c),n.c()),b(n,1),n.m(r.parentNode,r))},i(c){i||(b(n),i=!0)},o(c){S(n),i=!1},d(c){o[e].d(c),c&&v(r)}}}function Y_(t){let e,n;return e=new at({props:{$$slots:{default:[Q_]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,[i]){let s={};i&1025&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function J_(t,e,n){let r;return qe(t,Ye,o=>n(0,r=o)),[r,[{name:"SignOut",label:"Cerrar sesión",icon:"logout",style:"primary",onClick:Yf}],{icon:"login",style:"primary",onClick:qi}]}var ed=class extends z{constructor(e){super();K(this,e,J_,Y_,H,{})}},td=ed;function nd(t,e,n){let r=t.slice();return r[4]=e[n],r}function rd(t){let e,n;function r(){return t[3](t[4])}return e=new Te({props:{props:t[4],current:t[0]}}),e.$on("click",r),{c(){U(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p(i,s){t=i;let o={};s&1&&(o.current=t[0]),e.$set(o)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function Z_(t){let e,n,r=t[2],i=[];for(let o=0;o<r.length;o+=1)i[o]=rd(nd(t,r,o));let s=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){e=E("div");for(let o=0;o<i.length;o+=1)i[o].c();_(e,"class","container fixed svelte-1xfd7dv")},m(o,a){y(o,e,a);for(let c=0;c<i.length;c+=1)i[c].m(e,null);n=!0},p(o,[a]){if(a&7){r=o[2];let c;for(c=0;c<r.length;c+=1){let l=nd(o,r,c);i[c]?(i[c].p(l,a),b(i[c],1)):(i[c]=rd(l),i[c].c(),b(i[c],1),i[c].m(e,null))}for(ae(),c=r.length;c<i.length;c+=1)s(c);ce()}},i(o){if(!n){for(let a=0;a<r.length;a+=1)b(i[a]);n=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)S(i[a]);n=!1},d(o){o&&v(e),Qe(i,o)}}}function e0(t,e,n){let r=[{icon:"home",style:"secondary",selected:!1},{icon:"lightning",style:"secondary",selected:!1},{icon:"profile",style:"secondary",selected:!1}],{current:i="Home"}=e,{selectedBtn:s=()=>{}}=e,o=a=>s(a.icon);return t.$$set=a=>{"current"in a&&n(0,i=a.current),"selectedBtn"in a&&n(1,s=a.selectedBtn)},[i,s,r,o]}var id=class extends z{constructor(e){super();K(this,e,e0,Z_,H,{current:0,selectedBtn:1})}},sd=id;function t0(t){let e,n,r,i,s,o,a;function c(u){t[1](u)}let l={label:"Objetivo",type:"text"};return t[0]!==void 0&&(l.value=t[0]),s=new Cn({props:l}),st.push(()=>Gt(s,"value",c)),{c(){e=E("h1"),e.textContent="Opciones",n=N(),r=E("h3"),r.textContent="Configura tus fuentes de ingresos",i=N(),U(s.$$.fragment)},m(u,h){y(u,e,h),y(u,n,h),y(u,r,h),y(u,i,h),P(s,u,h),a=!0},p(u,h){let f={};!o&&h&1&&(o=!0,f.value=u[0],Kt(()=>o=!1)),s.$set(f)},i(u){a||(b(s.$$.fragment,u),a=!0)},o(u){S(s.$$.fragment,u),a=!1},d(u){u&&v(e),u&&v(n),u&&v(r),u&&v(i),M(s,u)}}}function n0(t){let e,n,r,i,s,o,a;return e=new at({props:{$$slots:{default:[t0]},$$scope:{ctx:t}}}),i=new Te({props:{props:{icon:"add",style:"secondary"}}}),i.$on("click",le.add),o=new _r({props:{edit:!0}}),{c(){U(e.$$.fragment),n=N(),r=E("div"),U(i.$$.fragment),s=N(),U(o.$$.fragment)},m(c,l){P(e,c,l),y(c,n,l),y(c,r,l),P(i,r,null),y(c,s,l),P(o,c,l),a=!0},p(c,[l]){let u={};l&5&&(u.$$scope={dirty:l,ctx:c}),e.$set(u)},i(c){a||(b(e.$$.fragment,c),b(i.$$.fragment,c),b(o.$$.fragment,c),a=!0)},o(c){S(e.$$.fragment,c),S(i.$$.fragment,c),S(o.$$.fragment,c),a=!1},d(c){M(e,c),c&&v(n),c&&v(r),M(i),c&&v(s),M(o,c)}}}function r0(t,e,n){let r;qe(t,Je,s=>n(0,r=s));function i(s){r=s,Je.set(r)}return[r,i]}var od=class extends z{constructor(e){super();K(this,e,r0,n0,H,{})}},ad=od;function i0(t){let e,n,r;return{c(){e=E("button"),n=E("img"),_(n,"class","w-12 h-12 rounded-full"),n.src!==(r=t[0])&&_(n,"src",r),_(n,"alt","Avatar")},m(i,s){y(i,e,s),I(e,n)},p(i,[s]){s&1&&n.src!==(r=i[0])&&_(n,"src",r)},i:X,o:X,d(i){i&&v(e)}}}function s0(t,e,n){let{img:r="icons/user.svg"}=e;return t.$$set=i=>{"img"in i&&n(0,r=i.img)},[r]}var cd=class extends z{constructor(e){super();K(this,e,s0,i0,H,{img:0})}},ld=cd;function o0(t){let e,n,r,i,s,o;return r=new ld({props:{img:t[0]}}),{c(){e=E("div"),n=E("div"),U(r.$$.fragment),_(n,"class","float-right"),_(e,"class","w-screen p-8")},m(a,c){y(a,e,c),I(e,n),P(r,n,null),i=!0,s||(o=Ae(n,"click",qi),s=!0)},p(a,[c]){let l={};c&1&&(l.img=a[0]),r.$set(l)},i(a){i||(b(r.$$.fragment,a),i=!0)},o(a){S(r.$$.fragment,a),i=!1},d(a){a&&v(e),M(r),s=!1,o()}}}function a0(t,e,n){let r,i;return qe(t,Ye,s=>n(1,i=s)),t.$$.update=()=>{if(t.$$.dirty&2){e:n(0,r=i.photoURL?i.photoURL:"icons/user.svg")}},[r,i]}var ud=class extends z{constructor(e){super();K(this,e,a0,o0,H,{})}},hd=ud;function c0(t){let e,n,r,i,s,o;e=new hd({});var a=t[1];function c(l){return{}}return a&&(r=new a(c(t))),s=new sd({props:{current:t[0],selectedBtn:t[2]}}),{c(){U(e.$$.fragment),n=N(),r&&U(r.$$.fragment),i=N(),U(s.$$.fragment)},m(l,u){P(e,l,u),y(l,n,u),r&&P(r,l,u),y(l,i,u),P(s,l,u),o=!0},p(l,[u]){if(a!==(a=l[1])){if(r){ae();let f=r;S(f.$$.fragment,1,0,()=>{M(f,1)}),ce()}a?(r=new a(c(l)),U(r.$$.fragment),b(r.$$.fragment,1),P(r,i.parentNode,i)):r=null}let h={};u&1&&(h.current=l[0]),s.$set(h)},i(l){o||(b(e.$$.fragment,l),r&&b(r.$$.fragment,l),b(s.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),r&&S(r.$$.fragment,l),S(s.$$.fragment,l),o=!1},d(l){M(e,l),l&&v(n),r&&M(r,l),l&&v(i),M(s,l)}}}function l0(t,e,n){let r,i="home",s=a=>{n(0,i=a)},o={home:sc,profile:td,lightning:ad};return t.$$.update=()=>{if(t.$$.dirty&1){e:n(1,r=o[i])}},[i,r,s]}var fd=class extends z{constructor(e){super();K(this,e,l0,c0,H,{})}},dd=fd;import.meta.env=Hi;var pd=new dd({target:document.body}),u0=pd;import.meta?.hot&&((void 0).accept(),(void 0).dispose(()=>{pd.$destroy()}));export{u0 as default};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=index.js.map

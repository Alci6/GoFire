var Ef=Object.defineProperty;var bf=(t,e)=>{for(var n in e)Ef(t,n,{get:e[n],enumerable:!0})};var ki={};bf(ki,{MODE:()=>If,NODE_ENV:()=>Tf,SSR:()=>Sf});var If="production",Tf="production",Sf=!1;function Y(){}function kf(t,e){for(let n in e)t[n]=e[n];return t}function Ko(t){return t()}function Go(){return Object.create(null)}function je(t){t.forEach(Ko)}function Af(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Cf(t){return Object.keys(t).length===0}function Rf(t,...e){if(t==null)return Y;let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ue(t,e,n){t.$$.on_destroy.push(Rf(e,n))}function yt(t,e,n,r){if(t){let i=Wo(t,e,n,r);return t[0](i)}}function Wo(t,e,n,r){return t[1]&&r?kf(n.ctx.slice(),t[1](r(e))):n.ctx}function Nf(t,e,n,r){if(t[2]&&r){let i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){let s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function vt(t,e,n,r,i,s,o){let a=Nf(e,r,i,s);if(a){let c=Wo(e,n,r,o);t.p(c,a)}}function Ft(t){return t??""}function b(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function _t(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function X(t){return document.createTextNode(t)}function R(){return X(" ")}function wt(){return X("")}function Ee(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Et(t){return t===""?null:+t}function Df(t){return Array.from(t.childNodes)}function ee(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ce(t,e){t.value=e??""}function $t(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function Ve(t,e,n){t.classList[n?"add":"remove"](e)}var Xo;function ur(t){Xo=t}function Ai(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r(e))}var gn=[],et=[],hr=[],Ci=[],Of=Promise.resolve(),Ri=!1;function Lf(){Ri||(Ri=!0,Of.then(Yo))}function Ni(t){hr.push(t)}function qt(t){Ci.push(t)}var Di=!1,Oi=new Set;function Yo(){if(!Di){Di=!0;do{for(let t=0;t<gn.length;t+=1){let e=gn[t];ur(e),Pf(e.$$)}for(ur(null),gn.length=0;et.length;)et.pop()();for(let t=0;t<hr.length;t+=1){let e=hr[t];Oi.has(e)||(Oi.add(e),e())}hr.length=0}while(gn.length);for(;Ci.length;)Ci.pop()();Ri=!1,Di=!1,Oi.clear()}}function Pf(t){if(t.fragment!==null){t.update(),je(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ni)}}var fr=new Set,bt;function Re(){bt={r:0,c:[],p:bt}}function Ne(){bt.r||je(bt.c),bt=bt.p}function T(t,e){t&&t.i&&(fr.delete(t),t.i(e))}function S(t,e,n,r){if(t&&t.o){if(fr.has(t))return;fr.add(t),bt.c.push(()=>{fr.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function yn(t,e){S(t,1,1,()=>{e.delete(t.key)})}function vn(t,e,n,r,i,s,o,a,c,l,u,h){let f=t.length,d=s.length,p=f,_={};for(;p--;)_[t[p].key]=p;let A=[],m=new Map,C=new Map;for(p=d;p--;){let K=h(i,s,p),he=n(K),D=o.get(he);D?r&&D.p(K,e):(D=l(he,K),D.c()),m.set(he,A[p]=D),he in _&&C.set(he,Math.abs(p-_[he]))}let $=new Set,Z=new Set;function ae(K){T(K,1),K.m(a,u),o.set(K.key,K),u=K.first,d--}for(;f&&d;){let K=A[d-1],he=t[f-1],D=K.key,L=he.key;K===he?(u=K.first,f--,d--):m.has(L)?!o.has(D)||$.has(D)?ae(K):Z.has(L)?f--:C.get(D)>C.get(L)?(Z.add(D),ae(K)):($.add(L),f--):(c(he,o),f--)}for(;f--;){let K=t[f];m.has(K.key)||c(K,o)}for(;d;)ae(A[d-1]);return A}function jt(t,e,n){let r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function U(t){t&&t.c()}function P(t,e,n,r){let{fragment:i,on_mount:s,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,n),r||Ni(()=>{let c=s.map(Ko).filter(Af);o?o.push(...c):je(c),t.$$.on_mount=[]}),a.forEach(Ni)}function M(t,e){let n=t.$$;n.fragment!==null&&(je(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Mf(t,e){t.$$.dirty[0]===-1&&(gn.push(t),Lf(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(t,e,n,r,i,s,o=[-1]){let a=Xo;ur(t);let c=t.$$={fragment:null,ctx:null,props:s,update:Y,not_equal:i,bound:Go(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:e.context||[]),callbacks:Go(),dirty:o,skip_bound:!1},l=!1;if(c.ctx=n?n(t,e.props||{},(u,h,...f)=>{let d=f.length?f[0]:h;return c.ctx&&i(c.ctx[u],c.ctx[u]=d)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](d),l&&Mf(t,u)),h}):[],c.update(),l=!0,je(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){let u=Df(e.target);c.fragment&&c.fragment.l(u),u.forEach(g)}else c.fragment&&c.fragment.c();e.intro&&T(t.$$.fragment),P(t,e.target,e.anchor,e.customElement),Yo()}ur(a)}var j=class{$destroy(){M(this,1),this.$destroy=Y}$on(e,n){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{let i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Cf(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var fe=t=>new Intl.NumberFormat("es",{notation:"compact",style:"currency",currency:"EUR"}).format(t);var Li=new Date().toISOString().slice(0,10);function Uf(t){let e,n,r,i=fe(t[0])+"",s;return{c(){e=w("p"),e.textContent="Objetivo logrado",n=R(),r=w("h6"),s=X(i),y(e,"class","euros text-xs text-center"),y(r,"class","euros text-xs text-center svelte-bssdtf")},m(o,a){v(o,e,a),v(o,n,a),v(o,r,a),b(r,s)},p(o,a){a&1&&i!==(i=fe(o[0])+"")&&ee(s,i)},d(o){o&&g(e),o&&g(n),o&&g(r)}}}function xf(t){let e,n,r=fe(t[1])+"",i,s,o,a,c=fe(t[0])+"",l;return{c(){e=w("p"),n=X("a "),i=X(r),s=R(),o=w("h6"),a=X("de "),l=X(c),y(e,"class","euros text-sm text-center"),y(o,"class","euros text-xs text-center svelte-bssdtf")},m(u,h){v(u,e,h),b(e,n),b(e,i),v(u,s,h),v(u,o,h),b(o,a),b(o,l)},p(u,h){h&2&&r!==(r=fe(u[1])+"")&&ee(i,r),h&1&&c!==(c=fe(u[0])+"")&&ee(l,c)},d(u){u&&g(e),u&&g(s),u&&g(o)}}}function Vf(t){let e,n,r,i,s;function o(l,u){return l[2]()?xf:Uf}let c=o(t,-1)(t);return{c(){e=w("div"),n=w("img"),i=R(),c.c(),y(n,"class","m-auto"),n.src!==(r="icons/goal.svg")&&y(n,"src",r),y(n,"alt","goal"),y(e,"class","goal  float-right bg-red-500 p-5  svelte-bssdtf")},m(l,u){v(l,e,u),b(e,n),b(e,i),c.m(e,null)},p(l,[u]){c.p(l,u)},i:Y,o:Y,d(l){l&&g(e),c.d()}}}function Ff(t,e,n){let{goal:r=0}=e,{road:i=0}=e,{balance:s=0}=e,o=()=>r>s;return t.$$set=a=>{"goal"in a&&n(0,r=a.goal),"road"in a&&n(1,i=a.road),"balance"in a&&n(3,s=a.balance)},[r,i,o,s]}var Qo=class extends j{constructor(e){super();B(this,e,Ff,Vf,q,{goal:0,road:1,balance:3})}},Jo=Qo;function $f(t){let e,n,r=t[1].default,i=yt(r,t,t[0],null);return{c(){e=w("div"),i&&i.c(),y(e,"class","card__background h-auto sm:w-96 w-11/12 mb-12 p-8 shadow-2xl relative")},m(s,o){v(s,e,o),i&&i.m(e,null),n=!0},p(s,[o]){i&&i.p&&(!n||o&1)&&vt(i,r,s,s[0],o,null,null)},i(s){n||(T(i,s),n=!0)},o(s){S(i,s),n=!1},d(s){s&&g(e),i&&i.d(s)}}}function qf(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=s=>{"$$scope"in s&&n(0,i=s.$$scope)},[i,r]}var Zo=class extends j{constructor(e){super();B(this,e,qf,$f,q,{})}},tt=Zo;var Bt=[];function zt(t,e=Y){let n,r=[];function i(a){if(q(t,a)&&(t=a,n)){let c=!Bt.length;for(let l=0;l<r.length;l+=1){let u=r[l];u[1](),Bt.push(u,t)}if(c){for(let l=0;l<Bt.length;l+=2)Bt[l][0](Bt[l+1]);Bt.length=0}}}function s(a){i(a(t))}function o(a,c=Y){let l=[a,c];return r.push(l),r.length===1&&(n=e(i)||Y),a(t),()=>{let u=r.indexOf(l);u!==-1&&r.splice(u,1),r.length===0&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}var Ge=zt({displayName:"",photoURL:"icons/user.svg",email:"",uid:""}),ea=()=>Ge.set(0);var nt=zt(0),ta=()=>nt.set(0);function jf(t){let e,n,r,i,s,o,a,c,l,u=fe(t[0])+"",h,f,d,p;return d=new Jo({props:{balance:t[0],goal:t[1],road:t[3]}}),{c(){e=w("h1"),n=X("Hola "),r=X(t[2]),i=R(),s=w("h3"),s.textContent="Bienvenido de nuevo",o=R(),a=w("h3"),a.textContent="Balance",c=R(),l=w("p"),h=X(u),f=R(),U(d.$$.fragment),y(a,"class","mt-8"),y(l,"class","euros")},m(_,A){v(_,e,A),b(e,n),b(e,r),v(_,i,A),v(_,s,A),v(_,o,A),v(_,a,A),v(_,c,A),v(_,l,A),b(l,h),v(_,f,A),P(d,_,A),p=!0},p(_,A){(!p||A&4)&&ee(r,_[2]),(!p||A&1)&&u!==(u=fe(_[0])+"")&&ee(h,u);let m={};A&1&&(m.balance=_[0]),A&2&&(m.goal=_[1]),d.$set(m)},i(_){p||(T(d.$$.fragment,_),p=!0)},o(_){S(d.$$.fragment,_),p=!1},d(_){_&&g(e),_&&g(i),_&&g(s),_&&g(o),_&&g(a),_&&g(c),_&&g(l),_&&g(f),M(d,_)}}}function Bf(t){let e,n;return e=new tt({props:{$$slots:{default:[jf]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,[i]){let s={};i&39&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function zf(t,e,n){let r,i,s;Ue(t,nt,c=>n(1,i=c)),Ue(t,Ge,c=>n(4,s=c));let{balance:o=100}=e,a=i-o;return t.$$set=c=>{"balance"in c&&n(0,o=c.balance)},t.$$.update=()=>{if(t.$$.dirty&16){e:n(2,r=s.displayName?s.displayName.split(" ")[0]:"crack")}},[o,i,r,a,s]}var na=class extends j{constructor(e){super();B(this,e,zf,Bf,q,{balance:0})}},ra=na;function Hf(t){let e,n,r,i,s,o,a;return{c(){e=w("div"),n=w("button"),r=w("img"),r.src!==(i=`icons/${t[1]}.svg`)&&y(r,"src",i),y(r,"alt",t[1]),y(r,"class","svelte-qgfubh"),Ve(r,"selected__icon",t[0]===t[1]),y(e,"class",s=""+(Ft(t[2])+" svelte-qgfubh")),Ve(e,"selected",t[0]===t[1])},m(c,l){v(c,e,l),b(e,n),b(n,r),o||(a=[Ee(n,"click",t[3]),Ee(e,"click",t[5])],o=!0)},p(c,[l]){l&3&&Ve(r,"selected__icon",c[0]===c[1]),l&3&&Ve(e,"selected",c[0]===c[1])},i:Y,o:Y,d(c){c&&g(e),o=!1,je(a)}}}function Kf(t,e,n){let{props:r={icon:"menu",style:"primary",onClick:()=>console.log("click")}}=e,{current:i="profile"}=e,{icon:s,style:o,onClick:a}=r;function c(l){Ai(t,l)}return t.$$set=l=>{"props"in l&&n(4,r=l.props),"current"in l&&n(0,i=l.current)},[i,s,o,a,r,c]}var ia=class extends j{constructor(e){super();B(this,e,Kf,Hf,q,{props:4,current:0})}},De=ia;function Gf(t){let e,n,r,i;n=new De({props:{props:t[1]}});let s=t[2].default,o=yt(s,t,t[3],null);return{c(){e=w("div"),U(n.$$.fragment),r=R(),o&&o.c(),y(e,"class","btn--close svelte-1dpv79t")},m(a,c){v(a,e,c),P(n,e,null),v(a,r,c),o&&o.m(a,c),i=!0},p(a,c){o&&o.p&&(!i||c&8)&&vt(o,s,a,a[3],c,null,null)},i(a){i||(T(n.$$.fragment,a),T(o,a),i=!0)},o(a){S(n.$$.fragment,a),S(o,a),i=!1},d(a){a&&g(e),M(n),a&&g(r),o&&o.d(a)}}}function Wf(t){let e,n,r,i;return n=new tt({props:{$$slots:{default:[Gf]},$$scope:{ctx:t}}}),{c(){e=w("div"),U(n.$$.fragment),y(e,"class",r=""+(Ft(t[0]?"hideModal":"modal")+" svelte-1dpv79t"))},m(s,o){v(s,e,o),P(n,e,null),i=!0},p(s,[o]){let a={};o&8&&(a.$$scope={dirty:o,ctx:s}),n.$set(a),(!i||o&1&&r!==(r=""+(Ft(s[0]?"hideModal":"modal")+" svelte-1dpv79t")))&&y(e,"class",r)},i(s){i||(T(n.$$.fragment,s),i=!0)},o(s){S(n.$$.fragment,s),i=!1},d(s){s&&g(e),M(n)}}}function Xf(t,e,n){let{$$slots:r={},$$scope:i}=e,{hideModal:s=!0}=e,a={icon:"delete",style:"tertiary",onClick:()=>n(0,s=!s)};return t.$$set=c=>{"hideModal"in c&&n(0,s=c.hideModal),"$$scope"in c&&n(3,i=c.$$scope)},[s,a,r,i]}var sa=class extends j{constructor(e){super();B(this,e,Xf,Wf,q,{hideModal:0})}},oa=sa;function Yf(t){let e,n,r,i;return{c(){e=w("input"),y(e,"type","text"),y(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),y(e,"placeholder",t[2])},m(s,o){v(s,e,o),Ce(e,t[0]),r||(i=Ee(e,"input",t[8]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&y(e,"class",n),o&4&&y(e,"placeholder",s[2]),o&1&&e.value!==s[0]&&Ce(e,s[0])},d(s){s&&g(e),r=!1,i()}}}function Qf(t){let e,n,r,i;return{c(){e=w("input"),y(e,"type","date"),y(e,"class",n="input__"+t[1]+" svelte-17e1blc"),y(e,"placeholder",t[2])},m(s,o){v(s,e,o),Ce(e,t[0]),r||(i=Ee(e,"input",t[7]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" svelte-17e1blc")&&y(e,"class",n),o&4&&y(e,"placeholder",s[2]),o&1&&Ce(e,s[0])},d(s){s&&g(e),r=!1,i()}}}function Jf(t){let e,n,r,i;return{c(){e=w("input"),y(e,"type","number"),y(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),y(e,"placeholder",t[2])},m(s,o){v(s,e,o),Ce(e,t[0]),r||(i=Ee(e,"input",t[6]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&y(e,"class",n),o&4&&y(e,"placeholder",s[2]),o&1&&Et(e.value)!==s[0]&&Ce(e,s[0])},d(s){s&&g(e),r=!1,i()}}}function Zf(t){let e,n,r,i;function s(c,l){if(c[4]==="number")return Jf;if(c[4]==="date")return Qf;if(c[4]==="text")return Yf}let o=s(t,-1),a=o&&o(t);return{c(){e=w("div"),n=w("h3"),r=X(t[3]),i=R(),a&&a.c(),y(n,"class","mt-8 mb-1"),y(e,"class","svelte-17e1blc")},m(c,l){v(c,e,l),b(e,n),b(n,r),b(e,i),a&&a.m(e,null)},p(c,[l]){l&8&&ee(r,c[3]),o===(o=s(c,l))&&a?a.p(c,l):(a&&a.d(1),a=o&&o(c),a&&(a.c(),a.m(e,null)))},i:Y,o:Y,d(c){c&&g(e),a&&a.d()}}}function ed(t,e,n){let{icon:r="menu"}=e,{style:i="primary"}=e,{placeholder:s="0€"}=e,{value:o=""}=e,{label:a=""}=e,{type:c="number"}=e;function l(){o=Et(this.value),n(0,o)}function u(){o=this.value,n(0,o)}function h(){o=this.value,n(0,o)}return t.$$set=f=>{"icon"in f&&n(5,r=f.icon),"style"in f&&n(1,i=f.style),"placeholder"in f&&n(2,s=f.placeholder),"value"in f&&n(0,o=f.value),"label"in f&&n(3,a=f.label),"type"in f&&n(4,c=f.type)},[o,i,s,a,c,r,l,u,h]}var aa=class extends j{constructor(e){super();B(this,e,ed,Zf,q,{icon:5,style:1,placeholder:2,value:0,label:3,type:4})}},_n=aa;function td(t){let e,n,r,i,s,o,a,c,l,u,h,f;function d(m){t[7](m)}let p={label:"añade la cantidad",type:"number"};t[2]!==void 0&&(p.value=t[2]),i=new _n({props:p}),et.push(()=>jt(i,"value",d));function _(m){t[8](m)}let A={label:"¿Cuándo añadiste los fondos?",type:"date"};return t[3]!==void 0&&(A.value=t[3]),a=new _n({props:A}),et.push(()=>jt(a,"value",_)),h=new De({props:{props:t[4]}}),{c(){e=w("h1"),n=X(t[1]),r=R(),U(i.$$.fragment),o=R(),U(a.$$.fragment),l=R(),u=w("div"),U(h.$$.fragment),y(e,"class","noselect text-2xl"),y(u,"class","btn--save mt-9 svelte-g49tz7")},m(m,C){v(m,e,C),b(e,n),v(m,r,C),P(i,m,C),v(m,o,C),P(a,m,C),v(m,l,C),v(m,u,C),P(h,u,null),f=!0},p(m,C){(!f||C&2)&&ee(n,m[1]);let $={};!s&&C&4&&(s=!0,$.value=m[2],qt(()=>s=!1)),i.$set($);let Z={};!c&&C&8&&(c=!0,Z.value=m[3],qt(()=>c=!1)),a.$set(Z)},i(m){f||(T(i.$$.fragment,m),T(a.$$.fragment,m),T(h.$$.fragment,m),f=!0)},o(m){S(i.$$.fragment,m),S(a.$$.fragment,m),S(h.$$.fragment,m),f=!1},d(m){m&&g(e),m&&g(r),M(i,m),m&&g(o),M(a,m),m&&g(l),m&&g(u),M(h)}}}function nd(t){let e,n;return e=new oa({props:{hideModal:t[0],$$slots:{default:[td]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,[i]){let s={};i&1&&(s.hideModal=r[0]),i&1038&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function rd(t,e,n){let{hideModal:r=!0}=e,{onClick:i}=e,{title:s="Title"}=e,{id:o="0"}=e,a=0,c=()=>n(0,r=!r),l={icon:"saving",style:"modal",onClick:()=>{c(),i(o,Li,a)}},u=Li;function h(d){a=d,n(2,a)}function f(d){u=d,n(3,u)}return t.$$set=d=>{"hideModal"in d&&n(0,r=d.hideModal),"onClick"in d&&n(5,i=d.onClick),"title"in d&&n(1,s=d.title),"id"in d&&n(6,o=d.id)},[r,s,a,u,l,i,o,h,f]}var ca=class extends j{constructor(e){super();B(this,e,rd,nd,q,{hideModal:0,onClick:5,title:1,id:6})}},la=ca;function ua(t,e,n){let r=t.slice();return r[1]=e[n].start,r[2]=e[n].size,r}function ha(t){let e,n,r;return{c(){e=w("tr"),n=w("td"),r=R(),$t(n,"--start",t[1]),$t(n,"--size",t[2])},m(i,s){v(i,e,s),b(e,n),b(e,r)},p(i,s){s&1&&$t(n,"--start",i[1]),s&1&&$t(n,"--size",i[2])},d(i){i&&g(e)}}}function id(t){let e,n,r=t[0],i=[];for(let s=0;s<r.length;s+=1)i[s]=ha(ua(t,r,s));return{c(){e=w("table"),n=w("tbody");for(let s=0;s<i.length;s+=1)i[s].c();y(e,"class","charts-css line svelte-1xzgxgp"),y(e,"id","my-chart")},m(s,o){v(s,e,o),b(e,n);for(let a=0;a<i.length;a+=1)i[a].m(n,null)},p(s,[o]){if(o&1){r=s[0];let a;for(a=0;a<r.length;a+=1){let c=ua(s,r,a);i[a]?i[a].p(c,o):(i[a]=ha(c),i[a].c(),i[a].m(n,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=r.length}},i:Y,o:Y,d(s){s&&g(e),_t(i,s)}}}function sd(t,e,n){let{chart:r=[{start:0,size:.4},{start:.4,size:1}]}=e;return t.$$set=i=>{"chart"in i&&n(0,r=i.chart)},[r]}var fa=class extends j{constructor(e){super();B(this,e,sd,id,q,{chart:0})}},wn=fa;function da(t,e,n){let r=t.slice();return r[22]=e[n],r}function od(t){let e,n,r,i,s,o=fe(t[2])+"",a,c,l,u,h,f;return l=new wn({}),{c(){e=w("h6"),n=X(t[3]),r=R(),i=w("div"),s=w("p"),a=X(o),c=R(),U(l.$$.fragment),u=R(),h=w("p"),h.textContent=`${t[8]}`,y(e,"class","mb-1"),y(s,"class","euros"),y(h,"class","percent svelte-49wrw"),y(i,"class","data svelte-49wrw")},m(d,p){v(d,e,p),b(e,n),v(d,r,p),v(d,i,p),b(i,s),b(s,a),b(i,c),P(l,i,null),b(i,u),b(i,h),f=!0},p(d,p){(!f||p&8)&&ee(n,d[3]),(!f||p&4)&&o!==(o=fe(d[2])+"")&&ee(a,o)},i(d){f||(T(l.$$.fragment,d),f=!0)},o(d){S(l.$$.fragment,d),f=!1},d(d){d&&g(e),d&&g(r),d&&g(i),M(l)}}}function ad(t){let e,n,r,i,s,o,a,c,l,u,h,f,d;o=new wn({});let p=t[12],_=[];for(let m=0;m<p.length;m+=1)_[m]=pa(da(t,p,m));let A=m=>S(_[m],1,1,()=>{_[m]=null});return{c(){e=w("input"),n=R(),r=w("div"),i=w("input"),s=R(),U(o.$$.fragment),a=R(),c=w("p"),c.textContent=`${t[8]}`,l=R(),u=w("div");for(let m=0;m<_.length;m+=1)_[m].c();y(e,"name","title"),y(e,"class","title w-64 svelte-49wrw"),y(e,"type","text"),y(i,"name","number"),y(i,"type","number"),y(i,"class","svelte-49wrw"),y(c,"class","percent svelte-49wrw"),y(r,"class","data svelte-49wrw"),y(u,"class"," flex flex-row float-right")},m(m,C){v(m,e,C),Ce(e,t[3]),v(m,n,C),v(m,r,C),b(r,i),Ce(i,t[2]),b(r,s),P(o,r,null),b(r,a),b(r,c),v(m,l,C),v(m,u,C);for(let $=0;$<_.length;$+=1)_[$].m(u,null);h=!0,f||(d=[Ee(e,"change",t[10]),Ee(e,"input",t[15]),Ee(i,"change",t[11]),Ee(i,"input",t[16])],f=!0)},p(m,C){if(C&8&&e.value!==m[3]&&Ce(e,m[3]),C&4&&Et(i.value)!==m[2]&&Ce(i,m[2]),C&4096){p=m[12];let $;for($=0;$<p.length;$+=1){let Z=da(m,p,$);_[$]?(_[$].p(Z,C),T(_[$],1)):(_[$]=pa(Z),_[$].c(),T(_[$],1),_[$].m(u,null))}for(Re(),$=p.length;$<_.length;$+=1)A($);Ne()}},i(m){if(!h){T(o.$$.fragment,m);for(let C=0;C<p.length;C+=1)T(_[C]);h=!0}},o(m){S(o.$$.fragment,m),_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)S(_[C]);h=!1},d(m){m&&g(e),m&&g(n),m&&g(r),M(o),m&&g(l),m&&g(u),_t(_,m),f=!1,je(d)}}}function pa(t){let e,n,r,i;return n=new De({props:{props:t[22]}}),{c(){e=w("div"),U(n.$$.fragment),r=R()},m(s,o){v(s,e,o),P(n,e,null),b(e,r),i=!0},p:Y,i(s){i||(T(n.$$.fragment,s),i=!0)},o(s){S(n.$$.fragment,s),i=!1},d(s){s&&g(e),M(n)}}}function ma(t){let e,n,r=fe(t[6])+"",i;return{c(){e=w("h3"),n=X("Rentabilidad: "),i=X(r),y(e,"class","mt-1 revenue text-sm")},m(s,o){v(s,e,o),b(e,n),b(e,i)},p(s,o){o&64&&r!==(r=fe(s[6])+"")&&ee(i,r)},d(s){s&&g(e)}}}function cd(t){let e,n,r,i,s,o,a;e=new la({props:{hideModal:t[5],title:t[3],id:t[7],onClick:t[1].saving}});let c=[ad,od],l=[];function u(f,d){return f[0]?0:1}i=u(t,-1),s=l[i]=c[i](t);let h=t[9].length>0&&!t[0]&&ma(t);return{c(){U(e.$$.fragment),n=R(),r=w("div"),s.c(),o=R(),h&&h.c(),y(r,"class","w-64 m-3 relative svelte-49wrw"),Ve(r,"hightlight",t[4])},m(f,d){P(e,f,d),v(f,n,d),v(f,r,d),l[i].m(r,null),b(r,o),h&&h.m(r,null),a=!0},p(f,[d]){let p={};d&32&&(p.hideModal=f[5]),d&8&&(p.title=f[3]),d&2&&(p.onClick=f[1].saving),e.$set(p);let _=i;i=u(f,d),i===_?l[i].p(f,d):(Re(),S(l[_],1,1,()=>{l[_]=null}),Ne(),s=l[i],s?s.p(f,d):(s=l[i]=c[i](f),s.c()),T(s,1),s.m(r,o)),f[9].length>0&&!f[0]?h?h.p(f,d):(h=ma(f),h.c(),h.m(r,null)):h&&(h.d(1),h=null),d&16&&Ve(r,"hightlight",f[4])},i(f){a||(T(e.$$.fragment,f),T(s),a=!0)},o(f){S(e.$$.fragment,f),S(s),a=!1},d(f){M(e,f),f&&g(n),f&&g(r),l[i].d(),h&&h.d()}}}function ld(t,e,n){let r,i,{edit:s=!1}=e,{data:o=[]}=e,{props:a={id:"9c72c81f-480d-4575-bdff-45e50afc7a33",title:"Total Title",number:0,percent:0,hightlight:!1,saving:[]}}=e,{id:c,title:l,number:u,percent:h,hightlight:f,saving:d}=a,p=!0,_=()=>n(5,p=!p),A={remove:()=>o.remove(c),changeName:()=>o.change(c,"title",l),changeNumber:()=>o.change(c,"number",u),changeHigh:()=>o.change(c,"hightlight",f),toogleHigh:()=>{n(4,f=!f),$()}},{changeName:m,changeNumber:C,changeHigh:$,remove:Z,toogleHigh:ae}=A,K=[{icon:"delete",style:"tertiary",onClick:Z},{icon:"highlight",style:"tertiary",onClick:ae},{icon:"saving",style:"tertiary",onClick:_}];function he(){l=this.value,n(3,l)}function D(){u=Et(this.value),n(2,u)}t.$$set=L=>{"edit"in L&&n(0,s=L.edit),"data"in L&&n(1,o=L.data),"props"in L&&n(13,a=L.props)},t.$$.update=()=>{if(t.$$.dirty&16388){e:n(6,i=u-r)}};e:n(14,r=d.reduce((L,qe)=>L+qe.amount,0));return[s,o,u,l,f,p,i,c,h,d,m,C,K,a,r,he,D]}var ga=class extends j{constructor(e){super();B(this,e,ld,cd,q,{edit:0,data:1,props:13})}},ya=ga;var dr,ud=new Uint8Array(16);function hd(){if(!dr&&(dr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!dr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dr(ud)}var fd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function dd(t){return typeof t=="string"&&fd.test(t)}var me=[];for(var Pi=0;Pi<256;++Pi)me.push((Pi+256).toString(16).substr(1));function pd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(me[t[e+0]]+me[t[e+1]]+me[t[e+2]]+me[t[e+3]]+"-"+me[t[e+4]]+me[t[e+5]]+"-"+me[t[e+6]]+me[t[e+7]]+"-"+me[t[e+8]]+me[t[e+9]]+"-"+me[t[e+10]]+me[t[e+11]]+me[t[e+12]]+me[t[e+13]]+me[t[e+14]]+me[t[e+15]]).toLowerCase();if(!dd(n))throw TypeError("Stringified UUID is invalid");return n}function va(t,e,n){t=t||{};var r=t.random||(t.rng||hd)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return pd(r)}var md={title:"Título",number:0,revenue:0,percent:0,hightlight:!1,saving:[]},gd=()=>{let{subscribe:t,update:e,set:n}=zt([]),r=()=>{let u=[];return t(h=>u=h),u};return{subscribe:t,update:e,add:()=>e(u=>[...u,{...md,id:va()}]),set:n,remove:u=>e(h=>h.filter(f=>f.id!==u)),change:(u,h,f)=>{let d=r();d.map(p=>p.id===u?p[h]=f:""),n(d)},balance:()=>r().reduce((f,d)=>f+d.number,0),saving:(u,h,f)=>{let d=r();d.map(p=>p.id===u?p.saving=[...p.saving,{today:h,amount:f}]:""),n(d)},revenue:()=>{let u=r(),h=[];return u.map(d=>d.saving.map(p=>h=[...h,p.amount])),h.reduce((d,p)=>d+p,0)}}},Be=gd(),_a=()=>{Be.set([])};function wa(t,e,n){let r=t.slice();return r[2]=e[n],r}function Ea(t,e){let n,r,i;return r=new ya({props:{edit:e[0],props:e[2],data:Be}}),{key:t,first:null,c(){n=wt(),U(r.$$.fragment),this.first=n},m(s,o){v(s,n,o),P(r,s,o),i=!0},p(s,o){e=s;let a={};o&1&&(a.edit=e[0]),o&2&&(a.props=e[2]),r.$set(a)},i(s){i||(T(r.$$.fragment,s),i=!0)},o(s){S(r.$$.fragment,s),i=!1},d(s){s&&g(n),M(r,s)}}}function yd(t){let e=[],n=new Map,r,i,s=t[1],o=a=>a[2].id;for(let a=0;a<s.length;a+=1){let c=wa(t,s,a),l=o(c);n.set(l,e[a]=Ea(l,c))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=wt()},m(a,c){for(let l=0;l<e.length;l+=1)e[l].m(a,c);v(a,r,c),i=!0},p(a,[c]){c&3&&(s=a[1],Re(),e=vn(e,c,o,1,a,s,n,r.parentNode,yn,Ea,r,wa),Ne())},i(a){if(!i){for(let c=0;c<s.length;c+=1)T(e[c]);i=!0}},o(a){for(let c=0;c<e.length;c+=1)S(e[c]);i=!1},d(a){for(let c=0;c<e.length;c+=1)e[c].d(a);a&&g(r)}}}function vd(t,e,n){let r;Ue(t,Be,s=>n(1,r=s));let{edit:i=!1}=e;return t.$$set=s=>{"edit"in s&&n(0,i=s.edit)},[i,r]}var ba=class extends j{constructor(e){super();B(this,e,vd,yd,q,{edit:0})}},pr=ba;function _d(t){let e,n,r,i,s,o=fe(t[0])+"",a,c,l,u,h,f;return l=new wn({}),{c(){e=w("div"),n=w("h6"),n.textContent=`${t[1]}`,r=R(),i=w("div"),s=w("p"),a=X(o),c=R(),U(l.$$.fragment),u=R(),h=w("p"),h.textContent=`${t[2]}`,y(n,"class","mb-1"),y(s,"class","euros"),y(h,"class","percent svelte-x91ufk"),y(i,"class","data svelte-x91ufk"),y(e,"class","w-64 m-3 relative m-6 svelte-x91ufk"),Ve(e,"hightlight",t[3])},m(d,p){v(d,e,p),b(e,n),b(e,r),b(e,i),b(i,s),b(s,a),b(i,c),P(l,i,null),b(i,u),b(i,h),f=!0},p(d,[p]){(!f||p&1)&&o!==(o=fe(d[0])+"")&&ee(a,o)},i(d){f||(T(l.$$.fragment,d),f=!0)},o(d){S(l.$$.fragment,d),f=!1},d(d){d&&g(e),M(l)}}}function wd(t,e,n){let{revenue:r=0}=e,{props:i={title:"Beneficios",number:10,percent:0,hightlight:!0}}=e,{title:s,number:o,percent:a,hightlight:c}=i;return t.$$set=l=>{"revenue"in l&&n(0,r=l.revenue),"props"in l&&n(4,i=l.props)},[r,s,a,c,i]}var Ia=class extends j{constructor(e){super();B(this,e,wd,_d,q,{revenue:0,props:4})}},Ta=Ia;function Ed(t){let e,n,r,i,s,o;return e=new ra({props:{balance:t[0]}}),r=new Ta({props:{revenue:t[1]}}),s=new pr({}),{c(){U(e.$$.fragment),n=R(),U(r.$$.fragment),i=R(),U(s.$$.fragment)},m(a,c){P(e,a,c),v(a,n,c),P(r,a,c),v(a,i,c),P(s,a,c),o=!0},p:Y,i(a){o||(T(e.$$.fragment,a),T(r.$$.fragment,a),T(s.$$.fragment,a),o=!0)},o(a){S(e.$$.fragment,a),S(r.$$.fragment,a),S(s.$$.fragment,a),o=!1},d(a){M(e,a),a&&g(n),M(r,a),a&&g(i),M(s,a)}}}function bd(t){let e=Be.balance(),n=Be.balance()-Be.revenue();return[e,n]}var Sa=class extends j{constructor(e){super();B(this,e,bd,Ed,q,{})}},ka=Sa;var Mi=function(t,e){return Mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Mi(t,e)};function Id(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Mi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ui=function(){return Ui=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ui.apply(this,arguments)};function mr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Td(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Sd(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function xi(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gr(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Aa(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var kd=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)==55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ad=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{var s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Cd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,d=l&63;c||(d=64,o||(f=64)),r.push(n[u],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kd(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ad(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length,a=o?n[t.charAt(i)]:0;++i;var c=i<t.length,l=c?n[t.charAt(i)]:64;++i;var u=i<t.length,h=u?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw Error();var f=s<<2|a>>4;if(r.push(f),l!==64){var d=a<<4&240|l>>2;if(r.push(d),h!==64){var p=l<<6&192|h;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ca=function(t){try{return Cd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};var Rd=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();function ce(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yr(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ce())}function vr(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _r(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ra(){return ce().indexOf("Electron/")>=0}function wr(){var t=ce();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Na(){return ce().indexOf("MSAppHost/")>=0}var Nd="FirebaseError",bn=function(t){Id(e,t);function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name=Nd,Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,En.prototype.create),s}return e}(Error),En=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+e,o=this.errors[e],a=o?Dd(o,i):"Error",c=this.serviceName+": "+a+" ("+s+").",l=new bn(s,c,i);return l},t}();function Dd(t,e){return t.replace(Od,function(n,r){var i=e[r];return i!=null?String(i):"<"+r+"?>"})}var Od=/\{\$([^}]+)}/g;function Da(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ht(t){for(var e=[],n=function(c,l){Array.isArray(l)?l.forEach(function(u){e.push(encodeURIComponent(c)+"="+encodeURIComponent(u))}):e.push(encodeURIComponent(c)+"="+encodeURIComponent(l))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r],o=s[0],a=s[1];n(o,a)}return e.length?"&"+e.join("&"):""}function Oa(t,e){var n=new Ld(t,e);return n.subscribe.bind(n)}var Ld=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Pd(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Vi),s.error===void 0&&(s.error=Vi),s.complete===void 0&&(s.complete=Vi);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch(a){}}),this.observers.push(s),o},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function Pd(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function Vi(){}function We(t){return t&&t._delegate?t._delegate:t}var rt=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();var it="[DEFAULT]";var xd=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(e){e===void 0&&(e=it);var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new Rd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(s){}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n=Ui({identifier:it,optional:!1},e),r=n.identifier,i=n.optional,s=this.normalizeInstanceIdentifier(r);if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(Ud(e))try{this.getOrInitializeService({instanceIdentifier:it})}catch(h){}try{for(var i=xi(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var o=gr(s.value,2),a=o[0],c=o[1],l=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:l});c.resolve(u)}catch(h){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=it),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return Td(this,void 0,void 0,function(){var e;return Sd(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Aa(Aa([],gr(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),gr(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=it),this.instances.has(e)},t.prototype.initialize=function(e){var n,r;e===void 0&&(e={});var i=e.instanceIdentifier,s=i===void 0?it:i,o=e.options,a=o===void 0?{}:o,c=this.normalizeInstanceIdentifier(s);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:c,options:a});try{for(var u=xi(this.instancesDeferred.entries()),h=u.next();!h.done;h=u.next()){var f=gr(h.value,2),d=f[0],p=f[1],_=this.normalizeInstanceIdentifier(d);c===_&&p.resolve(l)}}catch(A){n={error:A}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return this.invokeOnInitCallbacks(l,c),l},t.prototype.onInit=function(e){var n=this;return this.onInitCallbacks.add(e),function(){n.onInitCallbacks.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var r,i;try{for(var s=xi(this.onInitCallbacks),o=s.next();!o.done;o=s.next()){var a=o.value;try{a(e,n)}catch(c){}}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,r=e.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Md(n),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(o){}return s||null},t.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:it:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function Md(t){return t===it?void 0:t}function Ud(t){return t.instantiationMode==="EAGER"}var Vd=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new xd(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function Fe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var It,G;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(G||(G={}));var Fd={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},$d=G.INFO,qd=(It={},It[G.DEBUG]="log",It[G.VERBOSE]="log",It[G.INFO]="info",It[G.WARN]="warn",It[G.ERROR]="error",It),jd=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),s=qd[e];if(s)console[s].apply(console,Fe(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},In=function(){function t(e){this.name=e,this._logLevel=$d,this._logHandler=jd,this._userLogHandler=null}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in G))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?Fd[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Fe([this,G.DEBUG],e)),this._logHandler.apply(this,Fe([this,G.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Fe([this,G.VERBOSE],e)),this._logHandler.apply(this,Fe([this,G.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Fe([this,G.INFO],e)),this._logHandler.apply(this,Fe([this,G.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Fe([this,G.WARN],e)),this._logHandler.apply(this,Fe([this,G.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Fe([this,G.ERROR],e)),this._logHandler.apply(this,Fe([this,G.ERROR],e))},t}();var La=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bd(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Bd(t){let e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}var Pa="@firebase/app-exp",zd="0.0.900-exp.d92a36260";var Fi=new In("@firebase/app"),Hd="@firebase/app-compat",Kd="@firebase/analytics-compat",Gd="@firebase/analytics-exp",Wd="@firebase/auth-exp",Xd="@firebase/auth-compat",Yd="@firebase/database",Qd="@firebase/database-compat",Jd="@firebase/functions-exp",Zd="@firebase/functions-compat",ep="@firebase/installations-exp",tp="@firebase/installations-compat",np="@firebase/messaging-exp",rp="@firebase/messaging-compat",ip="@firebase/performance-exp",sp="@firebase/performance-compat",op="@firebase/remote-config-exp",ap="@firebase/remote-config-compat",cp="@firebase/storage",lp="@firebase/storage-compat",up="@firebase/firestore",hp="@firebase/firestore-compat",fp="firebase-exp",dp="9.0.0-beta.2";var Ma="[DEFAULT]",pp={[Pa]:"fire-core",[Hd]:"fire-core-compat",[Gd]:"fire-analytics",[Kd]:"fire-analytics-compat",[Wd]:"fire-auth",[Xd]:"fire-auth-compat",[Yd]:"fire-rtdb",[Qd]:"fire-rtdb-compat",[Jd]:"fire-fn",[Zd]:"fire-fn-compat",[ep]:"fire-iid",[tp]:"fire-iid-compat",[np]:"fire-fcm",[rp]:"fire-fcm-compat",[ip]:"fire-perf",[sp]:"fire-perf-compat",[op]:"fire-rc",[ap]:"fire-rc-compat",[cp]:"fire-gcs",[lp]:"fire-gcs-compat",[up]:"fire-fst",[hp]:"fire-fst-compat","fire-js":"fire-js",[fp]:"fire-js-all"};var Er=new Map,$i=new Map;function mp(t,e){try{t.container.addComponent(e)}catch(n){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tt(t){let e=t.name;if($i.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;$i.set(e,t);for(let n of Er.values())mp(n,t);return!0}function Tn(t,e){return t.container.getProvider(e)}var gp={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},br=new En("app","Firebase",gp);var Ua=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rt("app-exp",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}};var St=dp;function qi(t,e={}){typeof e!="object"&&(e={name:e});let n=Object.assign({name:Ma,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw br.create("bad-app-name",{appName:String(r)});if(Er.has(r))throw br.create("duplicate-app",{appName:r});let i=new Vd(r);for(let o of $i.values())i.addComponent(o);let s=new Ua(t,n,i);return Er.set(r,s),s}function Ir(t=Ma){let e=Er.get(t);if(!e)throw br.create("no-app",{appName:t});return e}function st(t,e,n){var r;let i=(r=pp[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(a.join(" "));return}Tt(new rt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function yp(t){Tt(new rt("platform-logger",e=>new La(e),"PRIVATE")),st(Pa,zd,t),st("fire-js","")}yp();var vp="firebase-exp",_p="9.0.0-beta.2";st(vp,_p,"app");var wp={apiKey:"AIzaSyDWiDgqYUOUq1tsA8C5zY3eJR170KRa3qA",authDomain:"finanzas-cfeb0.firebaseapp.com",projectId:"finanzas-cfeb0",storageBucket:"finanzas-cfeb0.appspot.com",messagingSenderId:"245107666949",appId:"1:245107666949:web:f8bac696fa6a205541ac6c",measurementId:"G-LR1WRTGGG2"},L0=qi(wp);function Ep(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var xa=new En("auth","Firebase",Ep());var Va=new In("@firebase/auth-exp");function Tr(t,...e){Va.logLevel<=G.ERROR&&Va.error(`Auth (${St}): ${t}`,...e)}function Xe(t,...e){throw ji(t,...e)}function Kt(t,...e){return ji(t,...e)}function ji(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xa.create(t,...e)}function x(t,e,...n){if(!t)throw ji(e,...n)}function Ye(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Tr(e),new Error(e)}function ot(t,e){t||Ye(e)}var Fa=new Map;function Qe(t){ot(t instanceof Function,"Expected a class definition");let e=Fa.get(t);return e?(ot(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fa.set(t,e),e)}function bp(t,e){let n=Tn(t,"auth-exp");if(n.isInitialized()){let i=n.getImmediate();Xe(i,"already-initialized")}return n.initialize({options:e})}function Ip(t,e){let n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qe);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Bi(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Tp(){return $a()==="http:"||$a()==="https:"}function $a(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Sp(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Tp()||vr()||"connection"in navigator)?navigator.onLine:!0}function kp(){if(typeof navigator=="undefined")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Gt=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ot(n>e,"Short delay should be less than long delay!"),this.isMobile=yr()||_r()}get(){return Sp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function zi(t,e){ot(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Sr=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ap={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"};var Cp=new Gt(3e4,6e4);function Rp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kr(t,e,n,r,i={}){return qa(t,i,()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Ht(Object.assign({key:t.config.apiKey},o)).slice(1),c=new(Sr.headers());return c.set("Content-Type","application/json"),c.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&c.set("X-Firebase-Locale",t.languageCode),Sr.fetch()(ja(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function qa(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Ap),e);try{let i=new Ba(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Hi(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=(s.ok?o.errorMessage:o.error.message).split(" : ")[0];if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hi(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Hi(t,"email-already-in-use",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");Xe(t,l)}}catch(i){if(i instanceof bn)throw i;Xe(t,"network-request-failed")}}async function Np(t,e,n,r,i={}){let s=await kr(t,e,n,r,i);return"mfaPendingCredential"in s&&Xe(t,"multi-factor-auth-required",{serverResponse:s}),s}function ja(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?zi(t.config,i):`${t.config.apiScheme}://${i}`}var Ba=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kt(this.auth,"timeout")),Cp.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Hi(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Kt(t,e,r);return i.customData._tokenResponse=n,i}async function Dp(t,e){return kr(t,"POST","/v1/accounts:delete",e)}async function Op(t,e){return kr(t,"POST","/v1/accounts:lookup",e)}function Sn(t){if(!!t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function Lp(t,e=!1){let n=We(t),r=await n.getIdToken(e),i=Gi(r);x(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Sn(Ki(i.auth_time)),issuedAtTime:Sn(Ki(i.iat)),expirationTime:Sn(Ki(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ki(t){return Number(t)*1e3}function Gi(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tr("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ca(n);return i?JSON.parse(i):(Tr("Failed to decode base64 JWT payload"),null)}catch(i){return Tr("Caught error parsing JWT payload as JSON",i),null}}function Pp(t){let e=Gi(t);return x(e,"internal-error"),x(typeof e.exp!="undefined","internal-error"),x(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}async function kn(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bn&&Mp(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Mp({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var za=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Wi=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sn(this.lastLoginAt),this.creationTime=Sn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Ar(t){var e;let n=t.auth,r=await t.getIdToken(),i=await kn(t,Op(n,{idToken:r}));x(i==null?void 0:i.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?xp(s.providerUserInfo):[],a=Up(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(a==null?void 0:a.length),u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wi(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Vp(t){let e=We(t);await Ar(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Up(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xp(t){return t.map(e=>{var{providerId:n}=e,r=mr(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function Fp(t,e){let n=await qa(t,{},()=>{let r=Ht({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ja(t,i,"/v1/token",`key=${s}`);return Sr.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}var Wt=class{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){x(e.idToken,"internal-error"),x(typeof e.idToken!="undefined","internal-error"),x(typeof e.refreshToken!="undefined","internal-error");let n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):Pp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return x(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:s}=await Fp(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Wt;return r&&(x(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(x(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(x(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wt,this.toJSON())}_performRefresh(){return Ye("not implemented")}};function at(t,e){x(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}var ct=class{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=mr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new za(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.metadata=new Wi(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let n=await kn(this,this.stsTokenManager.getToken(this.auth,e));return x(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Lp(this,e)}reload(){return Vp(this)}_assign(e){this!==e&&(x(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ct(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ar(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await kn(this,Dp(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,d=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,m=(l=n.createdAt)!==null&&l!==void 0?l:void 0,C=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:$,emailVerified:Z,isAnonymous:ae,providerData:K,stsTokenManager:he}=n;x($&&he,e,"internal-error");let D=Wt.fromJSON(this.name,he);x(typeof $=="string",e,"internal-error"),at(h,e.name),at(f,e.name),x(typeof Z=="boolean",e,"internal-error"),x(typeof ae=="boolean",e,"internal-error"),at(d,e.name),at(p,e.name),at(_,e.name),at(A,e.name),at(m,e.name),at(C,e.name);let L=new ct({uid:$,auth:e,email:f,emailVerified:Z,displayName:h,isAnonymous:ae,photoURL:p,phoneNumber:d,tenantId:_,stsTokenManager:D,createdAt:m,lastLoginAt:C});return K&&Array.isArray(K)&&(L.providerData=K.map(qe=>Object.assign({},qe))),A&&(L._redirectEventId=A),L}static async _fromIdTokenResponse(e,n,r=!1){let i=new Wt;i.updateFromServerResponse(n);let s=new ct({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ar(s),s}};var Xi=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){let n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};Xi.type="NONE";var Ha=Xi;function Cr(t,e,n){return`firebase:${t}:${e}:${n}`}var Xt=class{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Cr(this.userKey,i.apiKey,s),this.fullPersistenceKey=Cr("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?ct._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xt(Qe(Ha),e,r);let i=Qe(Ha);for(let a of n)if(await a._isAvailable()){i=a;break}let s=null,o=Cr(r,e.config.apiKey,e.name);for(let a of n)try{let c=await a._get(o);if(c){let l=ct._fromJSON(e,c);a!==i&&(s=l);break}}catch(c){}return s&&await i._set(o,s.toJSON()),await Promise.all(n.map(async a=>{if(a!==i)try{await a._remove(o)}catch(c){}})),new Xt(i,e,r)}};function Ja(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wa(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ka(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ya(e))return"Blackberry";if(Qa(e))return"Webos";if(Yi(e))return"Safari";if((e.includes("chrome/")||Ga(e))&&!e.includes("edge/"))return"Chrome";if(Xa(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ka(t=ce()){return/firefox\//i.test(t)}function Yi(t=ce()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ga(t=ce()){return/crios\//i.test(t)}function Wa(t=ce()){return/iemobile/i.test(t)}function Xa(t=ce()){return/android/i.test(t)}function Ya(t=ce()){return/blackberry/i.test(t)}function Qa(t=ce()){return/webos/i.test(t)}function Rr(t=ce()){return/iphone|ipad|ipod/i.test(t)}function $p(t=ce()){var e;return Rr(t)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function qp(){return wr()&&document.documentMode===10}function Za(t=ce()){return Rr(t)||Xa(t)||Qa(t)||Ya(t)||/windows phone/i.test(t)||Wa(t)}function jp(){try{return!!(window&&window!==window.top)}catch(t){return!1}}function ec(t,e=[]){let n;switch(t){case"Browser":n=Ja(ce());break;case"Worker":n=`${Ja(ce())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${St}/${r}`}var tc=class{constructor(e,n){this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qi(this),this.idTokenSubscription=new Qi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.redirectInitializerError=null,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xa,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qe(n)),this._initializationPromise=this.queue(async()=>{var r;this._deleted||(this.persistenceManager=await Xt.create(this,e),!this._deleted&&(((r=this._popupRedirectResolver)===null||r===void 0?void 0:r._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(n),!this._deleted&&(this._isInitialized=!0)))}),this._initializationPromise.then(()=>{if(this.redirectInitializerError)throw this.redirectInitializerError})}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var n;let r=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=r==null?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===s)&&(o==null?void 0:o.user)&&(r=o.user)}return r?r._redirectEventId?(x(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)):this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){this.redirectInitializerError=r,await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ar(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kp()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let n=e?We(e):null;return n&&x(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&x(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Qe(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new En("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Qe(e)||this._popupRedirectResolver;x(n,this,"argument-error"),this.redirectPersistenceManager=await Xt.create(this,[Qe(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next,o=this._isInitialized?Promise.resolve():this._initializationPromise;return x(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ec(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}};function Ji(t){return We(t)}var Qi=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Oa(n=>this.observer=n)}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zi=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ye("not implemented")}_getIdTokenResponse(e){return Ye("not implemented")}_linkToIdToken(e,n){return Ye("not implemented")}_getReauthenticationResolver(e){return Ye("not implemented")}};async function Yt(t,e){return Np(t,"POST","/v1/accounts:signInWithIdp",Rp(t,e))}var Bp="http://localhost",An=class extends Zi{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){let n=new An(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xe("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=mr(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new An(r,i);return Object.assign(o,s),o}_getIdTokenResponse(e){let n=this.buildRequest();return Yt(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Yt(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Yt(e,n)}buildRequest(){let e={requestUri:Bp,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ht(n)}return e}};var Nr=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var es=class extends Nr{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var $e=class extends es{constructor(){super("google.com");this.addScope("profile")}static credential(e,n){return An._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $e.credential(n,r)}catch(i){return null}}};$e.GOOGLE_SIGN_IN_METHOD="google.com";$e.PROVIDER_ID="google.com";var kt=class{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let s=await ct._fromIdTokenResponse(e,r,i),o=nc(r);return new kt({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=nc(r);return new kt({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function nc(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Cn=class extends bn{constructor(e,n,r,i){var s;super(n.code,n.message);this.operationType=r,this.user=i,this.name="FirebaseError",Object.setPrototypeOf(this,Cn.prototype),this.appName=e.name,this.code=n.code,this.tenantId=(s=e.tenantId)!==null&&s!==void 0?s:void 0,this.serverResponse=n.customData.serverResponse}static _fromErrorAndOperation(e,n,r,i){return new Cn(e,n,r,i)}};function rc(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Cn._fromErrorAndOperation(t,s,e,r):s})}async function zp(t,e,n=!1){let r=await kn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kt._forOperation(t,"link",r)}async function Hp(t,e,n=!1){let{auth:r}=t,i="reauthenticate";try{let s=await kn(t,rc(r,i,e,t),n);x(s.idToken,r,"internal-error");let o=Gi(s.idToken);x(o,r,"internal-error");let{sub:a}=o;return x(t.uid===a,r,"user-mismatch"),kt._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xe(r,"user-mismatch"),s}}async function Kp(t,e,n=!1){let r="signIn",i=await rc(t,r,e),s=await kt._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function ic(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function sc(t){return We(t).signOut()}var Gp="@firebase/auth-exp",Wp="0.0.900-exp.d92a36260";var oc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{var i;e(((i=r)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Xp(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Yp(t){Tt(new rt("auth-exp",(e,{options:n})=>{let r=e.getProvider("app-exp").getImmediate(),{apiKey:i,authDomain:s}=r.options;return(o=>{x(i&&!i.includes(":"),"invalid-api-key",{appName:o.name}),x(!(s==null?void 0:s.includes(":")),"argument-error",{appName:o.name});let a={apiKey:i,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ec(t)},c=new tc(o,a);return Ip(c,n),c})(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tt(new rt("auth-internal",e=>{let n=Ji(e.getProvider("auth-exp").getImmediate());return(r=>new oc(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),st(Gp,Wp,Xp(t))}var Dr="__sak";var ts=class{constructor(e,n){this.storage=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dr,"1"),this.storage.removeItem(Dr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}};function Qp(){let t=ce();return Yi(t)||Rr(t)}var Jp=1e3,Zp=10,ns=class extends ts{constructor(){super(window.localStorage,"LOCAL");this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Qp()&&jp(),this.fallbackToPolling=Za(),this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}let r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}let i=()=>{let o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);qp()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Zp):i()}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Jp)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){let n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}};ns.type="LOCAL";var em=ns;function tm(t){return Promise.all(t.map(async e=>{try{let n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}var Rn=class{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;let r=new Rn(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o==null?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});let a=Array.from(o).map(async l=>l(n.origin,s)),c=await tm(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};Rn.receivers=[];function nm(t="",e=20){return`${t}${Math.floor(Math.random()*Math.pow(10,e))}`}var ac=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=nm();i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function ze(){return window}function rm(t){ze().location.href=t}function cc(){return typeof ze().WorkerGlobalScope!="undefined"&&typeof ze().importScripts=="function"}async function im(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function sm(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function om(){return cc()?self:null}var lc="firebaseLocalStorageDb",am=1,Or="firebaseLocalStorage",uc="fbase_key",Qt=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Lr(t,e){return t.transaction([Or],e?"readwrite":"readonly").objectStore(Or)}function cm(){let t=indexedDB.deleteDatabase(lc);return new Qt(t).toPromise()}function rs(){let t=indexedDB.open(lc,am);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Or,{keyPath:uc})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;if(r.objectStoreNames.contains(Or))e(r);else return await cm(),rs()})})}async function hc(t,e,n){let r=Lr(t,!0).put({[uc]:e,value:n});return new Qt(r).toPromise()}async function lm(t,e){let n=Lr(t,!1).get(e),r=await new Qt(n).toPromise();return r===void 0?null:r.value}function fc(t,e){let n=Lr(t,!0).delete(e);return new Qt(n).toPromise()}var um=800,hm=3,is=class{constructor(){this.type="LOCAL",this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rs(),this.db)}async _withRetries(e){let n=0;for(;;)try{let r=await this._openDb();return await e(r)}catch(r){if(n++>hm)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rn._getInstance(om()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await im(),!this.activeServiceWorker)return;this.sender=new ac(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sm()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await rs();return await hc(e,Dr,"1"),await fc(e,Dr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hc(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){let n=await this._withRetries(r=>lm(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fc(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(i=>{let s=Lr(i,!1).getAll();return new Qt(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;for(let{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(let i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),um)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};is.type="LOCAL";var fm=is;var dm=10*60*1e3,dc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pm(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mc(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dm&&this.cachedEventUids.clear(),this.cachedEventUids.has(pc(e))}saveEventToCache(e){this.cachedEventUids.add(pc(e)),this.lastProcessedEventTime=Date.now()}};function pc(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mc({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pm(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mc(t);default:return!1}}function mm(t){return`${t||""}${Math.floor(Math.random()*1e9)}`}async function gm(t){return kr(t,"GET","/v1/projects",{})}var ym=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vm=/^https?/;async function wm(t){if(t.config.emulator)return;let{authorizedDomains:e}=await gm(t);for(let n of e)try{if(_m(n))return}catch(r){}Xe(t,"unauthorized-domain")}function _m(t){let e=Bi(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vm.test(n))return!1;if(ym.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}function Em(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function bm(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n,r.type="text/javascript",r.charset="UTF-8",Em().appendChild(r)})}function Im(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Tm=new Gt(3e4,6e4);function gc(){let t=ze().___jsl;if(t==null?void 0:t.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Sm(t){return new Promise((e,n)=>{var r,i,s;function o(){gc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gc(),n(Kt(t,"network-request-failed"))},timeout:Tm.get()})}if((i=(r=ze().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0?void 0:i.Iframe)e(gapi.iframes.getContext());else if((s=ze().gapi)===null||s===void 0?void 0:s.load)o();else{let a=Im("iframefcb");return ze()[a]=()=>{gapi.load?o():n(Kt(t,"network-request-failed"))},bm(`https://apis.google.com/js/api.js?onload=${a}`)}}).catch(e=>{throw Pr=null,e})}var Pr=null;function km(t){return Pr=Pr||Sm(t),Pr}var Am=new Gt(5e3,15e3),Cm="__/auth/iframe",Rm="emulator/auth/iframe",Nm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Dm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Om(t){let e=t.config;x(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?zi(e,Rm):`https://${t.config.authDomain}/${Cm}`,r={apiKey:e.apiKey,appName:t.name,v:St},i=Dm.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ht(r).slice(1)}`}async function Lm(t){let e=await km(t),n=ze().gapi;return x(n,t,"internal-error"),e.open({where:document.body,url:Om(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nm,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Kt(t,"network-request-failed"),a=ze().setTimeout(()=>{s(o)},Am.get());function c(){ze().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var ss=class extends ts{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}};ss.type="SESSION";var Pm=ss;var Mm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Um=500,xm=600,Vm="_blank",Fm="http://localhost",os=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}};function qm(t,e,n,r=Um,i=xm){let s=Math.min((window.screen.availHeight-i)/2,0).toString(),o=Math.min((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Mm),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ce().toLowerCase();n&&(a=Ga(l)?Vm:n),Ka(l)&&(e=e||Fm,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[d,p])=>`${f}${d}=${p},`,"");if($p(l)&&a!=="_self")return $m(e||"",a),new os(null);let h=window.open(e||"",a,u);x(h,t,"popup-blocked");try{h.focus()}catch(f){}return new os(h)}function $m(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}function yc(t,e){return e?Qe(e):(x(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Mr=class extends Zi{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return Yt(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yt(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yt(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function jm(t){return Kp(t.auth,new Mr(t),t.bypassAuthState)}function Bm(t){let{auth:e,user:n}=t;return x(n,e,"internal-error"),Hp(n,new Mr(t),t.bypassAuthState)}async function zm(t){let{auth:e,user:n}=t;return x(n,e,"internal-error"),zp(n,new Mr(t),t.bypassAuthState)}var vc=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jm;case"linkViaPopup":case"linkViaRedirect":return zm;case"reauthViaPopup":case"reauthViaRedirect":return Bm;default:Xe(this.auth,"internal-error")}}resolve(e){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Hm="pendingRedirect",_c=new Map,wc=class extends vc{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r);this.eventId=null}async execute(){let e=_c.get(this.auth._key());if(!e){try{let r=await Km(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_c.set(this.auth._key(),e)}return e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Km(t,e){let n=Ec(e),r=await as(t)._get(n)==="true";return await as(t)._remove(n),r}async function Gm(t,e){return as(t)._set(Ec(e),"true")}function as(t){return Qe(t._redirectPersistence)}function Ec(t){return Cr(Hm,t.config.apiKey,t.name)}function bc(t,e,n){return Wm(t,e,n)}async function Wm(t,e,n){let r=Ji(t);x(e instanceof Nr,t,"argument-error");let i=yc(r,n);return await Gm(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Xm(t,e,n=!1){let r=Ji(t),i=yc(r,e),o=await new wc(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var Ym="__/auth/handler",Qm="emulator/auth/handler";function Ic(t,e,n,r,i,s){x(t.config.authDomain,t,"auth-domain-config-required"),x(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:St,eventId:i};if(e instanceof Nr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Da(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[c,l]of Object.entries(s||{}))o[c]=l}if(e instanceof es){let c=e.getScopes().filter(l=>l!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let c of Object.keys(a))a[c]===void 0&&delete a[c];return`${Jm(t)}?${Ht(a).slice(1)}`}function Jm({config:t}){return t.emulator?zi(t,Qm):`https://${t.authDomain}/${Ym}`}var cs="webStorageSupport",Tc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pm,this._completeRedirectFn=Xm}async _openPopup(e,n,r,i){var s;ot((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=Ic(e,n,r,Bi(),i);return qm(e,o,mm())}async _openRedirect(e,n,r,i){return await this._originValidation(e),rm(Ic(e,n,r,Bi(),i)),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ot(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r}async initAndGetManager(e){let n=await Lm(e),r=new dc(e);return n.register("authEvent",i=>(x(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cs,{type:cs},i=>{var s;let o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[cs];o!==void 0&&n(!!o),Xe(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wm(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Za()||Yi()||Rr()}},Zm=Tc,U0=new Gt(3e4,6e4);var x0=new Gt(2e3,1e4);function Sc(t=Ir()){let e=Tn(t,"auth-exp");return e.isInitialized()?e.getImmediate():bp(t,{popupRedirectResolver:Zm,persistence:[fm,em]})}Yp("Browser");var Ur=typeof Ur!="undefined"?Ur:typeof self!="undefined"?self:typeof window!="undefined"?window:{};var ls=function(t,e){return ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ls(t,e)};function eg(t,e){ls(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function kc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var tg=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Ur!="undefined"?Ur:typeof self!="undefined"?self:{},k,us=us||{},V=tg||self;function xr(){}function hs(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Nn(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function rg(t){return Object.prototype.hasOwnProperty.call(t,fs)&&t[fs]||(t[fs]=++ng)}var fs="closure_uid_"+(1e9*Math.random()>>>0),ng=0;function ig(t,e,n){return t.call.apply(t.bind,arguments)}function sg(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function _e(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_e=ig:_e=sg,_e.apply(null,arguments)}function Vr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function He(){return Date.now()}function be(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function lt(){this.j=this.j,this.i=this.i}var og=0;lt.prototype.j=!1;lt.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),og!=0))var t=rg(this)};lt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ac=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Cc=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=typeof t=="string"?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function cg(t){e:{for(var e=ag,n=t.length,r=typeof t=="string"?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function Rc(t){return Array.prototype.concat.apply([],arguments)}function ds(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Fr(t){return/^[\s\xa0]*$/.test(t)}var Nc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ie(t,e){return t.indexOf(e)!=-1}function ps(t,e){return t<e?-1:t>e?1:0}var Te;e:{if(ms=V.navigator,ms&&(gs=ms.userAgent,gs)){Te=gs;break e}Te=""}var ms,gs;function ys(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Dc(t){var e={};for(var n in t)e[n]=t[n];return e}var Oc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lc(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var s=0;s<Oc.length;s++)n=Oc[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vs(t){return vs[" "](t),t}vs[" "]=xr;function ug(t,e){var n=lg;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var hg=Ie(Te,"Opera"),ut=Ie(Te,"Trident")||Ie(Te,"MSIE"),Pc=Ie(Te,"Edge"),_s=Pc||ut,Mc=Ie(Te,"Gecko")&&!(Ie(Te.toLowerCase(),"webkit")&&!Ie(Te,"Edge"))&&!(Ie(Te,"Trident")||Ie(Te,"MSIE"))&&!Ie(Te,"Edge"),fg=Ie(Te.toLowerCase(),"webkit")&&!Ie(Te,"Edge");function Uc(){var t=V.document;return t?t.documentMode:void 0}var $r;e:{if(qr="",jr=function(){var t=Te;if(Mc)return/rv:([^\);]+)(\)|;)/.exec(t);if(Pc)return/Edge\/([\d\.]+)/.exec(t);if(ut)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(fg)return/WebKit\/(\S+)/.exec(t);if(hg)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),jr&&(qr=jr?jr[1]:""),ut&&(Br=Uc(),Br!=null&&Br>parseFloat(qr))){$r=String(Br);break e}$r=qr}var qr,jr,Br,lg={};function xc(t){return ug(t,function(){for(var e=0,n=Nc(String($r)).split("."),r=Nc(String(t)).split("."),i=Math.max(n.length,r.length),s=0;e==0&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o[0].length==0&&a[0].length==0)break;e=ps(o[1].length==0?0:parseInt(o[1],10),a[1].length==0?0:parseInt(a[1],10))||ps(o[2].length==0,a[2].length==0)||ps(o[2],a[2]),o=o[3],a=a[3]}while(e==0)}return 0<=e})}var ws;V.document&&ut?(Es=Uc(),ws=Es||parseInt($r,10)||void 0):ws=void 0;var Es,Vc=ws,bs=!ut||9<=Number(Vc),dg=ut&&!xc("9"),pg=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{V.addEventListener("test",xr,e),V.removeEventListener("test",xr,e)}catch(n){}return t}();function we(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}we.prototype.b=function(){this.defaultPrevented=!0};function Dn(t,e){if(we.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Mc){e:{try{vs(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:mg[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}be(Dn,we);var mg={2:"touch",3:"pen",4:"mouse"};Dn.prototype.b=function(){Dn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,dg)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var On="closure_listenable_"+(1e6*Math.random()|0),gg=0;function yg(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++gg,this.Y=this.Z=!1}function zr(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Hr(t){this.src=t,this.a={},this.b=0}Hr.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.a[s],t||(t=this.a[s]=[],this.b++);var o=Is(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):(e=new yg(e,this.src,s,!!r,i),e.Z=n,t.push(e)),e};function Ts(t,e){var n=e.type;if(n in t.a){var r=t.a[n],i=Ac(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(zr(e),t.a[n].length==0&&(delete t.a[n],t.b--))}}function Is(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.ca==r)return i}return-1}var Ss="closure_lm_"+(1e6*Math.random()|0),ks={};function As(t,e,n,r,i){if(r&&r.once)return $c(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)As(t,e[s],n,r,i);return null}return n=Cs(n),t&&t[On]?t.va(e,n,Nn(r)?!!r.capture:!!r,i):Fc(t,e,n,!1,r,i)}function Fc(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Nn(i)?!!i.capture:!!i;if(o&&!bs)return null;var a=Rs(t);if(a||(t[Ss]=a=new Hr(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=vg(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)pg||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(qc(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function vg(){var t=_g,e=bs?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function $c(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)$c(t,e[s],n,r,i);return null}return n=Cs(n),t&&t[On]?t.wa(e,n,Nn(r)?!!r.capture:!!r,i):Fc(t,e,n,!0,r,i)}function jc(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)jc(t,e[s],n,r,i);else r=Nn(r)?!!r.capture:!!r,n=Cs(n),t&&t[On]?(t=t.c,e=String(e).toString(),e in t.a&&(s=t.a[e],n=Is(s,n,r,i),-1<n&&(zr(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.a[e],t.b--)))):t&&(t=Rs(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Is(e,n,r,i)),(n=-1<t?e[t]:null)&&Ns(n))}function Ns(t){if(typeof t!="number"&&t&&!t.Y){var e=t.src;if(e&&e[On])Ts(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(qc(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Rs(e))?(Ts(n,t),n.b==0&&(n.src=null,e[Ss]=null)):zr(t)}}}function qc(t){return t in ks?ks[t]:ks[t]="on"+t}function Bc(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ns(t),n.call(r,e)}function _g(t,e){if(t.Y)return!0;if(!bs){if(!e)e:{e=["window","event"];for(var n=V,r=0;r<e.length;r++)if(n=n[e[r]],n==null){e=null;break e}e=n}return e=new Dn(e,this),Bc(t,e)}return Bc(t,new Dn(e,this))}function Rs(t){return t=t[Ss],t instanceof Hr?t:null}var Ds="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cs(t){return typeof t=="function"?t:(t[Ds]||(t[Ds]=function(e){return t.handleEvent(e)}),t[Ds])}function Oe(){lt.call(this),this.c=new Hr(this),this.J=this,this.C=null}be(Oe,lt);Oe.prototype[On]=!0;k=Oe.prototype;k.addEventListener=function(t,e,n,r){As(this,t,e,n,r)};k.removeEventListener=function(t,e,n,r){jc(this,t,e,n,r)};function ge(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,typeof e=="string")e=new we(e,t);else if(e instanceof we)e.target=e.target||t;else{var i=e;e=new we(r,t),Lc(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=Kr(o,r,!0,e)&&i}if(o=e.a=t,i=Kr(o,r,!0,e)&&i,i=Kr(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.a=n[s],i=Kr(o,r,!1,e)&&i}k.G=function(){if(Oe.X.G.call(this),this.c){var t=this.c,e;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)zr(n[r]);delete t.a[e],t.b--}}this.C=null};k.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)};k.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};function Kr(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,c=o.ca||o.src;o.Z&&Ts(t.c,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Os=V.JSON.stringify;function zc(){this.b=this.a=null}var Hc=new(function(){function t(e,n){this.c=e,this.f=n,this.b=0,this.a=null}return t.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},t}())(function(){return new Ls},function(t){t.reset()});zc.prototype.add=function(t,e){var n=Hc.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n};function wg(){var t=Kc,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ls(){this.next=this.b=this.a=null}Ls.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};Ls.prototype.reset=function(){this.next=this.b=this.a=null};function Eg(t){V.setTimeout(function(){throw t},0)}function Gc(t,e){Ps||bg(),Ms||(Ps(),Ms=!0),Kc.add(t,e)}var Ps;function bg(){var t=V.Promise.resolve(void 0);Ps=function(){t.then(Ig)}}var Ms=!1,Kc=new zc;function Ig(){for(var t;t=wg();){try{t.a.call(t.b)}catch(n){Eg(n)}var e=Hc;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ms=!1}function Gr(t,e){Oe.call(this),this.b=t||1,this.a=e||V,this.f=_e(this.Za,this),this.g=He()}be(Gr,Oe);k=Gr.prototype;k.aa=!1;k.M=null;k.Za=function(){if(this.aa){var t=He()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ge(this,"tick"),this.aa&&(Us(this),this.start()))}};k.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=He())};function Us(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}k.G=function(){Gr.X.G.call(this),Us(this),delete this.a};function xs(t,e,n){if(typeof t=="function")n&&(t=_e(t,n));else if(t&&typeof t.handleEvent=="function")t=_e(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:V.setTimeout(t,e||0)}function Wc(t){t.a=xs(function(){t.a=null,t.c&&(t.c=!1,Wc(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}var Tg=function(t){eg(e,t);function e(n,r){var i=t.call(this)||this;return i.g=n,i.h=r,i.b=null,i.c=!1,i.a=null,i}return e.prototype.f=function(n){this.b=arguments,this.a?this.c=!0:Wc(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(V.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(lt);function Ln(t){lt.call(this),this.b=t,this.a={}}be(Ln,lt);var Xc=[];function Yc(t,e,n,r){Array.isArray(n)||(n&&(Xc[0]=n.toString()),n=Xc);for(var i=0;i<n.length;i++){var s=As(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Qc(t){ys(t.a,function(e,n){this.a.hasOwnProperty(n)&&Ns(e)},t),t.a={}}Ln.prototype.G=function(){Ln.X.G.call(this),Qc(this)};Ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Vs(){this.a=!0}function Sg(t,e,n,r,i,s){t.info(function(){if(t.a)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function kg(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Jt(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Ag(t,n)+(r?" "+r:"")})}function Cg(t,e){t.info(function(){return"TIMEOUT: "+e})}Vs.prototype.info=function(){};function Ag(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Os(n)}catch(a){return e}}var At={},Jc=null;function Wr(){return Jc=Jc||new Oe}At.Fa="serverreachability";function Zc(t){we.call(this,At.Fa,t)}be(Zc,we);function Pn(t){var e=Wr();ge(e,new Zc(e,t))}At.STAT_EVENT="statevent";function el(t,e){we.call(this,At.STAT_EVENT,t),this.stat=e}be(el,we);function Se(t){var e=Wr();ge(e,new el(e,t))}At.Ga="timingevent";function tl(t){we.call(this,At.Ga,t)}be(tl,we);function Mn(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){t()},e)}var Xr={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},nl={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function rl(){}rl.prototype.a=null;function il(t){var e;return(e=t.a)||(e=t.a={}),e}function sl(){}var Un={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Fs(){we.call(this,"d")}be(Fs,we);function $s(){we.call(this,"c")}be($s,we);var ol;function al(){}be(al,rl);ol=new al;function xn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ln(this),this.P=Rg,t=_s?125:void 0,this.R=new Gr(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}var Rg=45e3,cl={},qs={};k=xn.prototype;k.setTimeout=function(t){this.P=t};function js(t,e,n){t.H=1,t.i=Yr(Je(e)),t.j=n,t.I=!0,ll(t,null)}function ll(t,e){t.u=He(),Vn(t),t.l=Je(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),ul(n.b,"t",r),t.D=0,t.a=hl(t.g,t.g.C?e:null),0<t.O&&(t.F=new Tg(_e(t.Ca,t,t.a),t.O)),Yc(t.J,t.a,"readystatechange",t.Xa),e=t.B?Dc(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Pn(1),Sg(t.c,t.m,t.l,t.f,t.S,t.j)}k.Xa=function(t){t=t.target;var e=this.F;e&&ht(t)==3?e.f():this.Ca(t)};k.Ca=function(t){try{if(t==this.a)e:{var e=ht(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||e==3&&!_s&&!this.a.$())){this.A||e!=4||n==7||(n==8||0>=r?Pn(3):Pn(2)),Qr(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=i==200,kg(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){t:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fr(o)){var c=o;break t}}c=null}if(c)Jt(this.c,this.f,c,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Bs(this,c);else{this.b=!1,this.h=3,Se(12),Zt(this),Jr(this);break e}}this.I?(fl(this,e,s),_s&&this.b&&e==3&&(Yc(this.J,this.R,"tick",this.Wa),this.R.start())):(Jt(this.c,this.f,s,null),Bs(this,s)),e==4&&Zt(this),this.b&&!this.A&&(e==4?dl(this.g,this):(this.b=!1,Vn(this)))}else i==400&&0<s.indexOf("Unknown SID")?(this.h=3,Se(12)):(this.h=0,Se(13)),Zt(this),Jr(this)}}}catch(l){}finally{}};function fl(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ng(t,n);if(i==qs){e==4&&(t.h=4,Se(14),r=!1),Jt(t.c,t.f,null,"[Incomplete Response]");break}else if(i==cl){t.h=4,Se(15),Jt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}else Jt(t.c,t.f,i,null),Bs(t,i)}e==4&&n.length==0&&(t.h=1,Se(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,e=t.g,e.a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),zs(e),e.F=!0,Se(11))):(Jt(t.c,t.f,n,"[Invalid Chunked Response]"),Zt(t),Jr(t))}k.Wa=function(){if(this.a){var t=ht(this.a),e=this.a.$();this.D<e.length&&(Qr(this),fl(this,t,e),this.b&&t!=4&&Vn(this))}};function Ng(t,e){var n=t.D,r=e.indexOf(`
`,n);return r==-1?qs:(n=Number(e.substring(n,r)),isNaN(n)?cl:(r+=1,r+n>e.length?qs:(e=e.substr(r,n),t.D=r+n,e)))}k.cancel=function(){this.A=!0,Zt(this)};function Vn(t){t.T=He()+t.P,pl(t,t.P)}function pl(t,e){if(t.o!=null)throw Error("WatchDog timer not null");t.o=Mn(_e(t.Va,t),e)}function Qr(t){t.o&&(V.clearTimeout(t.o),t.o=null)}k.Va=function(){this.o=null;var t=He();0<=t-this.T?(Cg(this.c,this.l),this.H!=2&&(Pn(3),Se(17)),Zt(this),this.h=2,Jr(this)):pl(this,this.T-t)};function Jr(t){t.g.v==0||t.A||dl(t.g,t)}function Zt(t){Qr(t);var e=t.F;e&&typeof e.ja=="function"&&e.ja(),t.F=null,Us(t.R),Qc(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Bs(t,e){try{var n=t.g;if(n.v!=0&&(n.a==t||Hs(n.b,t))){if(n.I=t.N,!t.C&&Hs(n.b,t)&&n.v==3){try{var r=n.ka.a.parse(e)}catch(A){r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0)e:if(!n.j){if(n.a)if(n.a.u+3e3<t.u)ti(n),Zr(n);else break e;Ws(n),Se(18)}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&n.o==0&&!n.m&&(n.m=Mn(_e(n.Sa,n),6e3));if(1>=ml(n.b)&&n.ea){try{n.ea()}catch(A){}n.ea=void 0}}else Ct(n,11)}else if((t.C||n.a==t)&&ti(n),!Fr(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],n.v==2)if(i[0]=="c"){n.J=i[1],n.ga=i[2];var s=i[3];s!=null&&(n.ha=s,n.c.info("VER="+n.ha));var o=i[4];o!=null&&(n.pa=o,n.c.info("SVER="+n.pa));var a=i[5];if(a!=null&&typeof a=="number"&&0<a){var c=1.5*a;n.D=c,n.c.info("backChannelRequestTimeoutMs_="+c)}c=n;var l=t.a;if(l){var u=l.a?l.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var h=c.b;!h.a&&(Ie(u,"spdy")||Ie(u,"quic")||Ie(u,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Ks(h,h.b),h.b=null))}if(c.A){var f=l.a?l.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(c.na=f,te(c.B,c.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=He()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),c=n;var d=t;if(c.la=vl(c,c.C?c.ga:null,c.fa),d.C){gl(c.b,d);var p=d,_=c.D;_&&p.setTimeout(_),p.o&&(Qr(p),Vn(p)),c.a=d}else yl(c);0<n.g.length&&ei(n)}else i[0]!="stop"&&i[0]!="close"||Ct(n,7);else n.v==3&&(i[0]=="stop"||i[0]=="close"?i[0]=="stop"?Ct(n,7):Gs(n):i[0]!="noop"&&n.f&&n.f.sa(i),n.o=0)}Pn(4)}catch(A){}}function Dg(t){if(t.K&&typeof t.K=="function")return t.K();if(typeof t=="string")return t.split("");if(hs(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return t=e}function Xs(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(hs(t)||typeof t=="string")Cc(t,e,void 0);else{if(t.L&&typeof t.L=="function")var n=t.L();else if(t.K&&typeof t.K=="function")n=void 0;else if(hs(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=Dg(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function en(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof en)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}k=en.prototype;k.K=function(){Ys(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t};k.L=function(){return Ys(this),this.a.concat()};function Ys(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Rt(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Rt(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}k.get=function(t,e){return Rt(this.b,t)?this.b[t]:e};k.set=function(t,e){Rt(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e};k.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function Rt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var _l=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Og(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Nt(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Nt){this.a=e!==void 0?e:t.a,ni(this,t.f),this.j=t.j,ri(this,t.c),ii(this,t.h),this.g=t.g,e=t.b;var n=new $n;n.c=e.c,e.a&&(n.a=new en(e.a),n.b=e.b),wl(this,n),this.i=t.i}else t&&(n=String(t).match(_l))?(this.a=!!e,ni(this,n[1]||"",!0),this.j=Fn(n[2]||""),ri(this,n[3]||"",!0),ii(this,n[4]),this.g=Fn(n[5]||"",!0),wl(this,n[6]||"",!0),this.i=Fn(n[7]||"")):(this.a=!!e,this.b=new $n(null,this.a))}Nt.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qn(e,El,!0),":");var n=this.c;return(n||e=="file")&&(t.push("//"),(e=this.j)&&t.push(qn(e,El,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,n!=null&&t.push(":",String(n))),(n=this.g)&&(this.c&&n.charAt(0)!="/"&&t.push("/"),t.push(qn(n,n.charAt(0)=="/"?Pg:Lg,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",qn(n,Mg)),t.join("")};function Je(t){return new Nt(t)}function ni(t,e,n){t.f=n?Fn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ri(t,e,n){t.c=n?Fn(e,!0):e}function ii(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function wl(t,e,n){e instanceof $n?(t.b=e,xg(t.b,t.a)):(n||(e=qn(e,Ug)),t.b=new $n(e,t.a))}function te(t,e,n){t.b.set(e,n)}function Yr(t){return te(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^He()).toString(36)),t}function Vg(t){return t instanceof Nt?Je(t):new Nt(t,void 0)}function Fg(t,e,n,r){var i=new Nt(null,void 0);return t&&ni(i,t),e&&ri(i,e),n&&ii(i,n),r&&(i.g=r),i}function Fn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,$g),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $g(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var El=/[#\/\?@]/g,Lg=/[#\?:]/g,Pg=/[#\?]/g,Ug=/[#\?@]/g,Mg=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ft(t){t.a||(t.a=new en,t.b=0,t.c&&Og(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}k=$n.prototype;k.add=function(t,e){ft(this),this.c=null,t=tn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this};function bl(t,e){ft(t),e=tn(t,e),Rt(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Rt(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ys(t)))}function Il(t,e){return ft(t),e=tn(t,e),Rt(t.a.b,e)}k.forEach=function(t,e){ft(this),this.a.forEach(function(n,r){Cc(n,function(i){t.call(e,i,r,this)},this)},this)};k.L=function(){ft(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};k.K=function(t){ft(this);var e=[];if(typeof t=="string")Il(this,t)&&(e=Rc(e,this.a.get(tn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Rc(e,t[n])}return e};k.set=function(t,e){return ft(this),this.c=null,t=tn(this,t),Il(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this};k.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e};function ul(t,e,n){bl(t,e),0<n.length&&(t.c=null,t.a.set(tn(t,e),ds(n)),t.b+=n.length)}k.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};function tn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function xg(t,e){e&&!t.f&&(ft(t),t.c=null,t.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(bl(this,r),ul(this,i,n))},t)),t.f=e}var qg=function(){function t(e,n){this.b=e,this.a=n}return t}();function Tl(t){this.g=t||jg,V.PerformanceNavigationTiming?(t=V.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(V.ia&&V.ia.ya&&V.ia.ya()&&V.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var jg=10;function Sl(t){return t.b?!0:t.a?t.a.size>=t.f:!1}function ml(t){return t.b?1:t.a?t.a.size:0}function Hs(t,e){return t.b?t.b==e:t.a?t.a.has(e):!1}function Ks(t,e){t.a?t.a.add(e):t.b=e}function gl(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}Tl.prototype.cancel=function(){var t,e;if(this.c=kl(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&this.a.size!==0){try{for(var n=kc(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}};function kl(t){var e,n;if(t.b!=null)return t.c.concat(t.b.s);if(t.a!=null&&t.a.size!==0){var r=t.c;try{for(var i=kc(t.a.values()),s=i.next();!s.done;s=i.next()){var o=s.value;r=r.concat(o.s)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ds(t.c)}function Qs(){}Qs.prototype.stringify=function(t){return V.JSON.stringify(t,void 0)};Qs.prototype.parse=function(t){return V.JSON.parse(t,void 0)};function Bg(){this.a=new Qs}function zg(t,e,n){var r=n||"";try{Xs(t,function(i,s){var o=i;Nn(i)&&(o=Os(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Hg(t,e){var n=new Vs;if(V.Image){var r=new Image;r.onload=Vr(si,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Vr(si,n,r,"TestLoadImage: error",!1,e),r.onabort=Vr(si,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vr(si,n,r,"TestLoadImage: timeout",!1,e),V.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function si(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}var Kg=V.JSON.parse;function le(t){Oe.call(this),this.headers=new en,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Gg,this.D=this.F=!1}be(le,Oe);var Gg="",Wg=/^https?$/i,Xg=["POST","PUT"];k=le.prototype;k.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?il(this.H):il(ol),this.a.onreadystatechange=_e(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(s){Al(this,s);return}t=n||"";var i=new en(this.headers);r&&Xs(r,function(s,o){i.set(o,s)}),r=cg(i.L()),n=V.FormData&&t instanceof V.FormData,!(0<=Ac(Xg,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.a.setRequestHeader(o,s)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Cl(this),0<this.o&&((this.D=Yg(this.a))?(this.a.timeout=this.o,this.a.ontimeout=_e(this.xa,this)):this.m=xs(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(s){Al(this,s)}};function Yg(t){return ut&&xc(9)&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function ag(t){return t.toLowerCase()=="content-type"}k.xa=function(){typeof us!="undefined"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ge(this,"timeout"),this.abort(8))};function Al(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Rl(t),oi(t)}function Rl(t){t.u||(t.u=!0,ge(t,"complete"),ge(t,"error"))}k.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ge(this,"complete"),ge(this,"abort"),oi(this))};k.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),oi(this,!0)),le.X.G.call(this)};k.za=function(){this.j||(this.A||this.l||this.g?Nl(this):this.Ua())};k.Ua=function(){Nl(this)};function Nl(t){if(t.b&&typeof us!="undefined"&&(!t.s[1]||ht(t)!=4||t.W()!=2)){if(t.l&&ht(t)==4)xs(t.za,0,t);else if(ge(t,"readystatechange"),ht(t)==4){t.b=!1;try{{var e=t.W();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=e===0){var s=String(t.B).match(_l)[1]||null;if(!s&&V.self&&V.self.location){var o=V.self.location.protocol;s=o.substr(0,o.length-1)}i=!Wg.test(s?s.toLowerCase():"")}r=i}var a=r}if(a)ge(t,"complete"),ge(t,"success");else{t.h=6;try{var c=2<ht(t)?t.a.statusText:""}catch(l){c=""}t.f=c+" ["+t.W()+"]",Rl(t)}}finally{oi(t)}}}}function oi(t,e){if(t.a){Cl(t);var n=t.a,r=t.s[0]?xr:null;t.a=null,t.s=null,e||ge(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Cl(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(V.clearTimeout(t.m),t.m=null)}function ht(t){return t.a?t.a.readyState:0}k.W=function(){try{return 2<ht(this)?this.a.status:-1}catch(t){return-1}};k.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}};k.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Kg(e)}};k.ua=function(){return this.h};k.Qa=function(){return typeof this.f=="string"?this.f:String(this.f)};function Qg(t){var e="";return ys(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Js(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Qg(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):te(t,e,n))}function jn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Dl(t){this.pa=0,this.g=[],this.c=new Vs,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=jn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=jn("baseRetryDelayMs",5e3,t),this.Ra=jn("retryDelaySeedMs",1e4,t),this.Ma=jn("forwardChannelMaxRetries",2,t),this.ma=jn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Tl(t&&t.concurrentRequestLimit),this.ka=new Bg,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}k=Dl.prototype;k.ha=8;k.v=1;function Gs(t){if(Ol(t),t.v==3){var e=t.R++,n=Je(t.B);te(n,"SID",t.J),te(n,"RID",e),te(n,"TYPE","terminate"),Bn(t,n),e=new xn(t,t.c,e,void 0),e.H=2,e.i=Yr(Je(n)),n=!1,V.navigator&&V.navigator.sendBeacon&&(n=V.navigator.sendBeacon(e.i.toString(),"")),!n&&V.Image&&(new Image().src=e.i,n=!0),n||(e.a=hl(e.g,null),e.a.ba(e.i)),e.u=He(),Vn(e)}Ll(t)}function Zr(t){t.a&&(zs(t),t.a.cancel(),t.a=null)}function Ol(t){Zr(t),t.j&&(V.clearTimeout(t.j),t.j=null),ti(t),t.b.cancel(),t.h&&(typeof t.h=="number"&&V.clearTimeout(t.h),t.h=null)}function Zs(t,e){t.g.push(new qg(t.Oa++,e)),t.v==3&&ei(t)}function ei(t){Sl(t.b)||t.h||(t.h=!0,Gc(t.Ba,t),t.u=0)}function Jg(t,e){return ml(t.b)>=t.b.f-(t.h?1:0)?!1:t.h?(t.g=e.s.concat(t.g),!0):t.v==1||t.v==2||t.u>=(t.La?0:t.Ma)?!1:(t.h=Mn(_e(t.Ba,t,e),Pl(t,t.u)),t.u++,!0)}k.Ba=function(t){if(this.h)if(this.h=null,this.v==1){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e=new xn(this,this.c,t,void 0),n=this.l;this.O&&(n?(n=Dc(n),Lc(n,this.O)):n=this.O),this.i===null&&(e.B=n);var r;if(this.da)e:{for(var i=r=0;i<this.g.length;i++){t:{var s=this.g[i];if("__data__"in s.a&&(s=s.a.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.g.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ul(this,e,r),i=Je(this.B),te(i,"RID",t),te(i,"CVER",22),this.A&&te(i,"X-HTTP-Session-Id",this.A),Bn(this,i),this.i&&n&&Js(i,this.i,n),Ks(this.b,e),this.Ia&&te(i,"TYPE","init"),this.da?(te(i,"$req",r),te(i,"SID","null"),e.U=!0,js(e,i,null)):js(e,i,r),this.v=2}}else this.v==3&&(t?Ml(this,t):this.g.length==0||Sl(this.b)||Ml(this))};function Ml(t,e){var n;e?n=e.f:n=t.R++;var r=Je(t.B);te(r,"SID",t.J),te(r,"RID",n),te(r,"AID",t.P),Bn(t,r),t.i&&t.l&&Js(r,t.i,t.l),n=new xn(t,t.c,n,t.u+1),t.i===null&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ul(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ks(t.b,n),js(n,r,e)}function Bn(t,e){t.f&&Xs({},function(n,r){te(e,r,n)})}function Ul(t,e,n){n=Math.min(t.g.length,n);var r=t.f?_e(t.f.Ja,t.f,t):null;e:for(var i=t.g,s=-1;;){var o=["count="+n];s==-1?0<n?(s=i[0].b,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,c=0;c<n;c++){var l=i[c].b,u=i[c].a;if(l-=s,0>l)s=Math.max(0,i[c].b-100),a=!1;else try{zg(u,o,"req"+l+"_")}catch(h){r&&r(u)}}if(a){r=o.join("&");break e}}return t=t.g.splice(0,n),e.s=t,r}function yl(t){t.a||t.j||(t.T=1,Gc(t.Aa,t),t.o=0)}function Ws(t){return t.a||t.j||3<=t.o?!1:(t.T++,t.j=Mn(_e(t.Aa,t),Pl(t,t.o)),t.o++,!0)}k.Aa=function(){if(this.j=null,xl(this),this.U&&!(this.F||this.a==null||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Mn(_e(this.Ta,this),t)}};k.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Se(10),Zr(this),xl(this))};function zs(t){t.s!=null&&(V.clearTimeout(t.s),t.s=null)}function xl(t){t.a=new xn(t,t.c,"rpc",t.T),t.i===null&&(t.a.B=t.l),t.a.O=0;var e=Je(t.la);te(e,"RID","rpc"),te(e,"SID",t.J),te(e,"CI",t.H?"0":"1"),te(e,"AID",t.P),Bn(t,e),te(e,"TYPE","xmlhttp"),t.i&&t.l&&Js(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Yr(Je(e)),n.j=null,n.I=!0,ll(n,t)}k.Sa=function(){this.m!=null&&(this.m=null,Zr(this),Ws(this),Se(19))};function ti(t){t.m!=null&&(V.clearTimeout(t.m),t.m=null)}function dl(t,e){var n=null;if(t.a==e){ti(t),zs(t),t.a=null;var r=2}else if(Hs(t.b,e))n=e.s,gl(t.b,e),r=1;else return;if(t.I=e.N,t.v!=0){if(e.b)if(r==1){n=e.j?e.j.length:0,e=He()-e.u;var i=t.u;r=Wr(),ge(r,new tl(r,n,e,i)),ei(t)}else yl(t);else if(i=e.h,i==3||i==0&&0<t.I||!(r==1&&Jg(t,e)||r==2&&Ws(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ct(t,5);break;case 4:Ct(t,10);break;case 3:Ct(t,6);break;default:Ct(t,2)}}}function Pl(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ct(t,e){if(t.c.info("Error code "+e),e==2){var n=null;t.f&&(n=null);var r=_e(t.Ya,t);n||(n=new Nt("//www.google.com/images/cleardot.gif"),V.location&&V.location.protocol=="http"||ni(n,"https"),Yr(n)),Hg(n.toString(),r)}else Se(2);t.v=0,t.f&&t.f.ra(e),Ll(t),Ol(t)}k.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Se(2)):(this.c.info("Failed to ping google.com"),Se(1))};function Ll(t){t.v=0,t.I=-1,t.f&&((kl(t.b).length!=0||t.g.length!=0)&&(t.b.c.length=0,ds(t.g),t.g.length=0),t.f.qa())}function vl(t,e,n){var r=Vg(n);if(r.c!="")e&&ri(r,e+"."+r.c),ii(r,r.h);else{var i=V.location;r=Fg(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ys(t.V,function(s,o){te(r,o,s)}),e=t.A,n=t.na,e&&n&&te(r,e,n),te(r,"VER",t.ha),Bn(t,r),r}function hl(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new le(t.Na),e.F=t.C,e}function Vl(){}k=Vl.prototype;k.ta=function(){};k.sa=function(){};k.ra=function(){};k.qa=function(){};k.Ja=function(){};function ai(){if(ut&&!(10<=Number(Vc)))throw Error("Environmental error: no available transport.")}ai.prototype.a=function(t,e){return new Le(t,e)};function Le(t,e){Oe.call(this),this.a=new Dl(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Fr(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fr(e)&&(this.a.A=e,t=this.b,t!==null&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new nn(this)}be(Le,Oe);Le.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Se(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=vl(t,null,t.fa),ei(t)};Le.prototype.close=function(){Gs(this.a)};Le.prototype.h=function(t){if(typeof t=="string"){var e={};e.__data__=t,Zs(this.a,e)}else this.l?(e={},e.__data__=Os(t),Zs(this.a,e)):Zs(this.a,t)};Le.prototype.G=function(){this.a.f=null,delete this.f,Gs(this.a),delete this.a,Le.X.G.call(this)};function Fl(t){Fs.call(this);var e=t.__sm__;if(e){e:{for(var n in e){t=n;break e}t=void 0}(this.c=t)?(t=this.c,this.data=e!==null&&t in e?e[t]:void 0):this.data=e}else this.data=t}be(Fl,Fs);function $l(){$s.call(this),this.status=1}be($l,$s);function nn(t){this.a=t}be(nn,Vl);nn.prototype.ta=function(){ge(this.a,"a")};nn.prototype.sa=function(t){ge(this.a,new Fl(t))};nn.prototype.ra=function(t){ge(this.a,new $l(t))};nn.prototype.qa=function(){ge(this.a,"b")};ai.prototype.createWebChannel=ai.prototype.a;Le.prototype.send=Le.prototype.h;Le.prototype.open=Le.prototype.g;Le.prototype.close=Le.prototype.close;Xr.NO_ERROR=0;Xr.TIMEOUT=8;Xr.HTTP_ERROR=6;nl.COMPLETE="complete";sl.EventType=Un;Un.OPEN="a";Un.CLOSE="b";Un.ERROR="c";Un.MESSAGE="d";Oe.prototype.listen=Oe.prototype.va;le.prototype.listenOnce=le.prototype.wa;le.prototype.getLastError=le.prototype.Qa;le.prototype.getLastErrorCode=le.prototype.ua;le.prototype.getStatus=le.prototype.W;le.prototype.getResponseJson=le.prototype.Pa;le.prototype.getResponseText=le.prototype.$;le.prototype.send=le.prototype.ba;var Zg=function(){return new ai},ey=function(){return Wr()},eo=Xr,ty=nl,ny=At,ql={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},ci=sl,ry=le;var rn="8.6.1";var li=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.t(r),this.i=r=>n.writeSequenceNumber(r))}t(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.i&&this.i(e),e}};li.o=-1;var E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Dt=new In("@firebase/firestore");function jl(){return Dt.logLevel}function N(t,...e){if(Dt.logLevel<=G.DEBUG){let n=e.map(to);Dt.debug(`Firestore (${rn}): ${t}`,...n)}}function dt(t,...e){if(Dt.logLevel<=G.ERROR){let n=e.map(to);Dt.error(`Firestore (${rn}): ${t}`,...n)}}function Bl(t,...e){if(Dt.logLevel<=G.WARN){let n=e.map(to);Dt.warn(`Firestore (${rn}): ${t}`,...n)}}function to(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}function z(t="Unexpected state"){let e=`FIRESTORE (${rn}) INTERNAL ASSERTION FAILED: `+t;throw dt(e),new Error(e)}function ie(t,e){t||z()}function W(t,e){return t}function iy(t){let e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var zl=class{static u(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=iy(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function J(t,e){return t<e?-1:t>e?1:0}function zn(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ze=class{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new O(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Q(e)}static min(){return new Q(new Ze(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};function Hl(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kl(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sy(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var sn=class{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(),r===void 0?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sn.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof sn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},re=class extends sn{construct(e,n,r){return new re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new re(n)}static emptyPath(){return new re([])}},oy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pe=class extends sn{construct(e,n,r){return new Pe(e,n,r)}static isValidIdentifier(e){return oy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pe(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new O(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new O(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new O(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pe(n)}static emptyPath(){return new Pe([])}};var ye=class{constructor(e){this.binaryString=e}static fromBase64String(e){let n=atob(e);return new ye(n)}static fromUint8Array(e){let n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ye(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ye.EMPTY_BYTE_STRING=new ye("");var ay=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pt(t){if(ie(!!t),typeof t=="string"){let e=0,n=ay.exec(t);if(ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:se(t.seconds),nanos:se(t.nanos)}}function se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function on(t){return typeof t=="string"?ye.fromBase64String(t):ye.fromUint8Array(t)}function Gl(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wl(t){let e=t.mapValue.fields.__previous_value__;return Gl(e)?Wl(e):e}function Hn(t){let e=pt(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}function an(t){return t==null}function no(t){return t===0&&1/t==-1/0}var F=class{constructor(e){this.path=e}static fromPath(e){return new F(re.fromString(e))}static fromName(e){return new F(re.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new re(e.slice()))}};function mt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gl(t)?4:10:z()}function Ke(t,e){let n=mt(t);if(n!==mt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hn(t).isEqual(Hn(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;let s=pt(r.timestampValue),o=pt(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return on(r.bytesValue).isEqual(on(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return se(r.geoPointValue.latitude)===se(i.geoPointValue.latitude)&&se(r.geoPointValue.longitude)===se(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return se(r.integerValue)===se(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){let s=se(r.doubleValue),o=se(i.doubleValue);return s===o?no(s)===no(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return zn(t.arrayValue.values||[],e.arrayValue.values||[],Ke);case 10:return function(r,i){let s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Hl(s)!==Hl(o))return!1;for(let a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Ke(s[a],o[a])))return!1;return!0}(t,e);default:return z()}}function Kn(t,e){return(t.values||[]).find(n=>Ke(n,e))!==void 0}function cn(t,e){let n=mt(t),r=mt(e);if(n!==r)return J(n,r);switch(n){case 0:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(i,s){let o=se(i.integerValue||i.doubleValue),a=se(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Xl(t.timestampValue,e.timestampValue);case 4:return Xl(Hn(t),Hn(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(i,s){let o=on(i),a=on(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){let o=i.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){let l=J(o[c],a[c]);if(l!==0)return l}return J(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){let o=J(se(i.latitude),se(s.latitude));return o!==0?o:J(se(i.longitude),se(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){let o=i.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){let l=cn(o[c],a[c]);if(l)return l}return J(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){let o=i.fields||{},a=Object.keys(o),c=s.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){let h=J(a[u],l[u]);if(h!==0)return h;let f=cn(o[a[u]],c[l[u]]);if(f!==0)return f}return J(a.length,l.length)}(t.mapValue,e.mapValue);default:throw z()}}function Xl(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);let n=pt(t),r=pt(e),i=J(n.seconds,r.seconds);return i!==0?i:J(n.nanos,r.nanos)}function io(t){return ro(t)}function ro(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){let i=pt(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?on(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,F.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(let o of r.values||[])s?s=!1:i+=",",i+=ro(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){let i=Object.keys(r.fields||{}).sort(),s="{",o=!0;for(let a of i)o?o=!1:s+=",",s+=`${a}:${ro(r.fields[a])}`;return s+"}"}(t.mapValue):z();var e,n}function so(t){return!!t&&"integerValue"in t}function oo(t){return!!t&&"arrayValue"in t}function Yl(t){return!!t&&"nullValue"in t}function Ql(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jl(t){return!!t&&"mapValue"in t}var xe=class{constructor(e){this.overlayMap=new Map,this.partialValue=e}static empty(){return new xe({mapValue:{}})}field(e){return xe.extractNestedValue(this.buildProto(),e)}toProto(){return this.field(Pe.emptyPath())}set(e,n){this.setOverlay(e,n)}setAll(e){e.forEach((n,r)=>{n?this.set(r,n):this.delete(r)})}delete(e){this.setOverlay(e,null)}isEqual(e){return Ke(this.buildProto(),e.buildProto())}setOverlay(e,n){let r=this.overlayMap;for(let i=0;i<e.length-1;++i){let s=e.get(i),o=r.get(s);o instanceof Map?r=o:o&&mt(o)===10?(o=new Map(Object.entries(o.mapValue.fields||{})),r.set(s,o),r=o):(o=new Map,r.set(s,o),r=o)}r.set(e.lastSegment(),n)}applyOverlay(e,n){let r=!1,i=xe.extractNestedValue(this.partialValue,e),s=Jl(i)?Object.assign({},i.mapValue.fields):{};return n.forEach((o,a)=>{if(o instanceof Map){let c=this.applyOverlay(e.child(a),o);c!=null&&(s[a]=c,r=!0)}else o!==null?(s[a]=o,r=!0):s.hasOwnProperty(a)&&(delete s[a],r=!0)}),r?{mapValue:{fields:s}}:null}buildProto(){let e=this.applyOverlay(Pe.emptyPath(),this.overlayMap);return e!=null&&(this.partialValue=e,this.overlayMap.clear()),this.partialValue}static extractNestedValue(e,n){if(n.isEmpty())return e;{let r=e;for(let i=0;i<n.length-1;++i)if(!r.mapValue.fields||(r=r.mapValue.fields[n.get(i)],!Jl(r)))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}clone(){return new xe(this.buildProto())}};var ve=class{constructor(e,n,r,i,s){this.key=e,this.documentType=n,this.version=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new ve(e,0,Q.min(),xe.empty(),0)}static newFoundDocument(e,n,r){return new ve(e,1,n,r,0)}static newNoDocument(e,n){return new ve(e,2,n,xe.empty(),0)}static newUnknownDocument(e,n){return new ve(e,3,n,xe.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xe.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ve&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new ve(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.toProto())}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Zl=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.h=null}};function eu(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Zl(t,e,n,r,i,s,o)}function ao(t){let e=W(t);if(e.h===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),an(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ui(e.startAt)),e.endAt&&(n+="|ub:",n+=ui(e.endAt)),e.h=n}return e.h}function ly(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${io(r.value)}`;var r}).join(", ")}]`),an(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+ui(t.startAt)),t.endAt&&(e+=", endAt: "+ui(t.endAt)),`Target(${e})`}function co(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!uy(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Ke(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tu(t.startAt,e.startAt)&&tu(t.endAt,e.endAt)}function lo(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ke=class extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.l(e,n,r):new nu(e,n,r):n==="array-contains"?new su(e,r):n==="in"?new ou(e,r):n==="not-in"?new au(e,r):n==="array-contains-any"?new cu(e,r):new ke(e,n,r)}static l(e,n,r){return n==="in"?new ru(e,r):new iu(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.m(cn(n,this.value)):n!==null&&mt(this.value)===mt(n)&&this.m(cn(n,this.value))}m(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}g(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}};function cy(t){return t.field.canonicalString()+t.op.toString()+io(t.value)}var nu=class extends ke{constructor(e,n,r){super(e,n,r),this.key=F.fromName(r.referenceValue)}matches(e){let n=F.comparator(e.key,this.key);return this.m(n)}},ru=class extends ke{constructor(e,n){super(e,"in",n),this.keys=lu("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},iu=class extends ke{constructor(e,n){super(e,"not-in",n),this.keys=lu("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function lu(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>F.fromName(r.referenceValue))}var su=class extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return oo(n)&&Kn(n.arrayValue,this.value)}},ou=class extends ke{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Kn(this.value.arrayValue,n)}},au=class extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Kn(this.value.arrayValue,n)}},cu=class extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!oo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Kn(this.value.arrayValue,r))}},hi=class{constructor(e,n){this.position=e,this.before=n}};function ui(t){return`${t.before?"b":"a"}:${t.position.map(e=>io(e)).join(",")}`}var ln=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function uy(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function uu(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=F.comparator(F.fromName(o.referenceValue),n.key):r=cn(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function tu(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ke(t.position[n],e.position[n]))return!1;return!0}var Gn=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt}};function hy(t,e,n,r,i,s,o,a){return new Gn(t,e,n,r,i,s,o,a)}function hu(t){return new Gn(t)}function fi(t){return!an(t.limit)&&t.limitType==="F"}function di(t){return!an(t.limit)&&t.limitType==="L"}function fy(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function dy(t){for(let e of t.filters)if(e.g())return e.field;return null}function py(t){return t.collectionGroup!==null}function Wn(t){let e=W(t);if(e.p===null){e.p=[];let n=dy(e),r=fy(e);if(n!==null&&r===null)n.isKeyField()||e.p.push(new ln(n)),e.p.push(new ln(Pe.keyField(),"asc"));else{let i=!1;for(let s of e.explicitOrderBy)e.p.push(s),s.field.isKeyField()&&(i=!0);if(!i){let s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ln(Pe.keyField(),s))}}}return e.p}function Ot(t){let e=W(t);if(!e.T)if(e.limitType==="F")e.T=eu(e.path,e.collectionGroup,Wn(e),e.filters,e.limit,e.startAt,e.endAt);else{let n=[];for(let s of Wn(e)){let o=s.dir==="desc"?"asc":"desc";n.push(new ln(s.field,o))}let r=e.endAt?new hi(e.endAt.position,!e.endAt.before):null,i=e.startAt?new hi(e.startAt.position,!e.startAt.before):null;e.T=eu(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.T}function my(t,e,n){return new Gn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pi(t,e){return co(Ot(t),Ot(e))&&t.limitType===e.limitType}function fu(t){return`${ao(Ot(t))}|lt:${t.limitType}`}function uo(t){return`Query(target=${ly(Ot(t))}; limitType=${t.limitType})`}function mi(t,e){return e.isFoundDocument()&&function(n,r){let i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):F.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(let i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(let i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!uu(n.startAt,Wn(n),r)||n.endAt&&uu(n.endAt,Wn(n),r))}(t,e)}function du(t){return(e,n)=>{let r=!1;for(let i of Wn(t)){let s=gy(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function gy(t,e,n){let r=t.field.isKeyField()?F.comparator(e.key,n.key):function(i,s,o){let a=s.data.field(i),c=o.data.field(i);return a!==null&&c!==null?cn(a,c):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}function yy(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:no(e)?"-0":e}}function vy(t){return{integerValue:""+t}}var Xn=class{constructor(){this._=void 0}};function wy(t,e,n){return t instanceof gi?function(r,i){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Yn?pu(t,e):t instanceof Qn?mu(t,e):function(r,i){let s=_y(r,i),o=gu(s)+gu(r.A);return so(s)&&so(r.A)?vy(o):yy(r.R,o)}(t,e)}function Ey(t,e,n){return t instanceof Yn?pu(t,e):t instanceof Qn?mu(t,e):n}function _y(t,e){return t instanceof yi?so(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}var gi=class extends Xn{},Yn=class extends Xn{constructor(e){super(),this.elements=e}};function pu(t,e){let n=yu(e);for(let r of t.elements)n.some(i=>Ke(i,r))||n.push(r);return{arrayValue:{values:n}}}var Qn=class extends Xn{constructor(e){super(),this.elements=e}};function mu(t,e){let n=yu(e);for(let r of t.elements)n=n.filter(i=>!Ke(i,r));return{arrayValue:{values:n}}}var yi=class extends Xn{constructor(e,n){super(),this.R=e,this.A=n}};function gu(t){return se(t.integerValue||t.doubleValue)}function yu(t){return oo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function by(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Yn&&r instanceof Yn||n instanceof Qn&&r instanceof Qn?zn(n.elements,r.elements,Ke):n instanceof yi&&r instanceof yi?Ke(n.A,r.A):n instanceof gi&&r instanceof gi}(t.transform,e.transform)}function vi(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ho=class{};function Iy(t,e,n){t instanceof fo?function(r,i,s){let o=r.value.clone(),a=_u(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof _i?function(r,i,s){if(!vi(r.precondition,i))return void i.convertToUnknownDocument(s.version);let o=_u(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(vu(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function po(t,e,n){t instanceof fo?function(r,i,s){if(!vi(r.precondition,i))return;let o=r.value.clone(),a=Eu(r.fieldTransforms,s,i);o.setAll(a),i.convertToFoundDocument(wu(i),o).setHasLocalMutations()}(t,e,n):t instanceof _i?function(r,i,s){if(!vi(r.precondition,i))return;let o=Eu(r.fieldTransforms,s,i),a=i.data;a.setAll(vu(r)),a.setAll(o),i.convertToFoundDocument(wu(i),a).setHasLocalMutations()}(t,e,n):function(r,i){vi(r.precondition,i)&&i.convertToNoDocument(Q.min())}(t,e)}function bu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&zn(n,r,(i,s)=>by(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function wu(t){return t.isFoundDocument()?t.version:Q.min()}var fo=class extends ho{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}},_i=class extends ho{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}};function vu(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function _u(t,e,n){let r=new Map;ie(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Ey(o,a,n[i]))}return r}function Eu(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,wy(s,o,e))}return r}var Iu=class{constructor(e){this.count=e}};var oe,H;function Tu(t){if(t===void 0)return dt("GRPC error has no .code"),E.UNKNOWN;switch(t){case oe.OK:return E.OK;case oe.CANCELLED:return E.CANCELLED;case oe.UNKNOWN:return E.UNKNOWN;case oe.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case oe.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case oe.INTERNAL:return E.INTERNAL;case oe.UNAVAILABLE:return E.UNAVAILABLE;case oe.UNAUTHENTICATED:return E.UNAUTHENTICATED;case oe.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case oe.NOT_FOUND:return E.NOT_FOUND;case oe.ALREADY_EXISTS:return E.ALREADY_EXISTS;case oe.PERMISSION_DENIED:return E.PERMISSION_DENIED;case oe.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case oe.ABORTED:return E.ABORTED;case oe.OUT_OF_RANGE:return E.OUT_OF_RANGE;case oe.UNIMPLEMENTED:return E.UNIMPLEMENTED;case oe.DATA_LOSS:return E.DATA_LOSS;default:return z()}}(H=oe||(oe={}))[H.OK=0]="OK",H[H.CANCELLED=1]="CANCELLED",H[H.UNKNOWN=2]="UNKNOWN",H[H.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",H[H.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",H[H.NOT_FOUND=5]="NOT_FOUND",H[H.ALREADY_EXISTS=6]="ALREADY_EXISTS",H[H.PERMISSION_DENIED=7]="PERMISSION_DENIED",H[H.UNAUTHENTICATED=16]="UNAUTHENTICATED",H[H.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",H[H.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",H[H.ABORTED=10]="ABORTED",H[H.OUT_OF_RANGE=11]="OUT_OF_RANGE",H[H.UNIMPLEMENTED=12]="UNIMPLEMENTED",H[H.INTERNAL=13]="INTERNAL",H[H.UNAVAILABLE=14]="UNAVAILABLE",H[H.DATA_LOSS=15]="DATA_LOSS";var Ae=class{constructor(e,n){this.comparator=e,this.root=n||de.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,de.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,de.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jn(this.root,e,this.comparator,!0)}},Jn=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},de=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??de.RED,this.left=i??de.EMPTY,this.right=s??de.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new de(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return de.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return de.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,de.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,de.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};de.EMPTY=null,de.RED=!0,de.BLACK=!1;de.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,e,n,r,i){return this}insert(t,e,n){return new de(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pe=class{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mo(this.data.getIterator())}getIteratorFrom(e){return new mo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pe)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new pe(this.comparator);return n.data=e,n}},mo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ty=new Ae(F.comparator);function Lt(){return Ty}var Sy=new Ae(F.comparator);function go(){return Sy}var ky=new pe(F.comparator);function ne(...t){let e=ky;for(let n of t)e=e.add(n);return e}var Ay=new pe(J);function Su(){return Ay}var Zn=class{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){let r=new Map;return r.set(e,un.createSynthesizedTargetChangeForCurrentChange(e,n)),new Zn(Q.min(),r,Su(),Lt(),ne())}},un=class{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new un(ye.EMPTY_BYTE_STRING,n,ne(),ne(),ne())}};var er=class{constructor(e,n,r,i){this.P=e,this.removedTargetIds=n,this.key=r,this.v=i}},yo=class{constructor(e,n){this.targetId=e,this.V=n}},vo=class{constructor(e,n,r=ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},_o=class{constructor(){this.S=0,this.D=ku(),this.C=ye.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}get current(){return this.N}get resumeToken(){return this.C}get $(){return this.S!==0}get O(){return this.k}M(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)}F(){let e=ne(),n=ne(),r=ne();return this.D.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z()}}),new un(this.C,this.N,e,n,r)}L(){this.k=!1,this.D=ku()}B(e,n){this.k=!0,this.D=this.D.insert(e,n)}U(e){this.k=!0,this.D=this.D.remove(e)}q(){this.S+=1}K(){this.S-=1}j(){this.k=!0,this.N=!0}},Au=class{constructor(e){this.W=e,this.G=new Map,this.H=Lt(),this.J=Cu(),this.Y=new pe(J)}X(e){for(let n of e.P)e.v&&e.v.isFoundDocument()?this.Z(n,e.v):this.tt(n,e.key,e.v);for(let n of e.removedTargetIds)this.tt(n,e.key,e.v)}et(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.st(n)&&r.M(e.resumeToken);break;case 1:r.K(),r.$||r.L(),r.M(e.resumeToken);break;case 2:r.K(),r.$||this.removeTarget(n);break;case 3:this.st(n)&&(r.j(),r.M(e.resumeToken));break;case 4:this.st(n)&&(this.it(n),r.M(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.G.forEach((r,i)=>{this.st(i)&&n(i)})}rt(e){let n=e.targetId,r=e.V.count,i=this.ot(n);if(i){let s=i.target;if(lo(s))if(r===0){let o=new F(s.path);this.tt(n,o,ve.newNoDocument(o,Q.min()))}else ie(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}}at(e){let n=new Map;this.G.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&lo(a.target)){let c=new F(a.target.path);this.H.get(c)!==null||this.ut(o,c)||this.tt(o,c,ve.newNoDocument(c,e))}s.O&&(n.set(o,s.F()),s.L())}});let r=ne();this.J.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))});let i=new Zn(e,n,this.Y,this.H,r);return this.H=Lt(),this.J=Cu(),this.Y=new pe(J),i}Z(e,n){if(!this.st(e))return;let r=this.ut(e,n.key)?2:0;this.nt(e).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(e))}tt(e,n,r){if(!this.st(e))return;let i=this.nt(e);this.ut(e,n)?i.B(n,1):i.U(n),this.J=this.J.insert(n,this.ht(n).delete(e)),r&&(this.H=this.H.insert(n,r))}removeTarget(e){this.G.delete(e)}ct(e){let n=this.nt(e).F();return this.W.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}q(e){this.nt(e).q()}nt(e){let n=this.G.get(e);return n||(n=new _o,this.G.set(e,n)),n}ht(e){let n=this.J.get(e);return n||(n=new pe(J),this.J=this.J.insert(e,n)),n}st(e){let n=this.ot(e)!==null;return n||N("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.G.get(e);return n&&n.$?null:this.W.lt(e)}it(e){this.G.set(e,new _o),this.W.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}ut(e,n){return this.W.getRemoteKeysForTarget(e).has(n)}};function Cu(){return new Ae(F.comparator)}function ku(){return new Ae(F.comparator)}var Cy=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Ry=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Ru=class{constructor(e,n){this.databaseId=e,this.I=n}};function Ny(t,e){return t.I?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dy(t,e){return t.I?e.toBase64():e.toUint8Array()}function tr(t){return ie(!!t),Q.fromTimestamp(function(e){let n=pt(e);return new Ze(n.seconds,n.nanos)}(t))}function Oy(t,e){return function(n){return new re(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Du(t){let e=re.fromString(t);return ie(Nu(e)),e}function wo(t,e){let n=Du(e);if(n.get(1)!==t.databaseId.projectId)throw new O(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(Ou(n))}function Eo(t,e){return Oy(t.databaseId,e)}function Ly(t){let e=Du(t);return e.length===4?re.emptyPath():Ou(e)}function Lu(t){return new re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ou(t){return ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Py(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.I?(ie(l===void 0||typeof l=="string"),ye.fromBase64String(l||"")):(ie(l===void 0||l instanceof Uint8Array),ye.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?E.UNKNOWN:Tu(c.code);return new O(l,c.message||"")}(o);n=new vo(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=wo(t,r.document.name),s=tr(r.document.updateTime),o=new xe({mapValue:{fields:r.document.fields}}),a=ve.newFoundDocument(i,s,o),c=r.targetIds||[],l=r.removedTargetIds||[];n=new er(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=wo(t,r.document),s=r.readTime?tr(r.readTime):Q.min(),o=ve.newNoDocument(i,s),a=r.removedTargetIds||[];n=new er([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=wo(t,r.document),s=r.removedTargetIds||[];n=new er([],s,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let i=r.count||0,s=new Iu(i),o=r.targetId;n=new yo(o,s)}}return n}function My(t,e){return{documents:[Eo(t,e.path)]}}function Vy(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Eo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Eo(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(a){if(a.length===0)return;let c=a.map(l=>function(u){if(u.op==="=="){if(Ql(u.value))return{unaryFilter:{field:hn(u.field),op:"IS_NAN"}};if(Yl(u.value))return{unaryFilter:{field:hn(u.field),op:"IS_NULL"}}}else if(u.op==="!="){if(Ql(u.value))return{unaryFilter:{field:hn(u.field),op:"IS_NOT_NAN"}};if(Yl(u.value))return{unaryFilter:{field:hn(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hn(u.field),op:xy(u.op),value:u.value}}}(l));return c.length===1?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);i&&(n.structuredQuery.where=i);let s=function(a){if(a.length!==0)return a.map(c=>function(l){return{field:hn(l.field),direction:Uy(l.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let o=function(a,c){return a.I||an(c)?c:{value:c}}(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Pu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Pu(e.endAt)),n}function Fy(t){let e=Ly(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ie(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=Mu(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new ln(fn(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,an(h)?null:h}(n.limit));let c=null;n.startAt&&(c=Uu(n.startAt));let l=null;return n.endAt&&(l=Uu(n.endAt)),hy(e,i,o,s,a,"F",c,l)}function $y(t,e){let n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return z()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Mu(t){return t?t.unaryFilter!==void 0?[jy(t)]:t.fieldFilter!==void 0?[qy(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Mu(e)).reduce((e,n)=>e.concat(n)):z():[]}function Pu(t){return{before:t.before,values:t.position}}function Uu(t){let e=!!t.before,n=t.values||[];return new hi(n,e)}function Uy(t){return Cy[t]}function xy(t){return Ry[t]}function hn(t){return{fieldPath:t.canonicalString()}}function fn(t){return Pe.fromServerFormat(t.fieldPath)}function qy(t){return ke.create(fn(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}function jy(t){switch(t.unaryFilter.op){case"IS_NAN":let e=fn(t.unaryFilter.field);return ke.create(e,"==",{doubleValue:NaN});case"IS_NULL":let n=fn(t.unaryFilter.field);return ke.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=fn(t.unaryFilter.field);return ke.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=fn(t.unaryFilter.field);return ke.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return z()}}function Nu(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var By="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xu=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};var nr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var I=class{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new I((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof I?n:I.resolve(n)}catch(n){return I.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):I.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):I.reject(n)}static resolve(e){return new I((n,r)=>{n(e)})}static reject(e){return new I((n,r)=>{r(e)})}static waitFor(e){return new I((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=I.resolve(!1);for(let r of e)n=n.next(i=>i?I.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}};function rr(t){return t.name==="IndexedDbTransactionError"}var Vu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Iy(s,e,r[i])}}applyToLocalView(e){for(let n of this.baseMutations)n.key.isEqual(e.key)&&po(n,e,this.localWriteTime);for(let n of this.mutations)n.key.isEqual(e.key)&&po(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{let r=e.get(n.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Q.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&zn(this.mutations,e.mutations,(n,r)=>bu(n,r))&&zn(this.baseMutations,e.baseMutations,(n,r)=>bu(n,r))}};var gt=class{constructor(e,n,r,i,s=Q.min(),o=Q.min(),a=ye.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new gt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new gt(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}};var Fu=class{constructor(e){this.Lt=e}};function zy(t){let e=Fy({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?my(e,e.limit,"L"):e}var $u=class{constructor(){this.Bt=new qu}addToCollectionParentIndex(e,n){return this.Bt.add(n),I.resolve()}getCollectionParents(e,n){return I.resolve(this.Bt.getEntries(n))}},qu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pe(re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pe(re.comparator)).toArray()}};var Pt=class{constructor(e){this.Ht=e}next(){return this.Ht+=2,this.Ht}static Jt(){return new Pt(0)}static Yt(){return new Pt(-1)}};async function bo(t){if(t.code!==E.FAILED_PRECONDITION||t.message!==By)throw t;N("LocalStore","Unexpectedly lost primary lease")}var dn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n])}else this.inner[r]=[[e,n]]}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1}forEach(e){Kl(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return sy(this.inner)}};var ju=class{constructor(){this.changes=new dn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){let n=this.changes.get(e);return n?n.readTime:Q.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:ve.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?I.resolve(r.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Io=class{constructor(e,n,r){this.qe=e,this._n=n,this.qt=r}mn(e,n){return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.gn(e,n,r))}gn(e,n,r){return this.qe.getEntry(e,n).next(i=>{for(let s of r)s.applyToLocalView(i);return i})}yn(e,n){e.forEach((r,i)=>{for(let s of n)s.applyToLocalView(i)})}pn(e,n){return this.qe.getEntries(e,n).next(r=>this.En(e,r).next(()=>r))}En(e,n){return this._n.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.yn(n,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return F.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(e,n.path):py(n)?this.In(e,n,r):this.An(e,n,r)}Tn(e,n){return this.mn(e,new F(n)).next(r=>{let i=go();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}In(e,n,r){let i=n.collectionGroup,s=go();return this.qt.getCollectionParents(e,i).next(o=>I.forEach(o,a=>{let c=function(l,u){return new Gn(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(i));return this.An(e,c,r).next(l=>{l.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}An(e,n,r){let i,s;return this.qe.getDocumentsMatchingQuery(e,n,r).next(o=>(i=o,this._n.getAllMutationBatchesAffectingQuery(e,n))).next(o=>(s=o,this.Rn(e,s,i).next(a=>{i=a;for(let c of s)for(let l of c.mutations){let u=l.key,h=i.get(u);h==null&&(h=ve.newInvalidDocument(u),i=i.insert(u,h)),po(l,h,c.localWriteTime),h.isFoundDocument()||(i=i.remove(u))}}))).next(()=>(i.forEach((o,a)=>{mi(n,a)||(i=i.remove(o))}),i))}Rn(e,n,r){let i=ne();for(let o of n)for(let a of o.mutations)a instanceof _i&&r.get(a.key)===null&&(i=i.add(a.key));let s=r;return this.qe.getEntries(e,i).next(o=>(o.forEach((a,c)=>{c.isFoundDocument()&&(s=s.insert(a,c))}),s))}};var wi=class{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pn=r,this.bn=i}static vn(e,n){let r=ne(),i=ne();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new wi(e,n.fromCache,r,i)}};var Bu=class{Vn(e){this.Sn=e}getDocumentsMatchingQuery(e,n,r,i){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(Q.min())?this.Dn(e,n):this.Sn.pn(e,i).next(s=>{let o=this.Cn(n,s);return(fi(n)||di(n))&&this.Nn(n.limitType,o,i,r)?this.Dn(e,n):(jl()<=G.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),uo(n)),this.Sn.getDocumentsMatchingQuery(e,n,r).next(a=>(o.forEach(c=>{a=a.insert(c.key,c)}),a)))})}Cn(e,n){let r=new pe(du(e));return n.forEach((i,s)=>{mi(e,s)&&(r=r.add(s))}),r}Nn(e,n,r,i){if(r.size!==n.size)return!0;let s=e==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Dn(e,n){return jl()<=G.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",uo(n)),this.Sn.getDocumentsMatchingQuery(e,n,Q.min())}};var zu=class{constructor(e,n,r,i){this.persistence=e,this.xn=n,this.R=i,this.kn=new Ae(J),this.$n=new dn(s=>ao(s),co),this.On=Q.min(),this._n=e.getMutationQueue(r),this.Mn=e.getRemoteDocumentCache(),this.Ue=e.getTargetCache(),this.Fn=new Io(this.Mn,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Fn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.kn))}};function Hy(t,e,n,r){return new zu(t,e,n,r)}async function Hu(t,e){let n=W(t),r=n._n,i=n.Fn,s=await n.persistence.runTransaction("Handle user change","readonly",o=>{let a;return n._n.getAllMutationBatches(o).next(c=>(a=c,r=n.persistence.getMutationQueue(e),i=new Io(n.Mn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(o))).next(c=>{let l=[],u=[],h=ne();for(let f of a){l.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}for(let f of c){u.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}return i.pn(o,h).next(f=>({Ln:f,removedBatchIds:l,addedBatchIds:u}))})});return n._n=r,n.Fn=i,n.xn.Vn(n.Fn),s}function Ku(t){let e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ue.getLastRemoteSnapshotVersion(n))}function Gy(t,e){let n=W(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.Mn.newChangeBuffer({trackRemovals:!0});i=n.kn;let a=[];e.targetChanges.forEach((l,u)=>{let h=i.get(u);if(!h)return;a.push(n.Ue.removeMatchingKeys(s,l.removedDocuments,u).next(()=>n.Ue.addMatchingKeys(s,l.addedDocuments,u)));let f=l.resumeToken;if(f.approximateByteSize()>0){let d=h.withResumeToken(f,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(u,d),function(p,_,A){return ie(_.resumeToken.approximateByteSize()>0),p.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(h,d,l)&&a.push(n.Ue.updateTargetData(s,d))}});let c=Lt();if(e.documentUpdates.forEach((l,u)=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(Ky(s,o,e.documentUpdates,r,void 0).next(l=>{c=l})),!r.isEqual(Q.min())){let l=n.Ue.getLastRemoteSnapshotVersion(s).next(u=>n.Ue.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return I.waitFor(a).next(()=>o.apply(s)).next(()=>n.Fn.En(s,c)).next(()=>c)}).then(s=>(n.kn=i,s))}function Ky(t,e,n,r,i){let s=ne();return n.forEach(o=>s=s.add(o)),e.getEntries(t,s).next(o=>{let a=Lt();return n.forEach((c,l)=>{let u=o.get(c),h=(i==null?void 0:i.get(c))||r;l.isNoDocument()&&l.version.isEqual(Q.min())?(e.removeEntry(c,h),a=a.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l,h),a=a.insert(c,l)):N("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),a})}function Wy(t,e){let n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ue.getTargetData(r,e).next(s=>s?(i=s,I.resolve(i)):n.Ue.allocateTargetId(r).next(o=>(i=new gt(e,o,0,r.currentSequenceNumber),n.Ue.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.$n.set(e,r.targetId)),r})}async function To(t,e,n){let r=W(t),i=r.kn.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!rr(o))throw o;N("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.kn=r.kn.remove(e),r.$n.delete(i.target)}function Gu(t,e,n){let r=W(t),i=Q.min(),s=ne();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){let u=W(a),h=u.$n.get(l);return h!==void 0?I.resolve(u.kn.get(h)):u.Ue.getTargetData(c,l)}(r,o,Ot(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ue.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.xn.getDocumentsMatchingQuery(o,e,n?i:Q.min(),n?s:ne())).next(a=>({documents:a,Bn:s})))}var Wu=class{constructor(e){this.R=e,this.Qn=new Map,this.jn=new Map}getBundleMetadata(e,n){return I.resolve(this.Qn.get(n))}saveBundleMetadata(e,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:tr(r.createTime)}),I.resolve()}getNamedQuery(e,n){return I.resolve(this.jn.get(n))}saveNamedQuery(e,n){return this.jn.set(n.name,function(r){return{name:r.name,query:zy(r.bundledQuery),readTime:tr(r.readTime)}}(n)),I.resolve()}};var Ei=class{constructor(){this.Wn=new pe(ue.Gn),this.zn=new pe(ue.Hn)}isEmpty(){return this.Wn.isEmpty()}addReference(e,n){let r=new ue(e,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)}Jn(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Yn(new ue(e,n))}Xn(e,n){e.forEach(r=>this.removeReference(r,n))}Zn(e){let n=new F(new re([])),r=new ue(n,e),i=new ue(n,e+1),s=[];return this.zn.forEachInRange([r,i],o=>{this.Yn(o),s.push(o.key)}),s}ts(){this.Wn.forEach(e=>this.Yn(e))}Yn(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)}es(e){let n=new F(new re([])),r=new ue(n,e),i=new ue(n,e+1),s=ne();return this.zn.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new ue(e,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ue=class{constructor(e,n){this.key=e,this.ns=n}static Gn(e,n){return F.comparator(e.key,n.key)||J(e.ns,n.ns)}static Hn(e,n){return J(e.ns,n.ns)||F.comparator(e.key,n.key)}};var Xu=class{constructor(e,n){this.qt=e,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new pe(ue.Gn)}checkEmpty(e){return I.resolve(this._n.length===0)}addMutationBatch(e,n,r,i){let s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];let o=new Vu(s,n,r,i);this._n.push(o);for(let a of i)this.rs=this.rs.add(new ue(a.key,s)),this.qt.addToCollectionParentIndex(e,a.key.path.popLast());return I.resolve(o)}lookupMutationBatch(e,n){return I.resolve(this.os(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.cs(r),s=i<0?0:i;return I.resolve(this._n.length>s?this._n[s]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(this._n.length===0?-1:this.ss-1)}getAllMutationBatches(e){return I.resolve(this._n.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ue(n,0),i=new ue(n,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],o=>{let a=this.os(o.ns);s.push(a)}),I.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pe(J);return n.forEach(i=>{let s=new ue(i,0),o=new ue(i,Number.POSITIVE_INFINITY);this.rs.forEachInRange([s,o],a=>{r=r.add(a.ns)})}),I.resolve(this.us(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;F.isDocumentKey(s)||(s=s.child(""));let o=new ue(new F(s),0),a=new pe(J);return this.rs.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.ns)),!0)},o),I.resolve(this.us(a))}us(e){let n=[];return e.forEach(r=>{let i=this.os(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ie(this.hs(n.batchId,"removed")===0),this._n.shift();let r=this.rs;return I.forEach(n.mutations,i=>{let s=new ue(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.rs=r})}Gt(e){}containsKey(e,n){let r=new ue(n,0),i=this.rs.firstAfterOrEqual(r);return I.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this._n.length,I.resolve()}hs(e,n){return this.cs(e)}cs(e){return this._n.length===0?0:e-this._n[0].batchId}os(e){let n=this.cs(e);return n<0||n>=this._n.length?null:this._n[n]}};var Yu=class{constructor(e,n){this.qt=e,this.ls=n,this.docs=new Ae(F.comparator),this.size=0}addEntry(e,n,r){let i=n.key,s=this.docs.get(i),o=s?s.size:0,a=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:a,readTime:r}),this.size+=a-o,this.qt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return I.resolve(r?r.document.clone():ve.newInvalidDocument(n))}getEntries(e,n){let r=Lt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.clone():ve.newInvalidDocument(i))}),I.resolve(r)}getDocumentsMatchingQuery(e,n,r){let i=Lt(),s=new F(n.path.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){let{key:a,value:{document:c,readTime:l}}=o.getNext();if(!n.path.isPrefixOf(a.path))break;l.compareTo(r)<=0||mi(n,c)&&(i=i.insert(c.key,c.clone()))}return I.resolve(i)}fs(e,n){return I.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Qu(this)}getSize(e){return I.resolve(this.size)}},Qu=class extends ju{constructor(e){super(),this.Ie=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?n.push(this.Ie.addEntry(e,i.document,this.getReadTime(r))):this.Ie.removeEntry(r)}),I.waitFor(n)}getFromCache(e,n){return this.Ie.getEntry(e,n)}getAllFromCache(e,n){return this.Ie.getEntries(e,n)}};var Ju=class{constructor(e){this.persistence=e,this.ds=new dn(n=>ao(n),co),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.ws=0,this._s=new Ei,this.targetCount=0,this.gs=Pt.Jt()}forEachTarget(e,n){return this.ds.forEach((r,i)=>n(i)),I.resolve()}getLastRemoteSnapshotVersion(e){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return I.resolve(this.ws)}allocateTargetId(e){return this.highestTargetId=this.gs.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),I.resolve()}te(e){this.ds.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.gs=new Pt(n),this.highestTargetId=n),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)}addTargetData(e,n){return this.te(n),this.targetCount+=1,I.resolve()}updateTargetData(e,n){return this.te(n),I.resolve()}removeTargetData(e,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,I.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.ds.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ds.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),I.waitFor(s).next(()=>i)}getTargetCount(e){return I.resolve(this.targetCount)}getTargetData(e,n){let r=this.ds.get(n)||null;return I.resolve(r)}addMatchingKeys(e,n,r){return this._s.Jn(n,r),I.resolve()}removeMatchingKeys(e,n,r){this._s.Xn(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),I.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._s.Zn(n),I.resolve()}getMatchingKeysForTargetId(e,n){let r=this._s.es(n);return I.resolve(r)}containsKey(e,n){return I.resolve(this._s.containsKey(n))}};var Zu=class{constructor(e,n){this.ys={},this.Ne=new li(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.Ue=new Ju(this),this.qt=new $u,this.qe=function(r,i){return new Yu(r,i)}(this.qt,r=>this.referenceDelegate.ps(r)),this.R=new Fu(n),this.Ke=new Wu(this.R)}start(){return Promise.resolve()}shutdown(){return this.xe=!1,Promise.resolve()}get started(){return this.xe}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.qt}getMutationQueue(e){let n=this.ys[e.toKey()];return n||(n=new Xu(this.qt,this.referenceDelegate),this.ys[e.toKey()]=n),n}getTargetCache(){return this.Ue}getRemoteDocumentCache(){return this.qe}getBundleCache(){return this.Ke}runTransaction(e,n,r){N("MemoryPersistence","Starting transaction:",e);let i=new eh(this.Ne.next());return this.referenceDelegate.Es(),r(i).next(s=>this.referenceDelegate.Ts(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Is(e,n){return I.or(Object.values(this.ys).map(r=>()=>r.containsKey(e,n)))}},eh=class extends xu{constructor(e){super(),this.currentSequenceNumber=e}},bi=class{constructor(e){this.persistence=e,this.As=new Ei,this.Rs=null}static Ps(e){return new bi(e)}get bs(){if(this.Rs)return this.Rs;throw z()}addReference(e,n,r){return this.As.addReference(r,n),this.bs.delete(r.toString()),I.resolve()}removeReference(e,n,r){return this.As.removeReference(r,n),this.bs.add(r.toString()),I.resolve()}markPotentiallyOrphaned(e,n){return this.bs.add(n.toString()),I.resolve()}removeTarget(e,n){this.As.Zn(n.targetId).forEach(i=>this.bs.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.bs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Es(){this.Rs=new Set}Ts(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.bs,r=>{let i=F.fromPath(r);return this.vs(e,i).next(s=>{s||n.removeEntry(i)})}).next(()=>(this.Rs=null,n.apply(e)))}updateLimboDocument(e,n){return this.vs(e,n).next(r=>{r?this.bs.delete(n.toString()):this.bs.add(n.toString())})}ps(e){return 0}vs(e,n){return I.or([()=>I.resolve(this.As.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Is(e,n)])}};var Me=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Me.UNAUTHENTICATED=new Me(null),Me.GOOGLE_CREDENTIALS=new Me("google-credentials-uid"),Me.FIRST_PARTY=new Me("first-party-uid");var So=class{constructor(){this.activeTargetIds=Su()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}Cs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},th=class{constructor(){this.li=new So,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.li.Ds(e),this.fi[e]||"not-current"}updateQueryState(e,n,r){this.fi[e]=n}removeLocalQueryTarget(e){this.li.Cs(e)}isLocalQueryTarget(e){return this.li.activeTargetIds.has(e)}clearQueryState(e){delete this.fi[e]}getAllActiveQueryTargets(){return this.li.activeTargetIds}isActiveQueryTarget(e){return this.li.activeTargetIds.has(e)}start(){return this.li=new So,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}};var nh=class{di(e){}shutdown(){}};var ko=class{constructor(){this.wi=()=>this._i(),this.mi=()=>this.gi(),this.yi=[],this.pi()}di(e){this.yi.push(e)}shutdown(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)}pi(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)}_i(){N("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.yi)e(0)}gi(){N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.yi)e(1)}static gt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Xy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};var rh=class{constructor(e){this.Ei=e.Ei,this.Ti=e.Ti}Ii(e){this.Ai=e}Ri(e){this.Pi=e}onMessage(e){this.bi=e}close(){this.Ti()}send(e){this.Ei(e)}vi(){this.Ai()}Vi(e){this.Pi(e)}Si(e){this.bi(e)}};var ih=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http";this.Di=n+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Ni(e,n,r,i){let s=this.xi(e,n);N("RestConnection","Sending: ",s,r);let o={};return this.ki(o,i),this.$i(e,s,o,r).then(a=>(N("RestConnection","Received: ",a),a),a=>{throw Bl("RestConnection",`${e} failed with error: `,a,"url: ",s,"request:",r),a})}Oi(e,n,r,i){return this.Ni(e,n,r,i)}ki(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+rn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(let r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])}xi(e,n){let r=Xy[e];return`${this.Di}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling}$i(e,n,r,i){return new Promise((s,o)=>{let a=new ry;a.listenOnce(ty.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case eo.NO_ERROR:let l=a.getResponseJson();N("Connection","XHR received:",JSON.stringify(l)),s(l);break;case eo.TIMEOUT:N("Connection",'RPC "'+e+'" timed out'),o(new O(E.DEADLINE_EXCEEDED,"Request time out"));break;case eo.HTTP_ERROR:let u=a.getStatus();if(N("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let h=a.getResponseJson().error;if(h&&h.status&&h.message){let f=function(d){let p=d.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(p)>=0?p:E.UNKNOWN}(h.status);o(new O(f,h.message))}else o(new O(E.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new O(E.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{N("Connection",'RPC "'+e+'" completed.')}});let c=JSON.stringify(i);a.send(n,"POST",c,r,15)})}Mi(e,n){let r=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Zg(),s=ey(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.ki(o.initMessageHeaders,n),yr()||_r()||Ra()||wr()||Na()||vr()||(o.httpHeadersOverwriteParam="$httpHeaders");let a=r.join("");N("Connection","Creating WebChannel: "+a,o);let c=i.createWebChannel(a,o),l=!1,u=!1,h=new rh({Ei:d=>{u?N("Connection","Not sending because WebChannel is closed:",d):(l||(N("Connection","Opening WebChannel transport."),c.open(),l=!0),N("Connection","WebChannel sending:",d),c.send(d))},Ti:()=>c.close()}),f=(d,p,_)=>{d.listen(p,A=>{try{_(A)}catch(m){setTimeout(()=>{throw m},0)}})};return f(c,ci.EventType.OPEN,()=>{u||N("Connection","WebChannel transport opened.")}),f(c,ci.EventType.CLOSE,()=>{u||(u=!0,N("Connection","WebChannel transport closed"),h.Vi())}),f(c,ci.EventType.ERROR,d=>{u||(u=!0,Bl("Connection","WebChannel transport errored:",d),h.Vi(new O(E.UNAVAILABLE,"The operation could not be completed")))}),f(c,ci.EventType.MESSAGE,d=>{var p;if(!u){let _=d.data[0];ie(!!_);let A=_,m=A.error||((p=A[0])===null||p===void 0?void 0:p.error);if(m){N("Connection","WebChannel received error:",m);let C=m.status,$=function(ae){let K=oe[ae];if(K!==void 0)return Tu(K)}(C),Z=m.message;$===void 0&&($=E.INTERNAL,Z="Unknown error status: "+C+" with message "+m.message),u=!0,h.Vi(new O($,Z)),c.close()}else N("Connection","WebChannel received:",_),h.Si(_)}}),f(s,ny.STAT_EVENT,d=>{d.stat===ql.PROXY?N("Connection","Detected buffering proxy"):d.stat===ql.NOPROXY&&N("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.vi()},0),h}};function Ao(){return typeof document!="undefined"?document:null}function sh(t){return new Ru(t,!0)}var Co=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Se=e,this.timerId=n,this.Fi=r,this.Li=i,this.Bi=s,this.Ui=0,this.qi=null,this.Ki=Date.now(),this.reset()}reset(){this.Ui=0}Qi(){this.Ui=this.Bi}ji(e){this.cancel();let n=Math.floor(this.Ui+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&N("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ui} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qi=this.Se.enqueueAfterDelay(this.timerId,i,()=>(this.Ki=Date.now(),e())),this.Ui*=this.Li,this.Ui<this.Fi&&(this.Ui=this.Fi),this.Ui>this.Bi&&(this.Ui=this.Bi)}Gi(){this.qi!==null&&(this.qi.skipDelay(),this.qi=null)}cancel(){this.qi!==null&&(this.qi.cancel(),this.qi=null)}Wi(){return(Math.random()-.5)*this.Ui}};var oh=class{constructor(e,n,r,i,s,o){this.Se=e,this.zi=r,this.Hi=i,this.Ji=s,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Co(e,n)}tr(){return this.state===1||this.state===2||this.state===4}er(){return this.state===2}start(){this.state!==3?this.auth():this.nr()}async stop(){this.tr()&&await this.close(0)}sr(){this.state=0,this.Zi.reset()}ir(){this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,()=>this.rr()))}cr(e){this.ar(),this.stream.send(e)}async rr(){if(this.er())return this.close(0)}ar(){this.Xi&&(this.Xi.cancel(),this.Xi=null)}async close(e,n){this.ar(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(dt(n.toString()),dt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===E.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ur(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ri(n)}ur(){}auth(){this.state=1;let e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(r=>{this.Yi===n&&this.lr(r)},r=>{e(()=>{let i=new O(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.dr(i)})})}lr(e){let n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(()=>{n(()=>(this.state=2,this.listener.Ii()))}),this.stream.Ri(r=>{n(()=>this.dr(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}nr(){this.state=4,this.Zi.ji(async()=>{this.state=0,this.start()})}dr(e){return N("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}hr(e){return n=>{this.Se.enqueueAndForget(()=>this.Yi===e?n():(N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ah=class extends oh{constructor(e,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s),this.R=i}wr(e){return this.Hi.Mi("Listen",e)}onMessage(e){this.Zi.reset();let n=Py(this.R,e),r=function(i){if(!("targetChange"in i))return Q.min();let s=i.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?tr(s.readTime):Q.min()}(e);return this.listener._r(n,r)}mr(e){let n={};n.database=Lu(this.R),n.addTarget=function(i,s){let o,a=s.target;return o=lo(a)?{documents:My(i,a)}:{query:Vy(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=Dy(i,s.resumeToken):s.snapshotVersion.compareTo(Q.min())>0&&(o.readTime=Ny(i,s.snapshotVersion.toTimestamp())),o}(this.R,e);let r=$y(this.R,e);r&&(n.labels=r),this.cr(n)}gr(e){let n={};n.database=Lu(this.R),n.removeTarget=e,this.cr(n)}};var ch=class extends class{}{constructor(e,n,r){super(),this.credentials=e,this.Hi=n,this.R=r,this.Rr=!1}Pr(){if(this.Rr)throw new O(E.FAILED_PRECONDITION,"The client has already been terminated.")}Ni(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Ni(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new O(E.UNKNOWN,i.toString())})}Oi(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Oi(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new O(E.UNKNOWN,i.toString())})}terminate(){this.Rr=!0}},lh=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.br=0,this.vr=null,this.Vr=!0}Sr(){this.br===0&&(this.Dr("Unknown"),this.vr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.vr=null,this.Cr("Backend didn't respond within 10 seconds."),this.Dr("Offline"),Promise.resolve())))}Nr(e){this.state==="Online"?this.Dr("Unknown"):(this.br++,this.br>=1&&(this.kr(),this.Cr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Dr("Offline")))}set(e){this.kr(),this.br=0,e==="Online"&&(this.Vr=!1),this.Dr(e)}Dr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Cr(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(dt(n),this.Vr=!1):N("OnlineStateTracker",n)}kr(){this.vr!==null&&(this.vr.cancel(),this.vr=null)}};var uh=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.$r=[],this.Or=new Map,this.Mr=new Set,this.Fr=[],this.Lr=s,this.Lr.di(o=>{r.enqueueAndForget(async()=>{sr(this)&&(N("RemoteStore","Restarting streams for network reachability change."),await async function(a){let c=W(a);c.Mr.add(4),await ir(c),c.Br.set("Unknown"),c.Mr.delete(4),await Ii(c)}(this))})}),this.Br=new lh(r,i)}};async function Ii(t){if(sr(t))for(let e of t.Fr)await e(!0)}async function ir(t){for(let e of t.Fr)await e(!1)}function hh(t,e){let n=W(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Do(n)?No(n):pn(n).er()&&Ro(n,e))}function dh(t,e){let n=W(t),r=pn(n);n.Or.delete(e),r.er()&&fh(n,e),n.Or.size===0&&(r.er()?r.ir():sr(n)&&n.Br.set("Unknown"))}function Ro(t,e){t.Ur.q(e.targetId),pn(t).mr(e)}function fh(t,e){t.Ur.q(e),pn(t).gr(e)}function No(t){t.Ur=new Au({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.Or.get(e)||null}),pn(t).start(),t.Br.Sr()}function Do(t){return sr(t)&&!pn(t).tr()&&t.Or.size>0}function sr(t){return W(t).Mr.size===0}function ph(t){t.Ur=void 0}async function Yy(t){t.Or.forEach((e,n)=>{Ro(t,e)})}async function Qy(t,e){ph(t),Do(t)?(t.Br.Nr(e),No(t)):t.Br.set("Unknown")}async function Jy(t,e,n){if(t.Br.set("Online"),e instanceof vo&&e.state===2&&e.cause)try{await async function(r,i){let s=i.cause;for(let o of i.targetIds)r.Or.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Or.delete(o),r.Ur.removeTarget(o))}(t,e)}catch(r){N("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mh(t,r)}else if(e instanceof er?t.Ur.X(e):e instanceof yo?t.Ur.rt(e):t.Ur.et(e),!n.isEqual(Q.min()))try{let r=await Ku(t.localStore);n.compareTo(r)>=0&&await function(i,s){let o=i.Ur.at(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){let l=i.Or.get(c);l&&i.Or.set(c,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{let c=i.Or.get(a);if(!c)return;i.Or.set(a,c.withResumeToken(ye.EMPTY_BYTE_STRING,c.snapshotVersion)),fh(i,a);let l=new gt(c.target,a,1,c.sequenceNumber);Ro(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){N("RemoteStore","Failed to raise snapshot:",r),await mh(t,r)}}async function mh(t,e,n){if(!rr(e))throw e;t.Mr.add(1),await ir(t),t.Br.set("Offline"),n||(n=()=>Ku(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{N("RemoteStore","Retrying IndexedDB access"),await n(),t.Mr.delete(1),await Ii(t)})}async function Zy(t,e){let n=W(t);e?(n.Mr.delete(2),await Ii(n)):e||(n.Mr.add(2),await ir(n),n.Br.set("Unknown"))}function pn(t){return t.qr||(t.qr=function(e,n,r){let i=W(e);return i.Pr(),new ah(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:Yy.bind(null,t),Ri:Qy.bind(null,t),_r:Jy.bind(null,t)}),t.Fr.push(async e=>{e?(t.qr.sr(),Do(t)?No(t):t.Br.set("Unknown")):(await t.qr.stop(),ph(t))})),t.qr}var Ti=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new Ti(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function gh(t,e){if(dt("AsyncQueue",`${e}: ${t}`),rr(t))return new O(E.UNAVAILABLE,`${e}: ${t}`);throw t}var Mt=class{constructor(e){this.comparator=e?(n,r)=>e(n,r)||F.comparator(n.key,r.key):(n,r)=>F.comparator(n.key,r.key),this.keyedMap=go(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new Mt(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new Mt;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Oo=class{constructor(){this.Qr=new Ae(F.comparator)}track(e){let n=e.doc.key,r=this.Qr.get(n);r?e.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,e):e.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Qr=this.Qr.remove(n):e.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):z():this.Qr=this.Qr.insert(n,e)}jr(){let e=[];return this.Qr.inorderTraversal((n,r)=>{e.push(r)}),e}},Ut=class{constructor(e,n,r,i,s,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c}static fromInitialDocuments(e,n,r,i){let s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Ut(e,n,Mt.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var yh=class{constructor(){this.Wr=void 0,this.listeners=[]}},vh=class{constructor(){this.queries=new dn(e=>fu(e),pi),this.onlineState="Unknown",this.Gr=new Set}};async function ev(t,e){let n=W(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new yh),i)try{s.Wr=await n.onListen(r)}catch(o){let a=gh(o,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&Lo(n)}async function tv(t,e){let n=W(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function nv(t,e){let n=W(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.Hr(i)&&(r=!0);o.Wr=i}}r&&Lo(n)}function rv(t,e,n){let r=W(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function Lo(t){t.Gr.forEach(e=>{e.next()})}var _h=class{constructor(e,n,r){this.query=e,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}Hr(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ut(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),n=!0):this.eo(e,this.onlineState)&&(this.no(e),n=!0),this.Xr=e,n}onError(e){this.Jr.error(e)}zr(e){this.onlineState=e;let n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),n=!0),n}eo(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.so||!r)&&(!e.docs.isEmpty()||n==="Offline")}Zr(e){if(e.docChanges.length>0)return!0;let n=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}no(e){e=Ut.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)}};var Po=class{constructor(e){this.key=e}},Mo=class{constructor(e){this.key=e}},wh=class{constructor(e,n){this.query=e,this.ao=n,this.uo=null,this.current=!1,this.ho=ne(),this.mutatedKeys=ne(),this.lo=du(e),this.fo=new Mt(this.lo)}get wo(){return this.ao}_o(e,n){let r=n?n.mo:new Oo,i=n?n.fo:this.fo,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=fi(this.query)&&i.size===this.query.limit?i.last():null,l=di(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let f=i.get(u),d=mi(this.query,h)?h:null,p=!!f&&this.mutatedKeys.has(f.key),_=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations),A=!1;f&&d?f.data.isEqual(d.data)?p!==_&&(r.track({type:3,doc:d}),A=!0):this.yo(f,d)||(r.track({type:2,doc:d}),A=!0,(c&&this.lo(d,c)>0||l&&this.lo(d,l)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),A=!0):f&&!d&&(r.track({type:1,doc:f}),A=!0,(c||l)&&(a=!0)),A&&(d?(o=o.add(d),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),fi(this.query)||di(this.query))for(;o.size>this.query.limit;){let u=fi(this.query)?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}}yo(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){let i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;let s=e.mo.jr();s.sort((l,u)=>function(h,f){let d=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return d(h)-d(f)}(l.type,u.type)||this.lo(l.doc,u.doc)),this.po(r);let o=n?this.Eo():[],a=this.ho.size===0&&this.current?1:0,c=a!==this.uo;return this.uo=a,s.length!==0||c?{snapshot:new Ut(this.query,e.fo,i,s,e.mutatedKeys,a===0,c,!1),To:o}:{To:o}}zr(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Oo,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}}Io(e){return!this.ao.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations}po(e){e&&(e.addedDocuments.forEach(n=>this.ao=this.ao.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ao=this.ao.delete(n)),this.current=e.current)}Eo(){if(!this.current)return[];let e=this.ho;this.ho=ne(),this.fo.forEach(r=>{this.Io(r.key)&&(this.ho=this.ho.add(r.key))});let n=[];return e.forEach(r=>{this.ho.has(r)||n.push(new Mo(r))}),this.ho.forEach(r=>{e.has(r)||n.push(new Po(r))}),n}Ao(e){this.ao=e.Bn,this.ho=ne();let n=this._o(e.documents);return this.applyChanges(n,!0)}Ro(){return Ut.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.uo===0)}},Eh=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},bh=class{constructor(e){this.key=e,this.Po=!1}},Ih=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.bo={},this.vo=new dn(a=>fu(a),pi),this.Vo=new Map,this.So=new Set,this.Do=new Ae(F.comparator),this.Co=new Map,this.No=new Ei,this.xo={},this.ko=new Map,this.$o=Pt.Yt(),this.onlineState="Unknown",this.Oo=void 0}get isPrimaryClient(){return this.Oo===!0}};async function ov(t,e){let n=sv(t),r,i,s=n.vo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro();else{let o=await Wy(n.localStore,Ot(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await iv(n,e,r,a==="current"),n.isPrimaryClient&&hh(n.remoteStore,o)}return i}async function iv(t,e,n,r){t.Mo=(u,h,f)=>async function(d,p,_,A){let m=p.view._o(_);m.Nn&&(m=await Gu(d.localStore,p.query,!1).then(({documents:Z})=>p.view._o(Z,m)));let C=A&&A.targetChanges.get(p.targetId),$=p.view.applyChanges(m,d.isPrimaryClient,C);return Th(d,p.targetId,$.To),$.snapshot}(t,u,h,f);let i=await Gu(t.localStore,e,!0),s=new wh(e,i.Bn),o=s._o(i.documents),a=un.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),c=s.applyChanges(o,t.isPrimaryClient,a);Th(t,n,c.To);let l=new Eh(e,n,s);return t.vo.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot}async function av(t,e){let n=W(t),r=n.vo.get(e),i=n.Vo.get(r.targetId);if(i.length>1)return n.Vo.set(r.targetId,i.filter(s=>!pi(s,e))),void n.vo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await To(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),dh(n.remoteStore,r.targetId),Uo(n,r.targetId)}).catch(bo)):(Uo(n,r.targetId),await To(n.localStore,r.targetId,!0))}async function kh(t,e){let n=W(t);try{let r=await Gy(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Co.get(s);o&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Po=!0:i.modifiedDocuments.size>0?ie(o.Po):i.removedDocuments.size>0&&(ie(o.Po),o.Po=!1))}),await Sh(n,r,e)}catch(r){await bo(r)}}function Ah(t,e,n){let r=W(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.vo.forEach((s,o)=>{let a=o.view.zr(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){let a=W(s);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(let h of u.listeners)h.zr(o)&&(c=!0)}),c&&Lo(a)}(r.eventManager,e),i.length&&r.bo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cv(t,e,n){let r=W(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Co.get(e),s=i&&i.key;if(s){let o=new Ae(F.comparator);o=o.insert(s,ve.newNoDocument(s,Q.min()));let a=ne().add(s),c=new Zn(Q.min(),new Map,new pe(J),o,a);await kh(r,c),r.Do=r.Do.remove(s),r.Co.delete(e),xo(r)}else await To(r.localStore,e,!1).then(()=>Uo(r,e,n)).catch(bo)}function Uo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Vo.get(e))t.vo.delete(r),n&&t.bo.Fo(r,n);t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(r=>{t.No.containsKey(r)||Ch(t,r)})}function Ch(t,e){t.So.delete(e.path.canonicalString());let n=t.Do.get(e);n!==null&&(dh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),xo(t))}function Th(t,e,n){for(let r of n)r instanceof Po?(t.No.addReference(r.key,e),lv(t,r)):r instanceof Mo?(N("SyncEngine","Document no longer in limbo: "+r.key),t.No.removeReference(r.key,e),t.No.containsKey(r.key)||Ch(t,r.key)):z()}function lv(t,e){let n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(N("SyncEngine","New document in limbo: "+n),t.So.add(r),xo(t))}function xo(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){let e=t.So.values().next().value;t.So.delete(e);let n=new F(re.fromString(e)),r=t.$o.next();t.Co.set(r,new bh(n)),t.Do=t.Do.insert(n,r),hh(t.remoteStore,new gt(Ot(hu(n.path)),r,2,li.o))}}async function Sh(t,e,n){let r=W(t),i=[],s=[],o=[];r.vo.isEmpty()||(r.vo.forEach((a,c)=>{o.push(r.Mo(c,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),i.push(l);let u=wi.vn(c.targetId,l);s.push(u)}}))}),await Promise.all(o),r.bo._r(i),await async function(a,c){let l=W(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>I.forEach(c,h=>I.forEach(h.Pn,f=>l.persistence.referenceDelegate.addReference(u,h.targetId,f)).next(()=>I.forEach(h.bn,f=>l.persistence.referenceDelegate.removeReference(u,h.targetId,f)))))}catch(u){if(!rr(u))throw u;N("LocalStore","Failed to update sequence numbers: "+u)}for(let u of c){let h=u.targetId;if(!u.fromCache){let f=l.kn.get(h),d=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(d);l.kn=l.kn.insert(h,p)}}}(r.localStore,s))}async function uv(t,e){let n=W(t);if(!n.currentUser.isEqual(e)){N("SyncEngine","User change. New user:",e.toKey());let r=await Hu(n.localStore,e);n.currentUser=e,function(i,s){i.ko.forEach(o=>{o.forEach(a=>{a.reject(new O(E.CANCELLED,s))})}),i.ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sh(n,r.Ln)}}function hv(t,e){let n=W(t),r=n.Co.get(e);if(r&&r.Po)return ne().add(r.key);{let i=ne(),s=n.Vo.get(e);if(!s)return i;for(let o of s){let a=n.vo.get(o);i=i.unionWith(a.view.wo)}return i}}function sv(t){let e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cv.bind(null,e),e.bo._r=nv.bind(null,e.eventManager),e.bo.Fo=rv.bind(null,e.eventManager),e}var Rh=class{constructor(){this.synchronizeTabs=!1}async initialize(e){this.R=sh(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.Uo(e),await this.persistence.start(),this.gcScheduler=this.qo(e),this.localStore=this.Ko(e)}qo(e){return null}Ko(e){return Hy(this.persistence,new Bu,e.initialUser,this.R)}Uo(e){return new Zu(bi.Ps,this.R)}Bo(e){return new th}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}},Nh=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ah(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uv.bind(null,this.syncEngine),await Zy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new vh}createDatastore(e){let n=sh(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new ih(i));var i;return function(s,o,a){return new ch(s,o,a)}(e.credentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>Ah(this.syncEngine,a,0),o=ko.gt()?new ko:new nh,new uh(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,c,l){let u=new Ih(r,i,s,o,a,c);return l&&(u.Oo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){let n=W(e);N("RemoteStore","RemoteStore shutting down."),n.Mr.add(5),await ir(n),n.Lr.shutdown(),n.Br.set("Unknown")}(this.remoteStore)}};var Dh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.jo(this.observer.next,e)}error(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Wo(){this.muted=!0}jo(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Oh=class{constructor(e,n,r){this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Me.UNAUTHENTICATED,this.clientId=zl.u(),this.credentialListener=()=>Promise.resolve(),this.credentials.setChangeListener(n,async i=>{N("FirestoreClient","Received user=",i.uid),await this.credentialListener(i),this.user=i})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.removeChangeListener(),e.resolve()}catch(n){let r=gh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function fv(t,e){t.asyncQueue.verifyOperationInProgress(),N("FirestoreClient","Initializing OfflineComponentProvider");let n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Hu(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function pv(t,e){t.asyncQueue.verifyOperationInProgress();let n=await dv(t);N("FirestoreClient","Initializing OnlineComponentProvider");let r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>async function(s,o){let a=W(s);a.asyncQueue.verifyOperationInProgress(),N("RemoteStore","RemoteStore received new credentials");let c=sr(a);a.Mr.add(3),await ir(a),c&&a.Br.set("Unknown"),await a.remoteSyncer.handleCredentialChange(o),a.Mr.delete(3),await Ii(a)}(e.remoteStore,i)),t.onlineComponents=e}async function dv(t){return t.offlineComponents||(N("FirestoreClient","Using default OfflineComponentProvider"),await fv(t,new Rh)),t.offlineComponents}async function mv(t){return t.onlineComponents||(N("FirestoreClient","Using default OnlineComponentProvider"),await pv(t,new Nh)),t.onlineComponents}async function gv(t){let e=await mv(t),n=e.eventManager;return n.onListen=ov.bind(null,e.syncEngine),n.onUnlisten=av.bind(null,e.syncEngine),n}function yv(t,e,n={}){let r=new nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,c){let l=new Dh({next:h=>{s.enqueueAndForget(()=>tv(i,u)),h.fromCache&&a.source==="server"?c.reject(new O(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new _h(o,l,{includeMetadataChanges:!0,so:!0});return ev(i,u)}(await gv(t),t.asyncQueue,e,n,r)),r.promise}var Lh=class{constructor(e,n,r,i,s,o,a){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a}},mn=class{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mn&&e.projectId===this.projectId&&e.database===this.database}};var Ph=new Map;var Mh=class{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}},Vo=class{constructor(){this.changeListener=null}getToken(){return Promise.resolve(null)}invalidateToken(){}setChangeListener(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(Me.UNAUTHENTICATED))}removeChangeListener(){this.changeListener=null}},Uh=class{constructor(e){this.currentUser=Me.UNAUTHENTICATED,this.oc=new nr,this.cc=0,this.changeListener=()=>Promise.resolve(),this.ac=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=()=>{this.cc++,this.currentUser=this.hc(),this.oc.resolve(),this.ac&&this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser))};let n=r=>{N("FirebaseCredentialsProvider","Auth detected"),this.auth=r,this.lc(),this.auth.addAuthTokenListener(this.uc)};e.onInit(r=>n(r)),setTimeout(()=>{if(!this.auth){let r=e.getImmediate({optional:!0});r?n(r):this.ac&&(N("FirebaseCredentialsProvider","Auth not yet detected"),this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser)))}},0)}getToken(){let e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.cc!==e?(N("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string"),new Mh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}setChangeListener(e,n){this.ac=!0,this.asyncQueue=e,this.changeListener=n}removeChangeListener(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=()=>Promise.resolve()}hc(){let e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new Me(e)}lc(){this.ac&&(this.ac=!1,this.asyncQueue.enqueueRetryable(async()=>{await this.oc.promise,await this.changeListener(this.currentUser),this.ac=!0}))}},xh=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r,this.type="FirstParty",this.user=Me.FIRST_PARTY}get authHeaders(){let e={"X-Goog-AuthUser":this.dc},n=this.fc.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.wc&&(e["X-Goog-Iam-Authorization-Token"]=this.wc),e}},Vh=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r}getToken(){return Promise.resolve(new xh(this.fc,this.dc,this.wc))}setChangeListener(e,n){e.enqueueRetryable(()=>n(Me.FIRST_PARTY))}removeChangeListener(){}invalidateToken(){}};function vv(t,e,n){if(!n)throw new O(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Fh(t){if(F.isDocumentKey(t))throw new O(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _v(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(n){if(n.constructor){let r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z()}function $h(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=_v(t);throw new O(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Fo=class{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new O(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,function(r,i,s,o){if(i===!0&&o===!0)throw new O(E.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties}};var $o=class{constructor(e,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fo({}),this._settingsFrozen=!1,e instanceof mn?(this._databaseId=e,this._credentials=new Vo):(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new O(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mn(r.options.projectId)}(e),this._credentials=new Uh(n))}get app(){if(!this._app)throw new O(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new O(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fo(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new Vo;switch(n.type){case"gapi":let r=n.client;return ie(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Vh(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new O(E.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let n=Ph.get(e);n&&(N("ComponentProvider","Removing Datastore"),Ph.delete(e),n.terminate())}(this),Promise.resolve()}};var xt=class{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}},or=class{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new or(this.firestore,e,this._query)}},Vt=class extends or{constructor(e,n,r){super(e,n,hu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new F(e))}withConverter(e){return new Vt(this.firestore,e,this._path)}};function qh(t,e,...n){if(t=We(t),vv("collection","path",e),t instanceof $o){let r=re.fromString(e,...n);return Fh(r),new Vt(t,null,r)}{if(!(t instanceof xt||t instanceof Vt))throw new O(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=re.fromString(t.path,...n).child(re.fromString(e));return Fh(r),new Vt(t.firestore,null,r)}}var jh=class{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new Co(this,"async_queue_retry"),this.Ac=()=>{let n=Ao();n&&N("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Zi.Gi()};let e=Ao();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Ac)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Rc(),this.Pc(e)}enterRestrictedMode(){if(!this.gc){this.gc=!0;let e=Ao();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Ac)}}enqueue(e){return this.Rc(),this.gc?new Promise(n=>{}):this.Pc(e)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.bc()))}async bc(){if(this.mc.length!==0){try{await this.mc[0](),this.mc.shift(),this.Zi.reset()}catch(e){if(!rr(e))throw e;N("AsyncQueue","Operation failed with retryable error: "+e)}this.mc.length>0&&this.Zi.ji(()=>this.bc())}}Pc(e){let n=this._c.then(()=>(this.Tc=!0,e().catch(r=>{throw this.Ec=r,this.Tc=!1,dt("INTERNAL UNHANDLED ERROR: ",function(i){let s=i.message||"";return i.stack&&(s=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),s}(r)),r}).then(r=>(this.Tc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.Rc(),this.Ic.indexOf(e)>-1&&(n=0);let i=Ti.createAndSchedule(this,e,n,r,s=>this.vc(s));return this.yc.push(i),i}Rc(){this.Ec&&z()}verifyOperationInProgress(){}async Vc(){let e;do e=this._c,await e;while(e!==this._c)}Sc(e){for(let n of this.yc)if(n.timerId===e)return!0;return!1}Dc(e){return this.Vc().then(()=>{this.yc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.yc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vc()})}Cc(e){this.Ic.push(e)}vc(e){let n=this.yc.indexOf(e);this.yc.splice(n,1)}},qo=class extends $o{constructor(e,n){super(e,n),this.type="firestore",this._queue=new jh,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Bh(this),this._firestoreClient.terminate()}};function zh(t=Ir()){return Tn(t,"firestore-exp").getImmediate()}function wv(t){return t._firestoreClient||Bh(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Bh(t){var e;let n=t._freezeSettings(),r=function(i,s,o,a){return new Lh(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Oh(t._credentials,t._queue,r)}var jo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ar=class{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ar(ye.fromBase64String(e))}catch(n){throw new O(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ar(ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Hh=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}},Ev=new RegExp("[~\\*/\\[\\]]");function bv(t,e,n){if(e.search(Ev)>=0)throw Kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jo(...e.split("."))._internalPath}catch(r){throw Kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kh(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new O(E.INVALID_ARGUMENT,a+t+c)}var Bo=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Gh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.toProto())}}get(e){if(this._document){let n=this._document.data.field(Wh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Gh=class extends Bo{data(){return super.data()}};function Wh(t,e){return typeof e=="string"?bv(t,e):e instanceof jo?e._internalPath:e._delegate._internalPath}var cr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xh=class extends Bo{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new lr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.toProto(),e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Wh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},lr=class extends Xh{data(e={}){return super.data(e)}},Yh=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lr(this._firestore,this._userDataWriter,r.key,r,new cr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{let a=new lr(r._firestore,r._userDataWriter,o.doc.key,o.doc,new cr(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{let a=new lr(r._firestore,r._userDataWriter,o.doc.key,o.doc,new cr(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),c=-1,l=-1;return o.type!==0&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),l=s.indexOf(o.doc.key)),{type:Iv(o.type),doc:a,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Iv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function Tv(t){if(di(t)&&t.explicitOrderBy.length===0)throw new O(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qh=class{convertValue(e,n="none"){switch(mt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(on(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){let r={};return Kl(e.fields||{},(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Hh(se(e.latitude),se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Wl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hn(e));default:return null}}convertTimestamp(e){let n=pt(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=re.fromString(e);ie(Nu(r));let i=new mn(r.get(1),r.get(3)),s=new F(r.popFirst(5));return i.isEqual(n)||dt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}},Jh=class extends Qh{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}};function Zh(t){t=$h(t,or);let e=$h(t.firestore,qo),n=wv(e),r=new Jh(e);return Tv(t._query),yv(n,t._query).then(i=>new Yh(e,r,t,i))}var Sv;(function(t){rn=t})(St),Tt(new rt("firestore-exp",(t,{options:e})=>{let n=t.getProvider("app-exp").getImmediate(),r=new qo(n,t.getProvider("auth-internal"));return e&&r._setSettings(e),r},"PUBLIC")),st("@firebase/firestore","0.0.900-exp.d92a36260",Sv);var kv=zh(),ef=async t=>{let e=await Zh(qh(kv,"goal")),n;return e.forEach(r=>{n=r.data()}),n};var zo=Sc(),Av=new $e,Si=()=>bc(zo,Av),tf=()=>sc(zo),Cv=()=>{ea(),_a(),ta()},Rv=t=>{Ge.set(t)},Nv=()=>{ef("goal").then(t=>nt.set(t.goal))};ic(zo,t=>{t?(console.log("you are logged"),Rv(t),Nv()):(console.log("you are not logged"),Cv())});function Dv(t){let e,n,r,i,s,o=t[2].default,a=yt(o,t,t[1],null);return{c(){e=w("div"),a&&a.c(),n=R(),r=w("span"),i=X(t[0]),y(r,"class","tooltiptext svelte-1betoo6"),y(e,"class","tooltip svelte-1betoo6")},m(c,l){v(c,e,l),a&&a.m(e,null),b(e,n),b(e,r),b(r,i),s=!0},p(c,[l]){a&&a.p&&(!s||l&2)&&vt(a,o,c,c[1],l,null,null),(!s||l&1)&&ee(i,c[0])},i(c){s||(T(a,c),s=!0)},o(c){S(a,c),s=!1},d(c){c&&g(e),a&&a.d(c)}}}function Ov(t,e,n){let{$$slots:r={},$$scope:i}=e,{label:s="Soy un tooltip"}=e;return t.$$set=o=>{"label"in o&&n(0,s=o.label),"$$scope"in o&&n(1,i=o.$$scope)},[s,i,r]}var nf=class extends j{constructor(e){super();B(this,e,Ov,Dv,q,{label:0})}},Ho=nf;function rf(t,e,n){let r=t.slice();return r[3]=e[n].label,r[4]=e[n].icon,r[5]=e[n].style,r[6]=e[n].onClick,r[7]=e[n].name,r}function Pv(t){let e,n,r,i,s;return i=new Ho({props:{label:"Iniciar sesión",$$slots:{default:[Lv]},$$scope:{ctx:t}}}),{c(){e=w("h2"),e.textContent="Haz click para iniciar sesión",n=R(),r=w("div"),U(i.$$.fragment),y(e,"class","text-center"),y(r,"class","m-2 flex flex-col")},m(o,a){v(o,e,a),v(o,n,a),v(o,r,a),P(i,r,null),s=!0},p(o,a){let c={};a&1024&&(c.$$scope={dirty:a,ctx:o}),i.$set(c)},i(o){s||(T(i.$$.fragment,o),s=!0)},o(o){S(i.$$.fragment,o),s=!1},d(o){o&&g(e),o&&g(n),o&&g(r),M(i)}}}function Mv(t){let e,n,r,i,s,o=t[0].displayName+"",a,c,l,u=t[0].email+"",h,f,d,p,_=t[0].uid+"",A,m,C=[],$=new Map,Z,ae,K=t[1],he=D=>D[7];for(let D=0;D<K.length;D+=1){let L=rf(t,K,D),qe=he(L);$.set(qe,C[D]=sf(qe,L))}return{c(){e=w("img"),r=R(),i=w("div"),s=w("h2"),a=X(o),c=R(),l=w("h2"),h=X(u),f=R(),d=w("h3"),p=X("uid: "),A=X(_),m=R();for(let D=0;D<C.length;D+=1)C[D].c();Z=wt(),y(e,"class","mx-auto rounded-lg"),e.src!==(n=t[0].photoURL)&&y(e,"src",n),y(e,"alt","user"),y(i,"class","my-8")},m(D,L){v(D,e,L),v(D,r,L),v(D,i,L),b(i,s),b(s,a),b(i,c),b(i,l),b(l,h),b(i,f),b(i,d),b(d,p),b(d,A),v(D,m,L);for(let qe=0;qe<C.length;qe+=1)C[qe].m(D,L);v(D,Z,L),ae=!0},p(D,L){(!ae||L&1&&e.src!==(n=D[0].photoURL))&&y(e,"src",n),(!ae||L&1)&&o!==(o=D[0].displayName+"")&&ee(a,o),(!ae||L&1)&&u!==(u=D[0].email+"")&&ee(h,u),(!ae||L&1)&&_!==(_=D[0].uid+"")&&ee(A,_),L&2&&(K=D[1],Re(),C=vn(C,L,he,1,D,K,$,Z.parentNode,yn,sf,Z,rf),Ne())},i(D){if(!ae){for(let L=0;L<K.length;L+=1)T(C[L]);ae=!0}},o(D){for(let L=0;L<C.length;L+=1)S(C[L]);ae=!1},d(D){D&&g(e),D&&g(r),D&&g(i),D&&g(m);for(let L=0;L<C.length;L+=1)C[L].d(D);D&&g(Z)}}}function Lv(t){let e,n;return e=new De({props:{props:t[2]}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p:Y,i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Uv(t){let e,n;return e=new De({props:{props:{icon:t[4],style:t[5],onClick:t[6]}}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p:Y,i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function sf(t,e){let n,r,i,s;return r=new Ho({props:{label:e[3],$$slots:{default:[Uv]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=w("div"),U(r.$$.fragment),i=R(),y(n,"class","m-2 flex flex-col"),this.first=n},m(o,a){v(o,n,a),P(r,n,null),b(n,i),s=!0},p(o,a){e=o;let c={};a&1024&&(c.$$scope={dirty:a,ctx:e}),r.$set(c)},i(o){s||(T(r.$$.fragment,o),s=!0)},o(o){S(r.$$.fragment,o),s=!1},d(o){o&&g(n),M(r)}}}function xv(t){let e,n,r,i,s=[Mv,Pv],o=[];function a(c,l){return c[0]?0:1}return e=a(t,-1),n=o[e]=s[e](t),{c(){n.c(),r=wt()},m(c,l){o[e].m(c,l),v(c,r,l),i=!0},p(c,l){let u=e;e=a(c,l),e===u?o[e].p(c,l):(Re(),S(o[u],1,1,()=>{o[u]=null}),Ne(),n=o[e],n?n.p(c,l):(n=o[e]=s[e](c),n.c()),T(n,1),n.m(r.parentNode,r))},i(c){i||(T(n),i=!0)},o(c){S(n),i=!1},d(c){o[e].d(c),c&&g(r)}}}function Vv(t){let e,n;return e=new tt({props:{$$slots:{default:[xv]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,[i]){let s={};i&1025&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Fv(t,e,n){let r;return Ue(t,Ge,o=>n(0,r=o)),[r,[{name:"SignOut",label:"Cerrar sesión",icon:"logout",style:"primary",onClick:tf}],{icon:"login",style:"primary",onClick:Si}]}var of=class extends j{constructor(e){super();B(this,e,Fv,Vv,q,{})}},af=of;function cf(t,e,n){let r=t.slice();return r[4]=e[n],r}function lf(t){let e,n;function r(){return t[3](t[4])}return e=new De({props:{props:t[4],current:t[0]}}),e.$on("click",r),{c(){U(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p(i,s){t=i;let o={};s&1&&(o.current=t[0]),e.$set(o)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function $v(t){let e,n,r=t[2],i=[];for(let o=0;o<r.length;o+=1)i[o]=lf(cf(t,r,o));let s=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){e=w("div");for(let o=0;o<i.length;o+=1)i[o].c();y(e,"class","container fixed svelte-1xfd7dv")},m(o,a){v(o,e,a);for(let c=0;c<i.length;c+=1)i[c].m(e,null);n=!0},p(o,[a]){if(a&7){r=o[2];let c;for(c=0;c<r.length;c+=1){let l=cf(o,r,c);i[c]?(i[c].p(l,a),T(i[c],1)):(i[c]=lf(l),i[c].c(),T(i[c],1),i[c].m(e,null))}for(Re(),c=r.length;c<i.length;c+=1)s(c);Ne()}},i(o){if(!n){for(let a=0;a<r.length;a+=1)T(i[a]);n=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)S(i[a]);n=!1},d(o){o&&g(e),_t(i,o)}}}function qv(t,e,n){let r=[{icon:"home",style:"secondary",selected:!1},{icon:"lightning",style:"secondary",selected:!1},{icon:"profile",style:"secondary",selected:!1},{icon:"bell",style:"secondary",selected:!1}],{current:i="Home"}=e,{selectedBtn:s=()=>{}}=e,o=a=>s(a.icon);return t.$$set=a=>{"current"in a&&n(0,i=a.current),"selectedBtn"in a&&n(1,s=a.selectedBtn)},[i,s,r,o]}var uf=class extends j{constructor(e){super();B(this,e,qv,$v,q,{current:0,selectedBtn:1})}},hf=uf;function jv(t){let e,n,r,i,s,o,a;function c(u){t[1](u)}let l={label:"Objetivo",type:"text"};return t[0]!==void 0&&(l.value=t[0]),s=new _n({props:l}),et.push(()=>jt(s,"value",c)),{c(){e=w("h1"),e.textContent="Opciones",n=R(),r=w("h3"),r.textContent="Configura tus fuentes de ingresos",i=R(),U(s.$$.fragment)},m(u,h){v(u,e,h),v(u,n,h),v(u,r,h),v(u,i,h),P(s,u,h),a=!0},p(u,h){let f={};!o&&h&1&&(o=!0,f.value=u[0],qt(()=>o=!1)),s.$set(f)},i(u){a||(T(s.$$.fragment,u),a=!0)},o(u){S(s.$$.fragment,u),a=!1},d(u){u&&g(e),u&&g(n),u&&g(r),u&&g(i),M(s,u)}}}function Bv(t){let e,n,r,i,s,o,a;return e=new tt({props:{$$slots:{default:[jv]},$$scope:{ctx:t}}}),i=new De({props:{props:{icon:"add",style:"secondary"}}}),i.$on("click",Be.add),o=new pr({props:{edit:!0}}),{c(){U(e.$$.fragment),n=R(),r=w("div"),U(i.$$.fragment),s=R(),U(o.$$.fragment)},m(c,l){P(e,c,l),v(c,n,l),v(c,r,l),P(i,r,null),v(c,s,l),P(o,c,l),a=!0},p(c,[l]){let u={};l&5&&(u.$$scope={dirty:l,ctx:c}),e.$set(u)},i(c){a||(T(e.$$.fragment,c),T(i.$$.fragment,c),T(o.$$.fragment,c),a=!0)},o(c){S(e.$$.fragment,c),S(i.$$.fragment,c),S(o.$$.fragment,c),a=!1},d(c){M(e,c),c&&g(n),c&&g(r),M(i),c&&g(s),M(o,c)}}}function zv(t,e,n){let r;Ue(t,nt,s=>n(0,r=s));function i(s){r=s,nt.set(r)}return[r,i]}var ff=class extends j{constructor(e){super();B(this,e,zv,Bv,q,{})}},df=ff;function Hv(t){let e,n,r;return{c(){e=w("button"),n=w("img"),y(n,"class","w-12 h-12 rounded-full"),n.src!==(r=t[0])&&y(n,"src",r),y(n,"alt","Avatar")},m(i,s){v(i,e,s),b(e,n)},p(i,[s]){s&1&&n.src!==(r=i[0])&&y(n,"src",r)},i:Y,o:Y,d(i){i&&g(e)}}}function Kv(t,e,n){let{img:r="icons/user.svg"}=e;return t.$$set=i=>{"img"in i&&n(0,r=i.img)},[r]}var pf=class extends j{constructor(e){super();B(this,e,Kv,Hv,q,{img:0})}},mf=pf;function Gv(t){let e,n,r,i,s,o;return r=new mf({props:{img:t[0]}}),{c(){e=w("div"),n=w("div"),U(r.$$.fragment),y(n,"class","float-right"),y(e,"class","w-screen p-8")},m(a,c){v(a,e,c),b(e,n),P(r,n,null),i=!0,s||(o=Ee(n,"click",Si),s=!0)},p(a,[c]){let l={};c&1&&(l.img=a[0]),r.$set(l)},i(a){i||(T(r.$$.fragment,a),i=!0)},o(a){S(r.$$.fragment,a),i=!1},d(a){a&&g(e),M(r),s=!1,o()}}}function Wv(t,e,n){let r,i;return Ue(t,Ge,s=>n(1,i=s)),t.$$.update=()=>{if(t.$$.dirty&2){e:n(0,r=i.photoURL?i.photoURL:"icons/user.svg")}},[r,i]}var gf=class extends j{constructor(e){super();B(this,e,Wv,Gv,q,{})}},yf=gf;function Xv(t){let e,n,r,i,s,o;e=new yf({});var a=t[1];function c(l){return{}}return a&&(r=new a(c(t))),s=new hf({props:{current:t[0],selectedBtn:t[2]}}),{c(){U(e.$$.fragment),n=R(),r&&U(r.$$.fragment),i=R(),U(s.$$.fragment)},m(l,u){P(e,l,u),v(l,n,u),r&&P(r,l,u),v(l,i,u),P(s,l,u),o=!0},p(l,[u]){if(a!==(a=l[1])){if(r){Re();let f=r;S(f.$$.fragment,1,0,()=>{M(f,1)}),Ne()}a?(r=new a(c(l)),U(r.$$.fragment),T(r.$$.fragment,1),P(r,i.parentNode,i)):r=null}let h={};u&1&&(h.current=l[0]),s.$set(h)},i(l){o||(T(e.$$.fragment,l),r&&T(r.$$.fragment,l),T(s.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),r&&S(r.$$.fragment,l),S(s.$$.fragment,l),o=!1},d(l){M(e,l),l&&g(n),r&&M(r,l),l&&g(i),M(s,l)}}}function Yv(t,e,n){let r,i="home",s=a=>{n(0,i=a)},o={home:ka,profile:af,lightning:df};return t.$$.update=()=>{if(t.$$.dirty&1){e:n(1,r=o[i])}},[i,r,s]}var vf=class extends j{constructor(e){super();B(this,e,Yv,Xv,q,{})}},_f=vf;import.meta.env=ki;var wf=new _f({target:document.body}),Qv=wf;import.meta?.hot&&((void 0).accept(),(void 0).dispose(()=>{wf.$destroy()}));export{Qv as default};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=index.js.map

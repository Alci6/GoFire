var Hd=Object.defineProperty;var Kd=(t,e)=>{for(var n in e)Hd(t,n,{get:e[n],enumerable:!0})};var Ji={};Kd(Ji,{MODE:()=>Gd,NODE_ENV:()=>Wd,SSR:()=>Xd});var Gd="production",Wd="production",Xd=!1;function G(){}var br=t=>t;function Pa(t,e){for(let n in e)t[n]=e[n];return t}function Ma(t){return t()}function Ua(){return Object.create(null)}function qe(t){t.forEach(Ma)}function ot(t){return typeof t=="function"}function $(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Qd(t){return Object.keys(t).length===0}function Yd(t,...e){if(t==null)return G;let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Be(t,e,n){t.$$.on_destroy.push(Yd(e,n))}function kt(t,e,n,r){if(t){let i=xa(t,e,n,r);return t[0](i)}}function xa(t,e,n,r){return t[1]&&r?Pa(n.ctx.slice(),t[1](r(e))):n.ctx}function Jd(t,e,n,r){if(t[2]&&r){let i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){let s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function St(t,e,n,r,i,s,o){let a=Jd(e,r,i,s);if(a){let c=xa(e,n,r,o);t.p(c,a)}}function Gt(t){return t??""}var Va=typeof window!="undefined",Fa=Va?()=>window.performance.now():()=>Date.now(),Zi=Va?t=>requestAnimationFrame(t):G,Wt=new Set;function $a(t){Wt.forEach(e=>{e.c(t)||(Wt.delete(e),e.f())}),Wt.size!==0&&Zi($a)}function ja(t){let e;return Wt.size===0&&Zi($a),{promise:new Promise(n=>{Wt.add(e={c:t,f:n})}),abort(){Wt.delete(e)}}}function k(t,e){t.appendChild(e)}function b(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode.removeChild(t)}function Ye(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function W(t){return document.createTextNode(t)}function N(){return W(" ")}function Ke(){return W("")}function he(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function es(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function At(t){return t===""?null:+t}function Zd(t){return Array.from(t.childNodes)}function J(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function xe(t,e){t.value=e??""}function we(t,e,n){t.classList[n?"add":"remove"](e)}function ep(t,e){let n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}var ts=new Set,Er=0;function tp(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function qa(t,e,n,r,i,s,o,a=0){let c=16.666/r,l=`{
`;for(let g=0;g<=1;g+=c){let v=e+(n-e)*s(g);l+=g*100+`%{${o(v,1-v)}}
`}let u=l+`100% {${o(n,1-n)}}
}`,h=`__svelte_${tp(u)}_${a}`,f=t.ownerDocument;ts.add(f);let d=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(E("style")).sheet),m=f.__svelte_rules||(f.__svelte_rules={});m[h]||(m[h]=!0,d.insertRule(`@keyframes ${h} ${u}`,d.cssRules.length));let p=t.style.animation||"";return t.style.animation=`${p?`${p}, `:""}${h} ${r}ms linear ${i}ms 1 both`,Er+=1,h}function ns(t,e){let n=(t.style.animation||"").split(", "),r=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=n.length-r.length;i&&(t.style.animation=r.join(", "),Er-=i,Er||np())}function np(){Zi(()=>{Er||(ts.forEach(t=>{let e=t.__svelte_stylesheet,n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),ts.clear())})}function rs(t,e,n,r){if(!e)return G;let i=t.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return G;let{delay:s=0,duration:o=300,easing:a=br,start:c=Fa()+s,end:l=c+o,tick:u=G,css:h}=n(t,{from:e,to:i},r),f=!0,d=!1,m;function p(){h&&(m=qa(t,0,1,o,s,a,h)),s||(d=!0)}function g(){h&&ns(t,m),f=!1}return ja(v=>{if(!d&&v>=c&&(d=!0),d&&v>=l&&(u(1,0),g()),!f)return!1;if(d){let D=v-c,_=0+1*a(D/o);u(_,1-_)}return!0}),p(),u(0,1),g}function is(t){let e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){let{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,Ba(t,i)}}function Ba(t,e){let n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){let r=getComputedStyle(t),i=r.transform==="none"?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}var za;function Tr(t){za=t}function ss(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r(e))}var Dn=[],at=[],Ir=[],os=[],rp=Promise.resolve(),as=!1;function ip(){as||(as=!0,rp.then(Ha))}function Ge(t){Ir.push(t)}function Xt(t){os.push(t)}var cs=!1,ls=new Set;function Ha(){if(!cs){cs=!0;do{for(let t=0;t<Dn.length;t+=1){let e=Dn[t];Tr(e),sp(e.$$)}for(Tr(null),Dn.length=0;at.length;)at.pop()();for(let t=0;t<Ir.length;t+=1){let e=Ir[t];ls.has(e)||(ls.add(e),e())}Ir.length=0}while(Dn.length);for(;os.length;)os.pop()();as=!1,cs=!1,ls.clear()}}function sp(t){if(t.fragment!==null){t.update(),qe(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ge)}}var On;function op(){return On||(On=Promise.resolve(),On.then(()=>{On=null})),On}function Ka(t,e,n){t.dispatchEvent(ep(`${e?"intro":"outro"}${n}`))}var kr=new Set,Ct;function oe(){Ct={r:0,c:[],p:Ct}}function ae(){Ct.r||qe(Ct.c),Ct=Ct.p}function I(t,e){t&&t.i&&(kr.delete(t),t.i(e))}function S(t,e,n,r){if(t&&t.o){if(kr.has(t))return;kr.add(t),Ct.c.push(()=>{kr.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}var ap={duration:0};function Qt(t,e,n){let r=e(t,n),i=!1,s,o,a=0;function c(){s&&ns(t,s)}function l(){let{delay:h=0,duration:f=300,easing:d=br,tick:m=G,css:p}=r||ap;p&&(s=qa(t,0,1,f,h,d,p,a++)),m(0,1);let g=Fa()+h,v=g+f;o&&o.abort(),i=!0,Ge(()=>Ka(t,!0,"start")),o=ja(D=>{if(i){if(D>=v)return m(1,0),Ka(t,!0,"end"),c(),i=!1;if(D>=g){let _=d((D-g)/f);m(_,1-_)}}return i})}let u=!1;return{start(){u||(ns(t),ot(r)?(r=r(),op().then(l)):l())},invalidate(){u=!1},end(){i&&(c(),i=!1)}}}function Yt(t,e){S(t,1,1,()=>{e.delete(t.key)})}function us(t,e){t.f(),Yt(t,e)}function Jt(t,e,n,r,i,s,o,a,c,l,u,h){let f=t.length,d=s.length,m=f,p={};for(;m--;)p[t[m].key]=m;let g=[],v=new Map,D=new Map;for(m=d;m--;){let L=h(i,s,m),ie=n(L),_e=o.get(ie);_e?r&&_e.p(L,e):(_e=l(ie,L),_e.c()),v.set(ie,g[m]=_e),ie in p&&D.set(ie,Math.abs(m-p[ie]))}let _=new Set,R=new Set;function A(L){I(L,1),L.m(a,u),o.set(L.key,L),u=L.first,d--}for(;f&&d;){let L=g[d-1],ie=t[f-1],_e=L.key,ce=ie.key;L===ie?(u=L.first,f--,d--):v.has(ce)?!o.has(_e)||_.has(_e)?A(L):R.has(ce)?f--:D.get(_e)>D.get(ce)?(R.add(_e),A(L)):(_.add(ce),f--):(c(ie,o),f--)}for(;f--;){let L=t[f];v.has(L.key)||c(L,o)}for(;d;)A(g[d-1]);return g}function Zt(t,e,n){let r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function x(t){t&&t.c()}function M(t,e,n,r){let{fragment:i,on_mount:s,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,n),r||Ge(()=>{let c=s.map(Ma).filter(ot);o?o.push(...c):qe(c),t.$$.on_mount=[]}),a.forEach(Ge)}function U(t,e){let n=t.$$;n.fragment!==null&&(qe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function cp(t,e){t.$$.dirty[0]===-1&&(Dn.push(t),ip(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(t,e,n,r,i,s,o=[-1]){let a=za;Tr(t);let c=t.$$={fragment:null,ctx:null,props:s,update:G,not_equal:i,bound:Ua(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:e.context||[]),callbacks:Ua(),dirty:o,skip_bound:!1},l=!1;if(c.ctx=n?n(t,e.props||{},(u,h,...f)=>{let d=f.length?f[0]:h;return c.ctx&&i(c.ctx[u],c.ctx[u]=d)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](d),l&&cp(t,u)),h}):[],c.update(),l=!0,qe(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){let u=Zd(e.target);c.fragment&&c.fragment.l(u),u.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&I(t.$$.fragment),M(t,e.target,e.anchor,e.customElement),Ha()}Tr(a)}var B=class{$destroy(){U(this,1),this.$destroy=G}$on(e,n){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{let i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Qd(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ge=(t=0)=>new Intl.NumberFormat("es",{notation:"compact",style:"currency",currency:"EUR"}).format(t),hs=(t=0)=>new Intl.NumberFormat("es",{style:"currency",currency:"EUR"}).format(t),ct=(t=0)=>new Intl.NumberFormat("en",{style:"percent"}).format(t),Ga=new Date().toISOString().slice(0,10);function fs(t){let e=t-1;return e*e*e+1}function Ln(t,{delay:e=0,duration:n=400,easing:r=br}={}){let i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}function lp(t){let e,n,r,i=ge(t[0])+"",s;return{c(){e=E("p"),e.textContent="Objetivo logrado",n=N(),r=E("h6"),s=W(i),y(e,"class","euros text-xs text-center"),y(r,"class","euros text-xs text-center svelte-bssdtf")},m(o,a){b(o,e,a),b(o,n,a),b(o,r,a),k(r,s)},p(o,a){a&1&&i!==(i=ge(o[0])+"")&&J(s,i)},d(o){o&&w(e),o&&w(n),o&&w(r)}}}function up(t){let e,n,r=ge(t[1])+"",i,s,o,a,c=ge(t[0])+"",l;return{c(){e=E("p"),n=W("a "),i=W(r),s=N(),o=E("h6"),a=W("de "),l=W(c),y(e,"class","euros text-sm text-center"),y(o,"class","euros text-xs text-center svelte-bssdtf")},m(u,h){b(u,e,h),k(e,n),k(e,i),b(u,s,h),b(u,o,h),k(o,a),k(o,l)},p(u,h){h&2&&r!==(r=ge(u[1])+"")&&J(i,r),h&1&&c!==(c=ge(u[0])+"")&&J(l,c)},d(u){u&&w(e),u&&w(s),u&&w(o)}}}function hp(t){let e,n,r,i,s,o;function a(u,h){return(s==null||h&4)&&(s=!!u[2]()),s?up:lp}let c=a(t,-1),l=c(t);return{c(){e=E("div"),n=E("img"),i=N(),l.c(),y(n,"class","m-auto"),n.src!==(r="icons/goal.svg")&&y(n,"src",r),y(n,"alt","goal"),y(e,"class","goal  float-right bg-red-500 p-5  svelte-bssdtf")},m(u,h){b(u,e,h),k(e,n),k(e,i),l.m(e,null)},p(u,[h]){c===(c=a(u,h))&&l?l.p(u,h):(l.d(1),l=c(u),l&&(l.c(),l.m(e,null)))},i(u){o||Ge(()=>{o=Qt(e,Ln,{}),o.start()})},o:G,d(u){u&&w(e),l.d()}}}function fp(t,e,n){let r,i,{goal:s=0}=e,{balance:o=0}=e;return t.$$set=a=>{"goal"in a&&n(0,s=a.goal),"balance"in a&&n(3,o=a.balance)},t.$$.update=()=>{if(t.$$.dirty&9){e:n(1,r=s-o)}if(t.$$.dirty&9){e:n(2,i=()=>s>o)}},[s,r,i,o]}var Wa=class extends B{constructor(e){super();K(this,e,fp,hp,$,{goal:0,balance:3})}},Xa=Wa;function dp(t){let e,n,r=t[1].default,i=kt(r,t,t[0],null);return{c(){e=E("div"),i&&i.c(),y(e,"class","card__background h-auto sm:w-96 w-11/12 mb-12 p-8 shadow-2xl relative")},m(s,o){b(s,e,o),i&&i.m(e,null),n=!0},p(s,[o]){i&&i.p&&(!n||o&1)&&St(i,r,s,s[0],o,null,null)},i(s){n||(I(i,s),n=!0)},o(s){S(i,s),n=!1},d(s){s&&w(e),i&&i.d(s)}}}function pp(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=s=>{"$$scope"in s&&n(0,i=s.$$scope)},[i,r]}var Qa=class extends B{constructor(e){super();K(this,e,pp,dp,$,{})}},lt=Qa;var en=[];function tn(t,e=G){let n,r=[];function i(a){if($(t,a)&&(t=a,n)){let c=!en.length;for(let l=0;l<r.length;l+=1){let u=r[l];u[1](),en.push(u,t)}if(c){for(let l=0;l<en.length;l+=2)en[l][0](en[l+1]);en.length=0}}}function s(a){i(a(t))}function o(a,c=G){let l=[a,c];return r.push(l),r.length===1&&(n=e(i)||G),a(t),()=>{let u=r.indexOf(l);u!==-1&&r.splice(u,1),r.length===0&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}var Ya={displayName:"",photoURL:"icons/user.svg",email:"",uid:""},Je=tn(Ya),Ja=()=>Je.set(Ya);var Ze=tn(),Za=()=>Ze.set();function mp(t){let e,n,r,i,s,o,a,c,l,u=ge(t[0])+"",h,f,d,m;return d=new Xa({props:{balance:t[0],goal:t[2]}}),{c(){e=E("h1"),n=W("Hola "),r=W(t[1]),i=N(),s=E("h3"),s.textContent="Bienvenido de nuevo",o=N(),a=E("h3"),a.textContent="Balance",c=N(),l=E("p"),h=W(u),f=N(),x(d.$$.fragment),y(a,"class","mt-8"),y(l,"class","euros")},m(p,g){b(p,e,g),k(e,n),k(e,r),b(p,i,g),b(p,s,g),b(p,o,g),b(p,a,g),b(p,c,g),b(p,l,g),k(l,h),b(p,f,g),M(d,p,g),m=!0},p(p,g){(!m||g&2)&&J(r,p[1]),(!m||g&1)&&u!==(u=ge(p[0])+"")&&J(h,u);let v={};g&1&&(v.balance=p[0]),g&4&&(v.goal=p[2]),d.$set(v)},i(p){m||(I(d.$$.fragment,p),m=!0)},o(p){S(d.$$.fragment,p),m=!1},d(p){p&&w(e),p&&w(i),p&&w(s),p&&w(o),p&&w(a),p&&w(c),p&&w(l),p&&w(f),U(d,p)}}}function gp(t){let e,n;return e=new lt({props:{$$slots:{default:[mp]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,[i]){let s={};i&23&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function vp(t,e,n){let r,i,s;Be(t,Je,a=>n(3,i=a)),Be(t,Ze,a=>n(2,s=a));let{balance:o=0}=e;return t.$$set=a=>{"balance"in a&&n(0,o=a.balance)},t.$$.update=()=>{if(t.$$.dirty&8){e:n(1,r=i.displayName?i.displayName.split(" ")[0]:"crack")}},[o,r,s,i]}var ec=class extends B{constructor(e){super();K(this,e,vp,gp,$,{balance:0})}},tc=ec;function yp(t){let e,n,r,i,s,o,a;return{c(){e=E("div"),n=E("button"),r=E("img"),r.src!==(i=`icons/${t[1]}.svg`)&&y(r,"src",i),y(r,"alt",t[1]),y(r,"class","svelte-1qy75yq"),we(r,"selected__icon",t[0]===t[1]),y(e,"class",s=""+(Gt(t[2])+" svelte-1qy75yq")),we(e,"selected",t[0]===t[1])},m(c,l){b(c,e,l),k(e,n),k(n,r),o||(a=[he(n,"click",t[3]),he(e,"click",t[5])],o=!0)},p(c,[l]){l&3&&we(r,"selected__icon",c[0]===c[1]),l&3&&we(e,"selected",c[0]===c[1])},i:G,o:G,d(c){c&&w(e),o=!1,qe(a)}}}function _p(t,e,n){let{prop:r={icon:"menu",style:"primary",onClick:()=>console.log("click")}}=e,{current:i="profile"}=e,{icon:s,style:o,onClick:a}=r;function c(l){ss(t,l)}return t.$$set=l=>{"prop"in l&&n(4,r=l.prop),"current"in l&&n(0,i=l.current)},[i,s,o,a,r,c]}var nc=class extends B{constructor(e){super();K(this,e,_p,yp,$,{prop:4,current:0})}},fe=nc;function wp(t){let e,n,r,i;n=new fe({props:{prop:t[1]}});let s=t[2].default,o=kt(s,t,t[3],null);return{c(){e=E("div"),x(n.$$.fragment),r=N(),o&&o.c(),y(e,"class","btn--close svelte-1hoiz49")},m(a,c){b(a,e,c),M(n,e,null),b(a,r,c),o&&o.m(a,c),i=!0},p(a,c){o&&o.p&&(!i||c&8)&&St(o,s,a,a[3],c,null,null)},i(a){i||(I(n.$$.fragment,a),I(o,a),i=!0)},o(a){S(n.$$.fragment,a),S(o,a),i=!1},d(a){a&&w(e),U(n),a&&w(r),o&&o.d(a)}}}function bp(t){let e,n,r,i;return n=new lt({props:{$$slots:{default:[wp]},$$scope:{ctx:t}}}),{c(){e=E("div"),x(n.$$.fragment),y(e,"class",r=""+(Gt(t[0]?"hideModal":"modal")+" svelte-1hoiz49"))},m(s,o){b(s,e,o),M(n,e,null),i=!0},p(s,[o]){let a={};o&8&&(a.$$scope={dirty:o,ctx:s}),n.$set(a),(!i||o&1&&r!==(r=""+(Gt(s[0]?"hideModal":"modal")+" svelte-1hoiz49")))&&y(e,"class",r)},i(s){i||(I(n.$$.fragment,s),i=!0)},o(s){S(n.$$.fragment,s),i=!1},d(s){s&&w(e),U(n)}}}function Ep(t,e,n){let{$$slots:r={},$$scope:i}=e,{hideModal:s=!0}=e,a={icon:"delete",style:"tertiary",onClick:()=>n(0,s=!s)};return t.$$set=c=>{"hideModal"in c&&n(0,s=c.hideModal),"$$scope"in c&&n(3,i=c.$$scope)},[s,a,r,i]}var rc=class extends B{constructor(e){super();K(this,e,Ep,bp,$,{hideModal:0})}},ic=rc;function Tp(t){let e,n,r,i;return{c(){e=E("input"),y(e,"type","text"),y(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),y(e,"placeholder",t[2])},m(s,o){b(s,e,o),xe(e,t[0]),r||(i=he(e,"input",t[8]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&y(e,"class",n),o&4&&y(e,"placeholder",s[2]),o&1&&e.value!==s[0]&&xe(e,s[0])},d(s){s&&w(e),r=!1,i()}}}function Ip(t){let e,n,r,i;return{c(){e=E("input"),y(e,"type","date"),y(e,"class",n="input__"+t[1]+" svelte-17e1blc"),y(e,"placeholder",t[2])},m(s,o){b(s,e,o),xe(e,t[0]),r||(i=he(e,"input",t[7]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" svelte-17e1blc")&&y(e,"class",n),o&4&&y(e,"placeholder",s[2]),o&1&&xe(e,s[0])},d(s){s&&w(e),r=!1,i()}}}function kp(t){let e,n,r,i;return{c(){e=E("input"),y(e,"type","number"),y(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),y(e,"placeholder",t[2])},m(s,o){b(s,e,o),xe(e,t[0]),r||(i=he(e,"input",t[6]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&y(e,"class",n),o&4&&y(e,"placeholder",s[2]),o&1&&At(e.value)!==s[0]&&xe(e,s[0])},d(s){s&&w(e),r=!1,i()}}}function Sp(t){let e,n,r,i;function s(c,l){if(c[4]==="number")return kp;if(c[4]==="date")return Ip;if(c[4]==="text")return Tp}let o=s(t,-1),a=o&&o(t);return{c(){e=E("div"),n=E("h3"),r=W(t[3]),i=N(),a&&a.c(),y(n,"class","mt-8 mb-1"),y(e,"class","svelte-17e1blc")},m(c,l){b(c,e,l),k(e,n),k(n,r),k(e,i),a&&a.m(e,null)},p(c,[l]){l&8&&J(r,c[3]),o===(o=s(c,l))&&a?a.p(c,l):(a&&a.d(1),a=o&&o(c),a&&(a.c(),a.m(e,null)))},i:G,o:G,d(c){c&&w(e),a&&a.d()}}}function Ap(t,e,n){let{icon:r="menu"}=e,{style:i="primary"}=e,{placeholder:s="0€"}=e,{value:o=""}=e,{label:a=""}=e,{type:c="number"}=e;function l(){o=At(this.value),n(0,o)}function u(){o=this.value,n(0,o)}function h(){o=this.value,n(0,o)}return t.$$set=f=>{"icon"in f&&n(5,r=f.icon),"style"in f&&n(1,i=f.style),"placeholder"in f&&n(2,s=f.placeholder),"value"in f&&n(0,o=f.value),"label"in f&&n(3,a=f.label),"type"in f&&n(4,c=f.type)},[o,i,s,a,c,r,l,u,h]}var sc=class extends B{constructor(e){super();K(this,e,Ap,Sp,$,{icon:5,style:1,placeholder:2,value:0,label:3,type:4})}},Pn=sc;function Cp(t){let e,n,r,i,s,o=t[2].default,a=kt(o,t,t[1],null);return{c(){e=E("div"),a&&a.c(),n=N(),r=E("span"),i=W(t[0]),y(r,"class","tooltiptext svelte-1betoo6"),y(e,"class","tooltip svelte-1betoo6")},m(c,l){b(c,e,l),a&&a.m(e,null),k(e,n),k(e,r),k(r,i),s=!0},p(c,[l]){a&&a.p&&(!s||l&2)&&St(a,o,c,c[1],l,null,null),(!s||l&1)&&J(i,c[0])},i(c){s||(I(a,c),s=!0)},o(c){S(a,c),s=!1},d(c){c&&w(e),a&&a.d(c)}}}function Rp(t,e,n){let{$$slots:r={},$$scope:i}=e,{label:s="Soy un tooltip"}=e;return t.$$set=o=>{"label"in o&&n(0,s=o.label),"$$scope"in o&&n(1,i=o.$$scope)},[s,i,r]}var oc=class extends B{constructor(e){super();K(this,e,Rp,Cp,$,{label:0})}},Mn=oc;function ac(t,e,n){let r=t.slice();return r[4]=e[n].today,r[5]=e[n].amount,r[6]=e[n].id_saving,r}function cc(t){let e,n,r=t[4]+"",i,s,o,a=hs(t[5])+"",c,l,u,h,f,d;function m(){return t[3](t[6])}return h=new fe({props:{prop:{icon:"delete",style:"tertiary",onClick:m}}}),{c(){e=E("tr"),n=E("td"),i=W(r),s=N(),o=E("td"),c=W(a),l=N(),u=E("td"),x(h.$$.fragment),f=N(),y(n,"class","text-xs svelte-1q78vq1"),y(o,"class","svelte-1q78vq1"),y(u,"class","svelte-1q78vq1")},m(p,g){b(p,e,g),k(e,n),k(n,i),k(e,s),k(e,o),k(o,c),k(e,l),k(e,u),M(h,u,null),k(e,f),d=!0},p(p,g){t=p,(!d||g&2)&&r!==(r=t[4]+"")&&J(i,r),(!d||g&2)&&a!==(a=hs(t[5])+"")&&J(c,a);let v={};g&7&&(v.prop={icon:"delete",style:"tertiary",onClick:m}),h.$set(v)},i(p){d||(I(h.$$.fragment,p),d=!0)},o(p){S(h.$$.fragment,p),d=!1},d(p){p&&w(e),U(h)}}}function Np(t){let e,n,r,i,s,o=t[1],a=[];for(let l=0;l<o.length;l+=1)a[l]=cc(ac(t,o,l));let c=l=>S(a[l],1,1,()=>{a[l]=null});return{c(){e=E("table"),n=E("thead"),n.innerHTML=`<tr><th class="svelte-1q78vq1">FECHA</th> 

			<th class="svelte-1q78vq1">CANTIDAD</th></tr>`,r=N(),i=E("tbody");for(let l=0;l<a.length;l+=1)a[l].c();y(e,"class","text-center w-full")},m(l,u){b(l,e,u),k(e,n),k(e,r),k(e,i);for(let h=0;h<a.length;h+=1)a[h].m(i,null);s=!0},p(l,[u]){if(u&7){o=l[1];let h;for(h=0;h<o.length;h+=1){let f=ac(l,o,h);a[h]?(a[h].p(f,u),I(a[h],1)):(a[h]=cc(f),a[h].c(),I(a[h],1),a[h].m(i,null))}for(oe(),h=o.length;h<a.length;h+=1)c(h);ae()}},i(l){if(!s){for(let u=0;u<o.length;u+=1)I(a[u]);s=!0}},o(l){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)S(a[u]);s=!1},d(l){l&&w(e),Ye(a,l)}}}function Dp(t,e,n){let{removeSaving:r=()=>{}}=e,{savings:i=[]}=e,{id:s=0}=e,o=a=>r(s,a);return t.$$set=a=>{"removeSaving"in a&&n(0,r=a.removeSaving),"savings"in a&&n(1,i=a.savings),"id"in a&&n(2,s=a.id)},[r,i,s,o]}var lc=class extends B{constructor(e){super();K(this,e,Dp,Np,$,{removeSaving:0,savings:1,id:2})}},uc=lc;function hc(t,e,n){let r=t.slice();return r[14]=e[n].label,r[15]=e[n].icon,r[16]=e[n].style,r[17]=e[n].onClick,r}function Op(t){let e,n,r;return n=new fe({props:{prop:t[9][1]}}),{c(){e=E("div"),x(n.$$.fragment),y(e,"class","float-right  mt-5 flex flex-row")},m(i,s){b(i,e,s),M(n,e,null),r=!0},p:G,i(i){r||(I(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&w(e),U(n)}}}function Lp(t){let e,n,r,i,s,o=t[9],a=[];for(let l=0;l<o.length;l+=1)a[l]=fc(hc(t,o,l));let c=l=>S(a[l],1,1,()=>{a[l]=null});return i=new uc({props:{savings:t[8],removeSaving:t[2],id:t[4]}}),{c(){e=E("div");for(let l=0;l<a.length;l+=1)a[l].c();n=N(),r=E("div"),x(i.$$.fragment),y(e,"class","float-right  mt-5 flex flex-row"),y(r,"class","mt-20 svelte-gm1d5i"),we(r,"hide",!t[5])},m(l,u){b(l,e,u);for(let h=0;h<a.length;h+=1)a[h].m(e,null);b(l,n,u),b(l,r,u),M(i,r,null),s=!0},p(l,u){if(u&512){o=l[9];let f;for(f=0;f<o.length;f+=1){let d=hc(l,o,f);a[f]?(a[f].p(d,u),I(a[f],1)):(a[f]=fc(d),a[f].c(),I(a[f],1),a[f].m(e,null))}for(oe(),f=o.length;f<a.length;f+=1)c(f);ae()}let h={};u&256&&(h.savings=l[8]),u&4&&(h.removeSaving=l[2]),u&16&&(h.id=l[4]),i.$set(h),u&32&&we(r,"hide",!l[5])},i(l){if(!s){for(let u=0;u<o.length;u+=1)I(a[u]);I(i.$$.fragment,l),s=!0}},o(l){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)S(a[u]);S(i.$$.fragment,l),s=!1},d(l){l&&w(e),Ye(a,l),l&&w(n),l&&w(r),U(i)}}}function Pp(t){let e,n,r;return e=new fe({props:{prop:{icon:t[15],style:t[16],onClick:t[17]}}}),{c(){x(e.$$.fragment),n=N()},m(i,s){M(e,i,s),b(i,n,s),r=!0},p:G,i(i){r||(I(e.$$.fragment,i),r=!0)},o(i){S(e.$$.fragment,i),r=!1},d(i){U(e,i),i&&w(n)}}}function fc(t){let e,n;return e=new Mn({props:{label:t[14],$$slots:{default:[Pp]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){let s={};i&1048576&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function Mp(t){let e,n,r,i,s,o,a,c,l,u,h,f,d;function m(A){t[11](A)}let p={label:"añade la cantidad",type:"number"};t[6]!==void 0&&(p.value=t[6]),i=new Pn({props:p}),at.push(()=>Zt(i,"value",m));function g(A){t[12](A)}let v={label:"¿Cuándo añadiste los fondos?",type:"date"};t[7]!==void 0&&(v.value=t[7]),a=new Pn({props:v}),at.push(()=>Zt(a,"value",g));let D=[Lp,Op],_=[];function R(A,L){return A[1].length>0?0:1}return u=R(t,-1),h=_[u]=D[u](t),{c(){e=E("h1"),n=W(t[3]),r=N(),x(i.$$.fragment),o=N(),x(a.$$.fragment),l=N(),h.c(),f=Ke(),y(e,"class","noselect text-2xl")},m(A,L){b(A,e,L),k(e,n),b(A,r,L),M(i,A,L),b(A,o,L),M(a,A,L),b(A,l,L),_[u].m(A,L),b(A,f,L),d=!0},p(A,L){(!d||L&8)&&J(n,A[3]);let ie={};!s&&L&64&&(s=!0,ie.value=A[6],Xt(()=>s=!1)),i.$set(ie);let _e={};!c&&L&128&&(c=!0,_e.value=A[7],Xt(()=>c=!1)),a.$set(_e);let ce=u;u=R(A,L),u===ce?_[u].p(A,L):(oe(),S(_[ce],1,1,()=>{_[ce]=null}),ae(),h=_[u],h?h.p(A,L):(h=_[u]=D[u](A),h.c()),I(h,1),h.m(f.parentNode,f))},i(A){d||(I(i.$$.fragment,A),I(a.$$.fragment,A),I(h),d=!0)},o(A){S(i.$$.fragment,A),S(a.$$.fragment,A),S(h),d=!1},d(A){A&&w(e),A&&w(r),U(i,A),A&&w(o),U(a,A),A&&w(l),_[u].d(A),A&&w(f)}}}function Up(t){let e,n;return e=new ic({props:{hideModal:t[0],$$slots:{default:[Mp]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,[i]){let s={};i&1&&(s.hideModal=r[0]),i&1049086&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function xp(t,e,n){let r,{hideModal:i=!0}=e,{save:s=()=>{}}=e,{savings:o=[]}=e,{removeSaving:a=()=>{}}=e,{title:c="Title"}=e,{id:l="0"}=e,u=!1,h=()=>n(5,u=!u),f=0,d=[{icon:"history",label:"Ver el historial ",style:"modal",onClick:h},{icon:"saving",label:"Guardar Datos",style:"modal",onClick:()=>{s(l,m,f)}}],m=Ga;function p(v){f=v,n(6,f)}function g(v){m=v,n(7,m)}return t.$$set=v=>{"hideModal"in v&&n(0,i=v.hideModal),"save"in v&&n(10,s=v.save),"savings"in v&&n(1,o=v.savings),"removeSaving"in v&&n(2,a=v.removeSaving),"title"in v&&n(3,c=v.title),"id"in v&&n(4,l=v.id)},t.$$.update=()=>{if(t.$$.dirty&2){e:n(8,r=o.sort((v,D)=>(v=v.today.split("-").join(""),D=D.today.split("-").join(""),D-v)))}},[i,o,a,c,l,u,f,m,r,d,s,p,g]}var dc=class extends B{constructor(e){super();K(this,e,xp,Up,$,{hideModal:0,save:10,savings:1,removeSaving:2,title:3,id:4})}},pc=dc;function mc(t,e,n){let r=t.slice();return r[22]=e[n],r}function Vp(t){let e,n,r,i,s,o=ge(t[3])+"",a,c,l=isFinite(t[8]),u=l&&gc(t);return{c(){e=E("h6"),n=W(t[4]),r=N(),i=E("div"),s=E("p"),a=W(o),c=N(),u&&u.c(),y(e,"class","mb-1"),y(s,"class","euros"),y(i,"class","data svelte-1ar7xro")},m(h,f){b(h,e,f),k(e,n),b(h,r,f),b(h,i,f),k(i,s),k(s,a),k(i,c),u&&u.m(i,null)},p(h,f){f&16&&J(n,h[4]),f&8&&o!==(o=ge(h[3])+"")&&J(a,o),f&256&&(l=isFinite(h[8])),l?u?u.p(h,f):(u=gc(h),u.c(),u.m(i,null)):u&&(u.d(1),u=null)},i:G,o:G,d(h){h&&w(e),h&&w(r),h&&w(i),u&&u.d()}}}function Fp(t){let e,n,r,i,s,o,a=isFinite(t[8]),c,l,u,h,f,d=a&&vc(t),m=t[13],p=[];for(let v=0;v<m.length;v+=1)p[v]=yc(mc(t,m,v));let g=v=>S(p[v],1,1,()=>{p[v]=null});return{c(){e=E("div"),n=E("input"),r=N(),i=E("div"),s=E("input"),o=N(),d&&d.c(),c=N(),l=E("div");for(let v=0;v<p.length;v+=1)p[v].c();y(n,"name","title"),y(n,"class","title w-64 svelte-1ar7xro"),y(n,"type","text"),y(s,"name","number"),y(s,"type","number"),y(s,"class","svelte-1ar7xro"),y(i,"class","data svelte-1ar7xro"),y(l,"class"," flex flex-row float-right"),y(e,"draggable","true")},m(v,D){b(v,e,D),k(e,n),xe(n,t[4]),k(e,r),k(e,i),k(i,s),xe(s,t[3]),k(i,o),d&&d.m(i,null),k(e,c),k(e,l);for(let _=0;_<p.length;_+=1)p[_].m(l,null);u=!0,h||(f=[he(n,"change",t[11]),he(n,"input",t[15]),he(s,"change",t[12]),he(s,"input",t[16])],h=!0)},p(v,D){if(D&16&&n.value!==v[4]&&xe(n,v[4]),D&8&&At(s.value)!==v[3]&&xe(s,v[3]),D&256&&(a=isFinite(v[8])),a?d?d.p(v,D):(d=vc(v),d.c(),d.m(i,null)):d&&(d.d(1),d=null),D&8192){m=v[13];let _;for(_=0;_<m.length;_+=1){let R=mc(v,m,_);p[_]?(p[_].p(R,D),I(p[_],1)):(p[_]=yc(R),p[_].c(),I(p[_],1),p[_].m(l,null))}for(oe(),_=m.length;_<p.length;_+=1)g(_);ae()}},i(v){if(!u){for(let D=0;D<m.length;D+=1)I(p[D]);u=!0}},o(v){p=p.filter(Boolean);for(let D=0;D<p.length;D+=1)S(p[D]);u=!1},d(v){v&&w(e),d&&d.d(),Ye(p,v),h=!1,qe(f)}}}function gc(t){let e,n=ct(t[8])+"",r;return{c(){e=E("p"),r=W(n),y(e,"class"," percent svelte-1ar7xro")},m(i,s){b(i,e,s),k(e,r)},p(i,s){s&256&&n!==(n=ct(i[8])+"")&&J(r,n)},d(i){i&&w(e)}}}function vc(t){let e,n=ct(t[8])+"",r;return{c(){e=E("p"),r=W(n),y(e,"class"," percent svelte-1ar7xro")},m(i,s){b(i,e,s),k(e,r)},p(i,s){s&256&&n!==(n=ct(i[8])+"")&&J(r,n)},d(i){i&&w(e)}}}function yc(t){let e,n,r,i;return n=new fe({props:{prop:t[22]}}),{c(){e=E("div"),x(n.$$.fragment),r=N()},m(s,o){b(s,e,o),M(n,e,null),k(e,r),i=!0},p:G,i(s){i||(I(n.$$.fragment,s),i=!0)},o(s){S(n.$$.fragment,s),i=!1},d(s){s&&w(e),U(n)}}}function _c(t){let e,n,r=ge(t[7])+"",i;return{c(){e=E("h3"),n=W("Rentabilidad: "),i=W(r),y(e,"class","mt-1 revenue text-sm")},m(s,o){b(s,e,o),k(e,n),k(e,i)},p(s,o){o&128&&r!==(r=ge(s[7])+"")&&J(i,r)},d(s){s&&w(e)}}}function $p(t){let e,n,r,i,s,o,a;e=new pc({props:{hideModal:t[6],title:t[4],id:t[9],save:t[1].saving,savings:t[2].saving,removeSaving:t[1].removeSaving}});let c=[Fp,Vp],l=[];function u(f,d){return f[0]?0:1}i=u(t,-1),s=l[i]=c[i](t);let h=t[10].length>0&&!t[0]&&_c(t);return{c(){x(e.$$.fragment),n=N(),r=E("div"),s.c(),o=N(),h&&h.c(),y(r,"class","w-64 m-3 relative svelte-1ar7xro"),we(r,"hightlight",t[5])},m(f,d){M(e,f,d),b(f,n,d),b(f,r,d),l[i].m(r,null),k(r,o),h&&h.m(r,null),a=!0},p(f,[d]){let m={};d&64&&(m.hideModal=f[6]),d&16&&(m.title=f[4]),d&2&&(m.save=f[1].saving),d&4&&(m.savings=f[2].saving),d&2&&(m.removeSaving=f[1].removeSaving),e.$set(m);let p=i;i=u(f,d),i===p?l[i].p(f,d):(oe(),S(l[p],1,1,()=>{l[p]=null}),ae(),s=l[i],s?s.p(f,d):(s=l[i]=c[i](f),s.c()),I(s,1),s.m(r,o)),f[10].length>0&&!f[0]?h?h.p(f,d):(h=_c(f),h.c(),h.m(r,null)):h&&(h.d(1),h=null),d&32&&we(r,"hightlight",f[5])},i(f){a||(I(e.$$.fragment,f),I(s),a=!0)},o(f){S(e.$$.fragment,f),S(s),a=!1},d(f){U(e,f),f&&w(n),f&&w(r),l[i].d(),h&&h.d()}}}function jp(t,e,n){let r,i,s,{edit:o=!1}=e,{data:a=[]}=e,{prop:c={id:"9c72c81f-480d-4575-bdff-45e50afc7a33",title:"Total Title",number:0,hightlight:!1,saving:[]}}=e,{id:l,title:u,number:h,hightlight:f,saving:d}=c,m=!0,p=()=>n(6,m=!m),g={remove:()=>a.remove(l),changeName:()=>a.change(l,"title",u),changeNumber:()=>a.change(l,"number",h),changeHigh:()=>a.change(l,"hightlight",f),toogleHigh:()=>{n(5,f=!f),_()}},{changeName:v,changeNumber:D,changeHigh:_,remove:R,toogleHigh:A}=g,L=[{icon:"delete",style:"tertiary",onClick:R},{icon:"highlight",style:"tertiary",onClick:A},{icon:"saving",style:"tertiary",onClick:p}];function ie(){u=this.value,n(4,u)}function _e(){h=At(this.value),n(3,h)}t.$$set=ce=>{"edit"in ce&&n(0,o=ce.edit),"data"in ce&&n(1,a=ce.data),"prop"in ce&&n(2,c=ce.prop)},t.$$.update=()=>{if(t.$$.dirty&16392){e:n(7,i=h-r)}if(t.$$.dirty&16392){e:n(8,s=(h-r)/r)}};e:n(14,r=d.reduce((ce,Yi)=>ce+Yi.amount,0));return[o,a,c,h,u,f,m,i,s,l,d,v,D,L,r,ie,_e]}var wc=class extends B{constructor(e){super();K(this,e,jp,$p,$,{edit:0,data:1,prop:2})}},ds=wc;var Sr,qp=new Uint8Array(16);function Bp(){if(!Sr&&(Sr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Sr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sr(qp)}var zp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Hp(t){return typeof t=="string"&&zp.test(t)}var be=[];for(var ps=0;ps<256;++ps)be.push((ps+256).toString(16).substr(1));function Kp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(be[t[e+0]]+be[t[e+1]]+be[t[e+2]]+be[t[e+3]]+"-"+be[t[e+4]]+be[t[e+5]]+"-"+be[t[e+6]]+be[t[e+7]]+"-"+be[t[e+8]]+be[t[e+9]]+"-"+be[t[e+10]]+be[t[e+11]]+be[t[e+12]]+be[t[e+13]]+be[t[e+14]]+be[t[e+15]]).toLowerCase();if(!Hp(n))throw TypeError("Stringified UUID is invalid");return n}function ms(t,e,n){t=t||{};var r=t.random||(t.rng||Bp)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return Kp(r)}var Gp={title:"Título",number:0,hightlight:!1,saving:[]},Wp=()=>{let{subscribe:t,update:e,set:n}=tn([]),r=(f=[])=>(t(d=>f=d),f);return{subscribe:t,update:e,set:n,add:()=>e(f=>[...f,{...Gp,id:ms()}]),remove:f=>e(d=>d.filter(m=>m.id!==f)),change:(f,d,m,p=r())=>{p.map(g=>g.id===f?g[d]=m:""),n(p)},balance:(f=r())=>f.reduce((d,m)=>d+m.number,0),saving:(f,d,m,p=r())=>{p.map(g=>g.id===f?g.saving=[...g.saving,{id_saving:ms(),today:d,amount:m}]:""),n(p)},revenue:(f=r(),d=[])=>(f.map(p=>p.saving.map(g=>d=[...d,g.amount])),d.reduce((p,g)=>p+g,0)),detectNoSavings:(f=r(),d=[])=>(f.map(p=>p.saving.length===0?d=[...d,p.number]:""),d.reduce((p,g)=>p+g,0)),removeSaving:(f,d,m=r())=>{let g=m.find(v=>v.id===f).saving.filter(v=>v.id_saving!==d);e(v=>v.map(D=>D.id===f?{...D,saving:g}:D))}}},se=Wp(),bc=()=>{se.set([])};function Ec(t,e,n={}){let r=getComputedStyle(t),i=r.transform==="none"?"":r.transform,s=e.from.width/t.clientWidth,o=e.from.height/t.clientHeight,a=(e.from.left-e.to.left)/s,c=(e.from.top-e.to.top)/o,l=Math.sqrt(a*a+c*c),{delay:u=0,duration:h=d=>Math.sqrt(d)*120,easing:f=fs}=n;return{delay:u,duration:ot(h)?h(l):h,easing:f,css:(d,m)=>`transform: ${i} translate(${m*a}px, ${m*c}px);`}}function Tc(t,e,n){let r=t.slice();return r[12]=e[n],r}function Ic(t,e,n){let r=t.slice();return r[12]=e[n],r[14]=n,r}function Xp(t){let e=[],n=new Map,r,i,s=t[2],o=a=>a[12].id;for(let a=0;a<s.length;a+=1){let c=Tc(t,s,a),l=o(c);n.set(l,e[a]=kc(l,c))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=Ke()},m(a,c){for(let l=0;l<e.length;l+=1)e[l].m(a,c);b(a,r,c),i=!0},p(a,c){c&5&&(s=a[2],oe(),e=Jt(e,c,o,1,a,s,n,r.parentNode,Yt,kc,r,Tc),ae())},i(a){if(!i){for(let c=0;c<s.length;c+=1)I(e[c]);i=!0}},o(a){for(let c=0;c<e.length;c+=1)S(e[c]);i=!1},d(a){for(let c=0;c<e.length;c+=1)e[c].d(a);a&&w(r)}}}function Qp(t){let e=[],n=new Map,r,i,s=t[2],o=a=>a[12].id;for(let a=0;a<s.length;a+=1){let c=Ic(t,s,a),l=o(c);n.set(l,e[a]=Sc(l,c))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=Ke()},m(a,c){for(let l=0;l<e.length;l+=1)e[l].m(a,c);b(a,r,c),i=!0},p(a,c){if(c&127){s=a[2],oe();for(let l=0;l<e.length;l+=1)e[l].r();e=Jt(e,c,o,1,a,s,n,r.parentNode,us,Sc,r,Ic);for(let l=0;l<e.length;l+=1)e[l].a();ae()}},i(a){if(!i){for(let c=0;c<s.length;c+=1)I(e[c]);i=!0}},o(a){for(let c=0;c<e.length;c+=1)S(e[c]);i=!1},d(a){for(let c=0;c<e.length;c+=1)e[c].d(a);a&&w(r)}}}function kc(t,e){let n,r,i,s,o;return r=new ds({props:{edit:e[0],prop:e[12],data:se}}),{key:t,first:null,c(){n=E("div"),x(r.$$.fragment),i=N(),this.first=n},m(a,c){b(a,n,c),M(r,n,null),k(n,i),o=!0},p(a,c){e=a;let l={};c&1&&(l.edit=e[0]),c&4&&(l.prop=e[12]),r.$set(l)},i(a){o||(I(r.$$.fragment,a),s||Ge(()=>{s=Qt(n,Ln,{}),s.start()}),o=!0)},o(a){S(r.$$.fragment,a),o=!1},d(a){a&&w(n),U(r)}}}function Ac(t){let e,n;function r(){return t[10](t[14])}return e=new fe({props:{prop:{icon:"up",style:"move",onClick:r}}}),{c(){x(e.$$.fragment)},m(i,s){M(e,i,s),n=!0},p(i,s){t=i;let o={};s&4&&(o.prop={icon:"up",style:"move",onClick:r}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){U(e,i)}}}function Cc(t){let e,n;function r(){return t[11](t[14])}return e=new fe({props:{prop:{icon:"down",style:"move",onClick:r}}}),{c(){x(e.$$.fragment)},m(i,s){M(e,i,s),n=!0},p(i,s){t=i;let o={};s&4&&(o.prop={icon:"down",style:"move",onClick:r}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){U(e,i)}}}function Sc(t,e){let n,r,i,s,o,a,c,l,u,h,f=G,d,m,p;i=new ds({props:{edit:e[0],prop:e[12],data:se,index:e[14]}});function g(...A){return e[7](e[14],...A)}function v(...A){return e[8](e[14],...A)}function D(){return e[9](e[14])}let _=e[14]!==0&&Ac(e),R=e[14]!==e[2].length-1&&Cc(e);return{key:t,first:null,c(){n=E("div"),r=E("div"),x(i.$$.fragment),o=N(),a=E("div"),_&&_.c(),c=N(),R&&R.c(),l=N(),y(r,"class","list-item svelte-1wuvhrt"),y(r,"draggable",s=!0),y(r,"ondragover","return false"),we(r,"is-active",e[1]===e[14]),y(a,"class","move_btns svelte-1wuvhrt"),y(n,"class","relative"),this.first=n},m(A,L){b(A,n,L),k(n,r),M(i,r,null),k(n,o),k(n,a),_&&_.m(a,null),k(a,c),R&&R.m(a,null),k(n,l),d=!0,m||(p=[he(r,"dragstart",g),he(r,"drop",es(v)),he(r,"dragenter",D)],m=!0)},p(A,L){e=A;let ie={};L&1&&(ie.edit=e[0]),L&4&&(ie.prop=e[12]),L&4&&(ie.index=e[14]),i.$set(ie),L&6&&we(r,"is-active",e[1]===e[14]),e[14]!==0?_?(_.p(e,L),L&4&&I(_,1)):(_=Ac(e),_.c(),I(_,1),_.m(a,c)):_&&(oe(),S(_,1,1,()=>{_=null}),ae()),e[14]!==e[2].length-1?R?(R.p(e,L),L&4&&I(R,1)):(R=Cc(e),R.c(),I(R,1),R.m(a,null)):R&&(oe(),S(R,1,1,()=>{R=null}),ae())},r(){h=n.getBoundingClientRect()},f(){is(n),f()},a(){f(),f=rs(n,h,Ec,{})},i(A){d||(I(i.$$.fragment,A),I(_),I(R),u||Ge(()=>{u=Qt(n,Ln,{}),u.start()}),d=!0)},o(A){S(i.$$.fragment,A),S(_),S(R),d=!1},d(A){A&&w(n),U(i),_&&_.d(),R&&R.d(),m=!1,qe(p)}}}function Yp(t){let e,n,r,i,s=[Qp,Xp],o=[];function a(c,l){return c[2]&&c[0]?0:c[2]&&!c[0]?1:-1}return~(e=a(t,-1))&&(n=o[e]=s[e](t)),{c(){n&&n.c(),r=Ke()},m(c,l){~e&&o[e].m(c,l),b(c,r,l),i=!0},p(c,[l]){let u=e;e=a(c,l),e===u?~e&&o[e].p(c,l):(n&&(oe(),S(o[u],1,1,()=>{o[u]=null}),ae()),~e?(n=o[e],n?n.p(c,l):(n=o[e]=s[e](c),n.c()),I(n,1),n.m(r.parentNode,r)):n=null)},i(c){i||(I(n),i=!0)},o(c){S(n),i=!1},d(c){~e&&o[e].d(c),c&&w(r)}}}function Jp(t,e,n){let r;Be(t,se,p=>n(2,r=p));let{edit:i=!1}=e,s=!1,o=(p,g)=>{p.dataTransfer.dropEffect="move";let v=parseInt(p.dataTransfer.getData("text/plain")),D=r;v<g?(D.splice(g+1,0,D[v]),D.splice(v,1)):(D.splice(g,0,D[v]),D.splice(v+1,1)),se.set(D),n(1,s=!1)},a=(p,g)=>{p.dataTransfer.effectAllowed="move",p.dataTransfer.dropEffect="move";let v=g;p.dataTransfer.setData("text/plain",v)},c=p=>{if(p!==0){let g=r;g.splice(p-1,0,g[p]),g.splice(p+1,1),se.set(g)}},l=p=>{if(p!==r.length-1){let g=r;g.splice(p+2,0,g[p]),g.splice(p,1),se.set(g)}},u=(p,g)=>a(g,p),h=(p,g)=>o(g,p),f=p=>n(1,s=p),d=p=>c(p),m=p=>l(p);return t.$$set=p=>{"edit"in p&&n(0,i=p.edit)},[i,s,r,o,a,c,l,u,h,f,d,m]}var Rc=class extends B{constructor(e){super();K(this,e,Jp,Yp,$,{edit:0})}},Ar=Rc;function Zp(t){let e,n,r,i,s,o=ge(t[0])+"",a,c,l,u=ct(isNaN(t[1])?0:t[1])+"",h;return{c(){e=E("div"),n=E("h6"),n.textContent=`${t[2]}`,r=N(),i=E("div"),s=E("p"),a=W(o),c=N(),l=E("p"),h=W(u),y(n,"class","mb-1"),y(s,"class","euros"),y(l,"class","percent svelte-1yu2d20"),y(i,"class","data svelte-1yu2d20"),y(e,"class","w-64 m-3 relative m-6 svelte-1yu2d20"),we(e,"hightlight",t[3])},m(f,d){b(f,e,d),k(e,n),k(e,r),k(e,i),k(i,s),k(s,a),k(i,c),k(i,l),k(l,h)},p(f,[d]){d&1&&o!==(o=ge(f[0])+"")&&J(a,o),d&2&&u!==(u=ct(isNaN(f[1])?0:f[1])+"")&&J(h,u)},i:G,o:G,d(f){f&&w(e)}}}function em(t,e,n){let{revenue:r=0}=e,{percent:i=0}=e,{props:s={title:"Beneficios",hightlight:!0}}=e,{title:o,hightlight:a}=s;return t.$$set=c=>{"revenue"in c&&n(0,r=c.revenue),"percent"in c&&n(1,i=c.percent),"props"in c&&n(4,s=c.props)},[r,i,o,a,s]}var Nc=class extends B{constructor(e){super();K(this,e,em,Zp,$,{revenue:0,percent:1,props:4})}},Dc=Nc;function tm(t){let e,n,r,i,s,o;return e=new tc({props:{balance:t[0]}}),r=new Dc({props:{revenue:t[1],percent:t[2]}}),s=new Ar({}),{c(){x(e.$$.fragment),n=N(),x(r.$$.fragment),i=N(),x(s.$$.fragment)},m(a,c){M(e,a,c),b(a,n,c),M(r,a,c),b(a,i,c),M(s,a,c),o=!0},p(a,[c]){let l={};c&1&&(l.balance=a[0]),e.$set(l);let u={};c&2&&(u.revenue=a[1]),c&4&&(u.percent=a[2]),r.$set(u)},i(a){o||(I(e.$$.fragment,a),I(r.$$.fragment,a),I(s.$$.fragment,a),o=!0)},o(a){S(e.$$.fragment,a),S(r.$$.fragment,a),S(s.$$.fragment,a),o=!1},d(a){U(e,a),a&&w(n),U(r,a),a&&w(i),U(s,a)}}}function nm(t,e,n){let r=0,i=0,s=0;return se.subscribe(o=>{o&&(n(0,r=se.balance()),n(1,i=se.balance()-se.revenue()-se.detectNoSavings()),n(2,s=(se.balance()-se.revenue()-se.detectNoSavings())/se.revenue()))}),[r,i,s]}var Oc=class extends B{constructor(e){super();K(this,e,nm,tm,$,{})}},Lc=Oc;var gs=function(t,e){return gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},gs(t,e)};function rm(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gs(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var vs=function(){return vs=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vs.apply(this,arguments)};function Cr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function im(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function sm(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ys(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rr(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Pc(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var om=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)==55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},am=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{var s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},cm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,d=l&63;c||(d=64,o||(f=64)),r.push(n[u],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(om(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):am(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length,a=o?n[t.charAt(i)]:0;++i;var c=i<t.length,l=c?n[t.charAt(i)]:64;++i;var u=i<t.length,h=u?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw Error();var f=s<<2|a>>4;if(r.push(f),l!==64){var d=a<<4&240|l>>2;if(r.push(d),h!==64){var m=l<<6&192|h;r.push(m)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Mc=function(t){try{return cm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};var lm=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();function de(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nr(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(de())}function Dr(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Or(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Uc(){return de().indexOf("Electron/")>=0}function Lr(){var t=de();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xc(){return de().indexOf("MSAppHost/")>=0}var um="FirebaseError",xn=function(t){rm(e,t);function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name=um,Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,Un.prototype.create),s}return e}(Error),Un=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+e,o=this.errors[e],a=o?hm(o,i):"Error",c=this.serviceName+": "+a+" ("+s+").",l=new xn(s,c,i);return l},t}();function hm(t,e){return t.replace(fm,function(n,r){var i=e[r];return i!=null?String(i):"<"+r+"?>"})}var fm=/\{\$([^}]+)}/g;function Vc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nn(t){for(var e=[],n=function(c,l){Array.isArray(l)?l.forEach(function(u){e.push(encodeURIComponent(c)+"="+encodeURIComponent(u))}):e.push(encodeURIComponent(c)+"="+encodeURIComponent(l))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r],o=s[0],a=s[1];n(o,a)}return e.length?"&"+e.join("&"):""}function Fc(t,e){var n=new dm(t,e);return n.subscribe.bind(n)}var dm=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pm(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=_s),s.error===void 0&&(s.error=_s),s.complete===void 0&&(s.complete=_s);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch(a){}}),this.observers.push(s),o},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function pm(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function _s(){}function Ve(t){return t&&t._delegate?t._delegate:t}var ut=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();var ht="[DEFAULT]";var vm=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(e){e===void 0&&(e=ht);var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new lm;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(s){}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n=vs({identifier:ht,optional:!1},e),r=n.identifier,i=n.optional,s=this.normalizeInstanceIdentifier(r);if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(gm(e))try{this.getOrInitializeService({instanceIdentifier:ht})}catch(h){}try{for(var i=ys(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var o=Rr(s.value,2),a=o[0],c=o[1],l=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:l});c.resolve(u)}catch(h){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=ht),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return im(this,void 0,void 0,function(){var e;return sm(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Pc(Pc([],Rr(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),Rr(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=ht),this.instances.has(e)},t.prototype.initialize=function(e){var n,r;e===void 0&&(e={});var i=e.instanceIdentifier,s=i===void 0?ht:i,o=e.options,a=o===void 0?{}:o,c=this.normalizeInstanceIdentifier(s);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:c,options:a});try{for(var u=ys(this.instancesDeferred.entries()),h=u.next();!h.done;h=u.next()){var f=Rr(h.value,2),d=f[0],m=f[1],p=this.normalizeInstanceIdentifier(d);c===p&&m.resolve(l)}}catch(g){n={error:g}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return this.invokeOnInitCallbacks(l,c),l},t.prototype.onInit=function(e){var n=this;return this.onInitCallbacks.add(e),function(){n.onInitCallbacks.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var r,i;try{for(var s=ys(this.onInitCallbacks),o=s.next();!o.done;o=s.next()){var a=o.value;try{a(e,n)}catch(c){}}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,r=e.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:mm(n),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(o){}return s||null},t.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:ht:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function mm(t){return t===ht?void 0:t}function gm(t){return t.instantiationMode==="EAGER"}var ym=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new vm(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function ze(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var Rt,Q;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Q||(Q={}));var _m={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},wm=Q.INFO,bm=(Rt={},Rt[Q.DEBUG]="log",Rt[Q.VERBOSE]="log",Rt[Q.INFO]="info",Rt[Q.WARN]="warn",Rt[Q.ERROR]="error",Rt),Em=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),s=bm[e];if(s)console[s].apply(console,ze(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},Vn=function(){function t(e){this.name=e,this._logLevel=wm,this._logHandler=Em,this._userLogHandler=null}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Q))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?_m[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,ze([this,Q.DEBUG],e)),this._logHandler.apply(this,ze([this,Q.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,ze([this,Q.VERBOSE],e)),this._logHandler.apply(this,ze([this,Q.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,ze([this,Q.INFO],e)),this._logHandler.apply(this,ze([this,Q.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,ze([this,Q.WARN],e)),this._logHandler.apply(this,ze([this,Q.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,ze([this,Q.ERROR],e)),this._logHandler.apply(this,ze([this,Q.ERROR],e))},t}();var $c=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Tm(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Tm(t){let e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}var jc="@firebase/app-exp",Im="0.0.900-exp.d92a36260";var ws=new Vn("@firebase/app"),km="@firebase/app-compat",Sm="@firebase/analytics-compat",Am="@firebase/analytics-exp",Cm="@firebase/auth-exp",Rm="@firebase/auth-compat",Nm="@firebase/database",Dm="@firebase/database-compat",Om="@firebase/functions-exp",Lm="@firebase/functions-compat",Pm="@firebase/installations-exp",Mm="@firebase/installations-compat",Um="@firebase/messaging-exp",xm="@firebase/messaging-compat",Vm="@firebase/performance-exp",Fm="@firebase/performance-compat",$m="@firebase/remote-config-exp",jm="@firebase/remote-config-compat",qm="@firebase/storage",Bm="@firebase/storage-compat",zm="@firebase/firestore",Hm="@firebase/firestore-compat",Km="firebase-exp",Gm="9.0.0-beta.2";var qc="[DEFAULT]",Wm={[jc]:"fire-core",[km]:"fire-core-compat",[Am]:"fire-analytics",[Sm]:"fire-analytics-compat",[Cm]:"fire-auth",[Rm]:"fire-auth-compat",[Nm]:"fire-rtdb",[Dm]:"fire-rtdb-compat",[Om]:"fire-fn",[Lm]:"fire-fn-compat",[Pm]:"fire-iid",[Mm]:"fire-iid-compat",[Um]:"fire-fcm",[xm]:"fire-fcm-compat",[Vm]:"fire-perf",[Fm]:"fire-perf-compat",[$m]:"fire-rc",[jm]:"fire-rc-compat",[qm]:"fire-gcs",[Bm]:"fire-gcs-compat",[zm]:"fire-fst",[Hm]:"fire-fst-compat","fire-js":"fire-js",[Km]:"fire-js-all"};var Pr=new Map,bs=new Map;function Xm(t,e){try{t.container.addComponent(e)}catch(n){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Nt(t){let e=t.name;if(bs.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;bs.set(e,t);for(let n of Pr.values())Xm(n,t);return!0}function Fn(t,e){return t.container.getProvider(e)}var Qm={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Mr=new Un("app","Firebase",Qm);var Bc=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app-exp",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}};var Dt=Gm;function Es(t,e={}){typeof e!="object"&&(e={name:e});let n=Object.assign({name:qc,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Mr.create("bad-app-name",{appName:String(r)});if(Pr.has(r))throw Mr.create("duplicate-app",{appName:r});let i=new ym(r);for(let o of bs.values())i.addComponent(o);let s=new Bc(t,n,i);return Pr.set(r,s),s}function Ur(t=qc){let e=Pr.get(t);if(!e)throw Mr.create("no-app",{appName:t});return e}function ft(t,e,n){var r;let i=(r=Wm[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(a.join(" "));return}Nt(new ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Ym(t){Nt(new ut("platform-logger",e=>new $c(e),"PRIVATE")),ft(jc,Im,t),ft("fire-js","")}Ym();var Jm="firebase-exp",Zm="9.0.0-beta.2";ft(Jm,Zm,"app");var eg={apiKey:"AIzaSyDWiDgqYUOUq1tsA8C5zY3eJR170KRa3qA",authDomain:"finanzas-cfeb0.firebaseapp.com",projectId:"finanzas-cfeb0",storageBucket:"finanzas-cfeb0.appspot.com",messagingSenderId:"245107666949",appId:"1:245107666949:web:f8bac696fa6a205541ac6c",measurementId:"G-LR1WRTGGG2"},Yb=Es(eg);function tg(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var zc=new Un("auth","Firebase",tg());var Hc=new Vn("@firebase/auth-exp");function xr(t,...e){Hc.logLevel<=Q.ERROR&&Hc.error(`Auth (${Dt}): ${t}`,...e)}function et(t,...e){throw Ts(t,...e)}function rn(t,...e){return Ts(t,...e)}function Ts(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zc.create(t,...e)}function j(t,e,...n){if(!t)throw Ts(e,...n)}function tt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw xr(e),new Error(e)}function dt(t,e){t||tt(e)}var Kc=new Map;function nt(t){dt(t instanceof Function,"Expected a class definition");let e=Kc.get(t);return e?(dt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Kc.set(t,e),e)}function ng(t,e){let n=Fn(t,"auth-exp");if(n.isInitialized()){let i=n.getImmediate();et(i,"already-initialized")}return n.initialize({options:e})}function rg(t,e){let n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(nt);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Is(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ig(){return Gc()==="http:"||Gc()==="https:"}function Gc(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function sg(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ig()||Dr()||"connection"in navigator)?navigator.onLine:!0}function og(){if(typeof navigator=="undefined")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var sn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,dt(n>e,"Short delay should be less than long delay!"),this.isMobile=Nr()||Or()}get(){return sg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ks(t,e){dt(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Vr=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ag={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"};var cg=new sn(3e4,6e4);function lg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fr(t,e,n,r,i={}){return Wc(t,i,()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=nn(Object.assign({key:t.config.apiKey},o)).slice(1),c=new(Vr.headers());return c.set("Content-Type","application/json"),c.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&c.set("X-Firebase-Locale",t.languageCode),Vr.fetch()(Xc(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function Wc(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},ag),e);try{let i=new Qc(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Ss(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=(s.ok?o.errorMessage:o.error.message).split(" : ")[0];if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ss(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ss(t,"email-already-in-use",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");et(t,l)}}catch(i){if(i instanceof xn)throw i;et(t,"network-request-failed")}}async function ug(t,e,n,r,i={}){let s=await Fr(t,e,n,r,i);return"mfaPendingCredential"in s&&et(t,"multi-factor-auth-required",{serverResponse:s}),s}function Xc(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?ks(t.config,i):`${t.config.apiScheme}://${i}`}var Qc=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rn(this.auth,"timeout")),cg.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ss(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=rn(t,e,r);return i.customData._tokenResponse=n,i}async function hg(t,e){return Fr(t,"POST","/v1/accounts:delete",e)}async function fg(t,e){return Fr(t,"POST","/v1/accounts:lookup",e)}function $n(t){if(!!t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function dg(t,e=!1){let n=Ve(t),r=await n.getIdToken(e),i=Cs(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:$n(As(i.auth_time)),issuedAtTime:$n(As(i.iat)),expirationTime:$n(As(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function As(t){return Number(t)*1e3}function Cs(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xr("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mc(n);return i?JSON.parse(i):(xr("Failed to decode base64 JWT payload"),null)}catch(i){return xr("Caught error parsing JWT payload as JSON",i),null}}function pg(t){let e=Cs(t);return j(e,"internal-error"),j(typeof e.exp!="undefined","internal-error"),j(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}async function jn(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof xn&&mg(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mg({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Yc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Rs=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$n(this.lastLoginAt),this.creationTime=$n(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function $r(t){var e;let n=t.auth,r=await t.getIdToken(),i=await jn(t,fg(n,{idToken:r}));j(i==null?void 0:i.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?vg(s.providerUserInfo):[],a=gg(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(a==null?void 0:a.length),u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Rs(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function yg(t){let e=Ve(t);await $r(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gg(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vg(t){return t.map(e=>{var{providerId:n}=e,r=Cr(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function _g(t,e){let n=await Wc(t,{},()=>{let r=nn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Xc(t,i,"/v1/token",`key=${s}`);return Vr.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}var on=class{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken!="undefined","internal-error"),j(typeof e.refreshToken!="undefined","internal-error");let n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):pg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return j(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:s}=await _g(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new on;return r&&(j(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(j(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(j(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new on,this.toJSON())}_performRefresh(){return tt("not implemented")}};function pt(t,e){j(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}var mt=class{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Cr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Yc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.metadata=new Rs(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let n=await jn(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dg(this,e)}reload(){return yg(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new mt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $r(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await jn(this,hg(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,d=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,p=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,D=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:R,isAnonymous:A,providerData:L,stsTokenManager:ie}=n;j(_&&ie,e,"internal-error");let _e=on.fromJSON(this.name,ie);j(typeof _=="string",e,"internal-error"),pt(h,e.name),pt(f,e.name),j(typeof R=="boolean",e,"internal-error"),j(typeof A=="boolean",e,"internal-error"),pt(d,e.name),pt(m,e.name),pt(p,e.name),pt(g,e.name),pt(v,e.name),pt(D,e.name);let ce=new mt({uid:_,auth:e,email:f,emailVerified:R,displayName:h,isAnonymous:A,photoURL:m,phoneNumber:d,tenantId:p,stsTokenManager:_e,createdAt:v,lastLoginAt:D});return L&&Array.isArray(L)&&(ce.providerData=L.map(Yi=>Object.assign({},Yi))),g&&(ce._redirectEventId=g),ce}static async _fromIdTokenResponse(e,n,r=!1){let i=new on;i.updateFromServerResponse(n);let s=new mt({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await $r(s),s}};var Ns=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){let n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};Ns.type="NONE";var Jc=Ns;function jr(t,e,n){return`firebase:${t}:${e}:${n}`}var an=class{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=jr(this.userKey,i.apiKey,s),this.fullPersistenceKey=jr("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?mt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new an(nt(Jc),e,r);let i=nt(Jc);for(let a of n)if(await a._isAvailable()){i=a;break}let s=null,o=jr(r,e.config.apiKey,e.name);for(let a of n)try{let c=await a._get(o);if(c){let l=mt._fromJSON(e,c);a!==i&&(s=l);break}}catch(c){}return s&&await i._set(o,s.toJSON()),await Promise.all(n.map(async a=>{if(a!==i)try{await a._remove(o)}catch(c){}})),new an(i,e,r)}};function sl(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tl(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zc(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rl(e))return"Blackberry";if(il(e))return"Webos";if(Ds(e))return"Safari";if((e.includes("chrome/")||el(e))&&!e.includes("edge/"))return"Chrome";if(nl(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Zc(t=de()){return/firefox\//i.test(t)}function Ds(t=de()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function el(t=de()){return/crios\//i.test(t)}function tl(t=de()){return/iemobile/i.test(t)}function nl(t=de()){return/android/i.test(t)}function rl(t=de()){return/blackberry/i.test(t)}function il(t=de()){return/webos/i.test(t)}function qr(t=de()){return/iphone|ipad|ipod/i.test(t)}function wg(t=de()){var e;return qr(t)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function bg(){return Lr()&&document.documentMode===10}function ol(t=de()){return qr(t)||nl(t)||il(t)||rl(t)||/windows phone/i.test(t)||tl(t)}function Eg(){try{return!!(window&&window!==window.top)}catch(t){return!1}}function al(t,e=[]){let n;switch(t){case"Browser":n=sl(de());break;case"Worker":n=`${sl(de())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Dt}/${r}`}var cl=class{constructor(e,n){this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Os(this),this.idTokenSubscription=new Os(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.redirectInitializerError=null,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zc,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nt(n)),this._initializationPromise=this.queue(async()=>{var r;this._deleted||(this.persistenceManager=await an.create(this,e),!this._deleted&&(((r=this._popupRedirectResolver)===null||r===void 0?void 0:r._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(n),!this._deleted&&(this._isInitialized=!0)))}),this._initializationPromise.then(()=>{if(this.redirectInitializerError)throw this.redirectInitializerError})}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var n;let r=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=r==null?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===s)&&(o==null?void 0:o.user)&&(r=o.user)}return r?r._redirectEventId?(j(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)):this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){this.redirectInitializerError=r,await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $r(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=og()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let n=e?Ve(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(nt(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Un("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&nt(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=await an.create(this,[nt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next,o=this._isInitialized?Promise.resolve():this._initializationPromise;return j(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=al(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}};function Ls(t){return Ve(t)}var Os=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fc(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ps=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tt("not implemented")}_getIdTokenResponse(e){return tt("not implemented")}_linkToIdToken(e,n){return tt("not implemented")}_getReauthenticationResolver(e){return tt("not implemented")}};async function cn(t,e){return ug(t,"POST","/v1/accounts:signInWithIdp",lg(t,e))}var Tg="http://localhost",qn=class extends Ps{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){let n=new qn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):et("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Cr(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new qn(r,i);return Object.assign(o,s),o}_getIdTokenResponse(e){let n=this.buildRequest();return cn(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,cn(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,cn(e,n)}buildRequest(){let e={requestUri:Tg,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nn(n)}return e}};var Br=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ms=class extends Br{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var He=class extends Ms{constructor(){super("google.com");this.addScope("profile")}static credential(e,n){return qn._fromParams({providerId:He.PROVIDER_ID,signInMethod:He.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return He.credentialFromTaggedObject(e)}static credentialFromError(e){return He.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return He.credential(n,r)}catch(i){return null}}};He.GOOGLE_SIGN_IN_METHOD="google.com";He.PROVIDER_ID="google.com";var Ot=class{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let s=await mt._fromIdTokenResponse(e,r,i),o=ll(r);return new Ot({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=ll(r);return new Ot({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function ll(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Bn=class extends xn{constructor(e,n,r,i){var s;super(n.code,n.message);this.operationType=r,this.user=i,this.name="FirebaseError",Object.setPrototypeOf(this,Bn.prototype),this.appName=e.name,this.code=n.code,this.tenantId=(s=e.tenantId)!==null&&s!==void 0?s:void 0,this.serverResponse=n.customData.serverResponse}static _fromErrorAndOperation(e,n,r,i){return new Bn(e,n,r,i)}};function ul(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bn._fromErrorAndOperation(t,s,e,r):s})}async function Ig(t,e,n=!1){let r=await jn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ot._forOperation(t,"link",r)}async function kg(t,e,n=!1){let{auth:r}=t,i="reauthenticate";try{let s=await jn(t,ul(r,i,e,t),n);j(s.idToken,r,"internal-error");let o=Cs(s.idToken);j(o,r,"internal-error");let{sub:a}=o;return j(t.uid===a,r,"user-mismatch"),Ot._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&et(r,"user-mismatch"),s}}async function Sg(t,e,n=!1){let r="signIn",i=await ul(t,r,e),s=await Ot._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function hl(t,e,n,r){return Ve(t).onAuthStateChanged(e,n,r)}function fl(t){return Ve(t).signOut()}var Ag="@firebase/auth-exp",Cg="0.0.900-exp.d92a36260";var dl=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{var i;e(((i=r)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Rg(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Ng(t){Nt(new ut("auth-exp",(e,{options:n})=>{let r=e.getProvider("app-exp").getImmediate(),{apiKey:i,authDomain:s}=r.options;return(o=>{j(i&&!i.includes(":"),"invalid-api-key",{appName:o.name}),j(!(s==null?void 0:s.includes(":")),"argument-error",{appName:o.name});let a={apiKey:i,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:al(t)},c=new cl(o,a);return rg(c,n),c})(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Nt(new ut("auth-internal",e=>{let n=Ls(e.getProvider("auth-exp").getImmediate());return(r=>new dl(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ft(Ag,Cg,Rg(t))}var zr="__sak";var Us=class{constructor(e,n){this.storage=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zr,"1"),this.storage.removeItem(zr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}};function Dg(){let t=de();return Ds(t)||qr(t)}var Og=1e3,Lg=10,xs=class extends Us{constructor(){super(window.localStorage,"LOCAL");this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Dg()&&Eg(),this.fallbackToPolling=ol(),this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}let r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}let i=()=>{let o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bg()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Lg):i()}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Og)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){let n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}};xs.type="LOCAL";var Pg=xs;function Mg(t){return Promise.all(t.map(async e=>{try{let n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}var zn=class{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;let r=new zn(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o==null?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});let a=Array.from(o).map(async l=>l(n.origin,s)),c=await Mg(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};zn.receivers=[];function Ug(t="",e=20){return`${t}${Math.floor(Math.random()*Math.pow(10,e))}`}var pl=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=Ug();i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function We(){return window}function xg(t){We().location.href=t}function ml(){return typeof We().WorkerGlobalScope!="undefined"&&typeof We().importScripts=="function"}async function Vg(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function Fg(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $g(){return ml()?self:null}var gl="firebaseLocalStorageDb",jg=1,Hr="firebaseLocalStorage",vl="fbase_key",ln=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Kr(t,e){return t.transaction([Hr],e?"readwrite":"readonly").objectStore(Hr)}function qg(){let t=indexedDB.deleteDatabase(gl);return new ln(t).toPromise()}function Vs(){let t=indexedDB.open(gl,jg);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Hr,{keyPath:vl})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;if(r.objectStoreNames.contains(Hr))e(r);else return await qg(),Vs()})})}async function yl(t,e,n){let r=Kr(t,!0).put({[vl]:e,value:n});return new ln(r).toPromise()}async function Bg(t,e){let n=Kr(t,!1).get(e),r=await new ln(n).toPromise();return r===void 0?null:r.value}function _l(t,e){let n=Kr(t,!0).delete(e);return new ln(n).toPromise()}var zg=800,Hg=3,Fs=class{constructor(){this.type="LOCAL",this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vs(),this.db)}async _withRetries(e){let n=0;for(;;)try{let r=await this._openDb();return await e(r)}catch(r){if(n++>Hg)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ml()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zn._getInstance($g()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Vg(),!this.activeServiceWorker)return;this.sender=new pl(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Fg()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Vs();return await yl(e,zr,"1"),await _l(e,zr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yl(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){let n=await this._withRetries(r=>Bg(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_l(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(i=>{let s=Kr(i,!1).getAll();return new ln(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;for(let{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(let i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zg)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Fs.type="LOCAL";var Kg=Fs;var Gg=10*60*1e3,wl=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Wg(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!El(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(rn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gg&&this.cachedEventUids.clear(),this.cachedEventUids.has(bl(e))}saveEventToCache(e){this.cachedEventUids.add(bl(e)),this.lastProcessedEventTime=Date.now()}};function bl(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function El({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Wg(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return El(t);default:return!1}}function Xg(t){return`${t||""}${Math.floor(Math.random()*1e9)}`}async function Qg(t){return Fr(t,"GET","/v1/projects",{})}var Yg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jg=/^https?/;async function ev(t){if(t.config.emulator)return;let{authorizedDomains:e}=await Qg(t);for(let n of e)try{if(Zg(n))return}catch(r){}et(t,"unauthorized-domain")}function Zg(t){let e=Is(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Jg.test(n))return!1;if(Yg.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}function tv(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function nv(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n,r.type="text/javascript",r.charset="UTF-8",tv().appendChild(r)})}function rv(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var iv=new sn(3e4,6e4);function Tl(){let t=We().___jsl;if(t==null?void 0:t.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sv(t){return new Promise((e,n)=>{var r,i,s;function o(){Tl(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tl(),n(rn(t,"network-request-failed"))},timeout:iv.get()})}if((i=(r=We().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0?void 0:i.Iframe)e(gapi.iframes.getContext());else if((s=We().gapi)===null||s===void 0?void 0:s.load)o();else{let a=rv("iframefcb");return We()[a]=()=>{gapi.load?o():n(rn(t,"network-request-failed"))},nv(`https://apis.google.com/js/api.js?onload=${a}`)}}).catch(e=>{throw Gr=null,e})}var Gr=null;function ov(t){return Gr=Gr||sv(t),Gr}var av=new sn(5e3,15e3),cv="__/auth/iframe",lv="emulator/auth/iframe",uv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},hv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fv(t){let e=t.config;j(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?ks(e,lv):`https://${t.config.authDomain}/${cv}`,r={apiKey:e.apiKey,appName:t.name,v:Dt},i=hv.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${nn(r).slice(1)}`}async function dv(t){let e=await ov(t),n=We().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:fv(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uv,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=rn(t,"network-request-failed"),a=We().setTimeout(()=>{s(o)},av.get());function c(){We().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var $s=class extends Us{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}};$s.type="SESSION";var pv=$s;var mv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gv=500,vv=600,yv="_blank",_v="http://localhost",js=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}};function bv(t,e,n,r=gv,i=vv){let s=Math.min((window.screen.availHeight-i)/2,0).toString(),o=Math.min((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},mv),{width:r.toString(),height:i.toString(),top:s,left:o}),l=de().toLowerCase();n&&(a=el(l)?yv:n),Zc(l)&&(e=e||_v,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[d,m])=>`${f}${d}=${m},`,"");if(wg(l)&&a!=="_self")return wv(e||"",a),new js(null);let h=window.open(e||"",a,u);j(h,t,"popup-blocked");try{h.focus()}catch(f){}return new js(h)}function wv(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}function Il(t,e){return e?nt(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Wr=class extends Ps{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return cn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cn(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Ev(t){return Sg(t.auth,new Wr(t),t.bypassAuthState)}function Tv(t){let{auth:e,user:n}=t;return j(n,e,"internal-error"),kg(n,new Wr(t),t.bypassAuthState)}async function Iv(t){let{auth:e,user:n}=t;return j(n,e,"internal-error"),Ig(n,new Wr(t),t.bypassAuthState)}var kl=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ev;case"linkViaPopup":case"linkViaRedirect":return Iv;case"reauthViaPopup":case"reauthViaRedirect":return Tv;default:et(this.auth,"internal-error")}}resolve(e){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var kv="pendingRedirect",Sl=new Map,Al=class extends kl{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r);this.eventId=null}async execute(){let e=Sl.get(this.auth._key());if(!e){try{let r=await Sv(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sl.set(this.auth._key(),e)}return e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Sv(t,e){let n=Cl(e),r=await qs(t)._get(n)==="true";return await qs(t)._remove(n),r}async function Av(t,e){return qs(t)._set(Cl(e),"true")}function qs(t){return nt(t._redirectPersistence)}function Cl(t){return jr(kv,t.config.apiKey,t.name)}function Rl(t,e,n){return Cv(t,e,n)}async function Cv(t,e,n){let r=Ls(t);j(e instanceof Br,t,"argument-error");let i=Il(r,n);return await Av(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Rv(t,e,n=!1){let r=Ls(t),i=Il(r,e),o=await new Al(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var Nv="__/auth/handler",Dv="emulator/auth/handler";function Nl(t,e,n,r,i,s){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Dt,eventId:i};if(e instanceof Br){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Vc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[c,l]of Object.entries(s||{}))o[c]=l}if(e instanceof Ms){let c=e.getScopes().filter(l=>l!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let c of Object.keys(a))a[c]===void 0&&delete a[c];return`${Ov(t)}?${nn(a).slice(1)}`}function Ov({config:t}){return t.emulator?ks(t,Dv):`https://${t.authDomain}/${Nv}`}var Bs="webStorageSupport",Dl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pv,this._completeRedirectFn=Rv}async _openPopup(e,n,r,i){var s;dt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=Nl(e,n,r,Is(),i);return bv(e,o,Xg())}async _openRedirect(e,n,r,i){return await this._originValidation(e),xg(Nl(e,n,r,Is(),i)),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(dt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r}async initAndGetManager(e){let n=await dv(e),r=new wl(e);return n.register("authEvent",i=>(j(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bs,{type:Bs},i=>{var s;let o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Bs];o!==void 0&&n(!!o),et(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ev(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ol()||Ds()||qr()}},Lv=Dl,eE=new sn(3e4,6e4);var tE=new sn(2e3,1e4);function Ol(t=Ur()){let e=Fn(t,"auth-exp");return e.isInitialized()?e.getImmediate():ng(t,{popupRedirectResolver:Lv,persistence:[Kg,Pg]})}Ng("Browser");var Xr=typeof Xr!="undefined"?Xr:typeof self!="undefined"?self:typeof window!="undefined"?window:{};var zs=function(t,e){return zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},zs(t,e)};function Pv(t,e){zs(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Ll(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Mv=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Xr!="undefined"?Xr:typeof self!="undefined"?self:{},O,Hs=Hs||{},q=Mv||self;function Qr(){}function Ks(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Hn(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function xv(t){return Object.prototype.hasOwnProperty.call(t,Gs)&&t[Gs]||(t[Gs]=++Uv)}var Gs="closure_uid_"+(1e9*Math.random()>>>0),Uv=0;function Vv(t,e,n){return t.call.apply(t.bind,arguments)}function Fv(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Se(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Se=Vv:Se=Fv,Se.apply(null,arguments)}function Yr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Xe(){return Date.now()}function Re(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function gt(){this.j=this.j,this.i=this.i}var $v=0;gt.prototype.j=!1;gt.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),$v!=0))var t=xv(this)};gt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Pl=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ml=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=typeof t=="string"?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function qv(t){e:{for(var e=jv,n=t.length,r=typeof t=="string"?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function Ul(t){return Array.prototype.concat.apply([],arguments)}function Ws(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Jr(t){return/^[\s\xa0]*$/.test(t)}var xl=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ne(t,e){return t.indexOf(e)!=-1}function Xs(t,e){return t<e?-1:t>e?1:0}var De;e:{if(Qs=q.navigator,Qs&&(Ys=Qs.userAgent,Ys)){De=Ys;break e}De=""}var Qs,Ys;function Js(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Vl(t){var e={};for(var n in t)e[n]=t[n];return e}var Fl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $l(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var s=0;s<Fl.length;s++)n=Fl[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Zs(t){return Zs[" "](t),t}Zs[" "]=Qr;function zv(t,e){var n=Bv;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Hv=Ne(De,"Opera"),vt=Ne(De,"Trident")||Ne(De,"MSIE"),jl=Ne(De,"Edge"),eo=jl||vt,ql=Ne(De,"Gecko")&&!(Ne(De.toLowerCase(),"webkit")&&!Ne(De,"Edge"))&&!(Ne(De,"Trident")||Ne(De,"MSIE"))&&!Ne(De,"Edge"),Kv=Ne(De.toLowerCase(),"webkit")&&!Ne(De,"Edge");function Bl(){var t=q.document;return t?t.documentMode:void 0}var Zr;e:{if(ei="",ti=function(){var t=De;if(ql)return/rv:([^\);]+)(\)|;)/.exec(t);if(jl)return/Edge\/([\d\.]+)/.exec(t);if(vt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Kv)return/WebKit\/(\S+)/.exec(t);if(Hv)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),ti&&(ei=ti?ti[1]:""),vt&&(ni=Bl(),ni!=null&&ni>parseFloat(ei))){Zr=String(ni);break e}Zr=ei}var ei,ti,ni,Bv={};function zl(t){return zv(t,function(){for(var e=0,n=xl(String(Zr)).split("."),r=xl(String(t)).split("."),i=Math.max(n.length,r.length),s=0;e==0&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o[0].length==0&&a[0].length==0)break;e=Xs(o[1].length==0?0:parseInt(o[1],10),a[1].length==0?0:parseInt(a[1],10))||Xs(o[2].length==0,a[2].length==0)||Xs(o[2],a[2]),o=o[3],a=a[3]}while(e==0)}return 0<=e})}var to;q.document&&vt?(no=Bl(),to=no||parseInt(Zr,10)||void 0):to=void 0;var no,Hl=to,ro=!vt||9<=Number(Hl),Gv=vt&&!zl("9"),Wv=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{q.addEventListener("test",Qr,e),q.removeEventListener("test",Qr,e)}catch(n){}return t}();function Ae(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}Ae.prototype.b=function(){this.defaultPrevented=!0};function Kn(t,e){if(Ae.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ql){e:{try{Zs(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Xv[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Re(Kn,Ae);var Xv={2:"touch",3:"pen",4:"mouse"};Kn.prototype.b=function(){Kn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Gv)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Gn="closure_listenable_"+(1e6*Math.random()|0),Qv=0;function Yv(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Qv,this.Y=this.Z=!1}function ri(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ii(t){this.src=t,this.a={},this.b=0}ii.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.a[s],t||(t=this.a[s]=[],this.b++);var o=io(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):(e=new Yv(e,this.src,s,!!r,i),e.Z=n,t.push(e)),e};function so(t,e){var n=e.type;if(n in t.a){var r=t.a[n],i=Pl(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ri(e),t.a[n].length==0&&(delete t.a[n],t.b--))}}function io(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.ca==r)return i}return-1}var oo="closure_lm_"+(1e6*Math.random()|0),ao={};function co(t,e,n,r,i){if(r&&r.once)return Gl(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)co(t,e[s],n,r,i);return null}return n=lo(n),t&&t[Gn]?t.va(e,n,Hn(r)?!!r.capture:!!r,i):Kl(t,e,n,!1,r,i)}function Kl(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Hn(i)?!!i.capture:!!i;if(o&&!ro)return null;var a=uo(t);if(a||(t[oo]=a=new ii(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=Jv(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Wv||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Wl(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Jv(){var t=Zv,e=ro?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function Gl(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Gl(t,e[s],n,r,i);return null}return n=lo(n),t&&t[Gn]?t.wa(e,n,Hn(r)?!!r.capture:!!r,i):Kl(t,e,n,!0,r,i)}function Xl(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Xl(t,e[s],n,r,i);else r=Hn(r)?!!r.capture:!!r,n=lo(n),t&&t[Gn]?(t=t.c,e=String(e).toString(),e in t.a&&(s=t.a[e],n=io(s,n,r,i),-1<n&&(ri(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.a[e],t.b--)))):t&&(t=uo(t))&&(e=t.a[e.toString()],t=-1,e&&(t=io(e,n,r,i)),(n=-1<t?e[t]:null)&&ho(n))}function ho(t){if(typeof t!="number"&&t&&!t.Y){var e=t.src;if(e&&e[Gn])so(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Wl(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=uo(e))?(so(n,t),n.b==0&&(n.src=null,e[oo]=null)):ri(t)}}}function Wl(t){return t in ao?ao[t]:ao[t]="on"+t}function Ql(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ho(t),n.call(r,e)}function Zv(t,e){if(t.Y)return!0;if(!ro){if(!e)e:{e=["window","event"];for(var n=q,r=0;r<e.length;r++)if(n=n[e[r]],n==null){e=null;break e}e=n}return e=new Kn(e,this),Ql(t,e)}return Ql(t,new Kn(e,this))}function uo(t){return t=t[oo],t instanceof ii?t:null}var fo="__closure_events_fn_"+(1e9*Math.random()>>>0);function lo(t){return typeof t=="function"?t:(t[fo]||(t[fo]=function(e){return t.handleEvent(e)}),t[fo])}function Fe(){gt.call(this),this.c=new ii(this),this.J=this,this.C=null}Re(Fe,gt);Fe.prototype[Gn]=!0;O=Fe.prototype;O.addEventListener=function(t,e,n,r){co(this,t,e,n,r)};O.removeEventListener=function(t,e,n,r){Xl(this,t,e,n,r)};function Ee(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,typeof e=="string")e=new Ae(e,t);else if(e instanceof Ae)e.target=e.target||t;else{var i=e;e=new Ae(r,t),$l(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=si(o,r,!0,e)&&i}if(o=e.a=t,i=si(o,r,!0,e)&&i,i=si(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.a=n[s],i=si(o,r,!1,e)&&i}O.G=function(){if(Fe.X.G.call(this),this.c){var t=this.c,e;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)ri(n[r]);delete t.a[e],t.b--}}this.C=null};O.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)};O.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};function si(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,c=o.ca||o.src;o.Z&&so(t.c,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var po=q.JSON.stringify;function Yl(){this.b=this.a=null}var Jl=new(function(){function t(e,n){this.c=e,this.f=n,this.b=0,this.a=null}return t.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},t}())(function(){return new mo},function(t){t.reset()});Yl.prototype.add=function(t,e){var n=Jl.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n};function ey(){var t=Zl,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function mo(){this.next=this.b=this.a=null}mo.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};mo.prototype.reset=function(){this.next=this.b=this.a=null};function ty(t){q.setTimeout(function(){throw t},0)}function eu(t,e){go||ny(),vo||(go(),vo=!0),Zl.add(t,e)}var go;function ny(){var t=q.Promise.resolve(void 0);go=function(){t.then(ry)}}var vo=!1,Zl=new Yl;function ry(){for(var t;t=ey();){try{t.a.call(t.b)}catch(n){ty(n)}var e=Jl;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}vo=!1}function oi(t,e){Fe.call(this),this.b=t||1,this.a=e||q,this.f=Se(this.Za,this),this.g=Xe()}Re(oi,Fe);O=oi.prototype;O.aa=!1;O.M=null;O.Za=function(){if(this.aa){var t=Xe()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ee(this,"tick"),this.aa&&(yo(this),this.start()))}};O.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Xe())};function yo(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}O.G=function(){oi.X.G.call(this),yo(this),delete this.a};function _o(t,e,n){if(typeof t=="function")n&&(t=Se(t,n));else if(t&&typeof t.handleEvent=="function")t=Se(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:q.setTimeout(t,e||0)}function tu(t){t.a=_o(function(){t.a=null,t.c&&(t.c=!1,tu(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}var iy=function(t){Pv(e,t);function e(n,r){var i=t.call(this)||this;return i.g=n,i.h=r,i.b=null,i.c=!1,i.a=null,i}return e.prototype.f=function(n){this.b=arguments,this.a?this.c=!0:tu(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(q.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(gt);function Wn(t){gt.call(this),this.b=t,this.a={}}Re(Wn,gt);var nu=[];function ru(t,e,n,r){Array.isArray(n)||(n&&(nu[0]=n.toString()),n=nu);for(var i=0;i<n.length;i++){var s=co(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function iu(t){Js(t.a,function(e,n){this.a.hasOwnProperty(n)&&ho(e)},t),t.a={}}Wn.prototype.G=function(){Wn.X.G.call(this),iu(this)};Wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wo(){this.a=!0}function sy(t,e,n,r,i,s){t.info(function(){if(t.a)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function oy(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function un(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+ay(t,n)+(r?" "+r:"")})}function cy(t,e){t.info(function(){return"TIMEOUT: "+e})}wo.prototype.info=function(){};function ay(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return po(n)}catch(a){return e}}var Lt={},su=null;function ai(){return su=su||new Fe}Lt.Fa="serverreachability";function ou(t){Ae.call(this,Lt.Fa,t)}Re(ou,Ae);function Xn(t){var e=ai();Ee(e,new ou(e,t))}Lt.STAT_EVENT="statevent";function au(t,e){Ae.call(this,Lt.STAT_EVENT,t),this.stat=e}Re(au,Ae);function Oe(t){var e=ai();Ee(e,new au(e,t))}Lt.Ga="timingevent";function cu(t){Ae.call(this,Lt.Ga,t)}Re(cu,Ae);function Qn(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){t()},e)}var ci={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},lu={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function uu(){}uu.prototype.a=null;function hu(t){var e;return(e=t.a)||(e=t.a={}),e}function fu(){}var Yn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function bo(){Ae.call(this,"d")}Re(bo,Ae);function Eo(){Ae.call(this,"c")}Re(Eo,Ae);var du;function pu(){}Re(pu,uu);du=new pu;function Jn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Wn(this),this.P=ly,t=eo?125:void 0,this.R=new oi(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}var ly=45e3,mu={},To={};O=Jn.prototype;O.setTimeout=function(t){this.P=t};function Io(t,e,n){t.H=1,t.i=li(rt(e)),t.j=n,t.I=!0,gu(t,null)}function gu(t,e){t.u=Xe(),Zn(t),t.l=rt(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),vu(n.b,"t",r),t.D=0,t.a=yu(t.g,t.g.C?e:null),0<t.O&&(t.F=new iy(Se(t.Ca,t,t.a),t.O)),ru(t.J,t.a,"readystatechange",t.Xa),e=t.B?Vl(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Xn(1),sy(t.c,t.m,t.l,t.f,t.S,t.j)}O.Xa=function(t){t=t.target;var e=this.F;e&&yt(t)==3?e.f():this.Ca(t)};O.Ca=function(t){try{if(t==this.a)e:{var e=yt(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||e==3&&!eo&&!this.a.$())){this.A||e!=4||n==7||(n==8||0>=r?Xn(3):Xn(2)),ui(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=i==200,oy(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){t:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jr(o)){var c=o;break t}}c=null}if(c)un(this.c,this.f,c,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ko(this,c);else{this.b=!1,this.h=3,Oe(12),hn(this),hi(this);break e}}this.I?(_u(this,e,s),eo&&this.b&&e==3&&(ru(this.J,this.R,"tick",this.Wa),this.R.start())):(un(this.c,this.f,s,null),ko(this,s)),e==4&&hn(this),this.b&&!this.A&&(e==4?wu(this.g,this):(this.b=!1,Zn(this)))}else i==400&&0<s.indexOf("Unknown SID")?(this.h=3,Oe(12)):(this.h=0,Oe(13)),hn(this),hi(this)}}}catch(l){}finally{}};function _u(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=uy(t,n);if(i==To){e==4&&(t.h=4,Oe(14),r=!1),un(t.c,t.f,null,"[Incomplete Response]");break}else if(i==mu){t.h=4,Oe(15),un(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}else un(t.c,t.f,i,null),ko(t,i)}e==4&&n.length==0&&(t.h=1,Oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,e=t.g,e.a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),So(e),e.F=!0,Oe(11))):(un(t.c,t.f,n,"[Invalid Chunked Response]"),hn(t),hi(t))}O.Wa=function(){if(this.a){var t=yt(this.a),e=this.a.$();this.D<e.length&&(ui(this),_u(this,t,e),this.b&&t!=4&&Zn(this))}};function uy(t,e){var n=t.D,r=e.indexOf(`
`,n);return r==-1?To:(n=Number(e.substring(n,r)),isNaN(n)?mu:(r+=1,r+n>e.length?To:(e=e.substr(r,n),t.D=r+n,e)))}O.cancel=function(){this.A=!0,hn(this)};function Zn(t){t.T=Xe()+t.P,bu(t,t.P)}function bu(t,e){if(t.o!=null)throw Error("WatchDog timer not null");t.o=Qn(Se(t.Va,t),e)}function ui(t){t.o&&(q.clearTimeout(t.o),t.o=null)}O.Va=function(){this.o=null;var t=Xe();0<=t-this.T?(cy(this.c,this.l),this.H!=2&&(Xn(3),Oe(17)),hn(this),this.h=2,hi(this)):bu(this,this.T-t)};function hi(t){t.g.v==0||t.A||wu(t.g,t)}function hn(t){ui(t);var e=t.F;e&&typeof e.ja=="function"&&e.ja(),t.F=null,yo(t.R),iu(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ko(t,e){try{var n=t.g;if(n.v!=0&&(n.a==t||Ao(n.b,t))){if(n.I=t.N,!t.C&&Ao(n.b,t)&&n.v==3){try{var r=n.ka.a.parse(e)}catch(g){r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0)e:if(!n.j){if(n.a)if(n.a.u+3e3<t.u)pi(n),fi(n);else break e;No(n),Oe(18)}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&n.o==0&&!n.m&&(n.m=Qn(Se(n.Sa,n),6e3));if(1>=Eu(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else Pt(n,11)}else if((t.C||n.a==t)&&pi(n),!Jr(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],n.v==2)if(i[0]=="c"){n.J=i[1],n.ga=i[2];var s=i[3];s!=null&&(n.ha=s,n.c.info("VER="+n.ha));var o=i[4];o!=null&&(n.pa=o,n.c.info("SVER="+n.pa));var a=i[5];if(a!=null&&typeof a=="number"&&0<a){var c=1.5*a;n.D=c,n.c.info("backChannelRequestTimeoutMs_="+c)}c=n;var l=t.a;if(l){var u=l.a?l.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var h=c.b;!h.a&&(Ne(u,"spdy")||Ne(u,"quic")||Ne(u,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Co(h,h.b),h.b=null))}if(c.A){var f=l.a?l.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(c.na=f,re(c.B,c.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Xe()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),c=n;var d=t;if(c.la=ku(c,c.C?c.ga:null,c.fa),d.C){Tu(c.b,d);var m=d,p=c.D;p&&m.setTimeout(p),m.o&&(ui(m),Zn(m)),c.a=d}else Iu(c);0<n.g.length&&di(n)}else i[0]!="stop"&&i[0]!="close"||Pt(n,7);else n.v==3&&(i[0]=="stop"||i[0]=="close"?i[0]=="stop"?Pt(n,7):Ro(n):i[0]!="noop"&&n.f&&n.f.sa(i),n.o=0)}Xn(4)}catch(g){}}function hy(t){if(t.K&&typeof t.K=="function")return t.K();if(typeof t=="string")return t.split("");if(Ks(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return t=e}function Do(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ks(t)||typeof t=="string")Ml(t,e,void 0);else{if(t.L&&typeof t.L=="function")var n=t.L();else if(t.K&&typeof t.K=="function")n=void 0;else if(Ks(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=hy(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function fn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof fn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}O=fn.prototype;O.K=function(){Oo(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t};O.L=function(){return Oo(this),this.a.concat()};function Oo(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Mt(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Mt(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}O.get=function(t,e){return Mt(this.b,t)?this.b[t]:e};O.set=function(t,e){Mt(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e};O.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function Mt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Su=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fy(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ut(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ut){this.a=e!==void 0?e:t.a,mi(this,t.f),this.j=t.j,gi(this,t.c),vi(this,t.h),this.g=t.g,e=t.b;var n=new tr;n.c=e.c,e.a&&(n.a=new fn(e.a),n.b=e.b),Au(this,n),this.i=t.i}else t&&(n=String(t).match(Su))?(this.a=!!e,mi(this,n[1]||"",!0),this.j=er(n[2]||""),gi(this,n[3]||"",!0),vi(this,n[4]),this.g=er(n[5]||"",!0),Au(this,n[6]||"",!0),this.i=er(n[7]||"")):(this.a=!!e,this.b=new tr(null,this.a))}Ut.prototype.toString=function(){var t=[],e=this.f;e&&t.push(nr(e,Cu,!0),":");var n=this.c;return(n||e=="file")&&(t.push("//"),(e=this.j)&&t.push(nr(e,Cu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,n!=null&&t.push(":",String(n))),(n=this.g)&&(this.c&&n.charAt(0)!="/"&&t.push("/"),t.push(nr(n,n.charAt(0)=="/"?py:dy,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",nr(n,my)),t.join("")};function rt(t){return new Ut(t)}function mi(t,e,n){t.f=n?er(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function gi(t,e,n){t.c=n?er(e,!0):e}function vi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Au(t,e,n){e instanceof tr?(t.b=e,vy(t.b,t.a)):(n||(e=nr(e,gy)),t.b=new tr(e,t.a))}function re(t,e,n){t.b.set(e,n)}function li(t){return re(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Xe()).toString(36)),t}function yy(t){return t instanceof Ut?rt(t):new Ut(t,void 0)}function _y(t,e,n,r){var i=new Ut(null,void 0);return t&&mi(i,t),e&&gi(i,e),n&&vi(i,n),r&&(i.g=r),i}function er(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function nr(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,wy),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function wy(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Cu=/[#\/\?@]/g,dy=/[#\?:]/g,py=/[#\?]/g,gy=/[#\?@]/g,my=/#/g;function tr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function _t(t){t.a||(t.a=new fn,t.b=0,t.c&&fy(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}O=tr.prototype;O.add=function(t,e){_t(this),this.c=null,t=dn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this};function Ru(t,e){_t(t),e=dn(t,e),Mt(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Mt(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Oo(t)))}function Nu(t,e){return _t(t),e=dn(t,e),Mt(t.a.b,e)}O.forEach=function(t,e){_t(this),this.a.forEach(function(n,r){Ml(n,function(i){t.call(e,i,r,this)},this)},this)};O.L=function(){_t(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};O.K=function(t){_t(this);var e=[];if(typeof t=="string")Nu(this,t)&&(e=Ul(e,this.a.get(dn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ul(e,t[n])}return e};O.set=function(t,e){return _t(this),this.c=null,t=dn(this,t),Nu(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this};O.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e};function vu(t,e,n){Ru(t,e),0<n.length&&(t.c=null,t.a.set(dn(t,e),Ws(n)),t.b+=n.length)}O.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};function dn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function vy(t,e){e&&!t.f&&(_t(t),t.c=null,t.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Ru(this,r),vu(this,i,n))},t)),t.f=e}var by=function(){function t(e,n){this.b=e,this.a=n}return t}();function Du(t){this.g=t||Ey,q.PerformanceNavigationTiming?(t=q.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(q.ia&&q.ia.ya&&q.ia.ya()&&q.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ey=10;function Ou(t){return t.b?!0:t.a?t.a.size>=t.f:!1}function Eu(t){return t.b?1:t.a?t.a.size:0}function Ao(t,e){return t.b?t.b==e:t.a?t.a.has(e):!1}function Co(t,e){t.a?t.a.add(e):t.b=e}function Tu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}Du.prototype.cancel=function(){var t,e;if(this.c=Lu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&this.a.size!==0){try{for(var n=Ll(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}};function Lu(t){var e,n;if(t.b!=null)return t.c.concat(t.b.s);if(t.a!=null&&t.a.size!==0){var r=t.c;try{for(var i=Ll(t.a.values()),s=i.next();!s.done;s=i.next()){var o=s.value;r=r.concat(o.s)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ws(t.c)}function Lo(){}Lo.prototype.stringify=function(t){return q.JSON.stringify(t,void 0)};Lo.prototype.parse=function(t){return q.JSON.parse(t,void 0)};function Ty(){this.a=new Lo}function Iy(t,e,n){var r=n||"";try{Do(t,function(i,s){var o=i;Hn(i)&&(o=po(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ky(t,e){var n=new wo;if(q.Image){var r=new Image;r.onload=Yr(yi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Yr(yi,n,r,"TestLoadImage: error",!1,e),r.onabort=Yr(yi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yr(yi,n,r,"TestLoadImage: timeout",!1,e),q.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function yi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}var Sy=q.JSON.parse;function pe(t){Fe.call(this),this.headers=new fn,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ay,this.D=this.F=!1}Re(pe,Fe);var Ay="",Cy=/^https?$/i,Ry=["POST","PUT"];O=pe.prototype;O.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?hu(this.H):hu(du),this.a.onreadystatechange=Se(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(s){Pu(this,s);return}t=n||"";var i=new fn(this.headers);r&&Do(r,function(s,o){i.set(o,s)}),r=qv(i.L()),n=q.FormData&&t instanceof q.FormData,!(0<=Pl(Ry,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.a.setRequestHeader(o,s)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Mu(this),0<this.o&&((this.D=Ny(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Se(this.xa,this)):this.m=_o(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(s){Pu(this,s)}};function Ny(t){return vt&&zl(9)&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function jv(t){return t.toLowerCase()=="content-type"}O.xa=function(){typeof Hs!="undefined"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ee(this,"timeout"),this.abort(8))};function Pu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Uu(t),_i(t)}function Uu(t){t.u||(t.u=!0,Ee(t,"complete"),Ee(t,"error"))}O.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ee(this,"complete"),Ee(this,"abort"),_i(this))};O.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_i(this,!0)),pe.X.G.call(this)};O.za=function(){this.j||(this.A||this.l||this.g?xu(this):this.Ua())};O.Ua=function(){xu(this)};function xu(t){if(t.b&&typeof Hs!="undefined"&&(!t.s[1]||yt(t)!=4||t.W()!=2)){if(t.l&&yt(t)==4)_o(t.za,0,t);else if(Ee(t,"readystatechange"),yt(t)==4){t.b=!1;try{{var e=t.W();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=e===0){var s=String(t.B).match(Su)[1]||null;if(!s&&q.self&&q.self.location){var o=q.self.location.protocol;s=o.substr(0,o.length-1)}i=!Cy.test(s?s.toLowerCase():"")}r=i}var a=r}if(a)Ee(t,"complete"),Ee(t,"success");else{t.h=6;try{var c=2<yt(t)?t.a.statusText:""}catch(l){c=""}t.f=c+" ["+t.W()+"]",Uu(t)}}finally{_i(t)}}}}function _i(t,e){if(t.a){Mu(t);var n=t.a,r=t.s[0]?Qr:null;t.a=null,t.s=null,e||Ee(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Mu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(q.clearTimeout(t.m),t.m=null)}function yt(t){return t.a?t.a.readyState:0}O.W=function(){try{return 2<yt(this)?this.a.status:-1}catch(t){return-1}};O.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}};O.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Sy(e)}};O.ua=function(){return this.h};O.Qa=function(){return typeof this.f=="string"?this.f:String(this.f)};function Dy(t){var e="";return Js(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Po(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dy(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):re(t,e,n))}function rr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Vu(t){this.pa=0,this.g=[],this.c=new wo,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=rr("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=rr("baseRetryDelayMs",5e3,t),this.Ra=rr("retryDelaySeedMs",1e4,t),this.Ma=rr("forwardChannelMaxRetries",2,t),this.ma=rr("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Du(t&&t.concurrentRequestLimit),this.ka=new Ty,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}O=Vu.prototype;O.ha=8;O.v=1;function Ro(t){if(Fu(t),t.v==3){var e=t.R++,n=rt(t.B);re(n,"SID",t.J),re(n,"RID",e),re(n,"TYPE","terminate"),ir(t,n),e=new Jn(t,t.c,e,void 0),e.H=2,e.i=li(rt(n)),n=!1,q.navigator&&q.navigator.sendBeacon&&(n=q.navigator.sendBeacon(e.i.toString(),"")),!n&&q.Image&&(new Image().src=e.i,n=!0),n||(e.a=yu(e.g,null),e.a.ba(e.i)),e.u=Xe(),Zn(e)}$u(t)}function fi(t){t.a&&(So(t),t.a.cancel(),t.a=null)}function Fu(t){fi(t),t.j&&(q.clearTimeout(t.j),t.j=null),pi(t),t.b.cancel(),t.h&&(typeof t.h=="number"&&q.clearTimeout(t.h),t.h=null)}function Mo(t,e){t.g.push(new by(t.Oa++,e)),t.v==3&&di(t)}function di(t){Ou(t.b)||t.h||(t.h=!0,eu(t.Ba,t),t.u=0)}function Oy(t,e){return Eu(t.b)>=t.b.f-(t.h?1:0)?!1:t.h?(t.g=e.s.concat(t.g),!0):t.v==1||t.v==2||t.u>=(t.La?0:t.Ma)?!1:(t.h=Qn(Se(t.Ba,t,e),ju(t,t.u)),t.u++,!0)}O.Ba=function(t){if(this.h)if(this.h=null,this.v==1){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e=new Jn(this,this.c,t,void 0),n=this.l;this.O&&(n?(n=Vl(n),$l(n,this.O)):n=this.O),this.i===null&&(e.B=n);var r;if(this.da)e:{for(var i=r=0;i<this.g.length;i++){t:{var s=this.g[i];if("__data__"in s.a&&(s=s.a.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.g.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Bu(this,e,r),i=rt(this.B),re(i,"RID",t),re(i,"CVER",22),this.A&&re(i,"X-HTTP-Session-Id",this.A),ir(this,i),this.i&&n&&Po(i,this.i,n),Co(this.b,e),this.Ia&&re(i,"TYPE","init"),this.da?(re(i,"$req",r),re(i,"SID","null"),e.U=!0,Io(e,i,null)):Io(e,i,r),this.v=2}}else this.v==3&&(t?qu(this,t):this.g.length==0||Ou(this.b)||qu(this))};function qu(t,e){var n;e?n=e.f:n=t.R++;var r=rt(t.B);re(r,"SID",t.J),re(r,"RID",n),re(r,"AID",t.P),ir(t,r),t.i&&t.l&&Po(r,t.i,t.l),n=new Jn(t,t.c,n,t.u+1),t.i===null&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Bu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Co(t.b,n),Io(n,r,e)}function ir(t,e){t.f&&Do({},function(n,r){re(e,r,n)})}function Bu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Se(t.f.Ja,t.f,t):null;e:for(var i=t.g,s=-1;;){var o=["count="+n];s==-1?0<n?(s=i[0].b,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,c=0;c<n;c++){var l=i[c].b,u=i[c].a;if(l-=s,0>l)s=Math.max(0,i[c].b-100),a=!1;else try{Iy(u,o,"req"+l+"_")}catch(h){r&&r(u)}}if(a){r=o.join("&");break e}}return t=t.g.splice(0,n),e.s=t,r}function Iu(t){t.a||t.j||(t.T=1,eu(t.Aa,t),t.o=0)}function No(t){return t.a||t.j||3<=t.o?!1:(t.T++,t.j=Qn(Se(t.Aa,t),ju(t,t.o)),t.o++,!0)}O.Aa=function(){if(this.j=null,zu(this),this.U&&!(this.F||this.a==null||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Qn(Se(this.Ta,this),t)}};O.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Oe(10),fi(this),zu(this))};function So(t){t.s!=null&&(q.clearTimeout(t.s),t.s=null)}function zu(t){t.a=new Jn(t,t.c,"rpc",t.T),t.i===null&&(t.a.B=t.l),t.a.O=0;var e=rt(t.la);re(e,"RID","rpc"),re(e,"SID",t.J),re(e,"CI",t.H?"0":"1"),re(e,"AID",t.P),ir(t,e),re(e,"TYPE","xmlhttp"),t.i&&t.l&&Po(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=li(rt(e)),n.j=null,n.I=!0,gu(n,t)}O.Sa=function(){this.m!=null&&(this.m=null,fi(this),No(this),Oe(19))};function pi(t){t.m!=null&&(q.clearTimeout(t.m),t.m=null)}function wu(t,e){var n=null;if(t.a==e){pi(t),So(t),t.a=null;var r=2}else if(Ao(t.b,e))n=e.s,Tu(t.b,e),r=1;else return;if(t.I=e.N,t.v!=0){if(e.b)if(r==1){n=e.j?e.j.length:0,e=Xe()-e.u;var i=t.u;r=ai(),Ee(r,new cu(r,n,e,i)),di(t)}else Iu(t);else if(i=e.h,i==3||i==0&&0<t.I||!(r==1&&Oy(t,e)||r==2&&No(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Pt(t,5);break;case 4:Pt(t,10);break;case 3:Pt(t,6);break;default:Pt(t,2)}}}function ju(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Pt(t,e){if(t.c.info("Error code "+e),e==2){var n=null;t.f&&(n=null);var r=Se(t.Ya,t);n||(n=new Ut("//www.google.com/images/cleardot.gif"),q.location&&q.location.protocol=="http"||mi(n,"https"),li(n)),ky(n.toString(),r)}else Oe(2);t.v=0,t.f&&t.f.ra(e),$u(t),Fu(t)}O.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Oe(2)):(this.c.info("Failed to ping google.com"),Oe(1))};function $u(t){t.v=0,t.I=-1,t.f&&((Lu(t.b).length!=0||t.g.length!=0)&&(t.b.c.length=0,Ws(t.g),t.g.length=0),t.f.qa())}function ku(t,e,n){var r=yy(n);if(r.c!="")e&&gi(r,e+"."+r.c),vi(r,r.h);else{var i=q.location;r=_y(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Js(t.V,function(s,o){re(r,o,s)}),e=t.A,n=t.na,e&&n&&re(r,e,n),re(r,"VER",t.ha),ir(t,r),r}function yu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new pe(t.Na),e.F=t.C,e}function Hu(){}O=Hu.prototype;O.ta=function(){};O.sa=function(){};O.ra=function(){};O.qa=function(){};O.Ja=function(){};function wi(){if(vt&&!(10<=Number(Hl)))throw Error("Environmental error: no available transport.")}wi.prototype.a=function(t,e){return new $e(t,e)};function $e(t,e){Fe.call(this),this.a=new Vu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Jr(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jr(e)&&(this.a.A=e,t=this.b,t!==null&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new pn(this)}Re($e,Fe);$e.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Oe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=ku(t,null,t.fa),di(t)};$e.prototype.close=function(){Ro(this.a)};$e.prototype.h=function(t){if(typeof t=="string"){var e={};e.__data__=t,Mo(this.a,e)}else this.l?(e={},e.__data__=po(t),Mo(this.a,e)):Mo(this.a,t)};$e.prototype.G=function(){this.a.f=null,delete this.f,Ro(this.a),delete this.a,$e.X.G.call(this)};function Ku(t){bo.call(this);var e=t.__sm__;if(e){e:{for(var n in e){t=n;break e}t=void 0}(this.c=t)?(t=this.c,this.data=e!==null&&t in e?e[t]:void 0):this.data=e}else this.data=t}Re(Ku,bo);function Gu(){Eo.call(this),this.status=1}Re(Gu,Eo);function pn(t){this.a=t}Re(pn,Hu);pn.prototype.ta=function(){Ee(this.a,"a")};pn.prototype.sa=function(t){Ee(this.a,new Ku(t))};pn.prototype.ra=function(t){Ee(this.a,new Gu(t))};pn.prototype.qa=function(){Ee(this.a,"b")};wi.prototype.createWebChannel=wi.prototype.a;$e.prototype.send=$e.prototype.h;$e.prototype.open=$e.prototype.g;$e.prototype.close=$e.prototype.close;ci.NO_ERROR=0;ci.TIMEOUT=8;ci.HTTP_ERROR=6;lu.COMPLETE="complete";fu.EventType=Yn;Yn.OPEN="a";Yn.CLOSE="b";Yn.ERROR="c";Yn.MESSAGE="d";Fe.prototype.listen=Fe.prototype.va;pe.prototype.listenOnce=pe.prototype.wa;pe.prototype.getLastError=pe.prototype.Qa;pe.prototype.getLastErrorCode=pe.prototype.ua;pe.prototype.getStatus=pe.prototype.W;pe.prototype.getResponseJson=pe.prototype.Pa;pe.prototype.getResponseText=pe.prototype.$;pe.prototype.send=pe.prototype.ba;var Ly=function(){return new wi},Py=function(){return ai()},Uo=ci,My=lu,Uy=Lt,Wu={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},bi=fu,xy=pe;var mn="8.6.1";var Ei=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.t(r),this.i=r=>n.writeSequenceNumber(r))}t(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.i&&this.i(e),e}};Ei.o=-1;var T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xt=new Vn("@firebase/firestore");function Xu(){return xt.logLevel}function P(t,...e){if(xt.logLevel<=Q.DEBUG){let n=e.map(xo);xt.debug(`Firestore (${mn}): ${t}`,...n)}}function wt(t,...e){if(xt.logLevel<=Q.ERROR){let n=e.map(xo);xt.error(`Firestore (${mn}): ${t}`,...n)}}function Qu(t,...e){if(xt.logLevel<=Q.WARN){let n=e.map(xo);xt.warn(`Firestore (${mn}): ${t}`,...n)}}function xo(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}function z(t="Unexpected state"){let e=`FIRESTORE (${mn}) INTERNAL ASSERTION FAILED: `+t;throw wt(e),new Error(e)}function ee(t,e){t||z()}function H(t,e){return t}function Vy(t){let e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Vo=class{static u(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Vy(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Z(t,e){return t<e?-1:t>e?1:0}function gn(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Pe=class{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Pe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new Pe(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};function Yu(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ti(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ju(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var vn=class{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(),r===void 0?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vn.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof vn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},te=class extends vn{construct(e,n,r){return new te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(T.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new te(n)}static emptyPath(){return new te([])}},Fy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ce=class extends vn{construct(e,n,r){return new Ce(e,n,r)}static isValidIdentifier(e){return Fy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ce.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ce(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new V(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new V(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ce(n)}static emptyPath(){return new Ce([])}};var Ii=class{constructor(e){this.fields=e,e.sort(Ce.comparator)}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gn(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Te=class{constructor(e){this.binaryString=e}static fromBase64String(e){let n=atob(e);return new Te(n)}static fromUint8Array(e){let n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Te(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Te.EMPTY_BYTE_STRING=new Te("");var $y=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bt(t){if(ee(!!t),typeof t=="string"){let e=0,n=$y.exec(t);if(ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:le(t.seconds),nanos:le(t.nanos)}}function le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yn(t){return typeof t=="string"?Te.fromBase64String(t):Te.fromUint8Array(t)}function Zu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function eh(t){let e=t.mapValue.fields.__previous_value__;return Zu(e)?eh(e):e}function sr(t){let e=bt(t.mapValue.fields.__local_write_time__.timestampValue);return new Pe(e.seconds,e.nanos)}function _n(t){return t==null}function ki(t){return t===0&&1/t==-1/0}function jy(t){return typeof t=="number"&&Number.isInteger(t)&&!ki(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var F=class{constructor(e){this.path=e}static fromPath(e){return new F(te.fromString(e))}static fromName(e){return new F(te.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new te(e.slice()))}};function Et(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zu(t)?4:10:z()}function Qe(t,e){let n=Et(t);if(n!==Et(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sr(t).isEqual(sr(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;let s=bt(r.timestampValue),o=bt(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return yn(r.bytesValue).isEqual(yn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return le(r.geoPointValue.latitude)===le(i.geoPointValue.latitude)&&le(r.geoPointValue.longitude)===le(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return le(r.integerValue)===le(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){let s=le(r.doubleValue),o=le(i.doubleValue);return s===o?ki(s)===ki(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return gn(t.arrayValue.values||[],e.arrayValue.values||[],Qe);case 10:return function(r,i){let s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Yu(s)!==Yu(o))return!1;for(let a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Qe(s[a],o[a])))return!1;return!0}(t,e);default:return z()}}function or(t,e){return(t.values||[]).find(n=>Qe(n,e))!==void 0}function wn(t,e){let n=Et(t),r=Et(e);if(n!==r)return Z(n,r);switch(n){case 0:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(i,s){let o=le(i.integerValue||i.doubleValue),a=le(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return th(t.timestampValue,e.timestampValue);case 4:return th(sr(t),sr(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(i,s){let o=yn(i),a=yn(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){let o=i.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){let l=Z(o[c],a[c]);if(l!==0)return l}return Z(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){let o=Z(le(i.latitude),le(s.latitude));return o!==0?o:Z(le(i.longitude),le(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){let o=i.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){let l=wn(o[c],a[c]);if(l)return l}return Z(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){let o=i.fields||{},a=Object.keys(o),c=s.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){let h=Z(a[u],l[u]);if(h!==0)return h;let f=wn(o[a[u]],c[l[u]]);if(f!==0)return f}return Z(a.length,l.length)}(t.mapValue,e.mapValue);default:throw z()}}function th(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);let n=bt(t),r=bt(e),i=Z(n.seconds,r.seconds);return i!==0?i:Z(n.nanos,r.nanos)}function $o(t){return Fo(t)}function Fo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){let i=bt(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?yn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,F.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(let o of r.values||[])s?s=!1:i+=",",i+=Fo(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){let i=Object.keys(r.fields||{}).sort(),s="{",o=!0;for(let a of i)o?o=!1:s+=",",s+=`${a}:${Fo(r.fields[a])}`;return s+"}"}(t.mapValue):z();var e,n}function jo(t){return!!t&&"integerValue"in t}function qo(t){return!!t&&"arrayValue"in t}function nh(t){return!!t&&"nullValue"in t}function rh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bo(t){return!!t&&"mapValue"in t}var Me=class{constructor(e){this.overlayMap=new Map,this.partialValue=e}static empty(){return new Me({mapValue:{}})}field(e){return Me.extractNestedValue(this.buildProto(),e)}toProto(){return this.field(Ce.emptyPath())}set(e,n){this.setOverlay(e,n)}setAll(e){e.forEach((n,r)=>{n?this.set(r,n):this.delete(r)})}delete(e){this.setOverlay(e,null)}isEqual(e){return Qe(this.buildProto(),e.buildProto())}setOverlay(e,n){let r=this.overlayMap;for(let i=0;i<e.length-1;++i){let s=e.get(i),o=r.get(s);o instanceof Map?r=o:o&&Et(o)===10?(o=new Map(Object.entries(o.mapValue.fields||{})),r.set(s,o),r=o):(o=new Map,r.set(s,o),r=o)}r.set(e.lastSegment(),n)}applyOverlay(e,n){let r=!1,i=Me.extractNestedValue(this.partialValue,e),s=Bo(i)?Object.assign({},i.mapValue.fields):{};return n.forEach((o,a)=>{if(o instanceof Map){let c=this.applyOverlay(e.child(a),o);c!=null&&(s[a]=c,r=!0)}else o!==null?(s[a]=o,r=!0):s.hasOwnProperty(a)&&(delete s[a],r=!0)}),r?{mapValue:{fields:s}}:null}buildProto(){let e=this.applyOverlay(Ce.emptyPath(),this.overlayMap);return e!=null&&(this.partialValue=e,this.overlayMap.clear()),this.partialValue}static extractNestedValue(e,n){if(n.isEmpty())return e;{let r=e;for(let i=0;i<n.length-1;++i)if(!r.mapValue.fields||(r=r.mapValue.fields[n.get(i)],!Bo(r)))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}clone(){return new Me(this.buildProto())}};function ih(t){let e=[];return Ti(t.fields||{},(n,r)=>{let i=new Ce([n]);if(Bo(r)){let s=ih(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ii(e)}var Ie=class{constructor(e,n,r,i,s){this.key=e,this.documentType=n,this.version=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new Ie(e,0,Y.min(),Me.empty(),0)}static newFoundDocument(e,n,r){return new Ie(e,1,n,r,0)}static newNoDocument(e,n){return new Ie(e,2,n,Me.empty(),0)}static newUnknownDocument(e,n){return new Ie(e,3,n,Me.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Me.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ie&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Ie(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.toProto())}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var sh=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.h=null}};function oh(t,e=null,n=[],r=[],i=null,s=null,o=null){return new sh(t,e,n,r,i,s,o)}function zo(t){let e=H(t);if(e.h===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_n(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Si(e.startAt)),e.endAt&&(n+="|ub:",n+=Si(e.endAt)),e.h=n}return e.h}function By(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${$o(r.value)}`;var r}).join(", ")}]`),_n(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+Si(t.startAt)),t.endAt&&(e+=", endAt: "+Si(t.endAt)),`Target(${e})`}function Ho(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!zy(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Qe(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ah(t.startAt,e.startAt)&&ah(t.endAt,e.endAt)}function Ko(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Le=class extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.l(e,n,r):new ch(e,n,r):n==="array-contains"?new hh(e,r):n==="in"?new fh(e,r):n==="not-in"?new dh(e,r):n==="array-contains-any"?new ph(e,r):new Le(e,n,r)}static l(e,n,r){return n==="in"?new lh(e,r):new uh(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.m(wn(n,this.value)):n!==null&&Et(this.value)===Et(n)&&this.m(wn(n,this.value))}m(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}g(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}};function qy(t){return t.field.canonicalString()+t.op.toString()+$o(t.value)}var ch=class extends Le{constructor(e,n,r){super(e,n,r),this.key=F.fromName(r.referenceValue)}matches(e){let n=F.comparator(e.key,this.key);return this.m(n)}},lh=class extends Le{constructor(e,n){super(e,"in",n),this.keys=mh("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},uh=class extends Le{constructor(e,n){super(e,"not-in",n),this.keys=mh("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function mh(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>F.fromName(r.referenceValue))}var hh=class extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return qo(n)&&or(n.arrayValue,this.value)}},fh=class extends Le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&or(this.value.arrayValue,n)}},dh=class extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(or(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!or(this.value.arrayValue,n)}},ph=class extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!qo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>or(this.value.arrayValue,r))}},Ai=class{constructor(e,n){this.position=e,this.before=n}};function Si(t){return`${t.before?"b":"a"}:${t.position.map(e=>$o(e)).join(",")}`}var bn=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function zy(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function gh(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=F.comparator(F.fromName(o.referenceValue),n.key):r=wn(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function ah(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qe(t.position[n],e.position[n]))return!1;return!0}var ar=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt}};function Hy(t,e,n,r,i,s,o,a){return new ar(t,e,n,r,i,s,o,a)}function Go(t){return new ar(t)}function Ci(t){return!_n(t.limit)&&t.limitType==="F"}function Wo(t){return!_n(t.limit)&&t.limitType==="L"}function Ky(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Gy(t){for(let e of t.filters)if(e.g())return e.field;return null}function Wy(t){return t.collectionGroup!==null}function cr(t){let e=H(t);if(e.p===null){e.p=[];let n=Gy(e),r=Ky(e);if(n!==null&&r===null)n.isKeyField()||e.p.push(new bn(n)),e.p.push(new bn(Ce.keyField(),"asc"));else{let i=!1;for(let s of e.explicitOrderBy)e.p.push(s),s.field.isKeyField()&&(i=!0);if(!i){let s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new bn(Ce.keyField(),s))}}}return e.p}function Vt(t){let e=H(t);if(!e.T)if(e.limitType==="F")e.T=oh(e.path,e.collectionGroup,cr(e),e.filters,e.limit,e.startAt,e.endAt);else{let n=[];for(let s of cr(e)){let o=s.dir==="desc"?"asc":"desc";n.push(new bn(s.field,o))}let r=e.endAt?new Ai(e.endAt.position,!e.endAt.before):null,i=e.startAt?new Ai(e.startAt.position,!e.startAt.before):null;e.T=oh(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.T}function Xy(t,e,n){return new ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ri(t,e){return Ho(Vt(t),Vt(e))&&t.limitType===e.limitType}function vh(t){return`${zo(Vt(t))}|lt:${t.limitType}`}function Xo(t){return`Query(target=${By(Vt(t))}; limitType=${t.limitType})`}function Ni(t,e){return e.isFoundDocument()&&function(n,r){let i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):F.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(let i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(let i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!gh(n.startAt,cr(n),r)||n.endAt&&gh(n.endAt,cr(n),r))}(t,e)}function yh(t){return(e,n)=>{let r=!1;for(let i of cr(t)){let s=Qy(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Qy(t,e,n){let r=t.field.isKeyField()?F.comparator(e.key,n.key):function(i,s,o){let a=s.data.field(i),c=o.data.field(i);return a!==null&&c!==null?wn(a,c):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}function _h(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ki(e)?"-0":e}}function wh(t){return{integerValue:""+t}}function Yy(t,e){return jy(e)?wh(e):_h(t,e)}var lr=class{constructor(){this._=void 0}};function Jy(t,e,n){return t instanceof ur?function(r,i){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof En?Eh(t,e):t instanceof Tn?Th(t,e):function(r,i){let s=bh(r,i),o=Ih(s)+Ih(r.A);return jo(s)&&jo(r.A)?wh(o):_h(r.R,o)}(t,e)}function Zy(t,e,n){return t instanceof En?Eh(t,e):t instanceof Tn?Th(t,e):n}function bh(t,e){return t instanceof hr?jo(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}var ur=class extends lr{},En=class extends lr{constructor(e){super(),this.elements=e}};function Eh(t,e){let n=kh(e);for(let r of t.elements)n.some(i=>Qe(i,r))||n.push(r);return{arrayValue:{values:n}}}var Tn=class extends lr{constructor(e){super(),this.elements=e}};function Th(t,e){let n=kh(e);for(let r of t.elements)n=n.filter(i=>!Qe(i,r));return{arrayValue:{values:n}}}var hr=class extends lr{constructor(e,n){super(),this.R=e,this.A=n}};function Ih(t){return le(t.integerValue||t.doubleValue)}function kh(t){return qo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function e_(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof En&&r instanceof En||n instanceof Tn&&r instanceof Tn?gn(n.elements,r.elements,Qe):n instanceof hr&&r instanceof hr?Qe(n.A,r.A):n instanceof ur&&r instanceof ur}(t.transform,e.transform)}var Sh=class{constructor(e,n){this.version=e,this.transformResults=n}},Ft=class{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ft}static exists(e){return new Ft(void 0,e)}static updateTime(e){return new Ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Di(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var fr=class{};function t_(t,e,n){t instanceof dr?function(r,i,s){let o=r.value.clone(),a=Ch(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof $t?function(r,i,s){if(!Di(r.precondition,i))return void i.convertToUnknownDocument(s.version);let o=Ch(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(Ah(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Qo(t,e,n){t instanceof dr?function(r,i,s){if(!Di(r.precondition,i))return;let o=r.value.clone(),a=Nh(r.fieldTransforms,s,i);o.setAll(a),i.convertToFoundDocument(Rh(i),o).setHasLocalMutations()}(t,e,n):t instanceof $t?function(r,i,s){if(!Di(r.precondition,i))return;let o=Nh(r.fieldTransforms,s,i),a=i.data;a.setAll(Ah(r)),a.setAll(o),i.convertToFoundDocument(Rh(i),a).setHasLocalMutations()}(t,e,n):function(r,i){Di(r.precondition,i)&&i.convertToNoDocument(Y.min())}(t,e)}function n_(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=bh(r.transform,i||null);s!=null&&(n==null&&(n=Me.empty()),n.set(r.field,s))}return n||null}function Dh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&gn(n,r,(i,s)=>e_(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Rh(t){return t.isFoundDocument()?t.version:Y.min()}var dr=class extends fr{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}},$t=class extends fr{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}};function Ah(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Ch(t,e,n){let r=new Map;ee(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Zy(o,a,n[i]))}return r}function Nh(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Jy(s,o,e))}return r}var Oh=class extends fr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}},Lh=class extends fr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}};var Ph=class{constructor(e){this.count=e}};var ue,X;function r_(t){switch(t){case T.OK:return z();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0;default:return z()}}function Mh(t){if(t===void 0)return wt("GRPC error has no .code"),T.UNKNOWN;switch(t){case ue.OK:return T.OK;case ue.CANCELLED:return T.CANCELLED;case ue.UNKNOWN:return T.UNKNOWN;case ue.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case ue.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case ue.INTERNAL:return T.INTERNAL;case ue.UNAVAILABLE:return T.UNAVAILABLE;case ue.UNAUTHENTICATED:return T.UNAUTHENTICATED;case ue.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case ue.NOT_FOUND:return T.NOT_FOUND;case ue.ALREADY_EXISTS:return T.ALREADY_EXISTS;case ue.PERMISSION_DENIED:return T.PERMISSION_DENIED;case ue.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case ue.ABORTED:return T.ABORTED;case ue.OUT_OF_RANGE:return T.OUT_OF_RANGE;case ue.UNIMPLEMENTED:return T.UNIMPLEMENTED;case ue.DATA_LOSS:return T.DATA_LOSS;default:return z()}}(X=ue||(ue={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var ke=class{constructor(e,n){this.comparator=e,this.root=n||ve.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ve.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ve.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pr(this.root,e,this.comparator,!1)}getReverseIterator(){return new pr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pr(this.root,e,this.comparator,!0)}},pr=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ve=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ve.RED,this.left=i??ve.EMPTY,this.right=s??ve.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ve(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ve.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ve.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,ve.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,ve.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};ve.EMPTY=null,ve.RED=!0,ve.BLACK=!1;ve.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,e,n,r,i){return this}insert(t,e,n){return new ve(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ye=class{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yo(this.data.getIterator())}getIteratorFrom(e){return new Yo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ye)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new ye(this.comparator);return n.data=e,n}},Yo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var i_=new ke(F.comparator);function jt(){return i_}var s_=new ke(F.comparator);function Jo(){return s_}var o_=new ke(F.comparator);function a_(){return o_}var c_=new ye(F.comparator);function ne(...t){let e=c_;for(let n of t)e=e.add(n);return e}var l_=new ye(Z);function Uh(){return l_}var mr=class{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){let r=new Map;return r.set(e,In.createSynthesizedTargetChangeForCurrentChange(e,n)),new mr(Y.min(),r,Uh(),jt(),ne())}},In=class{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new In(Te.EMPTY_BYTE_STRING,n,ne(),ne(),ne())}};var gr=class{constructor(e,n,r,i){this.P=e,this.removedTargetIds=n,this.key=r,this.v=i}},Zo=class{constructor(e,n){this.targetId=e,this.V=n}},ea=class{constructor(e,n,r=Te.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ta=class{constructor(){this.S=0,this.D=xh(),this.C=Te.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}get current(){return this.N}get resumeToken(){return this.C}get $(){return this.S!==0}get O(){return this.k}M(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)}F(){let e=ne(),n=ne(),r=ne();return this.D.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z()}}),new In(this.C,this.N,e,n,r)}L(){this.k=!1,this.D=xh()}B(e,n){this.k=!0,this.D=this.D.insert(e,n)}U(e){this.k=!0,this.D=this.D.remove(e)}q(){this.S+=1}K(){this.S-=1}j(){this.k=!0,this.N=!0}},Vh=class{constructor(e){this.W=e,this.G=new Map,this.H=jt(),this.J=Fh(),this.Y=new ye(Z)}X(e){for(let n of e.P)e.v&&e.v.isFoundDocument()?this.Z(n,e.v):this.tt(n,e.key,e.v);for(let n of e.removedTargetIds)this.tt(n,e.key,e.v)}et(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.st(n)&&r.M(e.resumeToken);break;case 1:r.K(),r.$||r.L(),r.M(e.resumeToken);break;case 2:r.K(),r.$||this.removeTarget(n);break;case 3:this.st(n)&&(r.j(),r.M(e.resumeToken));break;case 4:this.st(n)&&(this.it(n),r.M(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.G.forEach((r,i)=>{this.st(i)&&n(i)})}rt(e){let n=e.targetId,r=e.V.count,i=this.ot(n);if(i){let s=i.target;if(Ko(s))if(r===0){let o=new F(s.path);this.tt(n,o,Ie.newNoDocument(o,Y.min()))}else ee(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}}at(e){let n=new Map;this.G.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&Ko(a.target)){let c=new F(a.target.path);this.H.get(c)!==null||this.ut(o,c)||this.tt(o,c,Ie.newNoDocument(c,e))}s.O&&(n.set(o,s.F()),s.L())}});let r=ne();this.J.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))});let i=new mr(e,n,this.Y,this.H,r);return this.H=jt(),this.J=Fh(),this.Y=new ye(Z),i}Z(e,n){if(!this.st(e))return;let r=this.ut(e,n.key)?2:0;this.nt(e).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(e))}tt(e,n,r){if(!this.st(e))return;let i=this.nt(e);this.ut(e,n)?i.B(n,1):i.U(n),this.J=this.J.insert(n,this.ht(n).delete(e)),r&&(this.H=this.H.insert(n,r))}removeTarget(e){this.G.delete(e)}ct(e){let n=this.nt(e).F();return this.W.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}q(e){this.nt(e).q()}nt(e){let n=this.G.get(e);return n||(n=new ta,this.G.set(e,n)),n}ht(e){let n=this.J.get(e);return n||(n=new ye(Z),this.J=this.J.insert(e,n)),n}st(e){let n=this.ot(e)!==null;return n||P("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.G.get(e);return n&&n.$?null:this.W.lt(e)}it(e){this.G.set(e,new ta),this.W.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}ut(e,n){return this.W.getRemoteKeysForTarget(e).has(n)}};function Fh(){return new ke(F.comparator)}function xh(){return new ke(F.comparator)}var u_=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),h_=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),$h=class{constructor(e,n){this.databaseId=e,this.I=n}};function Oi(t,e){return t.I?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jh(t,e){return t.I?e.toBase64():e.toUint8Array()}function f_(t,e){return Oi(t,e.toTimestamp())}function it(t){return ee(!!t),Y.fromTimestamp(function(e){let n=bt(e);return new Pe(n.seconds,n.nanos)}(t))}function na(t,e){return function(n){return new te(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Bh(t){let e=te.fromString(t);return ee(qh(e)),e}function ra(t,e){return na(t.databaseId,e.path)}function ia(t,e){let n=Bh(e);if(n.get(1)!==t.databaseId.projectId)throw new V(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(zh(n))}function sa(t,e){return na(t.databaseId,e)}function d_(t){let e=Bh(t);return e.length===4?te.emptyPath():zh(e)}function oa(t){return new te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zh(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Hh(t,e,n){return{name:ra(t,e),fields:n.toProto().mapValue.fields}}function p_(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.I?(ee(l===void 0||typeof l=="string"),Te.fromBase64String(l||"")):(ee(l===void 0||l instanceof Uint8Array),Te.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?T.UNKNOWN:Mh(c.code);return new V(l,c.message||"")}(o);n=new ea(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ia(t,r.document.name),s=it(r.document.updateTime),o=new Me({mapValue:{fields:r.document.fields}}),a=Ie.newFoundDocument(i,s,o),c=r.targetIds||[],l=r.removedTargetIds||[];n=new gr(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ia(t,r.document),s=r.readTime?it(r.readTime):Y.min(),o=Ie.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ia(t,r.document),s=r.removedTargetIds||[];n=new gr([],s,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let i=r.count||0,s=new Ph(i),o=r.targetId;n=new Zo(o,s)}}return n}function g_(t,e){let n;if(e instanceof dr)n={update:Hh(t,e.key,e.value)};else if(e instanceof Oh)n={delete:ra(t,e.key)};else if(e instanceof $t)n={update:Hh(t,e.key,e.data),updateMask:m_(e.fieldMask)};else{if(!(e instanceof Lh))return z();n={verify:ra(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){let o=s.transform;if(o instanceof ur)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof En)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Tn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof hr)return{fieldPath:s.field.canonicalString(),increment:o.A};throw z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:f_(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:z()}(t,e.precondition)),n}function v_(t,e){return t&&t.length>0?(ee(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?it(r.updateTime):it(i);return s.isEqual(Y.min())&&(s=it(i)),new Sh(s,r.transformResults||[])}(n,e))):[]}function y_(t,e){return{documents:[sa(t,e.path)]}}function b_(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=sa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=sa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(a){if(a.length===0)return;let c=a.map(l=>function(u){if(u.op==="=="){if(rh(u.value))return{unaryFilter:{field:kn(u.field),op:"IS_NAN"}};if(nh(u.value))return{unaryFilter:{field:kn(u.field),op:"IS_NULL"}}}else if(u.op==="!="){if(rh(u.value))return{unaryFilter:{field:kn(u.field),op:"IS_NOT_NAN"}};if(nh(u.value))return{unaryFilter:{field:kn(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kn(u.field),op:w_(u.op),value:u.value}}}(l));return c.length===1?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);i&&(n.structuredQuery.where=i);let s=function(a){if(a.length!==0)return a.map(c=>function(l){return{field:kn(l.field),direction:__(l.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let o=function(a,c){return a.I||_n(c)?c:{value:c}}(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Kh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Kh(e.endAt)),n}function E_(t){let e=d_(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ee(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=Gh(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new bn(Sn(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,_n(h)?null:h}(n.limit));let c=null;n.startAt&&(c=Wh(n.startAt));let l=null;return n.endAt&&(l=Wh(n.endAt)),Hy(e,i,o,s,a,"F",c,l)}function T_(t,e){let n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return z()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Gh(t){return t?t.unaryFilter!==void 0?[k_(t)]:t.fieldFilter!==void 0?[I_(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Gh(e)).reduce((e,n)=>e.concat(n)):z():[]}function Kh(t){return{before:t.before,values:t.position}}function Wh(t){let e=!!t.before,n=t.values||[];return new Ai(n,e)}function __(t){return u_[t]}function w_(t){return h_[t]}function kn(t){return{fieldPath:t.canonicalString()}}function Sn(t){return Ce.fromServerFormat(t.fieldPath)}function I_(t){return Le.create(Sn(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}function k_(t){switch(t.unaryFilter.op){case"IS_NAN":let e=Sn(t.unaryFilter.field);return Le.create(e,"==",{doubleValue:NaN});case"IS_NULL":let n=Sn(t.unaryFilter.field);return Le.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=Sn(t.unaryFilter.field);return Le.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=Sn(t.unaryFilter.field);return Le.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return z()}}function m_(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qh(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var S_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};var An=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var C=class{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new C((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof C?n:C.resolve(n)}catch(n){return C.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):C.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):C.reject(n)}static resolve(e){return new C((n,r)=>{n(e)})}static reject(e){return new C((n,r)=>{r(e)})}static waitFor(e){return new C((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=C.resolve(!1);for(let r of e)n=n.next(i=>i?C.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}};function vr(t){return t.name==="IndexedDbTransactionError"}var Qh=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&t_(s,e,r[i])}}applyToLocalView(e){for(let n of this.baseMutations)n.key.isEqual(e.key)&&Qo(n,e,this.localWriteTime);for(let n of this.mutations)n.key.isEqual(e.key)&&Qo(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{let r=e.get(n.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Y.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&gn(this.mutations,e.mutations,(n,r)=>Dh(n,r))&&gn(this.baseMutations,e.baseMutations,(n,r)=>Dh(n,r))}},Li=class{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length);let i=a_(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Li(e,n,r,i)}};var Tt=class{constructor(e,n,r,i,s=Y.min(),o=Y.min(),a=Te.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Tt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Tt(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Tt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}};var Yh=class{constructor(e){this.Lt=e}};function A_(t){let e=E_({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xy(e,e.limit,"L"):e}var Jh=class{constructor(){this.Bt=new Zh}addToCollectionParentIndex(e,n){return this.Bt.add(n),C.resolve()}getCollectionParents(e,n){return C.resolve(this.Bt.getEntries(n))}},Zh=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ye(te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ye(te.comparator)).toArray()}};var qt=class{constructor(e){this.Ht=e}next(){return this.Ht+=2,this.Ht}static Jt(){return new qt(0)}static Yt(){return new qt(-1)}};async function yr(t){if(t.code!==T.FAILED_PRECONDITION||t.message!==S_)throw t;P("LocalStore","Unexpectedly lost primary lease")}var Cn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n])}else this.inner[r]=[[e,n]]}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1}forEach(e){Ti(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Ju(this.inner)}};var ef=class{constructor(){this.changes=new Cn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){let n=this.changes.get(e);return n?n.readTime:Y.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:Ie.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?C.resolve(r.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var aa=class{constructor(e,n,r){this.qe=e,this._n=n,this.qt=r}mn(e,n){return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.gn(e,n,r))}gn(e,n,r){return this.qe.getEntry(e,n).next(i=>{for(let s of r)s.applyToLocalView(i);return i})}yn(e,n){e.forEach((r,i)=>{for(let s of n)s.applyToLocalView(i)})}pn(e,n){return this.qe.getEntries(e,n).next(r=>this.En(e,r).next(()=>r))}En(e,n){return this._n.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.yn(n,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return F.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(e,n.path):Wy(n)?this.In(e,n,r):this.An(e,n,r)}Tn(e,n){return this.mn(e,new F(n)).next(r=>{let i=Jo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}In(e,n,r){let i=n.collectionGroup,s=Jo();return this.qt.getCollectionParents(e,i).next(o=>C.forEach(o,a=>{let c=function(l,u){return new ar(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(i));return this.An(e,c,r).next(l=>{l.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}An(e,n,r){let i,s;return this.qe.getDocumentsMatchingQuery(e,n,r).next(o=>(i=o,this._n.getAllMutationBatchesAffectingQuery(e,n))).next(o=>(s=o,this.Rn(e,s,i).next(a=>{i=a;for(let c of s)for(let l of c.mutations){let u=l.key,h=i.get(u);h==null&&(h=Ie.newInvalidDocument(u),i=i.insert(u,h)),Qo(l,h,c.localWriteTime),h.isFoundDocument()||(i=i.remove(u))}}))).next(()=>(i.forEach((o,a)=>{Ni(n,a)||(i=i.remove(o))}),i))}Rn(e,n,r){let i=ne();for(let o of n)for(let a of o.mutations)a instanceof $t&&r.get(a.key)===null&&(i=i.add(a.key));let s=r;return this.qe.getEntries(e,i).next(o=>(o.forEach((a,c)=>{c.isFoundDocument()&&(s=s.insert(a,c))}),s))}};var Pi=class{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pn=r,this.bn=i}static vn(e,n){let r=ne(),i=ne();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Pi(e,n.fromCache,r,i)}};var tf=class{Vn(e){this.Sn=e}getDocumentsMatchingQuery(e,n,r,i){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(Y.min())?this.Dn(e,n):this.Sn.pn(e,i).next(s=>{let o=this.Cn(n,s);return(Ci(n)||Wo(n))&&this.Nn(n.limitType,o,i,r)?this.Dn(e,n):(Xu()<=Q.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xo(n)),this.Sn.getDocumentsMatchingQuery(e,n,r).next(a=>(o.forEach(c=>{a=a.insert(c.key,c)}),a)))})}Cn(e,n){let r=new ye(yh(e));return n.forEach((i,s)=>{Ni(e,s)&&(r=r.add(s))}),r}Nn(e,n,r,i){if(r.size!==n.size)return!0;let s=e==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Dn(e,n){return Xu()<=Q.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",Xo(n)),this.Sn.getDocumentsMatchingQuery(e,n,Y.min())}};var nf=class{constructor(e,n,r,i){this.persistence=e,this.xn=n,this.R=i,this.kn=new ke(Z),this.$n=new Cn(s=>zo(s),Ho),this.On=Y.min(),this._n=e.getMutationQueue(r),this.Mn=e.getRemoteDocumentCache(),this.Ue=e.getTargetCache(),this.Fn=new aa(this.Mn,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Fn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.kn))}};function C_(t,e,n,r){return new nf(t,e,n,r)}async function rf(t,e){let n=H(t),r=n._n,i=n.Fn,s=await n.persistence.runTransaction("Handle user change","readonly",o=>{let a;return n._n.getAllMutationBatches(o).next(c=>(a=c,r=n.persistence.getMutationQueue(e),i=new aa(n.Mn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(o))).next(c=>{let l=[],u=[],h=ne();for(let f of a){l.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}for(let f of c){u.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}return i.pn(o,h).next(f=>({Ln:f,removedBatchIds:l,addedBatchIds:u}))})});return n._n=r,n.Fn=i,n.xn.Vn(n.Fn),s}function R_(t,e){let n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.Mn.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){let u=c.batch,h=u.keys(),f=C.resolve();return h.forEach(d=>{f=f.next(()=>l.getEntry(a,d)).next(m=>{let p=c.docVersions.get(d);ee(p!==null),m.version.compareTo(p)<0&&(u.applyToRemoteDocument(m,c),m.isValidDocument()&&l.addEntry(m,c.commitVersion))})}),f.next(()=>o._n.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n._n.performConsistencyCheck(r)).next(()=>n.Fn.pn(r,i))})}function sf(t){let e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ue.getLastRemoteSnapshotVersion(n))}function D_(t,e){let n=H(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.Mn.newChangeBuffer({trackRemovals:!0});i=n.kn;let a=[];e.targetChanges.forEach((l,u)=>{let h=i.get(u);if(!h)return;a.push(n.Ue.removeMatchingKeys(s,l.removedDocuments,u).next(()=>n.Ue.addMatchingKeys(s,l.addedDocuments,u)));let f=l.resumeToken;if(f.approximateByteSize()>0){let d=h.withResumeToken(f,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(u,d),function(m,p,g){return ee(p.resumeToken.approximateByteSize()>0),m.resumeToken.approximateByteSize()===0||p.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(h,d,l)&&a.push(n.Ue.updateTargetData(s,d))}});let c=jt();if(e.documentUpdates.forEach((l,u)=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(N_(s,o,e.documentUpdates,r,void 0).next(l=>{c=l})),!r.isEqual(Y.min())){let l=n.Ue.getLastRemoteSnapshotVersion(s).next(u=>n.Ue.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return C.waitFor(a).next(()=>o.apply(s)).next(()=>n.Fn.En(s,c)).next(()=>c)}).then(s=>(n.kn=i,s))}function N_(t,e,n,r,i){let s=ne();return n.forEach(o=>s=s.add(o)),e.getEntries(t,s).next(o=>{let a=jt();return n.forEach((c,l)=>{let u=o.get(c),h=(i==null?void 0:i.get(c))||r;l.isNoDocument()&&l.version.isEqual(Y.min())?(e.removeEntry(c,h),a=a.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l,h),a=a.insert(c,l)):P("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),a})}function O_(t,e){let n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n._n.getNextMutationBatchAfterBatchId(r,e)))}function L_(t,e){let n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ue.getTargetData(r,e).next(s=>s?(i=s,C.resolve(i)):n.Ue.allocateTargetId(r).next(o=>(i=new Tt(e,o,0,r.currentSequenceNumber),n.Ue.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.$n.set(e,r.targetId)),r})}async function ca(t,e,n){let r=H(t),i=r.kn.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!vr(o))throw o;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.kn=r.kn.remove(e),r.$n.delete(i.target)}function of(t,e,n){let r=H(t),i=Y.min(),s=ne();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){let u=H(a),h=u.$n.get(l);return h!==void 0?C.resolve(u.kn.get(h)):u.Ue.getTargetData(c,l)}(r,o,Vt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ue.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.xn.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ne())).next(a=>({documents:a,Bn:s})))}var af=class{constructor(e){this.R=e,this.Qn=new Map,this.jn=new Map}getBundleMetadata(e,n){return C.resolve(this.Qn.get(n))}saveBundleMetadata(e,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:it(r.createTime)}),C.resolve()}getNamedQuery(e,n){return C.resolve(this.jn.get(n))}saveNamedQuery(e,n){return this.jn.set(n.name,function(r){return{name:r.name,query:A_(r.bundledQuery),readTime:it(r.readTime)}}(n)),C.resolve()}};var Mi=class{constructor(){this.Wn=new ye(me.Gn),this.zn=new ye(me.Hn)}isEmpty(){return this.Wn.isEmpty()}addReference(e,n){let r=new me(e,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)}Jn(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Yn(new me(e,n))}Xn(e,n){e.forEach(r=>this.removeReference(r,n))}Zn(e){let n=new F(new te([])),r=new me(n,e),i=new me(n,e+1),s=[];return this.zn.forEachInRange([r,i],o=>{this.Yn(o),s.push(o.key)}),s}ts(){this.Wn.forEach(e=>this.Yn(e))}Yn(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)}es(e){let n=new F(new te([])),r=new me(n,e),i=new me(n,e+1),s=ne();return this.zn.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new me(e,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},me=class{constructor(e,n){this.key=e,this.ns=n}static Gn(e,n){return F.comparator(e.key,n.key)||Z(e.ns,n.ns)}static Hn(e,n){return Z(e.ns,n.ns)||F.comparator(e.key,n.key)}};var cf=class{constructor(e,n){this.qt=e,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new ye(me.Gn)}checkEmpty(e){return C.resolve(this._n.length===0)}addMutationBatch(e,n,r,i){let s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];let o=new Qh(s,n,r,i);this._n.push(o);for(let a of i)this.rs=this.rs.add(new me(a.key,s)),this.qt.addToCollectionParentIndex(e,a.key.path.popLast());return C.resolve(o)}lookupMutationBatch(e,n){return C.resolve(this.os(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.cs(r),s=i<0?0:i;return C.resolve(this._n.length>s?this._n[s]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(this._n.length===0?-1:this.ss-1)}getAllMutationBatches(e){return C.resolve(this._n.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new me(n,0),i=new me(n,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],o=>{let a=this.os(o.ns);s.push(a)}),C.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ye(Z);return n.forEach(i=>{let s=new me(i,0),o=new me(i,Number.POSITIVE_INFINITY);this.rs.forEachInRange([s,o],a=>{r=r.add(a.ns)})}),C.resolve(this.us(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;F.isDocumentKey(s)||(s=s.child(""));let o=new me(new F(s),0),a=new ye(Z);return this.rs.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.ns)),!0)},o),C.resolve(this.us(a))}us(e){let n=[];return e.forEach(r=>{let i=this.os(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.hs(n.batchId,"removed")===0),this._n.shift();let r=this.rs;return C.forEach(n.mutations,i=>{let s=new me(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.rs=r})}Gt(e){}containsKey(e,n){let r=new me(n,0),i=this.rs.firstAfterOrEqual(r);return C.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this._n.length,C.resolve()}hs(e,n){return this.cs(e)}cs(e){return this._n.length===0?0:e-this._n[0].batchId}os(e){let n=this.cs(e);return n<0||n>=this._n.length?null:this._n[n]}};var lf=class{constructor(e,n){this.qt=e,this.ls=n,this.docs=new ke(F.comparator),this.size=0}addEntry(e,n,r){let i=n.key,s=this.docs.get(i),o=s?s.size:0,a=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:a,readTime:r}),this.size+=a-o,this.qt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return C.resolve(r?r.document.clone():Ie.newInvalidDocument(n))}getEntries(e,n){let r=jt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.clone():Ie.newInvalidDocument(i))}),C.resolve(r)}getDocumentsMatchingQuery(e,n,r){let i=jt(),s=new F(n.path.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){let{key:a,value:{document:c,readTime:l}}=o.getNext();if(!n.path.isPrefixOf(a.path))break;l.compareTo(r)<=0||Ni(n,c)&&(i=i.insert(c.key,c.clone()))}return C.resolve(i)}fs(e,n){return C.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uf(this)}getSize(e){return C.resolve(this.size)}},uf=class extends ef{constructor(e){super(),this.Ie=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?n.push(this.Ie.addEntry(e,i.document,this.getReadTime(r))):this.Ie.removeEntry(r)}),C.waitFor(n)}getFromCache(e,n){return this.Ie.getEntry(e,n)}getAllFromCache(e,n){return this.Ie.getEntries(e,n)}};var hf=class{constructor(e){this.persistence=e,this.ds=new Cn(n=>zo(n),Ho),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.ws=0,this._s=new Mi,this.targetCount=0,this.gs=qt.Jt()}forEachTarget(e,n){return this.ds.forEach((r,i)=>n(i)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.ws)}allocateTargetId(e){return this.highestTargetId=this.gs.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),C.resolve()}te(e){this.ds.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.gs=new qt(n),this.highestTargetId=n),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)}addTargetData(e,n){return this.te(n),this.targetCount+=1,C.resolve()}updateTargetData(e,n){return this.te(n),C.resolve()}removeTargetData(e,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.ds.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ds.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),C.waitFor(s).next(()=>i)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,n){let r=this.ds.get(n)||null;return C.resolve(r)}addMatchingKeys(e,n,r){return this._s.Jn(n,r),C.resolve()}removeMatchingKeys(e,n,r){this._s.Xn(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),C.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._s.Zn(n),C.resolve()}getMatchingKeysForTargetId(e,n){let r=this._s.es(n);return C.resolve(r)}containsKey(e,n){return C.resolve(this._s.containsKey(n))}};var ff=class{constructor(e,n){this.ys={},this.Ne=new Ei(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.Ue=new hf(this),this.qt=new Jh,this.qe=function(r,i){return new lf(r,i)}(this.qt,r=>this.referenceDelegate.ps(r)),this.R=new Yh(n),this.Ke=new af(this.R)}start(){return Promise.resolve()}shutdown(){return this.xe=!1,Promise.resolve()}get started(){return this.xe}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.qt}getMutationQueue(e){let n=this.ys[e.toKey()];return n||(n=new cf(this.qt,this.referenceDelegate),this.ys[e.toKey()]=n),n}getTargetCache(){return this.Ue}getRemoteDocumentCache(){return this.qe}getBundleCache(){return this.Ke}runTransaction(e,n,r){P("MemoryPersistence","Starting transaction:",e);let i=new df(this.Ne.next());return this.referenceDelegate.Es(),r(i).next(s=>this.referenceDelegate.Ts(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Is(e,n){return C.or(Object.values(this.ys).map(r=>()=>r.containsKey(e,n)))}},df=class extends Xh{constructor(e){super(),this.currentSequenceNumber=e}},Ui=class{constructor(e){this.persistence=e,this.As=new Mi,this.Rs=null}static Ps(e){return new Ui(e)}get bs(){if(this.Rs)return this.Rs;throw z()}addReference(e,n,r){return this.As.addReference(r,n),this.bs.delete(r.toString()),C.resolve()}removeReference(e,n,r){return this.As.removeReference(r,n),this.bs.add(r.toString()),C.resolve()}markPotentiallyOrphaned(e,n){return this.bs.add(n.toString()),C.resolve()}removeTarget(e,n){this.As.Zn(n.targetId).forEach(i=>this.bs.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.bs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Es(){this.Rs=new Set}Ts(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.bs,r=>{let i=F.fromPath(r);return this.vs(e,i).next(s=>{s||n.removeEntry(i)})}).next(()=>(this.Rs=null,n.apply(e)))}updateLimboDocument(e,n){return this.vs(e,n).next(r=>{r?this.bs.delete(n.toString()):this.bs.add(n.toString())})}ps(e){return 0}vs(e,n){return C.or([()=>C.resolve(this.As.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Is(e,n)])}};var je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};je.UNAUTHENTICATED=new je(null),je.GOOGLE_CREDENTIALS=new je("google-credentials-uid"),je.FIRST_PARTY=new je("first-party-uid");var la=class{constructor(){this.activeTargetIds=Uh()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}Cs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},pf=class{constructor(){this.li=new la,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.li.Ds(e),this.fi[e]||"not-current"}updateQueryState(e,n,r){this.fi[e]=n}removeLocalQueryTarget(e){this.li.Cs(e)}isLocalQueryTarget(e){return this.li.activeTargetIds.has(e)}clearQueryState(e){delete this.fi[e]}getAllActiveQueryTargets(){return this.li.activeTargetIds}isActiveQueryTarget(e){return this.li.activeTargetIds.has(e)}start(){return this.li=new la,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}};var mf=class{di(e){}shutdown(){}};var ua=class{constructor(){this.wi=()=>this._i(),this.mi=()=>this.gi(),this.yi=[],this.pi()}di(e){this.yi.push(e)}shutdown(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)}pi(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)}_i(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.yi)e(0)}gi(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.yi)e(1)}static gt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var P_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};var gf=class{constructor(e){this.Ei=e.Ei,this.Ti=e.Ti}Ii(e){this.Ai=e}Ri(e){this.Pi=e}onMessage(e){this.bi=e}close(){this.Ti()}send(e){this.Ei(e)}vi(){this.Ai()}Vi(e){this.Pi(e)}Si(e){this.bi(e)}};var vf=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http";this.Di=n+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Ni(e,n,r,i){let s=this.xi(e,n);P("RestConnection","Sending: ",s,r);let o={};return this.ki(o,i),this.$i(e,s,o,r).then(a=>(P("RestConnection","Received: ",a),a),a=>{throw Qu("RestConnection",`${e} failed with error: `,a,"url: ",s,"request:",r),a})}Oi(e,n,r,i){return this.Ni(e,n,r,i)}ki(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+mn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(let r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])}xi(e,n){let r=P_[e];return`${this.Di}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling}$i(e,n,r,i){return new Promise((s,o)=>{let a=new xy;a.listenOnce(My.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Uo.NO_ERROR:let l=a.getResponseJson();P("Connection","XHR received:",JSON.stringify(l)),s(l);break;case Uo.TIMEOUT:P("Connection",'RPC "'+e+'" timed out'),o(new V(T.DEADLINE_EXCEEDED,"Request time out"));break;case Uo.HTTP_ERROR:let u=a.getStatus();if(P("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let h=a.getResponseJson().error;if(h&&h.status&&h.message){let f=function(d){let m=d.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(m)>=0?m:T.UNKNOWN}(h.status);o(new V(f,h.message))}else o(new V(T.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new V(T.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{P("Connection",'RPC "'+e+'" completed.')}});let c=JSON.stringify(i);a.send(n,"POST",c,r,15)})}Mi(e,n){let r=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ly(),s=Py(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.ki(o.initMessageHeaders,n),Nr()||Or()||Uc()||Lr()||xc()||Dr()||(o.httpHeadersOverwriteParam="$httpHeaders");let a=r.join("");P("Connection","Creating WebChannel: "+a,o);let c=i.createWebChannel(a,o),l=!1,u=!1,h=new gf({Ei:d=>{u?P("Connection","Not sending because WebChannel is closed:",d):(l||(P("Connection","Opening WebChannel transport."),c.open(),l=!0),P("Connection","WebChannel sending:",d),c.send(d))},Ti:()=>c.close()}),f=(d,m,p)=>{d.listen(m,g=>{try{p(g)}catch(v){setTimeout(()=>{throw v},0)}})};return f(c,bi.EventType.OPEN,()=>{u||P("Connection","WebChannel transport opened.")}),f(c,bi.EventType.CLOSE,()=>{u||(u=!0,P("Connection","WebChannel transport closed"),h.Vi())}),f(c,bi.EventType.ERROR,d=>{u||(u=!0,Qu("Connection","WebChannel transport errored:",d),h.Vi(new V(T.UNAVAILABLE,"The operation could not be completed")))}),f(c,bi.EventType.MESSAGE,d=>{var m;if(!u){let p=d.data[0];ee(!!p);let g=p,v=g.error||((m=g[0])===null||m===void 0?void 0:m.error);if(v){P("Connection","WebChannel received error:",v);let D=v.status,_=function(A){let L=ue[A];if(L!==void 0)return Mh(L)}(D),R=v.message;_===void 0&&(_=T.INTERNAL,R="Unknown error status: "+D+" with message "+v.message),u=!0,h.Vi(new V(_,R)),c.close()}else P("Connection","WebChannel received:",p),h.Si(p)}}),f(s,Uy.STAT_EVENT,d=>{d.stat===Wu.PROXY?P("Connection","Detected buffering proxy"):d.stat===Wu.NOPROXY&&P("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.vi()},0),h}};function ha(){return typeof document!="undefined"?document:null}function xi(t){return new $h(t,!0)}var fa=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Se=e,this.timerId=n,this.Fi=r,this.Li=i,this.Bi=s,this.Ui=0,this.qi=null,this.Ki=Date.now(),this.reset()}reset(){this.Ui=0}Qi(){this.Ui=this.Bi}ji(e){this.cancel();let n=Math.floor(this.Ui+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ui} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qi=this.Se.enqueueAfterDelay(this.timerId,i,()=>(this.Ki=Date.now(),e())),this.Ui*=this.Li,this.Ui<this.Fi&&(this.Ui=this.Fi),this.Ui>this.Bi&&(this.Ui=this.Bi)}Gi(){this.qi!==null&&(this.qi.skipDelay(),this.qi=null)}cancel(){this.qi!==null&&(this.qi.cancel(),this.qi=null)}Wi(){return(Math.random()-.5)*this.Ui}};var da=class{constructor(e,n,r,i,s,o){this.Se=e,this.zi=r,this.Hi=i,this.Ji=s,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new fa(e,n)}tr(){return this.state===1||this.state===2||this.state===4}er(){return this.state===2}start(){this.state!==3?this.auth():this.nr()}async stop(){this.tr()&&await this.close(0)}sr(){this.state=0,this.Zi.reset()}ir(){this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,()=>this.rr()))}cr(e){this.ar(),this.stream.send(e)}async rr(){if(this.er())return this.close(0)}ar(){this.Xi&&(this.Xi.cancel(),this.Xi=null)}async close(e,n){this.ar(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():n&&n.code===T.RESOURCE_EXHAUSTED?(wt(n.toString()),wt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===T.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ur(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ri(n)}ur(){}auth(){this.state=1;let e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(r=>{this.Yi===n&&this.lr(r)},r=>{e(()=>{let i=new V(T.UNKNOWN,"Fetching auth token failed: "+r.message);return this.dr(i)})})}lr(e){let n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(()=>{n(()=>(this.state=2,this.listener.Ii()))}),this.stream.Ri(r=>{n(()=>this.dr(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}nr(){this.state=4,this.Zi.ji(async()=>{this.state=0,this.start()})}dr(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}hr(e){return n=>{this.Se.enqueueAndForget(()=>this.Yi===e?n():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},yf=class extends da{constructor(e,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s),this.R=i}wr(e){return this.Hi.Mi("Listen",e)}onMessage(e){this.Zi.reset();let n=p_(this.R,e),r=function(i){if(!("targetChange"in i))return Y.min();let s=i.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?it(s.readTime):Y.min()}(e);return this.listener._r(n,r)}mr(e){let n={};n.database=oa(this.R),n.addTarget=function(i,s){let o,a=s.target;return o=Ko(a)?{documents:y_(i,a)}:{query:b_(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=jh(i,s.resumeToken):s.snapshotVersion.compareTo(Y.min())>0&&(o.readTime=Oi(i,s.snapshotVersion.toTimestamp())),o}(this.R,e);let r=T_(this.R,e);r&&(n.labels=r),this.cr(n)}gr(e){let n={};n.database=oa(this.R),n.removeTarget=e,this.cr(n)}},_f=class extends da{constructor(e,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle",n,r,s),this.R=i,this.yr=!1}get pr(){return this.yr}start(){this.yr=!1,this.lastStreamToken=void 0,super.start()}ur(){this.yr&&this.Er([])}wr(e){return this.Hi.Mi("Write",e)}onMessage(e){if(ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.yr){this.Zi.reset();let n=v_(e.writeResults,e.commitTime),r=it(e.commitTime);return this.listener.Tr(r,n)}return ee(!e.writeResults||e.writeResults.length===0),this.yr=!0,this.listener.Ir()}Ar(){let e={};e.database=oa(this.R),this.cr(e)}Er(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>g_(this.R,r))};this.cr(n)}};var wf=class extends class{}{constructor(e,n,r){super(),this.credentials=e,this.Hi=n,this.R=r,this.Rr=!1}Pr(){if(this.Rr)throw new V(T.FAILED_PRECONDITION,"The client has already been terminated.")}Ni(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Ni(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===T.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new V(T.UNKNOWN,i.toString())})}Oi(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Oi(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===T.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new V(T.UNKNOWN,i.toString())})}terminate(){this.Rr=!0}},bf=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.br=0,this.vr=null,this.Vr=!0}Sr(){this.br===0&&(this.Dr("Unknown"),this.vr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.vr=null,this.Cr("Backend didn't respond within 10 seconds."),this.Dr("Offline"),Promise.resolve())))}Nr(e){this.state==="Online"?this.Dr("Unknown"):(this.br++,this.br>=1&&(this.kr(),this.Cr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Dr("Offline")))}set(e){this.kr(),this.br=0,e==="Online"&&(this.Vr=!1),this.Dr(e)}Dr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Cr(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(wt(n),this.Vr=!1):P("OnlineStateTracker",n)}kr(){this.vr!==null&&(this.vr.cancel(),this.vr=null)}};var Ef=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.$r=[],this.Or=new Map,this.Mr=new Set,this.Fr=[],this.Lr=s,this.Lr.di(o=>{r.enqueueAndForget(async()=>{Bt(this)&&(P("RemoteStore","Restarting streams for network reachability change."),await async function(a){let c=H(a);c.Mr.add(4),await _r(c),c.Br.set("Unknown"),c.Mr.delete(4),await Vi(c)}(this))})}),this.Br=new bf(r,i)}};async function Vi(t){if(Bt(t))for(let e of t.Fr)await e(!0)}async function _r(t){for(let e of t.Fr)await e(!1)}function Tf(t,e){let n=H(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),ga(n)?ma(n):Rn(n).er()&&pa(n,e))}function kf(t,e){let n=H(t),r=Rn(n);n.Or.delete(e),r.er()&&If(n,e),n.Or.size===0&&(r.er()?r.ir():Bt(n)&&n.Br.set("Unknown"))}function pa(t,e){t.Ur.q(e.targetId),Rn(t).mr(e)}function If(t,e){t.Ur.q(e),Rn(t).gr(e)}function ma(t){t.Ur=new Vh({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.Or.get(e)||null}),Rn(t).start(),t.Br.Sr()}function ga(t){return Bt(t)&&!Rn(t).tr()&&t.Or.size>0}function Bt(t){return H(t).Mr.size===0}function Sf(t){t.Ur=void 0}async function M_(t){t.Or.forEach((e,n)=>{pa(t,e)})}async function U_(t,e){Sf(t),ga(t)?(t.Br.Nr(e),ma(t)):t.Br.set("Unknown")}async function x_(t,e,n){if(t.Br.set("Online"),e instanceof ea&&e.state===2&&e.cause)try{await async function(r,i){let s=i.cause;for(let o of i.targetIds)r.Or.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Or.delete(o),r.Ur.removeTarget(o))}(t,e)}catch(r){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fi(t,r)}else if(e instanceof gr?t.Ur.X(e):e instanceof Zo?t.Ur.rt(e):t.Ur.et(e),!n.isEqual(Y.min()))try{let r=await sf(t.localStore);n.compareTo(r)>=0&&await function(i,s){let o=i.Ur.at(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){let l=i.Or.get(c);l&&i.Or.set(c,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{let c=i.Or.get(a);if(!c)return;i.Or.set(a,c.withResumeToken(Te.EMPTY_BYTE_STRING,c.snapshotVersion)),If(i,a);let l=new Tt(c.target,a,1,c.sequenceNumber);pa(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){P("RemoteStore","Failed to raise snapshot:",r),await Fi(t,r)}}async function Fi(t,e,n){if(!vr(e))throw e;t.Mr.add(1),await _r(t),t.Br.set("Offline"),n||(n=()=>sf(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{P("RemoteStore","Retrying IndexedDB access"),await n(),t.Mr.delete(1),await Vi(t)})}function Af(t,e){return e().catch(n=>Fi(t,n,e))}async function $i(t){let e=H(t),n=It(e),r=e.$r.length>0?e.$r[e.$r.length-1].batchId:-1;for(;V_(e);)try{let i=await O_(e.localStore,r);if(i===null){e.$r.length===0&&n.ir();break}r=i.batchId,F_(e,i)}catch(i){await Fi(e,i)}Cf(e)&&Rf(e)}function V_(t){return Bt(t)&&t.$r.length<10}function F_(t,e){t.$r.push(e);let n=It(t);n.er()&&n.pr&&n.Er(e.mutations)}function Cf(t){return Bt(t)&&!It(t).tr()&&t.$r.length>0}function Rf(t){It(t).start()}async function $_(t){It(t).Ar()}async function j_(t){let e=It(t);for(let n of t.$r)e.Er(n.mutations)}async function q_(t,e,n){let r=t.$r.shift(),i=Li.from(r,e,n);await Af(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $i(t)}async function B_(t,e){e&&It(t).pr&&await async function(n,r){if(i=r.code,r_(i)&&i!==T.ABORTED){let s=n.$r.shift();It(n).sr(),await Af(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await $i(n)}var i}(t,e),Cf(t)&&Rf(t)}async function z_(t,e){let n=H(t);e?(n.Mr.delete(2),await Vi(n)):e||(n.Mr.add(2),await _r(n),n.Br.set("Unknown"))}function Rn(t){return t.qr||(t.qr=function(e,n,r){let i=H(e);return i.Pr(),new yf(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:M_.bind(null,t),Ri:U_.bind(null,t),_r:x_.bind(null,t)}),t.Fr.push(async e=>{e?(t.qr.sr(),ga(t)?ma(t):t.Br.set("Unknown")):(await t.qr.stop(),Sf(t))})),t.qr}function It(t){return t.Kr||(t.Kr=function(e,n,r){let i=H(e);return i.Pr(),new _f(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:$_.bind(null,t),Ri:B_.bind(null,t),Ir:j_.bind(null,t),Tr:q_.bind(null,t)}),t.Fr.push(async e=>{e?(t.Kr.sr(),await $i(t)):(await t.Kr.stop(),t.$r.length>0&&(P("RemoteStore",`Stopping write stream with ${t.$r.length} pending writes`),t.$r=[]))})),t.Kr}var ji=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new ji(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function va(t,e){if(wt("AsyncQueue",`${e}: ${t}`),vr(t))return new V(T.UNAVAILABLE,`${e}: ${t}`);throw t}var zt=class{constructor(e){this.comparator=e?(n,r)=>e(n,r)||F.comparator(n.key,r.key):(n,r)=>F.comparator(n.key,r.key),this.keyedMap=Jo(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new zt(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new zt;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var ya=class{constructor(){this.Qr=new ke(F.comparator)}track(e){let n=e.doc.key,r=this.Qr.get(n);r?e.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,e):e.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Qr=this.Qr.remove(n):e.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):z():this.Qr=this.Qr.insert(n,e)}jr(){let e=[];return this.Qr.inorderTraversal((n,r)=>{e.push(r)}),e}},Ht=class{constructor(e,n,r,i,s,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c}static fromInitialDocuments(e,n,r,i){let s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Ht(e,n,zt.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ri(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Nf=class{constructor(){this.Wr=void 0,this.listeners=[]}},Df=class{constructor(){this.queries=new Cn(e=>vh(e),Ri),this.onlineState="Unknown",this.Gr=new Set}};async function H_(t,e){let n=H(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Nf),i)try{s.Wr=await n.onListen(r)}catch(o){let a=va(o,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&_a(n)}async function K_(t,e){let n=H(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function G_(t,e){let n=H(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.Hr(i)&&(r=!0);o.Wr=i}}r&&_a(n)}function W_(t,e,n){let r=H(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function _a(t){t.Gr.forEach(e=>{e.next()})}var Of=class{constructor(e,n,r){this.query=e,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}Hr(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ht(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),n=!0):this.eo(e,this.onlineState)&&(this.no(e),n=!0),this.Xr=e,n}onError(e){this.Jr.error(e)}zr(e){this.onlineState=e;let n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),n=!0),n}eo(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.so||!r)&&(!e.docs.isEmpty()||n==="Offline")}Zr(e){if(e.docChanges.length>0)return!0;let n=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}no(e){e=Ht.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)}};var wa=class{constructor(e){this.key=e}},ba=class{constructor(e){this.key=e}},Lf=class{constructor(e,n){this.query=e,this.ao=n,this.uo=null,this.current=!1,this.ho=ne(),this.mutatedKeys=ne(),this.lo=yh(e),this.fo=new zt(this.lo)}get wo(){return this.ao}_o(e,n){let r=n?n.mo:new ya,i=n?n.fo:this.fo,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=Ci(this.query)&&i.size===this.query.limit?i.last():null,l=Wo(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let f=i.get(u),d=Ni(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations),g=!1;f&&d?f.data.isEqual(d.data)?m!==p&&(r.track({type:3,doc:d}),g=!0):this.yo(f,d)||(r.track({type:2,doc:d}),g=!0,(c&&this.lo(d,c)>0||l&&this.lo(d,l)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),g=!0):f&&!d&&(r.track({type:1,doc:f}),g=!0,(c||l)&&(a=!0)),g&&(d?(o=o.add(d),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),Ci(this.query)||Wo(this.query))for(;o.size>this.query.limit;){let u=Ci(this.query)?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}}yo(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){let i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;let s=e.mo.jr();s.sort((l,u)=>function(h,f){let d=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return d(h)-d(f)}(l.type,u.type)||this.lo(l.doc,u.doc)),this.po(r);let o=n?this.Eo():[],a=this.ho.size===0&&this.current?1:0,c=a!==this.uo;return this.uo=a,s.length!==0||c?{snapshot:new Ht(this.query,e.fo,i,s,e.mutatedKeys,a===0,c,!1),To:o}:{To:o}}zr(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ya,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}}Io(e){return!this.ao.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations}po(e){e&&(e.addedDocuments.forEach(n=>this.ao=this.ao.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ao=this.ao.delete(n)),this.current=e.current)}Eo(){if(!this.current)return[];let e=this.ho;this.ho=ne(),this.fo.forEach(r=>{this.Io(r.key)&&(this.ho=this.ho.add(r.key))});let n=[];return e.forEach(r=>{this.ho.has(r)||n.push(new ba(r))}),this.ho.forEach(r=>{e.has(r)||n.push(new wa(r))}),n}Ao(e){this.ao=e.Bn,this.ho=ne();let n=this._o(e.documents);return this.applyChanges(n,!0)}Ro(){return Ht.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.uo===0)}},Pf=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Mf=class{constructor(e){this.key=e,this.Po=!1}},Uf=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.bo={},this.vo=new Cn(a=>vh(a),Ri),this.Vo=new Map,this.So=new Set,this.Do=new ke(F.comparator),this.Co=new Map,this.No=new Mi,this.xo={},this.ko=new Map,this.$o=qt.Yt(),this.onlineState="Unknown",this.Oo=void 0}get isPrimaryClient(){return this.Oo===!0}};async function Y_(t,e){let n=Q_(t),r,i,s=n.vo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro();else{let o=await L_(n.localStore,Vt(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await X_(n,e,r,a==="current"),n.isPrimaryClient&&Tf(n.remoteStore,o)}return i}async function X_(t,e,n,r){t.Mo=(u,h,f)=>async function(d,m,p,g){let v=m.view._o(p);v.Nn&&(v=await of(d.localStore,m.query,!1).then(({documents:R})=>m.view._o(R,v)));let D=g&&g.targetChanges.get(m.targetId),_=m.view.applyChanges(v,d.isPrimaryClient,D);return xf(d,m.targetId,_.To),_.snapshot}(t,u,h,f);let i=await of(t.localStore,e,!0),s=new Lf(e,i.Bn),o=s._o(i.documents),a=In.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),c=s.applyChanges(o,t.isPrimaryClient,a);xf(t,n,c.To);let l=new Pf(e,n,s);return t.vo.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot}async function J_(t,e){let n=H(t),r=n.vo.get(e),i=n.Vo.get(r.targetId);if(i.length>1)return n.Vo.set(r.targetId,i.filter(s=>!Ri(s,e))),void n.vo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ca(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),kf(n.remoteStore,r.targetId),Ea(n,r.targetId)}).catch(yr)):(Ea(n,r.targetId),await ca(n.localStore,r.targetId,!0))}async function e0(t,e,n){let r=Z_(t);try{let i=await function(s,o){let a=H(s),c=Pe.now(),l=o.reduce((h,f)=>h.add(f.key),ne()),u;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>a.Fn.pn(h,l).next(f=>{u=f;let d=[];for(let m of o){let p=n_(m,u.get(m.key));p!=null&&d.push(new $t(m.key,p,ih(p.toProto().mapValue),Ft.exists(!0)))}return a._n.addMutationBatch(h,c,d,o)})).then(h=>(h.applyToLocalDocumentSet(u),{batchId:h.batchId,changes:u}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let c=s.xo[s.currentUser.toKey()];c||(c=new ke(Z)),c=c.insert(o,a),s.xo[s.currentUser.toKey()]=c}(r,i.batchId,n),await wr(r,i.changes),await $i(r.remoteStore)}catch(i){let s=va(i,"Failed to persist write");n.reject(s)}}async function Vf(t,e){let n=H(t);try{let r=await D_(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Co.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Po=!0:i.modifiedDocuments.size>0?ee(o.Po):i.removedDocuments.size>0&&(ee(o.Po),o.Po=!1))}),await wr(n,r,e)}catch(r){await yr(r)}}function Ff(t,e,n){let r=H(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.vo.forEach((s,o)=>{let a=o.view.zr(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){let a=H(s);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(let h of u.listeners)h.zr(o)&&(c=!0)}),c&&_a(a)}(r.eventManager,e),i.length&&r.bo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function t0(t,e,n){let r=H(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Co.get(e),s=i&&i.key;if(s){let o=new ke(F.comparator);o=o.insert(s,Ie.newNoDocument(s,Y.min()));let a=ne().add(s),c=new mr(Y.min(),new Map,new ye(Z),o,a);await Vf(r,c),r.Do=r.Do.remove(s),r.Co.delete(e),Ta(r)}else await ca(r.localStore,e,!1).then(()=>Ea(r,e,n)).catch(yr)}async function n0(t,e){let n=H(t),r=e.batch.batchId;try{let i=await R_(n.localStore,e);jf(n,r,null),$f(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wr(n,i)}catch(i){await yr(i)}}async function r0(t,e,n){let r=H(t);try{let i=await function(s,o){let a=H(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a._n.lookupMutationBatch(c,o).next(u=>(ee(u!==null),l=u.keys(),a._n.removeMutationBatch(c,u))).next(()=>a._n.performConsistencyCheck(c)).next(()=>a.Fn.pn(c,l))})}(r.localStore,e);jf(r,e,n),$f(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wr(r,i)}catch(i){await yr(i)}}function $f(t,e){(t.ko.get(e)||[]).forEach(n=>{n.resolve()}),t.ko.delete(e)}function jf(t,e,n){let r=H(t),i=r.xo[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Ea(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Vo.get(e))t.vo.delete(r),n&&t.bo.Fo(r,n);t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(r=>{t.No.containsKey(r)||qf(t,r)})}function qf(t,e){t.So.delete(e.path.canonicalString());let n=t.Do.get(e);n!==null&&(kf(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Ta(t))}function xf(t,e,n){for(let r of n)r instanceof wa?(t.No.addReference(r.key,e),i0(t,r)):r instanceof ba?(P("SyncEngine","Document no longer in limbo: "+r.key),t.No.removeReference(r.key,e),t.No.containsKey(r.key)||qf(t,r.key)):z()}function i0(t,e){let n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(P("SyncEngine","New document in limbo: "+n),t.So.add(r),Ta(t))}function Ta(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){let e=t.So.values().next().value;t.So.delete(e);let n=new F(te.fromString(e)),r=t.$o.next();t.Co.set(r,new Mf(n)),t.Do=t.Do.insert(n,r),Tf(t.remoteStore,new Tt(Vt(Go(n.path)),r,2,Ei.o))}}async function wr(t,e,n){let r=H(t),i=[],s=[],o=[];r.vo.isEmpty()||(r.vo.forEach((a,c)=>{o.push(r.Mo(c,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),i.push(l);let u=Pi.vn(c.targetId,l);s.push(u)}}))}),await Promise.all(o),r.bo._r(i),await async function(a,c){let l=H(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>C.forEach(c,h=>C.forEach(h.Pn,f=>l.persistence.referenceDelegate.addReference(u,h.targetId,f)).next(()=>C.forEach(h.bn,f=>l.persistence.referenceDelegate.removeReference(u,h.targetId,f)))))}catch(u){if(!vr(u))throw u;P("LocalStore","Failed to update sequence numbers: "+u)}for(let u of c){let h=u.targetId;if(!u.fromCache){let f=l.kn.get(h),d=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(d);l.kn=l.kn.insert(h,m)}}}(r.localStore,s))}async function s0(t,e){let n=H(t);if(!n.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());let r=await rf(n.localStore,e);n.currentUser=e,function(i,s){i.ko.forEach(o=>{o.forEach(a=>{a.reject(new V(T.CANCELLED,s))})}),i.ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wr(n,r.Ln)}}function o0(t,e){let n=H(t),r=n.Co.get(e);if(r&&r.Po)return ne().add(r.key);{let i=ne(),s=n.Vo.get(e);if(!s)return i;for(let o of s){let a=n.vo.get(o);i=i.unionWith(a.view.wo)}return i}}function Q_(t){let e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t0.bind(null,e),e.bo._r=G_.bind(null,e.eventManager),e.bo.Fo=W_.bind(null,e.eventManager),e}function Z_(t){let e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r0.bind(null,e),e}var Bf=class{constructor(){this.synchronizeTabs=!1}async initialize(e){this.R=xi(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.Uo(e),await this.persistence.start(),this.gcScheduler=this.qo(e),this.localStore=this.Ko(e)}qo(e){return null}Ko(e){return C_(this.persistence,new tf,e.initialUser,this.R)}Uo(e){return new ff(Ui.Ps,this.R)}Bo(e){return new pf}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}},zf=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ff(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s0.bind(null,this.syncEngine),await z_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Df}createDatastore(e){let n=xi(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new vf(i));var i;return function(s,o,a){return new wf(s,o,a)}(e.credentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>Ff(this.syncEngine,a,0),o=ua.gt()?new ua:new mf,new Ef(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,c,l){let u=new Uf(r,i,s,o,a,c);return l&&(u.Oo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){let n=H(e);P("RemoteStore","RemoteStore shutting down."),n.Mr.add(5),await _r(n),n.Lr.shutdown(),n.Br.set("Unknown")}(this.remoteStore)}};var Hf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.jo(this.observer.next,e)}error(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Wo(){this.muted=!0}jo(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Kf=class{constructor(e,n,r){this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=je.UNAUTHENTICATED,this.clientId=Vo.u(),this.credentialListener=()=>Promise.resolve(),this.credentials.setChangeListener(n,async i=>{P("FirestoreClient","Received user=",i.uid),await this.credentialListener(i),this.user=i})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.removeChangeListener(),e.resolve()}catch(n){let r=va(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function a0(t,e){t.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");let n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rf(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function l0(t,e){t.asyncQueue.verifyOperationInProgress();let n=await c0(t);P("FirestoreClient","Initializing OnlineComponentProvider");let r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>async function(s,o){let a=H(s);a.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");let c=Bt(a);a.Mr.add(3),await _r(a),c&&a.Br.set("Unknown"),await a.remoteSyncer.handleCredentialChange(o),a.Mr.delete(3),await Vi(a)}(e.remoteStore,i)),t.onlineComponents=e}async function c0(t){return t.offlineComponents||(P("FirestoreClient","Using default OfflineComponentProvider"),await a0(t,new Bf)),t.offlineComponents}async function Gf(t){return t.onlineComponents||(P("FirestoreClient","Using default OnlineComponentProvider"),await l0(t,new zf)),t.onlineComponents}function u0(t){return Gf(t).then(e=>e.syncEngine)}async function h0(t){let e=await Gf(t),n=e.eventManager;return n.onListen=Y_.bind(null,e.syncEngine),n.onUnlisten=J_.bind(null,e.syncEngine),n}function f0(t,e,n={}){let r=new An;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,c){let l=new Hf({next:h=>{s.enqueueAndForget(()=>K_(i,u));let f=h.docs.has(o);!f&&h.fromCache?c.reject(new V(T.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&a&&a.source==="server"?c.reject(new V(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new Of(Go(o.path),l,{includeMetadataChanges:!0,so:!0});return H_(i,u)}(await h0(t),t.asyncQueue,e,n,r)),r.promise}var Wf=class{constructor(e,n,r,i,s,o,a){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a}},Nn=class{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Nn&&e.projectId===this.projectId&&e.database===this.database}};var Xf=new Map;var Qf=class{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}},Ia=class{constructor(){this.changeListener=null}getToken(){return Promise.resolve(null)}invalidateToken(){}setChangeListener(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(je.UNAUTHENTICATED))}removeChangeListener(){this.changeListener=null}},Yf=class{constructor(e){this.currentUser=je.UNAUTHENTICATED,this.oc=new An,this.cc=0,this.changeListener=()=>Promise.resolve(),this.ac=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=()=>{this.cc++,this.currentUser=this.hc(),this.oc.resolve(),this.ac&&this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser))};let n=r=>{P("FirebaseCredentialsProvider","Auth detected"),this.auth=r,this.lc(),this.auth.addAuthTokenListener(this.uc)};e.onInit(r=>n(r)),setTimeout(()=>{if(!this.auth){let r=e.getImmediate({optional:!0});r?n(r):this.ac&&(P("FirebaseCredentialsProvider","Auth not yet detected"),this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser)))}},0)}getToken(){let e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.cc!==e?(P("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new Qf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}setChangeListener(e,n){this.ac=!0,this.asyncQueue=e,this.changeListener=n}removeChangeListener(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=()=>Promise.resolve()}hc(){let e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new je(e)}lc(){this.ac&&(this.ac=!1,this.asyncQueue.enqueueRetryable(async()=>{await this.oc.promise,await this.changeListener(this.currentUser),this.ac=!0}))}},Jf=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r,this.type="FirstParty",this.user=je.FIRST_PARTY}get authHeaders(){let e={"X-Goog-AuthUser":this.dc},n=this.fc.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.wc&&(e["X-Goog-Iam-Authorization-Token"]=this.wc),e}},Zf=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r}getToken(){return Promise.resolve(new Jf(this.fc,this.dc,this.wc))}setChangeListener(e,n){e.enqueueRetryable(()=>n(je.FIRST_PARTY))}removeChangeListener(){}invalidateToken(){}};function ed(t,e,n){if(!n)throw new V(T.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function td(t){if(!F.isDocumentKey(t))throw new V(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nd(t){if(F.isDocumentKey(t))throw new V(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ka(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(n){if(n.constructor){let r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z()}function qi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ka(t);throw new V(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Sa=class{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new V(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,function(r,i,s,o){if(i===!0&&o===!0)throw new V(T.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties}};var Bi=class{constructor(e,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sa({}),this._settingsFrozen=!1,e instanceof Nn?(this._databaseId=e,this._credentials=new Ia):(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new V(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nn(r.options.projectId)}(e),this._credentials=new Yf(n))}get app(){if(!this._app)throw new V(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sa(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new Ia;switch(n.type){case"gapi":let r=n.client;return ee(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Zf(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new V(T.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let n=Xf.get(e);n&&(P("ComponentProvider","Removing Datastore"),Xf.delete(e),n.terminate())}(this),Promise.resolve()}};var Ue=class{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new st(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}},zi=class{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}},st=class extends zi{constructor(e,n,r){super(e,n,Go(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new F(e))}withConverter(e){return new st(this.firestore,e,this._path)}};function rd(t,e,...n){if(t=Ve(t),ed("collection","path",e),t instanceof Bi){let r=te.fromString(e,...n);return nd(r),new st(t,null,r)}{if(!(t instanceof Ue||t instanceof st))throw new V(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=te.fromString(t.path,...n).child(te.fromString(e));return nd(r),new st(t.firestore,null,r)}}function Aa(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=Vo.u()),ed("doc","path",e),t instanceof Bi){let r=te.fromString(e,...n);return td(r),new Ue(t,null,new F(r))}{if(!(t instanceof Ue||t instanceof st))throw new V(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(te.fromString(e,...n));return td(r),new Ue(t.firestore,t instanceof st?t.converter:null,new F(r))}}var id=class{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new fa(this,"async_queue_retry"),this.Ac=()=>{let n=ha();n&&P("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Zi.Gi()};let e=ha();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Ac)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Rc(),this.Pc(e)}enterRestrictedMode(){if(!this.gc){this.gc=!0;let e=ha();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Ac)}}enqueue(e){return this.Rc(),this.gc?new Promise(n=>{}):this.Pc(e)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.bc()))}async bc(){if(this.mc.length!==0){try{await this.mc[0](),this.mc.shift(),this.Zi.reset()}catch(e){if(!vr(e))throw e;P("AsyncQueue","Operation failed with retryable error: "+e)}this.mc.length>0&&this.Zi.ji(()=>this.bc())}}Pc(e){let n=this._c.then(()=>(this.Tc=!0,e().catch(r=>{throw this.Ec=r,this.Tc=!1,wt("INTERNAL UNHANDLED ERROR: ",function(i){let s=i.message||"";return i.stack&&(s=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),s}(r)),r}).then(r=>(this.Tc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.Rc(),this.Ic.indexOf(e)>-1&&(n=0);let i=ji.createAndSchedule(this,e,n,r,s=>this.vc(s));return this.yc.push(i),i}Rc(){this.Ec&&z()}verifyOperationInProgress(){}async Vc(){let e;do e=this._c,await e;while(e!==this._c)}Sc(e){for(let n of this.yc)if(n.timerId===e)return!0;return!1}Dc(e){return this.Vc().then(()=>{this.yc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.yc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vc()})}Cc(e){this.Ic.push(e)}vc(e){let n=this.yc.indexOf(e);this.yc.splice(n,1)}},Hi=class extends Bi{constructor(e,n){super(e,n),this.type="firestore",this._queue=new id,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||sd(this),this._firestoreClient.terminate()}};function od(t=Ur()){return Fn(t,"firestore-exp").getImmediate()}function ad(t){return t._firestoreClient||sd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function sd(t){var e;let n=t._freezeSettings(),r=function(i,s,o,a){return new Wf(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Kf(t._credentials,t._queue,r)}var Ki=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ce(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Kt=class{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kt(Te.fromBase64String(e))}catch(n){throw new V(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kt(Te.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ca=class{constructor(e){this._methodName=e}};var Gi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}};var d0=/^__.*__$/,cd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $t(e,this.data,this.fieldMask,n,this.fieldTransforms):new dr(e,this.data,n,this.fieldTransforms)}};function ld(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var Wi=class{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Nc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get xc(){return this.settings.xc}kc(e){return new Wi(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}$c(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.kc({path:r,Oc:!1});return i.Mc(e),i}Fc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.kc({path:r,Oc:!1});return i.Nc(),i}Lc(e){return this.kc({path:void 0,Oc:!0})}Bc(e){return Xi(e,this.settings.methodName,this.settings.Uc||!1,this.path,this.settings.qc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Nc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(e.length===0)throw this.Bc("Document fields must not be empty");if(ld(this.xc)&&d0.test(e))throw this.Bc('Document fields cannot begin and end with "__"')}},ud=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.R=r||xi(e)}Kc(e,n,r,i=!1){return new Wi({xc:e,methodName:n,qc:r,path:Ce.emptyPath(),Oc:!1,Uc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)}};function p0(t){let e=t._freezeSettings(),n=xi(t._databaseId);return new ud(t._databaseId,!!e.ignoreUndefinedProperties,n)}function v0(t,e,n,r,i,s={}){let o=t.Kc(s.merge||s.mergeFields?2:0,e,n,i);fd("Data must be an object, but it was:",o,r);let a=hd(r,o),c,l;if(s.merge)c=new Ii(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let h of s.mergeFields){let f=m0(e,h,n);if(!o.contains(f))throw new V(T.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);g0(u,f)||u.push(f)}c=new Ii(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new cd(new Me(a),c,l)}function dd(t,e){if(pd(t=Ve(t)))return fd("Unsupported field value:",e,t),hd(t,e);if(t instanceof Ca)return function(n,r){if(!ld(r.xc))throw r.Bc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bc(`${n._methodName}() is not currently supported inside arrays`);let i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oc&&e.xc!==4)throw e.Bc("Nested arrays are not supported");return function(n,r){let i=[],s=0;for(let o of n){let a=dd(o,r.Lc(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Ve(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Yy(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let i=Pe.fromDate(n);return{timestampValue:Oi(r.R,i)}}if(n instanceof Pe){let i=new Pe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Oi(r.R,i)}}if(n instanceof Gi)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Kt)return{bytesValue:jh(r.R,n._byteString)};if(n instanceof Ue){let i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Bc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:na(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Bc(`Unsupported field value: ${ka(n)}`)}(t,e)}function hd(t,e){let n={};return Ju(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(t,(r,i)=>{let s=dd(i,e.$c(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function pd(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof Gi||t instanceof Kt||t instanceof Ue||t instanceof Ca)}function fd(t,e,n){if(!pd(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let r=ka(n);throw r==="an object"?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function m0(t,e,n){if((e=Ve(e))instanceof Ki)return e._internalPath;if(typeof e=="string")return md(t,e);throw Xi("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var y0=new RegExp("[~\\*/\\[\\]]");function md(t,e,n){if(e.search(y0)>=0)throw Xi(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ki(...e.split("."))._internalPath}catch(r){throw Xi(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xi(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new V(T.INVALID_ARGUMENT,a+t+c)}function g0(t,e){return t.some(n=>n.isEqual(e))}var Ra=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.toProto())}}get(e){if(this._document){let n=this._document.data.field(vd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},gd=class extends Ra{data(){return super.data()}};function vd(t,e){return typeof e=="string"?md(t,e):e instanceof Ki?e._internalPath:e._delegate._internalPath}var yd=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Na=class extends Ra{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new _d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.toProto(),e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(vd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},_d=class extends Na{data(e={}){return super.data(e)}};var wd=class{convertValue(e,n="none"){switch(Et(e)){case 0:return null;case 1:return e.booleanValue;case 2:return le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){let r={};return Ti(e.fields||{},(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Gi(le(e.latitude),le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=eh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sr(e));default:return null}}convertTimestamp(e){let n=bt(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=te.fromString(e);ee(qh(r));let i=new Nn(r.get(1),r.get(3)),s=new F(r.popFirst(5));return i.isEqual(n)||wt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function _0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function bd(t){t=qi(t,Ue);let e=qi(t.firestore,Hi);return f0(ad(e),t._key).then(n=>w0(e,t,n))}var Ed=class extends wd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kt(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}};function Td(t,e,n){t=qi(t,Ue);let r=qi(t.firestore,Hi),i=_0(t.converter,e,n);return b0(r,[v0(p0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ft.none())])}function b0(t,e){return function(n,r){let i=new An;return n.asyncQueue.enqueueAndForget(async()=>e0(await u0(n),r,i)),i.promise}(ad(t),e)}function w0(t,e,n){let r=n.docs.get(e._key),i=new Ed(t);return new Na(t,i,e._key,r,new yd(n.hasPendingWrites,n.fromCache),e.converter)}var E0;(function(t){mn=t})(Dt),Nt(new ut("firestore-exp",(t,{options:e})=>{let n=t.getProvider("app-exp").getImmediate(),r=new Hi(n,t.getProvider("auth-internal"));return e&&r._setSettings(e),r},"PUBLIC")),ft("@firebase/firestore","0.0.900-exp.d92a36260",E0);var Id=od(),Da=async(t,e)=>{let n=Aa(Id,t,e),r=await bd(n),i="";return r.exists()?i=r.data():console.log("No such document!"),i},Oa=async(t,e,n)=>{let r=rd(Id,t);n&&await Td(Aa(r,e),{[t]:n})};var La=Ol(),T0=new He,Qi=()=>Rl(La,T0),kd=()=>fl(La),I0=()=>{Ja(),bc(),Za()},k0=t=>{Je.set(t)},S0=t=>{Da("goal",t).then(e=>e?Ze.set(e.goal):""),Da("data",t).then(e=>e?se.set(e.data):"")};hl(La,t=>{t?(console.log("👌 you are logged 👌"),k0(t),S0(t.uid),Ze.subscribe(e=>Oa("goal",t.uid,e)),se.subscribe(e=>e.length>0?Oa("data",t.uid,e):"")):(console.log("👋 you are not logged 👋"),I0())});function Sd(t,e,n){let r=t.slice();return r[3]=e[n].label,r[4]=e[n].icon,r[5]=e[n].style,r[6]=e[n].onClick,r[7]=e[n].name,r}function C0(t){let e,n,r,i,s;return i=new Mn({props:{label:"Iniciar sesión",$$slots:{default:[A0]},$$scope:{ctx:t}}}),{c(){e=E("h2"),e.textContent="Haz click para iniciar sesión",n=N(),r=E("div"),x(i.$$.fragment),y(e,"class","text-center"),y(r,"class","m-2 flex flex-col")},m(o,a){b(o,e,a),b(o,n,a),b(o,r,a),M(i,r,null),s=!0},p(o,a){let c={};a&1024&&(c.$$scope={dirty:a,ctx:o}),i.$set(c)},i(o){s||(I(i.$$.fragment,o),s=!0)},o(o){S(i.$$.fragment,o),s=!1},d(o){o&&w(e),o&&w(n),o&&w(r),U(i)}}}function R0(t){let e,n,r,i,s,o=t[0].displayName+"",a,c,l,u=t[0].email+"",h,f,d=[],m=new Map,p,g,v=t[1],D=_=>_[7];for(let _=0;_<v.length;_+=1){let R=Sd(t,v,_),A=D(R);m.set(A,d[_]=Ad(A,R))}return{c(){e=E("img"),r=N(),i=E("div"),s=E("h2"),a=W(o),c=N(),l=E("h2"),h=W(u),f=N();for(let _=0;_<d.length;_+=1)d[_].c();p=Ke(),y(e,"class","mx-auto rounded-lg"),e.src!==(n=t[0].photoURL)&&y(e,"src",n),y(e,"alt","user"),y(i,"class","my-8")},m(_,R){b(_,e,R),b(_,r,R),b(_,i,R),k(i,s),k(s,a),k(i,c),k(i,l),k(l,h),b(_,f,R);for(let A=0;A<d.length;A+=1)d[A].m(_,R);b(_,p,R),g=!0},p(_,R){(!g||R&1&&e.src!==(n=_[0].photoURL))&&y(e,"src",n),(!g||R&1)&&o!==(o=_[0].displayName+"")&&J(a,o),(!g||R&1)&&u!==(u=_[0].email+"")&&J(h,u),R&2&&(v=_[1],oe(),d=Jt(d,R,D,1,_,v,m,p.parentNode,Yt,Ad,p,Sd),ae())},i(_){if(!g){for(let R=0;R<v.length;R+=1)I(d[R]);g=!0}},o(_){for(let R=0;R<d.length;R+=1)S(d[R]);g=!1},d(_){_&&w(e),_&&w(r),_&&w(i),_&&w(f);for(let R=0;R<d.length;R+=1)d[R].d(_);_&&w(p)}}}function A0(t){let e,n;return e=new fe({props:{prop:t[2]}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p:G,i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function N0(t){let e,n;return e=new fe({props:{prop:{icon:t[4],style:t[5],onClick:t[6]}}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p:G,i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function Ad(t,e){let n,r,i,s;return r=new Mn({props:{label:e[3],$$slots:{default:[N0]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=E("div"),x(r.$$.fragment),i=N(),y(n,"class","m-2 flex flex-col"),this.first=n},m(o,a){b(o,n,a),M(r,n,null),k(n,i),s=!0},p(o,a){e=o;let c={};a&1024&&(c.$$scope={dirty:a,ctx:e}),r.$set(c)},i(o){s||(I(r.$$.fragment,o),s=!0)},o(o){S(r.$$.fragment,o),s=!1},d(o){o&&w(n),U(r)}}}function D0(t){let e,n,r,i,s=[R0,C0],o=[];function a(c,l){return c[0].uid?0:1}return e=a(t,-1),n=o[e]=s[e](t),{c(){n.c(),r=Ke()},m(c,l){o[e].m(c,l),b(c,r,l),i=!0},p(c,l){let u=e;e=a(c,l),e===u?o[e].p(c,l):(oe(),S(o[u],1,1,()=>{o[u]=null}),ae(),n=o[e],n?n.p(c,l):(n=o[e]=s[e](c),n.c()),I(n,1),n.m(r.parentNode,r))},i(c){i||(I(n),i=!0)},o(c){S(n),i=!1},d(c){o[e].d(c),c&&w(r)}}}function O0(t){let e,n;return e=new lt({props:{$$slots:{default:[D0]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,[i]){let s={};i&1025&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function L0(t,e,n){let r;return Be(t,Je,o=>n(0,r=o)),[r,[{name:"SignOut",label:"Cerrar sesión",icon:"logout",style:"primary",onClick:kd}],{icon:"login",style:"primary",onClick:Qi}]}var Cd=class extends B{constructor(e){super();K(this,e,L0,O0,$,{})}},Rd=Cd;function Nd(t,e,n){let r=t.slice();return r[4]=e[n],r}function Dd(t){let e,n;function r(){return t[3](t[4])}return e=new fe({props:{prop:t[4],current:t[0]}}),e.$on("click",r),{c(){x(e.$$.fragment)},m(i,s){M(e,i,s),n=!0},p(i,s){t=i;let o={};s&1&&(o.current=t[0]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){U(e,i)}}}function P0(t){let e,n,r=t[2],i=[];for(let o=0;o<r.length;o+=1)i[o]=Dd(Nd(t,r,o));let s=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){e=E("div");for(let o=0;o<i.length;o+=1)i[o].c();y(e,"class","container fixed svelte-1xfd7dv")},m(o,a){b(o,e,a);for(let c=0;c<i.length;c+=1)i[c].m(e,null);n=!0},p(o,[a]){if(a&7){r=o[2];let c;for(c=0;c<r.length;c+=1){let l=Nd(o,r,c);i[c]?(i[c].p(l,a),I(i[c],1)):(i[c]=Dd(l),i[c].c(),I(i[c],1),i[c].m(e,null))}for(oe(),c=r.length;c<i.length;c+=1)s(c);ae()}},i(o){if(!n){for(let a=0;a<r.length;a+=1)I(i[a]);n=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)S(i[a]);n=!1},d(o){o&&w(e),Ye(i,o)}}}function M0(t,e,n){let r=[{icon:"home",style:"secondary",selected:!1},{icon:"lightning",style:"secondary",selected:!1},{icon:"profile",style:"secondary",selected:!1}],{current:i="Home"}=e,{selectedBtn:s=()=>{}}=e,o=a=>s(a.icon);return t.$$set=a=>{"current"in a&&n(0,i=a.current),"selectedBtn"in a&&n(1,s=a.selectedBtn)},[i,s,r,o]}var Od=class extends B{constructor(e){super();K(this,e,M0,P0,$,{current:0,selectedBtn:1})}},Ld=Od;function U0(t){let e,n,r,i,s,o,a;function c(u){t[1](u)}let l={label:"Objetivo",type:"text"};return t[0]!==void 0&&(l.value=t[0]),s=new Pn({props:l}),at.push(()=>Zt(s,"value",c)),{c(){e=E("h1"),e.textContent="Opciones",n=N(),r=E("h3"),r.textContent="Configura tus fuentes de ingresos",i=N(),x(s.$$.fragment)},m(u,h){b(u,e,h),b(u,n,h),b(u,r,h),b(u,i,h),M(s,u,h),a=!0},p(u,h){let f={};!o&&h&1&&(o=!0,f.value=u[0],Xt(()=>o=!1)),s.$set(f)},i(u){a||(I(s.$$.fragment,u),a=!0)},o(u){S(s.$$.fragment,u),a=!1},d(u){u&&w(e),u&&w(n),u&&w(r),u&&w(i),U(s,u)}}}function x0(t){let e,n,r,i,s,o,a;return e=new lt({props:{$$slots:{default:[U0]},$$scope:{ctx:t}}}),i=new fe({props:{prop:{icon:"add",style:"secondary"}}}),i.$on("click",se.add),o=new Ar({props:{edit:!0}}),{c(){x(e.$$.fragment),n=N(),r=E("div"),x(i.$$.fragment),s=N(),x(o.$$.fragment)},m(c,l){M(e,c,l),b(c,n,l),b(c,r,l),M(i,r,null),b(c,s,l),M(o,c,l),a=!0},p(c,[l]){let u={};l&5&&(u.$$scope={dirty:l,ctx:c}),e.$set(u)},i(c){a||(I(e.$$.fragment,c),I(i.$$.fragment,c),I(o.$$.fragment,c),a=!0)},o(c){S(e.$$.fragment,c),S(i.$$.fragment,c),S(o.$$.fragment,c),a=!1},d(c){U(e,c),c&&w(n),c&&w(r),U(i),c&&w(s),U(o,c)}}}function V0(t,e,n){let r;Be(t,Ze,s=>n(0,r=s));function i(s){r=s,Ze.set(r)}return[r,i]}var Pd=class extends B{constructor(e){super();K(this,e,V0,x0,$,{})}},Md=Pd;var Ud=class extends B{constructor(e){super();K(this,e,null,null,$,{})}},xd=Ud;function F0(t){let e,n,r,i,s;return{c(){e=E("button"),n=E("img"),y(n,"class","w-12 h-12 rounded-full"),n.src!==(r=t[0])&&y(n,"src",r),y(n,"alt","Avatar")},m(o,a){b(o,e,a),k(e,n),i||(s=he(e,"click",function(){ot(t[1])&&t[1].apply(this,arguments)}),i=!0)},p(o,[a]){t=o,a&1&&n.src!==(r=t[0])&&y(n,"src",r)},i:G,o:G,d(o){o&&w(e),i=!1,s()}}}function $0(t,e,n){let{img:r="icons/user.svg"}=e,{onClick:i=()=>console.log("click avatar")}=e;return t.$$set=s=>{"img"in s&&n(0,r=s.img),"onClick"in s&&n(1,i=s.onClick)},[r,i]}var Vd=class extends B{constructor(e){super();K(this,e,$0,F0,$,{img:0,onClick:1})}},Fd=Vd;function j0(t){let e,n,r,i;return r=new Fd({props:{onClick:Qi,img:t[0]}}),{c(){e=E("div"),n=E("div"),x(r.$$.fragment),y(n,"class","float-right"),y(e,"class","w-screen p-8")},m(s,o){b(s,e,o),k(e,n),M(r,n,null),i=!0},p(s,[o]){let a={};o&1&&(a.img=s[0]),r.$set(a)},i(s){i||(I(r.$$.fragment,s),i=!0)},o(s){S(r.$$.fragment,s),i=!1},d(s){s&&w(e),U(r)}}}function q0(t,e,n){let r,i;return Be(t,Je,s=>n(1,i=s)),t.$$.update=()=>{if(t.$$.dirty&2){e:n(0,r=i.photoURL?i.photoURL:"icons/user.svg")}},[r,i]}var $d=class extends B{constructor(e){super();K(this,e,q0,j0,$,{})}},jd=$d;function B0(t){let e,n,r,i,s,o;e=new jd({});var a=t[1];function c(l){return{}}return a&&(r=new a(c(t))),s=new Ld({props:{current:t[0],selectedBtn:t[2]}}),{c(){x(e.$$.fragment),n=N(),r&&x(r.$$.fragment),i=N(),x(s.$$.fragment)},m(l,u){M(e,l,u),b(l,n,u),r&&M(r,l,u),b(l,i,u),M(s,l,u),o=!0},p(l,[u]){if(a!==(a=l[1])){if(r){oe();let f=r;S(f.$$.fragment,1,0,()=>{U(f,1)}),ae()}a?(r=new a(c(l)),x(r.$$.fragment),I(r.$$.fragment,1),M(r,i.parentNode,i)):r=null}let h={};u&1&&(h.current=l[0]),s.$set(h)},i(l){o||(I(e.$$.fragment,l),r&&I(r.$$.fragment,l),I(s.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),r&&S(r.$$.fragment,l),S(s.$$.fragment,l),o=!1},d(l){U(e,l),l&&w(n),r&&U(r,l),l&&w(i),U(s,l)}}}function z0(t,e,n){let r,i="home",s=a=>{n(0,i=a)},o={home:Lc,profile:Rd,lightning:Md,bell:xd};return t.$$.update=()=>{if(t.$$.dirty&1){e:n(1,r=o[i])}},[i,r,s]}var qd=class extends B{constructor(e){super();K(this,e,z0,B0,$,{})}},Bd=qd;import.meta.env=Ji;var zd=new Bd({target:document.body}),H0=zd;import.meta?.hot&&((void 0).accept(),(void 0).dispose(()=>{zd.$destroy()}));export{H0 as default};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=index.js.map

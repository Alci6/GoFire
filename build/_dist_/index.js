var fd=Object.defineProperty;var dd=(t,e)=>{for(var n in e)fd(t,n,{get:e[n],enumerable:!0})};var Hi={};dd(Hi,{MODE:()=>pd,NODE_ENV:()=>md,SSR:()=>gd});var pd="production",md="production",gd=!1;function Z(){}function yd(t,e){for(let n in e)t[n]=e[n];return t}function va(t){return t()}function _a(){return Object.create(null)}function Ke(t){t.forEach(va)}function vd(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function _d(t){return Object.keys(t).length===0}function wd(t,...e){if(t==null)return Z;let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function je(t,e,n){t.$$.on_destroy.push(wd(e,n))}function Tt(t,e,n,r){if(t){let i=wa(t,e,n,r);return t[0](i)}}function wa(t,e,n,r){return t[1]&&r?yd(n.ctx.slice(),t[1](r(e))):n.ctx}function Ed(t,e,n,r){if(t[2]&&r){let i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){let s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function It(t,e,n,r,i,s,o){let a=Ed(e,r,i,s);if(a){let c=wa(e,n,r,o);t.p(c,a)}}function Ht(t){return t??""}function I(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function Qe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function Y(t){return document.createTextNode(t)}function R(){return Y(" ")}function st(){return Y("")}function Se(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function St(t){return t===""?null:+t}function bd(t){return Array.from(t.childNodes)}function se(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Me(t,e){t.value=e??""}function Kt(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function qe(t,e,n){t.classList[n?"add":"remove"](e)}var Ea;function yr(t){Ea=t}function Ki(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r(e))}var kn=[],ot=[],vr=[],Gi=[],Td=Promise.resolve(),Wi=!1;function Id(){Wi||(Wi=!0,Td.then(ba))}function Xi(t){vr.push(t)}function Gt(t){Gi.push(t)}var Qi=!1,Yi=new Set;function ba(){if(!Qi){Qi=!0;do{for(let t=0;t<kn.length;t+=1){let e=kn[t];yr(e),Sd(e.$$)}for(yr(null),kn.length=0;ot.length;)ot.pop()();for(let t=0;t<vr.length;t+=1){let e=vr[t];Yi.has(e)||(Yi.add(e),e())}vr.length=0}while(kn.length);for(;Gi.length;)Gi.pop()();Wi=!1,Qi=!1,Yi.clear()}}function Sd(t){if(t.fragment!==null){t.update(),Ke(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Xi)}}var _r=new Set,kt;function we(){kt={r:0,c:[],p:kt}}function Ee(){kt.r||Ke(kt.c),kt=kt.p}function T(t,e){t&&t.i&&(_r.delete(t),t.i(e))}function k(t,e,n,r){if(t&&t.o){if(_r.has(t))return;_r.add(t),kt.c.push(()=>{_r.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function An(t,e){k(t,1,1,()=>{e.delete(t.key)})}function Cn(t,e,n,r,i,s,o,a,c,l,u,h){let f=t.length,d=s.length,p=f,m={};for(;p--;)m[t[p].key]=p;let A=[],w=new Map,L=new Map;for(p=d;p--;){let G=h(i,s,p),W=n(G),N=o.get(W);N?r&&N.p(G,e):(N=l(W,G),N.c()),w.set(W,A[p]=N),W in m&&L.set(W,Math.abs(p-m[W]))}let E=new Set,F=new Set;function te(G){T(G,1),G.m(a,u),o.set(G.key,G),u=G.first,d--}for(;f&&d;){let G=A[d-1],W=t[f-1],N=G.key,U=W.key;G===W?(u=G.first,f--,d--):w.has(U)?!o.has(N)||E.has(N)?te(G):F.has(U)?f--:L.get(N)>L.get(U)?(F.add(N),te(G)):(E.add(U),f--):(c(W,o),f--)}for(;f--;){let G=t[f];w.has(G.key)||c(G,o)}for(;d;)te(A[d-1]);return A}function Wt(t,e,n){let r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function x(t){t&&t.c()}function P(t,e,n,r){let{fragment:i,on_mount:s,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,n),r||Xi(()=>{let c=s.map(va).filter(vd);o?o.push(...c):Ke(c),t.$$.on_mount=[]}),a.forEach(Xi)}function M(t,e){let n=t.$$;n.fragment!==null&&(Ke(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kd(t,e){t.$$.dirty[0]===-1&&(kn.push(t),Id(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(t,e,n,r,i,s,o=[-1]){let a=Ea;yr(t);let c=t.$$={fragment:null,ctx:null,props:s,update:Z,not_equal:i,bound:_a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:e.context||[]),callbacks:_a(),dirty:o,skip_bound:!1},l=!1;if(c.ctx=n?n(t,e.props||{},(u,h,...f)=>{let d=f.length?f[0]:h;return c.ctx&&i(c.ctx[u],c.ctx[u]=d)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](d),l&&kd(t,u)),h}):[],c.update(),l=!0,Ke(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){let u=bd(e.target);c.fragment&&c.fragment.l(u),u.forEach(g)}else c.fragment&&c.fragment.c();e.intro&&T(t.$$.fragment),P(t,e.target,e.anchor,e.customElement),ba()}yr(a)}var H=class{$destroy(){M(this,1),this.$destroy=Z}$on(e,n){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{let i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!_d(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var fe=t=>new Intl.NumberFormat("es",{notation:"compact",style:"currency",currency:"EUR"}).format(t);var Ji=new Date().toISOString().slice(0,10);function Ad(t){let e,n,r,i=fe(t[0])+"",s;return{c(){e=b("p"),e.textContent="Objetivo logrado",n=R(),r=b("h6"),s=Y(i),v(e,"class","euros text-xs text-center"),v(r,"class","euros text-xs text-center svelte-bssdtf")},m(o,a){y(o,e,a),y(o,n,a),y(o,r,a),I(r,s)},p(o,a){a&1&&i!==(i=fe(o[0])+"")&&se(s,i)},d(o){o&&g(e),o&&g(n),o&&g(r)}}}function Cd(t){let e,n,r=fe(t[1])+"",i,s,o,a,c=fe(t[0])+"",l;return{c(){e=b("p"),n=Y("a "),i=Y(r),s=R(),o=b("h6"),a=Y("de "),l=Y(c),v(e,"class","euros text-sm text-center"),v(o,"class","euros text-xs text-center svelte-bssdtf")},m(u,h){y(u,e,h),I(e,n),I(e,i),y(u,s,h),y(u,o,h),I(o,a),I(o,l)},p(u,h){h&2&&r!==(r=fe(u[1])+"")&&se(i,r),h&1&&c!==(c=fe(u[0])+"")&&se(l,c)},d(u){u&&g(e),u&&g(s),u&&g(o)}}}function Rd(t){let e,n,r,i,s;function o(l,u){return(s==null||u&4)&&(s=!!l[2]()),s?Cd:Ad}let a=o(t,-1),c=a(t);return{c(){e=b("div"),n=b("img"),i=R(),c.c(),v(n,"class","m-auto"),n.src!==(r="icons/goal.svg")&&v(n,"src",r),v(n,"alt","goal"),v(e,"class","goal  float-right bg-red-500 p-5  svelte-bssdtf")},m(l,u){y(l,e,u),I(e,n),I(e,i),c.m(e,null)},p(l,[u]){a===(a=o(l,u))&&c?c.p(l,u):(c.d(1),c=a(l),c&&(c.c(),c.m(e,null)))},i:Z,o:Z,d(l){l&&g(e),c.d()}}}function Nd(t,e,n){let r,{goal:i=0}=e,{road:s=0}=e,{balance:o=0}=e;return t.$$set=a=>{"goal"in a&&n(0,i=a.goal),"road"in a&&n(1,s=a.road),"balance"in a&&n(3,o=a.balance)},t.$$.update=()=>{if(t.$$.dirty&9){e:n(2,r=()=>i>o)}},[i,s,r,o]}var Ta=class extends H{constructor(e){super();K(this,e,Nd,Rd,z,{goal:0,road:1,balance:3})}},Ia=Ta;function Dd(t){let e,n,r=t[1].default,i=Tt(r,t,t[0],null);return{c(){e=b("div"),i&&i.c(),v(e,"class","card__background h-auto sm:w-96 w-11/12 mb-12 p-8 shadow-2xl relative")},m(s,o){y(s,e,o),i&&i.m(e,null),n=!0},p(s,[o]){i&&i.p&&(!n||o&1)&&It(i,r,s,s[0],o,null,null)},i(s){n||(T(i,s),n=!0)},o(s){k(i,s),n=!1},d(s){s&&g(e),i&&i.d(s)}}}function Od(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=s=>{"$$scope"in s&&n(0,i=s.$$scope)},[i,r]}var Sa=class extends H{constructor(e){super();K(this,e,Od,Dd,z,{})}},at=Sa;var Xt=[];function Qt(t,e=Z){let n,r=[];function i(a){if(z(t,a)&&(t=a,n)){let c=!Xt.length;for(let l=0;l<r.length;l+=1){let u=r[l];u[1](),Xt.push(u,t)}if(c){for(let l=0;l<Xt.length;l+=2)Xt[l][0](Xt[l+1]);Xt.length=0}}}function s(a){i(a(t))}function o(a,c=Z){let l=[a,c];return r.push(l),r.length===1&&(n=e(i)||Z),a(t),()=>{let u=r.indexOf(l);u!==-1&&r.splice(u,1),r.length===0&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}var Ye=Qt({displayName:"",photoURL:"icons/user.svg",email:"",uid:""}),ka=()=>Ye.set(0);var Je=Qt(),Aa=()=>Je.set(0);function Ld(t){let e,n,r,i,s,o,a,c,l,u=fe(t[0])+"",h,f,d,p;return d=new Ia({props:{balance:t[0],goal:t[1],road:t[2]}}),{c(){e=b("h1"),n=Y("Hola "),r=Y(t[3]),i=R(),s=b("h3"),s.textContent="Bienvenido de nuevo",o=R(),a=b("h3"),a.textContent="Balance",c=R(),l=b("p"),h=Y(u),f=R(),x(d.$$.fragment),v(a,"class","mt-8"),v(l,"class","euros")},m(m,A){y(m,e,A),I(e,n),I(e,r),y(m,i,A),y(m,s,A),y(m,o,A),y(m,a,A),y(m,c,A),y(m,l,A),I(l,h),y(m,f,A),P(d,m,A),p=!0},p(m,A){(!p||A&8)&&se(r,m[3]),(!p||A&1)&&u!==(u=fe(m[0])+"")&&se(h,u);let w={};A&1&&(w.balance=m[0]),A&2&&(w.goal=m[1]),A&4&&(w.road=m[2]),d.$set(w)},i(m){p||(T(d.$$.fragment,m),p=!0)},o(m){k(d.$$.fragment,m),p=!1},d(m){m&&g(e),m&&g(i),m&&g(s),m&&g(o),m&&g(a),m&&g(c),m&&g(l),m&&g(f),M(d,m)}}}function Pd(t){let e,n;return e=new at({props:{$$slots:{default:[Ld]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,[i]){let s={};i&47&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Md(t,e,n){let r,i,s,o;je(t,Je,c=>n(1,s=c)),je(t,Ye,c=>n(4,o=c));let{balance:a=0}=e;return t.$$set=c=>{"balance"in c&&n(0,a=c.balance)},t.$$.update=()=>{if(t.$$.dirty&3){e:n(2,r=s-a)}if(t.$$.dirty&16){e:n(3,i=o.displayName?o.displayName.split(" ")[0]:"crack")}},[a,s,r,i,o]}var Ca=class extends H{constructor(e){super();K(this,e,Md,Pd,z,{balance:0})}},Ra=Ca;function Ud(t){let e,n,r,i,s,o,a;return{c(){e=b("div"),n=b("button"),r=b("img"),r.src!==(i=`icons/${t[1]}.svg`)&&v(r,"src",i),v(r,"alt",t[1]),v(r,"class","svelte-qgfubh"),qe(r,"selected__icon",t[0]===t[1]),v(e,"class",s=""+(Ht(t[2])+" svelte-qgfubh")),qe(e,"selected",t[0]===t[1])},m(c,l){y(c,e,l),I(e,n),I(n,r),o||(a=[Se(n,"click",t[3]),Se(e,"click",t[5])],o=!0)},p(c,[l]){l&3&&qe(r,"selected__icon",c[0]===c[1]),l&3&&qe(e,"selected",c[0]===c[1])},i:Z,o:Z,d(c){c&&g(e),o=!1,Ke(a)}}}function xd(t,e,n){let{props:r={icon:"menu",style:"primary",onClick:()=>console.log("click")}}=e,{current:i="profile"}=e,{icon:s,style:o,onClick:a}=r;function c(l){Ki(t,l)}return t.$$set=l=>{"props"in l&&n(4,r=l.props),"current"in l&&n(0,i=l.current)},[i,s,o,a,r,c]}var Na=class extends H{constructor(e){super();K(this,e,xd,Ud,z,{props:4,current:0})}},Ue=Na;function Vd(t){let e,n,r,i;n=new Ue({props:{props:t[1]}});let s=t[2].default,o=Tt(s,t,t[3],null);return{c(){e=b("div"),x(n.$$.fragment),r=R(),o&&o.c(),v(e,"class","btn--close svelte-1dpv79t")},m(a,c){y(a,e,c),P(n,e,null),y(a,r,c),o&&o.m(a,c),i=!0},p(a,c){o&&o.p&&(!i||c&8)&&It(o,s,a,a[3],c,null,null)},i(a){i||(T(n.$$.fragment,a),T(o,a),i=!0)},o(a){k(n.$$.fragment,a),k(o,a),i=!1},d(a){a&&g(e),M(n),a&&g(r),o&&o.d(a)}}}function Fd(t){let e,n,r,i;return n=new at({props:{$$slots:{default:[Vd]},$$scope:{ctx:t}}}),{c(){e=b("div"),x(n.$$.fragment),v(e,"class",r=""+(Ht(t[0]?"hideModal":"modal")+" svelte-1dpv79t"))},m(s,o){y(s,e,o),P(n,e,null),i=!0},p(s,[o]){let a={};o&8&&(a.$$scope={dirty:o,ctx:s}),n.$set(a),(!i||o&1&&r!==(r=""+(Ht(s[0]?"hideModal":"modal")+" svelte-1dpv79t")))&&v(e,"class",r)},i(s){i||(T(n.$$.fragment,s),i=!0)},o(s){k(n.$$.fragment,s),i=!1},d(s){s&&g(e),M(n)}}}function $d(t,e,n){let{$$slots:r={},$$scope:i}=e,{hideModal:s=!0}=e,a={icon:"delete",style:"tertiary",onClick:()=>n(0,s=!s)};return t.$$set=c=>{"hideModal"in c&&n(0,s=c.hideModal),"$$scope"in c&&n(3,i=c.$$scope)},[s,a,r,i]}var Da=class extends H{constructor(e){super();K(this,e,$d,Fd,z,{hideModal:0})}},Oa=Da;function jd(t){let e,n,r,i;return{c(){e=b("input"),v(e,"type","text"),v(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),v(e,"placeholder",t[2])},m(s,o){y(s,e,o),Me(e,t[0]),r||(i=Se(e,"input",t[8]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&v(e,"class",n),o&4&&v(e,"placeholder",s[2]),o&1&&e.value!==s[0]&&Me(e,s[0])},d(s){s&&g(e),r=!1,i()}}}function qd(t){let e,n,r,i;return{c(){e=b("input"),v(e,"type","date"),v(e,"class",n="input__"+t[1]+" svelte-17e1blc"),v(e,"placeholder",t[2])},m(s,o){y(s,e,o),Me(e,t[0]),r||(i=Se(e,"input",t[7]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" svelte-17e1blc")&&v(e,"class",n),o&4&&v(e,"placeholder",s[2]),o&1&&Me(e,s[0])},d(s){s&&g(e),r=!1,i()}}}function Bd(t){let e,n,r,i;return{c(){e=b("input"),v(e,"type","number"),v(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),v(e,"placeholder",t[2])},m(s,o){y(s,e,o),Me(e,t[0]),r||(i=Se(e,"input",t[6]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&v(e,"class",n),o&4&&v(e,"placeholder",s[2]),o&1&&St(e.value)!==s[0]&&Me(e,s[0])},d(s){s&&g(e),r=!1,i()}}}function zd(t){let e,n,r,i;function s(c,l){if(c[4]==="number")return Bd;if(c[4]==="date")return qd;if(c[4]==="text")return jd}let o=s(t,-1),a=o&&o(t);return{c(){e=b("div"),n=b("h3"),r=Y(t[3]),i=R(),a&&a.c(),v(n,"class","mt-8 mb-1"),v(e,"class","svelte-17e1blc")},m(c,l){y(c,e,l),I(e,n),I(n,r),I(e,i),a&&a.m(e,null)},p(c,[l]){l&8&&se(r,c[3]),o===(o=s(c,l))&&a?a.p(c,l):(a&&a.d(1),a=o&&o(c),a&&(a.c(),a.m(e,null)))},i:Z,o:Z,d(c){c&&g(e),a&&a.d()}}}function Hd(t,e,n){let{icon:r="menu"}=e,{style:i="primary"}=e,{placeholder:s="0€"}=e,{value:o=""}=e,{label:a=""}=e,{type:c="number"}=e;function l(){o=St(this.value),n(0,o)}function u(){o=this.value,n(0,o)}function h(){o=this.value,n(0,o)}return t.$$set=f=>{"icon"in f&&n(5,r=f.icon),"style"in f&&n(1,i=f.style),"placeholder"in f&&n(2,s=f.placeholder),"value"in f&&n(0,o=f.value),"label"in f&&n(3,a=f.label),"type"in f&&n(4,c=f.type)},[o,i,s,a,c,r,l,u,h]}var La=class extends H{constructor(e){super();K(this,e,Hd,zd,z,{icon:5,style:1,placeholder:2,value:0,label:3,type:4})}},Rn=La;function Kd(t){let e,n,r,i,s,o=t[2].default,a=Tt(o,t,t[1],null);return{c(){e=b("div"),a&&a.c(),n=R(),r=b("span"),i=Y(t[0]),v(r,"class","tooltiptext svelte-1betoo6"),v(e,"class","tooltip svelte-1betoo6")},m(c,l){y(c,e,l),a&&a.m(e,null),I(e,n),I(e,r),I(r,i),s=!0},p(c,[l]){a&&a.p&&(!s||l&2)&&It(a,o,c,c[1],l,null,null),(!s||l&1)&&se(i,c[0])},i(c){s||(T(a,c),s=!0)},o(c){k(a,c),s=!1},d(c){c&&g(e),a&&a.d(c)}}}function Gd(t,e,n){let{$$slots:r={},$$scope:i}=e,{label:s="Soy un tooltip"}=e;return t.$$set=o=>{"label"in o&&n(0,s=o.label),"$$scope"in o&&n(1,i=o.$$scope)},[s,i,r]}var Pa=class extends H{constructor(e){super();K(this,e,Gd,Kd,z,{label:0})}},Nn=Pa;function Ma(t,e,n){let r=t.slice();return r[10]=e[n].label,r[11]=e[n].icon,r[12]=e[n].style,r[2]=e[n].onClick,r}function Wd(t){let e,n,r;return e=new Ue({props:{props:{icon:t[11],style:t[12],onClick:t[2]}}}),{c(){x(e.$$.fragment),n=R()},m(i,s){P(e,i,s),y(i,n,s),r=!0},p:Z,i(i){r||(T(e.$$.fragment,i),r=!0)},o(i){k(e.$$.fragment,i),r=!1},d(i){M(e,i),i&&g(n)}}}function Ua(t){let e,n;return e=new Nn({props:{label:t[10],$$slots:{default:[Wd]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,i){let s={};i&32768&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Xd(t){let e,n,r,i,s,o,a,c,l,u,h;function f(E){t[7](E)}let d={label:"añade la cantidad",type:"number"};t[3]!==void 0&&(d.value=t[3]),i=new Rn({props:d}),ot.push(()=>Wt(i,"value",f));function p(E){t[8](E)}let m={label:"¿Cuándo añadiste los fondos?",type:"date"};t[4]!==void 0&&(m.value=t[4]),a=new Rn({props:m}),ot.push(()=>Wt(a,"value",p));let A=t[5],w=[];for(let E=0;E<A.length;E+=1)w[E]=Ua(Ma(t,A,E));let L=E=>k(w[E],1,1,()=>{w[E]=null});return{c(){e=b("h1"),n=Y(t[1]),r=R(),x(i.$$.fragment),o=R(),x(a.$$.fragment),l=R(),u=b("div");for(let E=0;E<w.length;E+=1)w[E].c();v(e,"class","noselect text-2xl"),v(u,"class","float-right  mt-5 flex flex-row")},m(E,F){y(E,e,F),I(e,n),y(E,r,F),P(i,E,F),y(E,o,F),P(a,E,F),y(E,l,F),y(E,u,F);for(let te=0;te<w.length;te+=1)w[te].m(u,null);h=!0},p(E,F){(!h||F&2)&&se(n,E[1]);let te={};!s&&F&8&&(s=!0,te.value=E[3],Gt(()=>s=!1)),i.$set(te);let G={};if(!c&&F&16&&(c=!0,G.value=E[4],Gt(()=>c=!1)),a.$set(G),F&32){A=E[5];let W;for(W=0;W<A.length;W+=1){let N=Ma(E,A,W);w[W]?(w[W].p(N,F),T(w[W],1)):(w[W]=Ua(N),w[W].c(),T(w[W],1),w[W].m(u,null))}for(we(),W=A.length;W<w.length;W+=1)L(W);Ee()}},i(E){if(!h){T(i.$$.fragment,E),T(a.$$.fragment,E);for(let F=0;F<A.length;F+=1)T(w[F]);h=!0}},o(E){k(i.$$.fragment,E),k(a.$$.fragment,E),w=w.filter(Boolean);for(let F=0;F<w.length;F+=1)k(w[F]);h=!1},d(E){E&&g(e),E&&g(r),M(i,E),E&&g(o),M(a,E),E&&g(l),E&&g(u),Qe(w,E)}}}function Qd(t){let e,n;return e=new Oa({props:{hideModal:t[0],$$slots:{default:[Xd]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,[i]){let s={};i&1&&(s.hideModal=r[0]),i&32794&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Yd(t,e,n){let{hideModal:r=!0}=e,{onClick:i}=e,{title:s="Title"}=e,{id:o="0"}=e,a=0,c=()=>n(0,r=!r),l=[{icon:"saving",label:"Guardar Datos",style:"modal",onClick:()=>{c(),i(o,Ji,a)}}],u=Ji;function h(d){a=d,n(3,a)}function f(d){u=d,n(4,u)}return t.$$set=d=>{"hideModal"in d&&n(0,r=d.hideModal),"onClick"in d&&n(2,i=d.onClick),"title"in d&&n(1,s=d.title),"id"in d&&n(6,o=d.id)},[r,s,i,a,u,l,o,h,f]}var xa=class extends H{constructor(e){super();K(this,e,Yd,Qd,z,{hideModal:0,onClick:2,title:1,id:6})}},Va=xa;function Fa(t,e,n){let r=t.slice();return r[1]=e[n].start,r[2]=e[n].size,r}function $a(t){let e,n,r;return{c(){e=b("tr"),n=b("td"),r=R(),Kt(n,"--start",t[1]),Kt(n,"--size",t[2])},m(i,s){y(i,e,s),I(e,n),I(e,r)},p(i,s){s&1&&Kt(n,"--start",i[1]),s&1&&Kt(n,"--size",i[2])},d(i){i&&g(e)}}}function Jd(t){let e,n,r=t[0],i=[];for(let s=0;s<r.length;s+=1)i[s]=$a(Fa(t,r,s));return{c(){e=b("table"),n=b("tbody");for(let s=0;s<i.length;s+=1)i[s].c();v(e,"class","charts-css line svelte-1xzgxgp"),v(e,"id","my-chart")},m(s,o){y(s,e,o),I(e,n);for(let a=0;a<i.length;a+=1)i[a].m(n,null)},p(s,[o]){if(o&1){r=s[0];let a;for(a=0;a<r.length;a+=1){let c=Fa(s,r,a);i[a]?i[a].p(c,o):(i[a]=$a(c),i[a].c(),i[a].m(n,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=r.length}},i:Z,o:Z,d(s){s&&g(e),Qe(i,s)}}}function Zd(t,e,n){let{chart:r=[{start:0,size:.4},{start:.4,size:1}]}=e;return t.$$set=i=>{"chart"in i&&n(0,r=i.chart)},[r]}var ja=class extends H{constructor(e){super();K(this,e,Zd,Jd,z,{chart:0})}},Dn=ja;function qa(t,e,n){let r=t.slice();return r[22]=e[n],r}function ep(t){let e,n,r,i,s,o=fe(t[2])+"",a,c,l,u,h,f;return l=new Dn({}),{c(){e=b("h6"),n=Y(t[3]),r=R(),i=b("div"),s=b("p"),a=Y(o),c=R(),x(l.$$.fragment),u=R(),h=b("p"),h.textContent=`${t[8]}`,v(e,"class","mb-1"),v(s,"class","euros"),v(h,"class","percent svelte-49wrw"),v(i,"class","data svelte-49wrw")},m(d,p){y(d,e,p),I(e,n),y(d,r,p),y(d,i,p),I(i,s),I(s,a),I(i,c),P(l,i,null),I(i,u),I(i,h),f=!0},p(d,p){(!f||p&8)&&se(n,d[3]),(!f||p&4)&&o!==(o=fe(d[2])+"")&&se(a,o)},i(d){f||(T(l.$$.fragment,d),f=!0)},o(d){k(l.$$.fragment,d),f=!1},d(d){d&&g(e),d&&g(r),d&&g(i),M(l)}}}function tp(t){let e,n,r,i,s,o,a,c,l,u,h,f,d;o=new Dn({});let p=t[12],m=[];for(let w=0;w<p.length;w+=1)m[w]=Ba(qa(t,p,w));let A=w=>k(m[w],1,1,()=>{m[w]=null});return{c(){e=b("input"),n=R(),r=b("div"),i=b("input"),s=R(),x(o.$$.fragment),a=R(),c=b("p"),c.textContent=`${t[8]}`,l=R(),u=b("div");for(let w=0;w<m.length;w+=1)m[w].c();v(e,"name","title"),v(e,"class","title w-64 svelte-49wrw"),v(e,"type","text"),v(i,"name","number"),v(i,"type","number"),v(i,"class","svelte-49wrw"),v(c,"class","percent svelte-49wrw"),v(r,"class","data svelte-49wrw"),v(u,"class"," flex flex-row float-right")},m(w,L){y(w,e,L),Me(e,t[3]),y(w,n,L),y(w,r,L),I(r,i),Me(i,t[2]),I(r,s),P(o,r,null),I(r,a),I(r,c),y(w,l,L),y(w,u,L);for(let E=0;E<m.length;E+=1)m[E].m(u,null);h=!0,f||(d=[Se(e,"change",t[10]),Se(e,"input",t[15]),Se(i,"change",t[11]),Se(i,"input",t[16])],f=!0)},p(w,L){if(L&8&&e.value!==w[3]&&Me(e,w[3]),L&4&&St(i.value)!==w[2]&&Me(i,w[2]),L&4096){p=w[12];let E;for(E=0;E<p.length;E+=1){let F=qa(w,p,E);m[E]?(m[E].p(F,L),T(m[E],1)):(m[E]=Ba(F),m[E].c(),T(m[E],1),m[E].m(u,null))}for(we(),E=p.length;E<m.length;E+=1)A(E);Ee()}},i(w){if(!h){T(o.$$.fragment,w);for(let L=0;L<p.length;L+=1)T(m[L]);h=!0}},o(w){k(o.$$.fragment,w),m=m.filter(Boolean);for(let L=0;L<m.length;L+=1)k(m[L]);h=!1},d(w){w&&g(e),w&&g(n),w&&g(r),M(o),w&&g(l),w&&g(u),Qe(m,w),f=!1,Ke(d)}}}function Ba(t){let e,n,r,i;return n=new Ue({props:{props:t[22]}}),{c(){e=b("div"),x(n.$$.fragment),r=R()},m(s,o){y(s,e,o),P(n,e,null),I(e,r),i=!0},p:Z,i(s){i||(T(n.$$.fragment,s),i=!0)},o(s){k(n.$$.fragment,s),i=!1},d(s){s&&g(e),M(n)}}}function za(t){let e,n,r=fe(t[6])+"",i;return{c(){e=b("h3"),n=Y("Rentabilidad: "),i=Y(r),v(e,"class","mt-1 revenue text-sm")},m(s,o){y(s,e,o),I(e,n),I(e,i)},p(s,o){o&64&&r!==(r=fe(s[6])+"")&&se(i,r)},d(s){s&&g(e)}}}function np(t){let e,n,r,i,s,o,a;e=new Va({props:{hideModal:t[5],title:t[3],id:t[7],onClick:t[1].saving}});let c=[tp,ep],l=[];function u(f,d){return f[0]?0:1}i=u(t,-1),s=l[i]=c[i](t);let h=t[9].length>0&&!t[0]&&za(t);return{c(){x(e.$$.fragment),n=R(),r=b("div"),s.c(),o=R(),h&&h.c(),v(r,"class","w-64 m-3 relative svelte-49wrw"),qe(r,"hightlight",t[4])},m(f,d){P(e,f,d),y(f,n,d),y(f,r,d),l[i].m(r,null),I(r,o),h&&h.m(r,null),a=!0},p(f,[d]){let p={};d&32&&(p.hideModal=f[5]),d&8&&(p.title=f[3]),d&2&&(p.onClick=f[1].saving),e.$set(p);let m=i;i=u(f,d),i===m?l[i].p(f,d):(we(),k(l[m],1,1,()=>{l[m]=null}),Ee(),s=l[i],s?s.p(f,d):(s=l[i]=c[i](f),s.c()),T(s,1),s.m(r,o)),f[9].length>0&&!f[0]?h?h.p(f,d):(h=za(f),h.c(),h.m(r,null)):h&&(h.d(1),h=null),d&16&&qe(r,"hightlight",f[4])},i(f){a||(T(e.$$.fragment,f),T(s),a=!0)},o(f){k(e.$$.fragment,f),k(s),a=!1},d(f){M(e,f),f&&g(n),f&&g(r),l[i].d(),h&&h.d()}}}function rp(t,e,n){let r,i,{edit:s=!1}=e,{data:o=[]}=e,{props:a={id:"9c72c81f-480d-4575-bdff-45e50afc7a33",title:"Total Title",number:0,percent:0,hightlight:!1,saving:[]}}=e,{id:c,title:l,number:u,percent:h,hightlight:f,saving:d}=a,p=!0,m=()=>n(5,p=!p),A={remove:()=>o.remove(c),changeName:()=>o.change(c,"title",l),changeNumber:()=>o.change(c,"number",u),changeHigh:()=>o.change(c,"hightlight",f),toogleHigh:()=>{n(4,f=!f),E()}},{changeName:w,changeNumber:L,changeHigh:E,remove:F,toogleHigh:te}=A,G=[{icon:"delete",style:"tertiary",onClick:F},{icon:"highlight",style:"tertiary",onClick:te},{icon:"saving",style:"tertiary",onClick:m}];function W(){l=this.value,n(3,l)}function N(){u=St(this.value),n(2,u)}t.$$set=U=>{"edit"in U&&n(0,s=U.edit),"data"in U&&n(1,o=U.data),"props"in U&&n(13,a=U.props)},t.$$.update=()=>{if(t.$$.dirty&16388){e:n(6,i=u-r)}};e:n(14,r=d.reduce((U,He)=>U+He.amount,0));return[s,o,u,l,f,p,i,c,h,d,w,L,G,a,r,W,N]}var Ha=class extends H{constructor(e){super();K(this,e,rp,np,z,{edit:0,data:1,props:13})}},Ka=Ha;var wr,ip=new Uint8Array(16);function sp(){if(!wr&&(wr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!wr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wr(ip)}var op=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ap(t){return typeof t=="string"&&op.test(t)}var me=[];for(var Zi=0;Zi<256;++Zi)me.push((Zi+256).toString(16).substr(1));function cp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(me[t[e+0]]+me[t[e+1]]+me[t[e+2]]+me[t[e+3]]+"-"+me[t[e+4]]+me[t[e+5]]+"-"+me[t[e+6]]+me[t[e+7]]+"-"+me[t[e+8]]+me[t[e+9]]+"-"+me[t[e+10]]+me[t[e+11]]+me[t[e+12]]+me[t[e+13]]+me[t[e+14]]+me[t[e+15]]).toLowerCase();if(!ap(n))throw TypeError("Stringified UUID is invalid");return n}function Ga(t,e,n){t=t||{};var r=t.random||(t.rng||sp)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return cp(r)}var lp={title:"Título",number:0,revenue:0,percent:0,hightlight:!1,saving:[]},up=()=>{let{subscribe:t,update:e,set:n}=Qt(),r=()=>{let u=[];return t(h=>u=h),u};return{subscribe:t,update:e,add:()=>e(u=>[...u,{...lp,id:Ga()}]),set:n,remove:u=>e(h=>h.filter(f=>f.id!==u)),change:(u,h,f)=>{let d=r();d.map(p=>p.id===u?p[h]=f:""),n(d)},balance:()=>r().reduce((f,d)=>f+d.number,0),saving:(u,h,f)=>{let d=r();d.map(p=>p.id===u?p.saving=[...p.saving,{today:h,amount:f}]:""),n(d)},revenue:()=>{let u=r(),h=[];return u.map(d=>d.saving.map(p=>h=[...h,p.amount])),h.reduce((d,p)=>d+p,0)}}},De=up(),Wa=()=>{De.set([])};function Xa(t,e,n){let r=t.slice();return r[2]=e[n],r}function Ya(t){let e=[],n=new Map,r,i,s=t[1],o=a=>a[2].id;for(let a=0;a<s.length;a+=1){let c=Xa(t,s,a),l=o(c);n.set(l,e[a]=Qa(l,c))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=st()},m(a,c){for(let l=0;l<e.length;l+=1)e[l].m(a,c);y(a,r,c),i=!0},p(a,c){c&3&&(s=a[1],we(),e=Cn(e,c,o,1,a,s,n,r.parentNode,An,Qa,r,Xa),Ee())},i(a){if(!i){for(let c=0;c<s.length;c+=1)T(e[c]);i=!0}},o(a){for(let c=0;c<e.length;c+=1)k(e[c]);i=!1},d(a){for(let c=0;c<e.length;c+=1)e[c].d(a);a&&g(r)}}}function Qa(t,e){let n,r,i;return r=new Ka({props:{edit:e[0],props:e[2],data:De}}),{key:t,first:null,c(){n=st(),x(r.$$.fragment),this.first=n},m(s,o){y(s,n,o),P(r,s,o),i=!0},p(s,o){e=s;let a={};o&1&&(a.edit=e[0]),o&2&&(a.props=e[2]),r.$set(a)},i(s){i||(T(r.$$.fragment,s),i=!0)},o(s){k(r.$$.fragment,s),i=!1},d(s){s&&g(n),M(r,s)}}}function hp(t){let e,n,r=t[1]&&Ya(t);return{c(){r&&r.c(),e=st()},m(i,s){r&&r.m(i,s),y(i,e,s),n=!0},p(i,[s]){i[1]?r?(r.p(i,s),s&2&&T(r,1)):(r=Ya(i),r.c(),T(r,1),r.m(e.parentNode,e)):r&&(we(),k(r,1,1,()=>{r=null}),Ee())},i(i){n||(T(r),n=!0)},o(i){k(r),n=!1},d(i){r&&r.d(i),i&&g(e)}}}function fp(t,e,n){let r;je(t,De,s=>n(1,r=s));let{edit:i=!1}=e;return t.$$set=s=>{"edit"in s&&n(0,i=s.edit)},[i,r]}var Ja=class extends H{constructor(e){super();K(this,e,fp,hp,z,{edit:0})}},Er=Ja;function dp(t){let e,n,r,i,s,o=fe(t[0])+"",a,c,l,u,h,f;return l=new Dn({}),{c(){e=b("div"),n=b("h6"),n.textContent=`${t[1]}`,r=R(),i=b("div"),s=b("p"),a=Y(o),c=R(),x(l.$$.fragment),u=R(),h=b("p"),h.textContent=`${t[2]}`,v(n,"class","mb-1"),v(s,"class","euros"),v(h,"class","percent svelte-x91ufk"),v(i,"class","data svelte-x91ufk"),v(e,"class","w-64 m-3 relative m-6 svelte-x91ufk"),qe(e,"hightlight",t[3])},m(d,p){y(d,e,p),I(e,n),I(e,r),I(e,i),I(i,s),I(s,a),I(i,c),P(l,i,null),I(i,u),I(i,h),f=!0},p(d,[p]){(!f||p&1)&&o!==(o=fe(d[0])+"")&&se(a,o)},i(d){f||(T(l.$$.fragment,d),f=!0)},o(d){k(l.$$.fragment,d),f=!1},d(d){d&&g(e),M(l)}}}function pp(t,e,n){let{revenue:r=0}=e,{props:i={title:"Beneficios",number:10,percent:0,hightlight:!0}}=e,{title:s,number:o,percent:a,hightlight:c}=i;return t.$$set=l=>{"revenue"in l&&n(0,r=l.revenue),"props"in l&&n(4,i=l.props)},[r,s,a,c,i]}var Za=class extends H{constructor(e){super();K(this,e,pp,dp,z,{revenue:0,props:4})}},ec=Za;function mp(t){let e,n,r,i,s,o;return e=new Ra({props:{balance:t[0]}}),r=new ec({props:{revenue:t[1]}}),s=new Er({}),{c(){x(e.$$.fragment),n=R(),x(r.$$.fragment),i=R(),x(s.$$.fragment)},m(a,c){P(e,a,c),y(a,n,c),P(r,a,c),y(a,i,c),P(s,a,c),o=!0},p(a,[c]){let l={};c&1&&(l.balance=a[0]),e.$set(l);let u={};c&2&&(u.revenue=a[1]),r.$set(u)},i(a){o||(T(e.$$.fragment,a),T(r.$$.fragment,a),T(s.$$.fragment,a),o=!0)},o(a){k(e.$$.fragment,a),k(r.$$.fragment,a),k(s.$$.fragment,a),o=!1},d(a){M(e,a),a&&g(n),M(r,a),a&&g(i),M(s,a)}}}function gp(t,e,n){let r=0,i=0;return De.subscribe(s=>{s&&(n(0,r=De.balance()),n(1,i=De.balance()-De.revenue()))}),[r,i]}var tc=class extends H{constructor(e){super();K(this,e,gp,mp,z,{})}},nc=tc;var es=function(t,e){return es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},es(t,e)};function yp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");es(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ts=function(){return ts=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ts.apply(this,arguments)};function br(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vp(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function _p(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ns(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tr(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function rc(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var wp=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)==55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ep=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{var s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,d=l&63;c||(d=64,o||(f=64)),r.push(n[u],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wp(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ep(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length,a=o?n[t.charAt(i)]:0;++i;var c=i<t.length,l=c?n[t.charAt(i)]:64;++i;var u=i<t.length,h=u?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw Error();var f=s<<2|a>>4;if(r.push(f),l!==64){var d=a<<4&240|l>>2;if(r.push(d),h!==64){var p=l<<6&192|h;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ic=function(t){try{return bp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};var Tp=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();function le(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ir(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(le())}function Sr(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kr(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sc(){return le().indexOf("Electron/")>=0}function Ar(){var t=le();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oc(){return le().indexOf("MSAppHost/")>=0}var Ip="FirebaseError",Ln=function(t){yp(e,t);function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name=Ip,Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,On.prototype.create),s}return e}(Error),On=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+e,o=this.errors[e],a=o?Sp(o,i):"Error",c=this.serviceName+": "+a+" ("+s+").",l=new Ln(s,c,i);return l},t}();function Sp(t,e){return t.replace(kp,function(n,r){var i=e[r];return i!=null?String(i):"<"+r+"?>"})}var kp=/\{\$([^}]+)}/g;function ac(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yt(t){for(var e=[],n=function(c,l){Array.isArray(l)?l.forEach(function(u){e.push(encodeURIComponent(c)+"="+encodeURIComponent(u))}):e.push(encodeURIComponent(c)+"="+encodeURIComponent(l))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r],o=s[0],a=s[1];n(o,a)}return e.length?"&"+e.join("&"):""}function cc(t,e){var n=new Ap(t,e);return n.subscribe.bind(n)}var Ap=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Cp(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=rs),s.error===void 0&&(s.error=rs),s.complete===void 0&&(s.complete=rs);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch(a){}}),this.observers.push(s),o},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function Cp(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function rs(){}function xe(t){return t&&t._delegate?t._delegate:t}var ct=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();var lt="[DEFAULT]";var Dp=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(e){e===void 0&&(e=lt);var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new Tp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(s){}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n=ts({identifier:lt,optional:!1},e),r=n.identifier,i=n.optional,s=this.normalizeInstanceIdentifier(r);if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(Np(e))try{this.getOrInitializeService({instanceIdentifier:lt})}catch(h){}try{for(var i=ns(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var o=Tr(s.value,2),a=o[0],c=o[1],l=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:l});c.resolve(u)}catch(h){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=lt),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return vp(this,void 0,void 0,function(){var e;return _p(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(rc(rc([],Tr(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),Tr(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=lt),this.instances.has(e)},t.prototype.initialize=function(e){var n,r;e===void 0&&(e={});var i=e.instanceIdentifier,s=i===void 0?lt:i,o=e.options,a=o===void 0?{}:o,c=this.normalizeInstanceIdentifier(s);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:c,options:a});try{for(var u=ns(this.instancesDeferred.entries()),h=u.next();!h.done;h=u.next()){var f=Tr(h.value,2),d=f[0],p=f[1],m=this.normalizeInstanceIdentifier(d);c===m&&p.resolve(l)}}catch(A){n={error:A}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return this.invokeOnInitCallbacks(l,c),l},t.prototype.onInit=function(e){var n=this;return this.onInitCallbacks.add(e),function(){n.onInitCallbacks.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var r,i;try{for(var s=ns(this.onInitCallbacks),o=s.next();!o.done;o=s.next()){var a=o.value;try{a(e,n)}catch(c){}}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,r=e.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Rp(n),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(o){}return s||null},t.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:lt:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function Rp(t){return t===lt?void 0:t}function Np(t){return t.instantiationMode==="EAGER"}var Op=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new Dp(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function Be(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var At,Q;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Q||(Q={}));var Lp={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},Pp=Q.INFO,Mp=(At={},At[Q.DEBUG]="log",At[Q.VERBOSE]="log",At[Q.INFO]="info",At[Q.WARN]="warn",At[Q.ERROR]="error",At),Up=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),s=Mp[e];if(s)console[s].apply(console,Be(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},Pn=function(){function t(e){this.name=e,this._logLevel=Pp,this._logHandler=Up,this._userLogHandler=null}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Q))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?Lp[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Be([this,Q.DEBUG],e)),this._logHandler.apply(this,Be([this,Q.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Be([this,Q.VERBOSE],e)),this._logHandler.apply(this,Be([this,Q.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Be([this,Q.INFO],e)),this._logHandler.apply(this,Be([this,Q.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Be([this,Q.WARN],e)),this._logHandler.apply(this,Be([this,Q.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Be([this,Q.ERROR],e)),this._logHandler.apply(this,Be([this,Q.ERROR],e))},t}();var lc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xp(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function xp(t){let e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}var uc="@firebase/app-exp",Vp="0.0.900-exp.d92a36260";var is=new Pn("@firebase/app"),Fp="@firebase/app-compat",$p="@firebase/analytics-compat",jp="@firebase/analytics-exp",qp="@firebase/auth-exp",Bp="@firebase/auth-compat",zp="@firebase/database",Hp="@firebase/database-compat",Kp="@firebase/functions-exp",Gp="@firebase/functions-compat",Wp="@firebase/installations-exp",Xp="@firebase/installations-compat",Qp="@firebase/messaging-exp",Yp="@firebase/messaging-compat",Jp="@firebase/performance-exp",Zp="@firebase/performance-compat",em="@firebase/remote-config-exp",tm="@firebase/remote-config-compat",nm="@firebase/storage",rm="@firebase/storage-compat",im="@firebase/firestore",sm="@firebase/firestore-compat",om="firebase-exp",am="9.0.0-beta.2";var hc="[DEFAULT]",cm={[uc]:"fire-core",[Fp]:"fire-core-compat",[jp]:"fire-analytics",[$p]:"fire-analytics-compat",[qp]:"fire-auth",[Bp]:"fire-auth-compat",[zp]:"fire-rtdb",[Hp]:"fire-rtdb-compat",[Kp]:"fire-fn",[Gp]:"fire-fn-compat",[Wp]:"fire-iid",[Xp]:"fire-iid-compat",[Qp]:"fire-fcm",[Yp]:"fire-fcm-compat",[Jp]:"fire-perf",[Zp]:"fire-perf-compat",[em]:"fire-rc",[tm]:"fire-rc-compat",[nm]:"fire-gcs",[rm]:"fire-gcs-compat",[im]:"fire-fst",[sm]:"fire-fst-compat","fire-js":"fire-js",[om]:"fire-js-all"};var Cr=new Map,ss=new Map;function lm(t,e){try{t.container.addComponent(e)}catch(n){is.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ct(t){let e=t.name;if(ss.has(e))return is.debug(`There were multiple attempts to register component ${e}.`),!1;ss.set(e,t);for(let n of Cr.values())lm(n,t);return!0}function Mn(t,e){return t.container.getProvider(e)}var um={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Rr=new On("app","Firebase",um);var fc=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ct("app-exp",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}};var Rt=am;function os(t,e={}){typeof e!="object"&&(e={name:e});let n=Object.assign({name:hc,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Rr.create("bad-app-name",{appName:String(r)});if(Cr.has(r))throw Rr.create("duplicate-app",{appName:r});let i=new Op(r);for(let o of ss.values())i.addComponent(o);let s=new fc(t,n,i);return Cr.set(r,s),s}function Nr(t=hc){let e=Cr.get(t);if(!e)throw Rr.create("no-app",{appName:t});return e}function ut(t,e,n){var r;let i=(r=cm[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),is.warn(a.join(" "));return}Ct(new ct(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function hm(t){Ct(new ct("platform-logger",e=>new lc(e),"PRIVATE")),ut(uc,Vp,t),ut("fire-js","")}hm();var fm="firebase-exp",dm="9.0.0-beta.2";ut(fm,dm,"app");var pm={apiKey:"AIzaSyDWiDgqYUOUq1tsA8C5zY3eJR170KRa3qA",authDomain:"finanzas-cfeb0.firebaseapp.com",projectId:"finanzas-cfeb0",storageBucket:"finanzas-cfeb0.appspot.com",messagingSenderId:"245107666949",appId:"1:245107666949:web:f8bac696fa6a205541ac6c",measurementId:"G-LR1WRTGGG2"},zw=os(pm);function mm(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var dc=new On("auth","Firebase",mm());var pc=new Pn("@firebase/auth-exp");function Dr(t,...e){pc.logLevel<=Q.ERROR&&pc.error(`Auth (${Rt}): ${t}`,...e)}function Ze(t,...e){throw as(t,...e)}function Jt(t,...e){return as(t,...e)}function as(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dc.create(t,...e)}function $(t,e,...n){if(!t)throw as(e,...n)}function et(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Dr(e),new Error(e)}function ht(t,e){t||et(e)}var mc=new Map;function tt(t){ht(t instanceof Function,"Expected a class definition");let e=mc.get(t);return e?(ht(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mc.set(t,e),e)}function gm(t,e){let n=Mn(t,"auth-exp");if(n.isInitialized()){let i=n.getImmediate();Ze(i,"already-initialized")}return n.initialize({options:e})}function ym(t,e){let n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tt);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function cs(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vm(){return gc()==="http:"||gc()==="https:"}function gc(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function _m(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vm()||Sr()||"connection"in navigator)?navigator.onLine:!0}function wm(){if(typeof navigator=="undefined")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Zt=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ht(n>e,"Short delay should be less than long delay!"),this.isMobile=Ir()||kr()}get(){return _m()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ls(t,e){ht(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Or=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Em={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"};var bm=new Zt(3e4,6e4);function Tm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Lr(t,e,n,r,i={}){return yc(t,i,()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Yt(Object.assign({key:t.config.apiKey},o)).slice(1),c=new(Or.headers());return c.set("Content-Type","application/json"),c.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&c.set("X-Firebase-Locale",t.languageCode),Or.fetch()(vc(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function yc(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Em),e);try{let i=new _c(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw us(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=(s.ok?o.errorMessage:o.error.message).split(" : ")[0];if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw us(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw us(t,"email-already-in-use",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");Ze(t,l)}}catch(i){if(i instanceof Ln)throw i;Ze(t,"network-request-failed")}}async function Im(t,e,n,r,i={}){let s=await Lr(t,e,n,r,i);return"mfaPendingCredential"in s&&Ze(t,"multi-factor-auth-required",{serverResponse:s}),s}function vc(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?ls(t.config,i):`${t.config.apiScheme}://${i}`}var _c=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jt(this.auth,"timeout")),bm.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function us(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Jt(t,e,r);return i.customData._tokenResponse=n,i}async function Sm(t,e){return Lr(t,"POST","/v1/accounts:delete",e)}async function km(t,e){return Lr(t,"POST","/v1/accounts:lookup",e)}function Un(t){if(!!t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function Am(t,e=!1){let n=xe(t),r=await n.getIdToken(e),i=fs(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Un(hs(i.auth_time)),issuedAtTime:Un(hs(i.iat)),expirationTime:Un(hs(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hs(t){return Number(t)*1e3}function fs(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dr("JWT malformed, contained fewer than 3 sections"),null;try{let i=ic(n);return i?JSON.parse(i):(Dr("Failed to decode base64 JWT payload"),null)}catch(i){return Dr("Caught error parsing JWT payload as JSON",i),null}}function Cm(t){let e=fs(t);return $(e,"internal-error"),$(typeof e.exp!="undefined","internal-error"),$(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}async function xn(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ln&&Rm(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Rm({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var wc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ds=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Un(this.lastLoginAt),this.creationTime=Un(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Pr(t){var e;let n=t.auth,r=await t.getIdToken(),i=await xn(t,km(n,{idToken:r}));$(i==null?void 0:i.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?Dm(s.providerUserInfo):[],a=Nm(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(a==null?void 0:a.length),u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ds(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Om(t){let e=xe(t);await Pr(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Nm(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Dm(t){return t.map(e=>{var{providerId:n}=e,r=br(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function Lm(t,e){let n=await yc(t,{},()=>{let r=Yt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=vc(t,i,"/v1/token",`key=${s}`);return Or.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}var en=class{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken!="undefined","internal-error"),$(typeof e.refreshToken!="undefined","internal-error");let n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):Cm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return $(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:s}=await Lm(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new en;return r&&($(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&($(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&($(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new en,this.toJSON())}_performRefresh(){return et("not implemented")}};function ft(t,e){$(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}var dt=class{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=br(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new wc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.metadata=new ds(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let n=await xn(this,this.stsTokenManager.getToken(this.auth,e));return $(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Am(this,e)}reload(){return Om(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new dt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pr(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await xn(this,Sm(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,d=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(l=n.createdAt)!==null&&l!==void 0?l:void 0,L=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:F,isAnonymous:te,providerData:G,stsTokenManager:W}=n;$(E&&W,e,"internal-error");let N=en.fromJSON(this.name,W);$(typeof E=="string",e,"internal-error"),ft(h,e.name),ft(f,e.name),$(typeof F=="boolean",e,"internal-error"),$(typeof te=="boolean",e,"internal-error"),ft(d,e.name),ft(p,e.name),ft(m,e.name),ft(A,e.name),ft(w,e.name),ft(L,e.name);let U=new dt({uid:E,auth:e,email:f,emailVerified:F,displayName:h,isAnonymous:te,photoURL:p,phoneNumber:d,tenantId:m,stsTokenManager:N,createdAt:w,lastLoginAt:L});return G&&Array.isArray(G)&&(U.providerData=G.map(He=>Object.assign({},He))),A&&(U._redirectEventId=A),U}static async _fromIdTokenResponse(e,n,r=!1){let i=new en;i.updateFromServerResponse(n);let s=new dt({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Pr(s),s}};var ps=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){let n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};ps.type="NONE";var Ec=ps;function Mr(t,e,n){return`firebase:${t}:${e}:${n}`}var tn=class{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Mr(this.userKey,i.apiKey,s),this.fullPersistenceKey=Mr("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?dt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tn(tt(Ec),e,r);let i=tt(Ec);for(let a of n)if(await a._isAvailable()){i=a;break}let s=null,o=Mr(r,e.config.apiKey,e.name);for(let a of n)try{let c=await a._get(o);if(c){let l=dt._fromJSON(e,c);a!==i&&(s=l);break}}catch(c){}return s&&await i._set(o,s.toJSON()),await Promise.all(n.map(async a=>{if(a!==i)try{await a._remove(o)}catch(c){}})),new tn(i,e,r)}};function Cc(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ic(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bc(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kc(e))return"Blackberry";if(Ac(e))return"Webos";if(ms(e))return"Safari";if((e.includes("chrome/")||Tc(e))&&!e.includes("edge/"))return"Chrome";if(Sc(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bc(t=le()){return/firefox\//i.test(t)}function ms(t=le()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tc(t=le()){return/crios\//i.test(t)}function Ic(t=le()){return/iemobile/i.test(t)}function Sc(t=le()){return/android/i.test(t)}function kc(t=le()){return/blackberry/i.test(t)}function Ac(t=le()){return/webos/i.test(t)}function Ur(t=le()){return/iphone|ipad|ipod/i.test(t)}function Pm(t=le()){var e;return Ur(t)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function Mm(){return Ar()&&document.documentMode===10}function Rc(t=le()){return Ur(t)||Sc(t)||Ac(t)||kc(t)||/windows phone/i.test(t)||Ic(t)}function Um(){try{return!!(window&&window!==window.top)}catch(t){return!1}}function Nc(t,e=[]){let n;switch(t){case"Browser":n=Cc(le());break;case"Worker":n=`${Cc(le())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rt}/${r}`}var Dc=class{constructor(e,n){this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gs(this),this.idTokenSubscription=new gs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.redirectInitializerError=null,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dc,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tt(n)),this._initializationPromise=this.queue(async()=>{var r;this._deleted||(this.persistenceManager=await tn.create(this,e),!this._deleted&&(((r=this._popupRedirectResolver)===null||r===void 0?void 0:r._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(n),!this._deleted&&(this._isInitialized=!0)))}),this._initializationPromise.then(()=>{if(this.redirectInitializerError)throw this.redirectInitializerError})}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var n;let r=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=r==null?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===s)&&(o==null?void 0:o.user)&&(r=o.user)}return r?r._redirectEventId?($(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)):this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){this.redirectInitializerError=r,await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pr(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wm()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let n=e?xe(e):null;return n&&$(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(tt(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new On("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&tt(e)||this._popupRedirectResolver;$(n,this,"argument-error"),this.redirectPersistenceManager=await tn.create(this,[tt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next,o=this._isInitialized?Promise.resolve():this._initializationPromise;return $(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}};function ys(t){return xe(t)}var gs=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=cc(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var vs=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return et("not implemented")}_getIdTokenResponse(e){return et("not implemented")}_linkToIdToken(e,n){return et("not implemented")}_getReauthenticationResolver(e){return et("not implemented")}};async function nn(t,e){return Im(t,"POST","/v1/accounts:signInWithIdp",Tm(t,e))}var xm="http://localhost",Vn=class extends vs{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){let n=new Vn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ze("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=br(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new Vn(r,i);return Object.assign(o,s),o}_getIdTokenResponse(e){let n=this.buildRequest();return nn(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,nn(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,nn(e,n)}buildRequest(){let e={requestUri:xm,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yt(n)}return e}};var xr=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var _s=class extends xr{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ze=class extends _s{constructor(){super("google.com");this.addScope("profile")}static credential(e,n){return Vn._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ze.credentialFromTaggedObject(e)}static credentialFromError(e){return ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ze.credential(n,r)}catch(i){return null}}};ze.GOOGLE_SIGN_IN_METHOD="google.com";ze.PROVIDER_ID="google.com";var Nt=class{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let s=await dt._fromIdTokenResponse(e,r,i),o=Oc(r);return new Nt({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=Oc(r);return new Nt({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function Oc(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Fn=class extends Ln{constructor(e,n,r,i){var s;super(n.code,n.message);this.operationType=r,this.user=i,this.name="FirebaseError",Object.setPrototypeOf(this,Fn.prototype),this.appName=e.name,this.code=n.code,this.tenantId=(s=e.tenantId)!==null&&s!==void 0?s:void 0,this.serverResponse=n.customData.serverResponse}static _fromErrorAndOperation(e,n,r,i){return new Fn(e,n,r,i)}};function Lc(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fn._fromErrorAndOperation(t,s,e,r):s})}async function Vm(t,e,n=!1){let r=await xn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nt._forOperation(t,"link",r)}async function Fm(t,e,n=!1){let{auth:r}=t,i="reauthenticate";try{let s=await xn(t,Lc(r,i,e,t),n);$(s.idToken,r,"internal-error");let o=fs(s.idToken);$(o,r,"internal-error");let{sub:a}=o;return $(t.uid===a,r,"user-mismatch"),Nt._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ze(r,"user-mismatch"),s}}async function $m(t,e,n=!1){let r="signIn",i=await Lc(t,r,e),s=await Nt._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Pc(t,e,n,r){return xe(t).onAuthStateChanged(e,n,r)}function Mc(t){return xe(t).signOut()}var jm="@firebase/auth-exp",qm="0.0.900-exp.d92a36260";var Uc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{var i;e(((i=r)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Bm(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function zm(t){Ct(new ct("auth-exp",(e,{options:n})=>{let r=e.getProvider("app-exp").getImmediate(),{apiKey:i,authDomain:s}=r.options;return(o=>{$(i&&!i.includes(":"),"invalid-api-key",{appName:o.name}),$(!(s==null?void 0:s.includes(":")),"argument-error",{appName:o.name});let a={apiKey:i,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nc(t)},c=new Dc(o,a);return ym(c,n),c})(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ct(new ct("auth-internal",e=>{let n=ys(e.getProvider("auth-exp").getImmediate());return(r=>new Uc(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ut(jm,qm,Bm(t))}var Vr="__sak";var ws=class{constructor(e,n){this.storage=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vr,"1"),this.storage.removeItem(Vr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}};function Hm(){let t=le();return ms(t)||Ur(t)}var Km=1e3,Gm=10,Es=class extends ws{constructor(){super(window.localStorage,"LOCAL");this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Hm()&&Um(),this.fallbackToPolling=Rc(),this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}let r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}let i=()=>{let o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Mm()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Gm):i()}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Km)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){let n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}};Es.type="LOCAL";var Wm=Es;function Xm(t){return Promise.all(t.map(async e=>{try{let n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}var $n=class{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;let r=new $n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o==null?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});let a=Array.from(o).map(async l=>l(n.origin,s)),c=await Xm(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};$n.receivers=[];function Qm(t="",e=20){return`${t}${Math.floor(Math.random()*Math.pow(10,e))}`}var xc=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=Qm();i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Ge(){return window}function Ym(t){Ge().location.href=t}function Vc(){return typeof Ge().WorkerGlobalScope!="undefined"&&typeof Ge().importScripts=="function"}async function Jm(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function Zm(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function eg(){return Vc()?self:null}var Fc="firebaseLocalStorageDb",tg=1,Fr="firebaseLocalStorage",$c="fbase_key",rn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function $r(t,e){return t.transaction([Fr],e?"readwrite":"readonly").objectStore(Fr)}function ng(){let t=indexedDB.deleteDatabase(Fc);return new rn(t).toPromise()}function bs(){let t=indexedDB.open(Fc,tg);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Fr,{keyPath:$c})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;if(r.objectStoreNames.contains(Fr))e(r);else return await ng(),bs()})})}async function jc(t,e,n){let r=$r(t,!0).put({[$c]:e,value:n});return new rn(r).toPromise()}async function rg(t,e){let n=$r(t,!1).get(e),r=await new rn(n).toPromise();return r===void 0?null:r.value}function qc(t,e){let n=$r(t,!0).delete(e);return new rn(n).toPromise()}var ig=800,sg=3,Ts=class{constructor(){this.type="LOCAL",this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bs(),this.db)}async _withRetries(e){let n=0;for(;;)try{let r=await this._openDb();return await e(r)}catch(r){if(n++>sg)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$n._getInstance(eg()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Jm(),!this.activeServiceWorker)return;this.sender=new xc(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zm()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await bs();return await jc(e,Vr,"1"),await qc(e,Vr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jc(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){let n=await this._withRetries(r=>rg(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qc(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(i=>{let s=$r(i,!1).getAll();return new rn(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;for(let{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(let i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ig)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Ts.type="LOCAL";var og=Ts;var ag=10*60*1e3,Bc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cg(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Hc(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ag&&this.cachedEventUids.clear(),this.cachedEventUids.has(zc(e))}saveEventToCache(e){this.cachedEventUids.add(zc(e)),this.lastProcessedEventTime=Date.now()}};function zc(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Hc({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cg(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hc(t);default:return!1}}function lg(t){return`${t||""}${Math.floor(Math.random()*1e9)}`}async function ug(t){return Lr(t,"GET","/v1/projects",{})}var hg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fg=/^https?/;async function pg(t){if(t.config.emulator)return;let{authorizedDomains:e}=await ug(t);for(let n of e)try{if(dg(n))return}catch(r){}Ze(t,"unauthorized-domain")}function dg(t){let e=cs(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!fg.test(n))return!1;if(hg.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}function mg(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function gg(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n,r.type="text/javascript",r.charset="UTF-8",mg().appendChild(r)})}function yg(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var vg=new Zt(3e4,6e4);function Kc(){let t=Ge().___jsl;if(t==null?void 0:t.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _g(t){return new Promise((e,n)=>{var r,i,s;function o(){Kc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kc(),n(Jt(t,"network-request-failed"))},timeout:vg.get()})}if((i=(r=Ge().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0?void 0:i.Iframe)e(gapi.iframes.getContext());else if((s=Ge().gapi)===null||s===void 0?void 0:s.load)o();else{let a=yg("iframefcb");return Ge()[a]=()=>{gapi.load?o():n(Jt(t,"network-request-failed"))},gg(`https://apis.google.com/js/api.js?onload=${a}`)}}).catch(e=>{throw jr=null,e})}var jr=null;function wg(t){return jr=jr||_g(t),jr}var Eg=new Zt(5e3,15e3),bg="__/auth/iframe",Tg="emulator/auth/iframe",Ig={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Sg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kg(t){let e=t.config;$(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?ls(e,Tg):`https://${t.config.authDomain}/${bg}`,r={apiKey:e.apiKey,appName:t.name,v:Rt},i=Sg.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Yt(r).slice(1)}`}async function Ag(t){let e=await wg(t),n=Ge().gapi;return $(n,t,"internal-error"),e.open({where:document.body,url:kg(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ig,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Jt(t,"network-request-failed"),a=Ge().setTimeout(()=>{s(o)},Eg.get());function c(){Ge().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var Is=class extends ws{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}};Is.type="SESSION";var Cg=Is;var Rg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ng=500,Dg=600,Og="_blank",Lg="http://localhost",Ss=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}};function Mg(t,e,n,r=Ng,i=Dg){let s=Math.min((window.screen.availHeight-i)/2,0).toString(),o=Math.min((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Rg),{width:r.toString(),height:i.toString(),top:s,left:o}),l=le().toLowerCase();n&&(a=Tc(l)?Og:n),bc(l)&&(e=e||Lg,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[d,p])=>`${f}${d}=${p},`,"");if(Pm(l)&&a!=="_self")return Pg(e||"",a),new Ss(null);let h=window.open(e||"",a,u);$(h,t,"popup-blocked");try{h.focus()}catch(f){}return new Ss(h)}function Pg(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}function Gc(t,e){return e?tt(e):($(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var qr=class extends vs{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return nn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nn(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Ug(t){return $m(t.auth,new qr(t),t.bypassAuthState)}function xg(t){let{auth:e,user:n}=t;return $(n,e,"internal-error"),Fm(n,new qr(t),t.bypassAuthState)}async function Vg(t){let{auth:e,user:n}=t;return $(n,e,"internal-error"),Vm(n,new qr(t),t.bypassAuthState)}var Wc=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ug;case"linkViaPopup":case"linkViaRedirect":return Vg;case"reauthViaPopup":case"reauthViaRedirect":return xg;default:Ze(this.auth,"internal-error")}}resolve(e){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Fg="pendingRedirect",Xc=new Map,Qc=class extends Wc{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r);this.eventId=null}async execute(){let e=Xc.get(this.auth._key());if(!e){try{let r=await $g(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xc.set(this.auth._key(),e)}return e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function $g(t,e){let n=Yc(e),r=await ks(t)._get(n)==="true";return await ks(t)._remove(n),r}async function jg(t,e){return ks(t)._set(Yc(e),"true")}function ks(t){return tt(t._redirectPersistence)}function Yc(t){return Mr(Fg,t.config.apiKey,t.name)}function Jc(t,e,n){return qg(t,e,n)}async function qg(t,e,n){let r=ys(t);$(e instanceof xr,t,"argument-error");let i=Gc(r,n);return await jg(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Bg(t,e,n=!1){let r=ys(t),i=Gc(r,e),o=await new Qc(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var zg="__/auth/handler",Hg="emulator/auth/handler";function Zc(t,e,n,r,i,s){$(t.config.authDomain,t,"auth-domain-config-required"),$(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Rt,eventId:i};if(e instanceof xr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ac(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[c,l]of Object.entries(s||{}))o[c]=l}if(e instanceof _s){let c=e.getScopes().filter(l=>l!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let c of Object.keys(a))a[c]===void 0&&delete a[c];return`${Kg(t)}?${Yt(a).slice(1)}`}function Kg({config:t}){return t.emulator?ls(t,Hg):`https://${t.authDomain}/${zg}`}var As="webStorageSupport",el=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cg,this._completeRedirectFn=Bg}async _openPopup(e,n,r,i){var s;ht((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=Zc(e,n,r,cs(),i);return Mg(e,o,lg())}async _openRedirect(e,n,r,i){return await this._originValidation(e),Ym(Zc(e,n,r,cs(),i)),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ht(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r}async initAndGetManager(e){let n=await Ag(e),r=new Bc(e);return n.register("authEvent",i=>($(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(As,{type:As},i=>{var s;let o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[As];o!==void 0&&n(!!o),Ze(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pg(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Rc()||ms()||Ur()}},Gg=el,Gw=new Zt(3e4,6e4);var Ww=new Zt(2e3,1e4);function tl(t=Nr()){let e=Mn(t,"auth-exp");return e.isInitialized()?e.getImmediate():gm(t,{popupRedirectResolver:Gg,persistence:[og,Wm]})}zm("Browser");var Br=typeof Br!="undefined"?Br:typeof self!="undefined"?self:typeof window!="undefined"?window:{};var Cs=function(t,e){return Cs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Cs(t,e)};function Wg(t,e){Cs(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function nl(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Xg=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Br!="undefined"?Br:typeof self!="undefined"?self:{},C,Rs=Rs||{},j=Xg||self;function zr(){}function Ns(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function jn(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Yg(t){return Object.prototype.hasOwnProperty.call(t,Ds)&&t[Ds]||(t[Ds]=++Qg)}var Ds="closure_uid_"+(1e9*Math.random()>>>0),Qg=0;function Jg(t,e,n){return t.call.apply(t.bind,arguments)}function Zg(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function be(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?be=Jg:be=Zg,be.apply(null,arguments)}function Hr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function We(){return Date.now()}function ke(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function pt(){this.j=this.j,this.i=this.i}var ey=0;pt.prototype.j=!1;pt.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),ey!=0))var t=Yg(this)};pt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var rl=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},il=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=typeof t=="string"?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function ny(t){e:{for(var e=ty,n=t.length,r=typeof t=="string"?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function sl(t){return Array.prototype.concat.apply([],arguments)}function Os(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Kr(t){return/^[\s\xa0]*$/.test(t)}var ol=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ae(t,e){return t.indexOf(e)!=-1}function Ls(t,e){return t<e?-1:t>e?1:0}var Ce;e:{if(Ps=j.navigator,Ps&&(Ms=Ps.userAgent,Ms)){Ce=Ms;break e}Ce=""}var Ps,Ms;function Us(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function al(t){var e={};for(var n in t)e[n]=t[n];return e}var cl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ll(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var s=0;s<cl.length;s++)n=cl[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function xs(t){return xs[" "](t),t}xs[" "]=zr;function iy(t,e){var n=ry;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var sy=Ae(Ce,"Opera"),mt=Ae(Ce,"Trident")||Ae(Ce,"MSIE"),ul=Ae(Ce,"Edge"),Vs=ul||mt,hl=Ae(Ce,"Gecko")&&!(Ae(Ce.toLowerCase(),"webkit")&&!Ae(Ce,"Edge"))&&!(Ae(Ce,"Trident")||Ae(Ce,"MSIE"))&&!Ae(Ce,"Edge"),oy=Ae(Ce.toLowerCase(),"webkit")&&!Ae(Ce,"Edge");function fl(){var t=j.document;return t?t.documentMode:void 0}var Gr;e:{if(Wr="",Xr=function(){var t=Ce;if(hl)return/rv:([^\);]+)(\)|;)/.exec(t);if(ul)return/Edge\/([\d\.]+)/.exec(t);if(mt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(oy)return/WebKit\/(\S+)/.exec(t);if(sy)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Xr&&(Wr=Xr?Xr[1]:""),mt&&(Qr=fl(),Qr!=null&&Qr>parseFloat(Wr))){Gr=String(Qr);break e}Gr=Wr}var Wr,Xr,Qr,ry={};function dl(t){return iy(t,function(){for(var e=0,n=ol(String(Gr)).split("."),r=ol(String(t)).split("."),i=Math.max(n.length,r.length),s=0;e==0&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o[0].length==0&&a[0].length==0)break;e=Ls(o[1].length==0?0:parseInt(o[1],10),a[1].length==0?0:parseInt(a[1],10))||Ls(o[2].length==0,a[2].length==0)||Ls(o[2],a[2]),o=o[3],a=a[3]}while(e==0)}return 0<=e})}var Fs;j.document&&mt?($s=fl(),Fs=$s||parseInt(Gr,10)||void 0):Fs=void 0;var $s,pl=Fs,js=!mt||9<=Number(pl),ay=mt&&!dl("9"),cy=function(){if(!j.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{j.addEventListener("test",zr,e),j.removeEventListener("test",zr,e)}catch(n){}return t}();function Te(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}Te.prototype.b=function(){this.defaultPrevented=!0};function qn(t,e){if(Te.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(hl){e:{try{xs(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:ly[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ke(qn,Te);var ly={2:"touch",3:"pen",4:"mouse"};qn.prototype.b=function(){qn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ay)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Bn="closure_listenable_"+(1e6*Math.random()|0),uy=0;function hy(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++uy,this.Y=this.Z=!1}function Yr(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Jr(t){this.src=t,this.a={},this.b=0}Jr.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.a[s],t||(t=this.a[s]=[],this.b++);var o=qs(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):(e=new hy(e,this.src,s,!!r,i),e.Z=n,t.push(e)),e};function Bs(t,e){var n=e.type;if(n in t.a){var r=t.a[n],i=rl(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Yr(e),t.a[n].length==0&&(delete t.a[n],t.b--))}}function qs(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.ca==r)return i}return-1}var zs="closure_lm_"+(1e6*Math.random()|0),Hs={};function Ks(t,e,n,r,i){if(r&&r.once)return gl(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ks(t,e[s],n,r,i);return null}return n=Gs(n),t&&t[Bn]?t.va(e,n,jn(r)?!!r.capture:!!r,i):ml(t,e,n,!1,r,i)}function ml(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=jn(i)?!!i.capture:!!i;if(o&&!js)return null;var a=Ws(t);if(a||(t[zs]=a=new Jr(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=fy(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)cy||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yl(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function fy(){var t=dy,e=js?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function gl(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)gl(t,e[s],n,r,i);return null}return n=Gs(n),t&&t[Bn]?t.wa(e,n,jn(r)?!!r.capture:!!r,i):ml(t,e,n,!0,r,i)}function vl(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)vl(t,e[s],n,r,i);else r=jn(r)?!!r.capture:!!r,n=Gs(n),t&&t[Bn]?(t=t.c,e=String(e).toString(),e in t.a&&(s=t.a[e],n=qs(s,n,r,i),-1<n&&(Yr(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.a[e],t.b--)))):t&&(t=Ws(t))&&(e=t.a[e.toString()],t=-1,e&&(t=qs(e,n,r,i)),(n=-1<t?e[t]:null)&&Xs(n))}function Xs(t){if(typeof t!="number"&&t&&!t.Y){var e=t.src;if(e&&e[Bn])Bs(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yl(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ws(e))?(Bs(n,t),n.b==0&&(n.src=null,e[zs]=null)):Yr(t)}}}function yl(t){return t in Hs?Hs[t]:Hs[t]="on"+t}function _l(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Xs(t),n.call(r,e)}function dy(t,e){if(t.Y)return!0;if(!js){if(!e)e:{e=["window","event"];for(var n=j,r=0;r<e.length;r++)if(n=n[e[r]],n==null){e=null;break e}e=n}return e=new qn(e,this),_l(t,e)}return _l(t,new qn(e,this))}function Ws(t){return t=t[zs],t instanceof Jr?t:null}var Qs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gs(t){return typeof t=="function"?t:(t[Qs]||(t[Qs]=function(e){return t.handleEvent(e)}),t[Qs])}function Ve(){pt.call(this),this.c=new Jr(this),this.J=this,this.C=null}ke(Ve,pt);Ve.prototype[Bn]=!0;C=Ve.prototype;C.addEventListener=function(t,e,n,r){Ks(this,t,e,n,r)};C.removeEventListener=function(t,e,n,r){vl(this,t,e,n,r)};function ge(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,typeof e=="string")e=new Te(e,t);else if(e instanceof Te)e.target=e.target||t;else{var i=e;e=new Te(r,t),ll(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=Zr(o,r,!0,e)&&i}if(o=e.a=t,i=Zr(o,r,!0,e)&&i,i=Zr(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.a=n[s],i=Zr(o,r,!1,e)&&i}C.G=function(){if(Ve.X.G.call(this),this.c){var t=this.c,e;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Yr(n[r]);delete t.a[e],t.b--}}this.C=null};C.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)};C.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};function Zr(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,c=o.ca||o.src;o.Z&&Bs(t.c,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ys=j.JSON.stringify;function wl(){this.b=this.a=null}var El=new(function(){function t(e,n){this.c=e,this.f=n,this.b=0,this.a=null}return t.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},t}())(function(){return new Js},function(t){t.reset()});wl.prototype.add=function(t,e){var n=El.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n};function py(){var t=bl,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Js(){this.next=this.b=this.a=null}Js.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};Js.prototype.reset=function(){this.next=this.b=this.a=null};function my(t){j.setTimeout(function(){throw t},0)}function Tl(t,e){Zs||gy(),eo||(Zs(),eo=!0),bl.add(t,e)}var Zs;function gy(){var t=j.Promise.resolve(void 0);Zs=function(){t.then(yy)}}var eo=!1,bl=new wl;function yy(){for(var t;t=py();){try{t.a.call(t.b)}catch(n){my(n)}var e=El;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}eo=!1}function ei(t,e){Ve.call(this),this.b=t||1,this.a=e||j,this.f=be(this.Za,this),this.g=We()}ke(ei,Ve);C=ei.prototype;C.aa=!1;C.M=null;C.Za=function(){if(this.aa){var t=We()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ge(this,"tick"),this.aa&&(to(this),this.start()))}};C.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=We())};function to(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}C.G=function(){ei.X.G.call(this),to(this),delete this.a};function no(t,e,n){if(typeof t=="function")n&&(t=be(t,n));else if(t&&typeof t.handleEvent=="function")t=be(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:j.setTimeout(t,e||0)}function Il(t){t.a=no(function(){t.a=null,t.c&&(t.c=!1,Il(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}var vy=function(t){Wg(e,t);function e(n,r){var i=t.call(this)||this;return i.g=n,i.h=r,i.b=null,i.c=!1,i.a=null,i}return e.prototype.f=function(n){this.b=arguments,this.a?this.c=!0:Il(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(j.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(pt);function zn(t){pt.call(this),this.b=t,this.a={}}ke(zn,pt);var Sl=[];function kl(t,e,n,r){Array.isArray(n)||(n&&(Sl[0]=n.toString()),n=Sl);for(var i=0;i<n.length;i++){var s=Ks(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Al(t){Us(t.a,function(e,n){this.a.hasOwnProperty(n)&&Xs(e)},t),t.a={}}zn.prototype.G=function(){zn.X.G.call(this),Al(this)};zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ro(){this.a=!0}function _y(t,e,n,r,i,s){t.info(function(){if(t.a)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function wy(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function sn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Ey(t,n)+(r?" "+r:"")})}function by(t,e){t.info(function(){return"TIMEOUT: "+e})}ro.prototype.info=function(){};function Ey(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Ys(n)}catch(a){return e}}var Dt={},Cl=null;function ti(){return Cl=Cl||new Ve}Dt.Fa="serverreachability";function Rl(t){Te.call(this,Dt.Fa,t)}ke(Rl,Te);function Hn(t){var e=ti();ge(e,new Rl(e,t))}Dt.STAT_EVENT="statevent";function Nl(t,e){Te.call(this,Dt.STAT_EVENT,t),this.stat=e}ke(Nl,Te);function Re(t){var e=ti();ge(e,new Nl(e,t))}Dt.Ga="timingevent";function Dl(t){Te.call(this,Dt.Ga,t)}ke(Dl,Te);function Kn(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return j.setTimeout(function(){t()},e)}var ni={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ol={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ll(){}Ll.prototype.a=null;function Pl(t){var e;return(e=t.a)||(e=t.a={}),e}function Ml(){}var Gn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function io(){Te.call(this,"d")}ke(io,Te);function so(){Te.call(this,"c")}ke(so,Te);var Ul;function xl(){}ke(xl,Ll);Ul=new xl;function Wn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new zn(this),this.P=Ty,t=Vs?125:void 0,this.R=new ei(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}var Ty=45e3,Vl={},oo={};C=Wn.prototype;C.setTimeout=function(t){this.P=t};function ao(t,e,n){t.H=1,t.i=ri(nt(e)),t.j=n,t.I=!0,Fl(t,null)}function Fl(t,e){t.u=We(),Xn(t),t.l=nt(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),$l(n.b,"t",r),t.D=0,t.a=jl(t.g,t.g.C?e:null),0<t.O&&(t.F=new vy(be(t.Ca,t,t.a),t.O)),kl(t.J,t.a,"readystatechange",t.Xa),e=t.B?al(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Hn(1),_y(t.c,t.m,t.l,t.f,t.S,t.j)}C.Xa=function(t){t=t.target;var e=this.F;e&&gt(t)==3?e.f():this.Ca(t)};C.Ca=function(t){try{if(t==this.a)e:{var e=gt(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||e==3&&!Vs&&!this.a.$())){this.A||e!=4||n==7||(n==8||0>=r?Hn(3):Hn(2)),ii(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=i==200,wy(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){t:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kr(o)){var c=o;break t}}c=null}if(c)sn(this.c,this.f,c,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,co(this,c);else{this.b=!1,this.h=3,Re(12),on(this),si(this);break e}}this.I?(ql(this,e,s),Vs&&this.b&&e==3&&(kl(this.J,this.R,"tick",this.Wa),this.R.start())):(sn(this.c,this.f,s,null),co(this,s)),e==4&&on(this),this.b&&!this.A&&(e==4?Bl(this.g,this):(this.b=!1,Xn(this)))}else i==400&&0<s.indexOf("Unknown SID")?(this.h=3,Re(12)):(this.h=0,Re(13)),on(this),si(this)}}}catch(l){}finally{}};function ql(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Iy(t,n);if(i==oo){e==4&&(t.h=4,Re(14),r=!1),sn(t.c,t.f,null,"[Incomplete Response]");break}else if(i==Vl){t.h=4,Re(15),sn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}else sn(t.c,t.f,i,null),co(t,i)}e==4&&n.length==0&&(t.h=1,Re(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,e=t.g,e.a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),lo(e),e.F=!0,Re(11))):(sn(t.c,t.f,n,"[Invalid Chunked Response]"),on(t),si(t))}C.Wa=function(){if(this.a){var t=gt(this.a),e=this.a.$();this.D<e.length&&(ii(this),ql(this,t,e),this.b&&t!=4&&Xn(this))}};function Iy(t,e){var n=t.D,r=e.indexOf(`
`,n);return r==-1?oo:(n=Number(e.substring(n,r)),isNaN(n)?Vl:(r+=1,r+n>e.length?oo:(e=e.substr(r,n),t.D=r+n,e)))}C.cancel=function(){this.A=!0,on(this)};function Xn(t){t.T=We()+t.P,zl(t,t.P)}function zl(t,e){if(t.o!=null)throw Error("WatchDog timer not null");t.o=Kn(be(t.Va,t),e)}function ii(t){t.o&&(j.clearTimeout(t.o),t.o=null)}C.Va=function(){this.o=null;var t=We();0<=t-this.T?(by(this.c,this.l),this.H!=2&&(Hn(3),Re(17)),on(this),this.h=2,si(this)):zl(this,this.T-t)};function si(t){t.g.v==0||t.A||Bl(t.g,t)}function on(t){ii(t);var e=t.F;e&&typeof e.ja=="function"&&e.ja(),t.F=null,to(t.R),Al(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function co(t,e){try{var n=t.g;if(n.v!=0&&(n.a==t||uo(n.b,t))){if(n.I=t.N,!t.C&&uo(n.b,t)&&n.v==3){try{var r=n.ka.a.parse(e)}catch(A){r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0)e:if(!n.j){if(n.a)if(n.a.u+3e3<t.u)ci(n),oi(n);else break e;po(n),Re(18)}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&n.o==0&&!n.m&&(n.m=Kn(be(n.Sa,n),6e3));if(1>=Hl(n.b)&&n.ea){try{n.ea()}catch(A){}n.ea=void 0}}else Ot(n,11)}else if((t.C||n.a==t)&&ci(n),!Kr(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],n.v==2)if(i[0]=="c"){n.J=i[1],n.ga=i[2];var s=i[3];s!=null&&(n.ha=s,n.c.info("VER="+n.ha));var o=i[4];o!=null&&(n.pa=o,n.c.info("SVER="+n.pa));var a=i[5];if(a!=null&&typeof a=="number"&&0<a){var c=1.5*a;n.D=c,n.c.info("backChannelRequestTimeoutMs_="+c)}c=n;var l=t.a;if(l){var u=l.a?l.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var h=c.b;!h.a&&(Ae(u,"spdy")||Ae(u,"quic")||Ae(u,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ho(h,h.b),h.b=null))}if(c.A){var f=l.a?l.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(c.na=f,oe(c.B,c.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=We()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),c=n;var d=t;if(c.la=Wl(c,c.C?c.ga:null,c.fa),d.C){Kl(c.b,d);var p=d,m=c.D;m&&p.setTimeout(m),p.o&&(ii(p),Xn(p)),c.a=d}else Gl(c);0<n.g.length&&ai(n)}else i[0]!="stop"&&i[0]!="close"||Ot(n,7);else n.v==3&&(i[0]=="stop"||i[0]=="close"?i[0]=="stop"?Ot(n,7):fo(n):i[0]!="noop"&&n.f&&n.f.sa(i),n.o=0)}Hn(4)}catch(A){}}function Sy(t){if(t.K&&typeof t.K=="function")return t.K();if(typeof t=="string")return t.split("");if(Ns(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return t=e}function mo(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ns(t)||typeof t=="string")il(t,e,void 0);else{if(t.L&&typeof t.L=="function")var n=t.L();else if(t.K&&typeof t.K=="function")n=void 0;else if(Ns(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=Sy(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function an(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof an)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}C=an.prototype;C.K=function(){go(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t};C.L=function(){return go(this),this.a.concat()};function go(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Lt(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Lt(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}C.get=function(t,e){return Lt(this.b,t)?this.b[t]:e};C.set=function(t,e){Lt(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e};C.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function Lt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Xl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ky(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Pt(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Pt){this.a=e!==void 0?e:t.a,li(this,t.f),this.j=t.j,ui(this,t.c),hi(this,t.h),this.g=t.g,e=t.b;var n=new Yn;n.c=e.c,e.a&&(n.a=new an(e.a),n.b=e.b),Ql(this,n),this.i=t.i}else t&&(n=String(t).match(Xl))?(this.a=!!e,li(this,n[1]||"",!0),this.j=Qn(n[2]||""),ui(this,n[3]||"",!0),hi(this,n[4]),this.g=Qn(n[5]||"",!0),Ql(this,n[6]||"",!0),this.i=Qn(n[7]||"")):(this.a=!!e,this.b=new Yn(null,this.a))}Pt.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Jn(e,Yl,!0),":");var n=this.c;return(n||e=="file")&&(t.push("//"),(e=this.j)&&t.push(Jn(e,Yl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,n!=null&&t.push(":",String(n))),(n=this.g)&&(this.c&&n.charAt(0)!="/"&&t.push("/"),t.push(Jn(n,n.charAt(0)=="/"?Cy:Ay,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Jn(n,Ry)),t.join("")};function nt(t){return new Pt(t)}function li(t,e,n){t.f=n?Qn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ui(t,e,n){t.c=n?Qn(e,!0):e}function hi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ql(t,e,n){e instanceof Yn?(t.b=e,Dy(t.b,t.a)):(n||(e=Jn(e,Ny)),t.b=new Yn(e,t.a))}function oe(t,e,n){t.b.set(e,n)}function ri(t){return oe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^We()).toString(36)),t}function Oy(t){return t instanceof Pt?nt(t):new Pt(t,void 0)}function Ly(t,e,n,r){var i=new Pt(null,void 0);return t&&li(i,t),e&&ui(i,e),n&&hi(i,n),r&&(i.g=r),i}function Qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Jn(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Py),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Py(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Yl=/[#\/\?@]/g,Ay=/[#\?:]/g,Cy=/[#\?]/g,Ny=/[#\?@]/g,Ry=/#/g;function Yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function yt(t){t.a||(t.a=new an,t.b=0,t.c&&ky(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}C=Yn.prototype;C.add=function(t,e){yt(this),this.c=null,t=cn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this};function Jl(t,e){yt(t),e=cn(t,e),Lt(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Lt(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&go(t)))}function Zl(t,e){return yt(t),e=cn(t,e),Lt(t.a.b,e)}C.forEach=function(t,e){yt(this),this.a.forEach(function(n,r){il(n,function(i){t.call(e,i,r,this)},this)},this)};C.L=function(){yt(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};C.K=function(t){yt(this);var e=[];if(typeof t=="string")Zl(this,t)&&(e=sl(e,this.a.get(cn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=sl(e,t[n])}return e};C.set=function(t,e){return yt(this),this.c=null,t=cn(this,t),Zl(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this};C.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e};function $l(t,e,n){Jl(t,e),0<n.length&&(t.c=null,t.a.set(cn(t,e),Os(n)),t.b+=n.length)}C.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};function cn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Dy(t,e){e&&!t.f&&(yt(t),t.c=null,t.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Jl(this,r),$l(this,i,n))},t)),t.f=e}var My=function(){function t(e,n){this.b=e,this.a=n}return t}();function eu(t){this.g=t||Uy,j.PerformanceNavigationTiming?(t=j.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(j.ia&&j.ia.ya&&j.ia.ya()&&j.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Uy=10;function tu(t){return t.b?!0:t.a?t.a.size>=t.f:!1}function Hl(t){return t.b?1:t.a?t.a.size:0}function uo(t,e){return t.b?t.b==e:t.a?t.a.has(e):!1}function ho(t,e){t.a?t.a.add(e):t.b=e}function Kl(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}eu.prototype.cancel=function(){var t,e;if(this.c=nu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&this.a.size!==0){try{for(var n=nl(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}};function nu(t){var e,n;if(t.b!=null)return t.c.concat(t.b.s);if(t.a!=null&&t.a.size!==0){var r=t.c;try{for(var i=nl(t.a.values()),s=i.next();!s.done;s=i.next()){var o=s.value;r=r.concat(o.s)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Os(t.c)}function yo(){}yo.prototype.stringify=function(t){return j.JSON.stringify(t,void 0)};yo.prototype.parse=function(t){return j.JSON.parse(t,void 0)};function xy(){this.a=new yo}function Vy(t,e,n){var r=n||"";try{mo(t,function(i,s){var o=i;jn(i)&&(o=Ys(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Fy(t,e){var n=new ro;if(j.Image){var r=new Image;r.onload=Hr(fi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Hr(fi,n,r,"TestLoadImage: error",!1,e),r.onabort=Hr(fi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hr(fi,n,r,"TestLoadImage: timeout",!1,e),j.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function fi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}var $y=j.JSON.parse;function ue(t){Ve.call(this),this.headers=new an,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=jy,this.D=this.F=!1}ke(ue,Ve);var jy="",qy=/^https?$/i,By=["POST","PUT"];C=ue.prototype;C.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Pl(this.H):Pl(Ul),this.a.onreadystatechange=be(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(s){ru(this,s);return}t=n||"";var i=new an(this.headers);r&&mo(r,function(s,o){i.set(o,s)}),r=ny(i.L()),n=j.FormData&&t instanceof j.FormData,!(0<=rl(By,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.a.setRequestHeader(o,s)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{iu(this),0<this.o&&((this.D=zy(this.a))?(this.a.timeout=this.o,this.a.ontimeout=be(this.xa,this)):this.m=no(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(s){ru(this,s)}};function zy(t){return mt&&dl(9)&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function ty(t){return t.toLowerCase()=="content-type"}C.xa=function(){typeof Rs!="undefined"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ge(this,"timeout"),this.abort(8))};function ru(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,su(t),di(t)}function su(t){t.u||(t.u=!0,ge(t,"complete"),ge(t,"error"))}C.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ge(this,"complete"),ge(this,"abort"),di(this))};C.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),di(this,!0)),ue.X.G.call(this)};C.za=function(){this.j||(this.A||this.l||this.g?ou(this):this.Ua())};C.Ua=function(){ou(this)};function ou(t){if(t.b&&typeof Rs!="undefined"&&(!t.s[1]||gt(t)!=4||t.W()!=2)){if(t.l&&gt(t)==4)no(t.za,0,t);else if(ge(t,"readystatechange"),gt(t)==4){t.b=!1;try{{var e=t.W();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=e===0){var s=String(t.B).match(Xl)[1]||null;if(!s&&j.self&&j.self.location){var o=j.self.location.protocol;s=o.substr(0,o.length-1)}i=!qy.test(s?s.toLowerCase():"")}r=i}var a=r}if(a)ge(t,"complete"),ge(t,"success");else{t.h=6;try{var c=2<gt(t)?t.a.statusText:""}catch(l){c=""}t.f=c+" ["+t.W()+"]",su(t)}}finally{di(t)}}}}function di(t,e){if(t.a){iu(t);var n=t.a,r=t.s[0]?zr:null;t.a=null,t.s=null,e||ge(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function iu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(j.clearTimeout(t.m),t.m=null)}function gt(t){return t.a?t.a.readyState:0}C.W=function(){try{return 2<gt(this)?this.a.status:-1}catch(t){return-1}};C.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}};C.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),$y(e)}};C.ua=function(){return this.h};C.Qa=function(){return typeof this.f=="string"?this.f:String(this.f)};function Hy(t){var e="";return Us(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function vo(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Hy(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):oe(t,e,n))}function Zn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function au(t){this.pa=0,this.g=[],this.c=new ro,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Zn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Zn("baseRetryDelayMs",5e3,t),this.Ra=Zn("retryDelaySeedMs",1e4,t),this.Ma=Zn("forwardChannelMaxRetries",2,t),this.ma=Zn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new eu(t&&t.concurrentRequestLimit),this.ka=new xy,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}C=au.prototype;C.ha=8;C.v=1;function fo(t){if(cu(t),t.v==3){var e=t.R++,n=nt(t.B);oe(n,"SID",t.J),oe(n,"RID",e),oe(n,"TYPE","terminate"),er(t,n),e=new Wn(t,t.c,e,void 0),e.H=2,e.i=ri(nt(n)),n=!1,j.navigator&&j.navigator.sendBeacon&&(n=j.navigator.sendBeacon(e.i.toString(),"")),!n&&j.Image&&(new Image().src=e.i,n=!0),n||(e.a=jl(e.g,null),e.a.ba(e.i)),e.u=We(),Xn(e)}lu(t)}function oi(t){t.a&&(lo(t),t.a.cancel(),t.a=null)}function cu(t){oi(t),t.j&&(j.clearTimeout(t.j),t.j=null),ci(t),t.b.cancel(),t.h&&(typeof t.h=="number"&&j.clearTimeout(t.h),t.h=null)}function _o(t,e){t.g.push(new My(t.Oa++,e)),t.v==3&&ai(t)}function ai(t){tu(t.b)||t.h||(t.h=!0,Tl(t.Ba,t),t.u=0)}function Ky(t,e){return Hl(t.b)>=t.b.f-(t.h?1:0)?!1:t.h?(t.g=e.s.concat(t.g),!0):t.v==1||t.v==2||t.u>=(t.La?0:t.Ma)?!1:(t.h=Kn(be(t.Ba,t,e),uu(t,t.u)),t.u++,!0)}C.Ba=function(t){if(this.h)if(this.h=null,this.v==1){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e=new Wn(this,this.c,t,void 0),n=this.l;this.O&&(n?(n=al(n),ll(n,this.O)):n=this.O),this.i===null&&(e.B=n);var r;if(this.da)e:{for(var i=r=0;i<this.g.length;i++){t:{var s=this.g[i];if("__data__"in s.a&&(s=s.a.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.g.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=fu(this,e,r),i=nt(this.B),oe(i,"RID",t),oe(i,"CVER",22),this.A&&oe(i,"X-HTTP-Session-Id",this.A),er(this,i),this.i&&n&&vo(i,this.i,n),ho(this.b,e),this.Ia&&oe(i,"TYPE","init"),this.da?(oe(i,"$req",r),oe(i,"SID","null"),e.U=!0,ao(e,i,null)):ao(e,i,r),this.v=2}}else this.v==3&&(t?hu(this,t):this.g.length==0||tu(this.b)||hu(this))};function hu(t,e){var n;e?n=e.f:n=t.R++;var r=nt(t.B);oe(r,"SID",t.J),oe(r,"RID",n),oe(r,"AID",t.P),er(t,r),t.i&&t.l&&vo(r,t.i,t.l),n=new Wn(t,t.c,n,t.u+1),t.i===null&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=fu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ho(t.b,n),ao(n,r,e)}function er(t,e){t.f&&mo({},function(n,r){oe(e,r,n)})}function fu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?be(t.f.Ja,t.f,t):null;e:for(var i=t.g,s=-1;;){var o=["count="+n];s==-1?0<n?(s=i[0].b,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,c=0;c<n;c++){var l=i[c].b,u=i[c].a;if(l-=s,0>l)s=Math.max(0,i[c].b-100),a=!1;else try{Vy(u,o,"req"+l+"_")}catch(h){r&&r(u)}}if(a){r=o.join("&");break e}}return t=t.g.splice(0,n),e.s=t,r}function Gl(t){t.a||t.j||(t.T=1,Tl(t.Aa,t),t.o=0)}function po(t){return t.a||t.j||3<=t.o?!1:(t.T++,t.j=Kn(be(t.Aa,t),uu(t,t.o)),t.o++,!0)}C.Aa=function(){if(this.j=null,du(this),this.U&&!(this.F||this.a==null||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Kn(be(this.Ta,this),t)}};C.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Re(10),oi(this),du(this))};function lo(t){t.s!=null&&(j.clearTimeout(t.s),t.s=null)}function du(t){t.a=new Wn(t,t.c,"rpc",t.T),t.i===null&&(t.a.B=t.l),t.a.O=0;var e=nt(t.la);oe(e,"RID","rpc"),oe(e,"SID",t.J),oe(e,"CI",t.H?"0":"1"),oe(e,"AID",t.P),er(t,e),oe(e,"TYPE","xmlhttp"),t.i&&t.l&&vo(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ri(nt(e)),n.j=null,n.I=!0,Fl(n,t)}C.Sa=function(){this.m!=null&&(this.m=null,oi(this),po(this),Re(19))};function ci(t){t.m!=null&&(j.clearTimeout(t.m),t.m=null)}function Bl(t,e){var n=null;if(t.a==e){ci(t),lo(t),t.a=null;var r=2}else if(uo(t.b,e))n=e.s,Kl(t.b,e),r=1;else return;if(t.I=e.N,t.v!=0){if(e.b)if(r==1){n=e.j?e.j.length:0,e=We()-e.u;var i=t.u;r=ti(),ge(r,new Dl(r,n,e,i)),ai(t)}else Gl(t);else if(i=e.h,i==3||i==0&&0<t.I||!(r==1&&Ky(t,e)||r==2&&po(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ot(t,5);break;case 4:Ot(t,10);break;case 3:Ot(t,6);break;default:Ot(t,2)}}}function uu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ot(t,e){if(t.c.info("Error code "+e),e==2){var n=null;t.f&&(n=null);var r=be(t.Ya,t);n||(n=new Pt("//www.google.com/images/cleardot.gif"),j.location&&j.location.protocol=="http"||li(n,"https"),ri(n)),Fy(n.toString(),r)}else Re(2);t.v=0,t.f&&t.f.ra(e),lu(t),cu(t)}C.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Re(2)):(this.c.info("Failed to ping google.com"),Re(1))};function lu(t){t.v=0,t.I=-1,t.f&&((nu(t.b).length!=0||t.g.length!=0)&&(t.b.c.length=0,Os(t.g),t.g.length=0),t.f.qa())}function Wl(t,e,n){var r=Oy(n);if(r.c!="")e&&ui(r,e+"."+r.c),hi(r,r.h);else{var i=j.location;r=Ly(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Us(t.V,function(s,o){oe(r,o,s)}),e=t.A,n=t.na,e&&n&&oe(r,e,n),oe(r,"VER",t.ha),er(t,r),r}function jl(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new ue(t.Na),e.F=t.C,e}function pu(){}C=pu.prototype;C.ta=function(){};C.sa=function(){};C.ra=function(){};C.qa=function(){};C.Ja=function(){};function pi(){if(mt&&!(10<=Number(pl)))throw Error("Environmental error: no available transport.")}pi.prototype.a=function(t,e){return new Fe(t,e)};function Fe(t,e){Ve.call(this),this.a=new au(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Kr(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kr(e)&&(this.a.A=e,t=this.b,t!==null&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new ln(this)}ke(Fe,Ve);Fe.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Re(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Wl(t,null,t.fa),ai(t)};Fe.prototype.close=function(){fo(this.a)};Fe.prototype.h=function(t){if(typeof t=="string"){var e={};e.__data__=t,_o(this.a,e)}else this.l?(e={},e.__data__=Ys(t),_o(this.a,e)):_o(this.a,t)};Fe.prototype.G=function(){this.a.f=null,delete this.f,fo(this.a),delete this.a,Fe.X.G.call(this)};function mu(t){io.call(this);var e=t.__sm__;if(e){e:{for(var n in e){t=n;break e}t=void 0}(this.c=t)?(t=this.c,this.data=e!==null&&t in e?e[t]:void 0):this.data=e}else this.data=t}ke(mu,io);function gu(){so.call(this),this.status=1}ke(gu,so);function ln(t){this.a=t}ke(ln,pu);ln.prototype.ta=function(){ge(this.a,"a")};ln.prototype.sa=function(t){ge(this.a,new mu(t))};ln.prototype.ra=function(t){ge(this.a,new gu(t))};ln.prototype.qa=function(){ge(this.a,"b")};pi.prototype.createWebChannel=pi.prototype.a;Fe.prototype.send=Fe.prototype.h;Fe.prototype.open=Fe.prototype.g;Fe.prototype.close=Fe.prototype.close;ni.NO_ERROR=0;ni.TIMEOUT=8;ni.HTTP_ERROR=6;Ol.COMPLETE="complete";Ml.EventType=Gn;Gn.OPEN="a";Gn.CLOSE="b";Gn.ERROR="c";Gn.MESSAGE="d";Ve.prototype.listen=Ve.prototype.va;ue.prototype.listenOnce=ue.prototype.wa;ue.prototype.getLastError=ue.prototype.Qa;ue.prototype.getLastErrorCode=ue.prototype.ua;ue.prototype.getStatus=ue.prototype.W;ue.prototype.getResponseJson=ue.prototype.Pa;ue.prototype.getResponseText=ue.prototype.$;ue.prototype.send=ue.prototype.ba;var Gy=function(){return new pi},Wy=function(){return ti()},wo=ni,Xy=Ol,Qy=Dt,yu={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},mi=Ml,Yy=ue;var un="8.6.1";var gi=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.t(r),this.i=r=>n.writeSequenceNumber(r))}t(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.i&&this.i(e),e}};gi.o=-1;var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Mt=new Pn("@firebase/firestore");function vu(){return Mt.logLevel}function D(t,...e){if(Mt.logLevel<=Q.DEBUG){let n=e.map(Eo);Mt.debug(`Firestore (${un}): ${t}`,...n)}}function vt(t,...e){if(Mt.logLevel<=Q.ERROR){let n=e.map(Eo);Mt.error(`Firestore (${un}): ${t}`,...n)}}function _u(t,...e){if(Mt.logLevel<=Q.WARN){let n=e.map(Eo);Mt.warn(`Firestore (${un}): ${t}`,...n)}}function Eo(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}function q(t="Unexpected state"){let e=`FIRESTORE (${un}) INTERNAL ASSERTION FAILED: `+t;throw vt(e),new Error(e)}function ne(t,e){t||q()}function B(t,e){return t}function Jy(t){let e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var bo=class{static u(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Jy(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ee(t,e){return t<e?-1:t>e?1:0}function hn(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Oe=class{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new O(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Oe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Oe(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};function wu(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Eu(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var fn=class{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(),r===void 0?r=e.length-n:r>e.length-n&&q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fn.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof fn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},re=class extends fn{construct(e,n,r){return new re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(_.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new re(n)}static emptyPath(){return new re([])}},Zy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ie=class extends fn{construct(e,n,r){return new Ie(e,n,r)}static isValidIdentifier(e){return Zy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ie.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ie(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new O(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new O(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new O(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ie(n)}static emptyPath(){return new Ie([])}};var vi=class{constructor(e){this.fields=e,e.sort(Ie.comparator)}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hn(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ye=class{constructor(e){this.binaryString=e}static fromBase64String(e){let n=atob(e);return new ye(n)}static fromUint8Array(e){let n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ye(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ye.EMPTY_BYTE_STRING=new ye("");var ev=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _t(t){if(ne(!!t),typeof t=="string"){let e=0,n=ev.exec(t);if(ne(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ae(t.seconds),nanos:ae(t.nanos)}}function ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dn(t){return typeof t=="string"?ye.fromBase64String(t):ye.fromUint8Array(t)}function bu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tu(t){let e=t.mapValue.fields.__previous_value__;return bu(e)?Tu(e):e}function tr(t){let e=_t(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}function pn(t){return t==null}function _i(t){return t===0&&1/t==-1/0}function tv(t){return typeof t=="number"&&Number.isInteger(t)&&!_i(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var V=class{constructor(e){this.path=e}static fromPath(e){return new V(re.fromString(e))}static fromName(e){return new V(re.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new V(new re(e.slice()))}};function wt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bu(t)?4:10:q()}function Xe(t,e){let n=wt(t);if(n!==wt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tr(t).isEqual(tr(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;let s=_t(r.timestampValue),o=_t(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return dn(r.bytesValue).isEqual(dn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return ae(r.geoPointValue.latitude)===ae(i.geoPointValue.latitude)&&ae(r.geoPointValue.longitude)===ae(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ae(r.integerValue)===ae(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){let s=ae(r.doubleValue),o=ae(i.doubleValue);return s===o?_i(s)===_i(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return hn(t.arrayValue.values||[],e.arrayValue.values||[],Xe);case 10:return function(r,i){let s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(wu(s)!==wu(o))return!1;for(let a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Xe(s[a],o[a])))return!1;return!0}(t,e);default:return q()}}function nr(t,e){return(t.values||[]).find(n=>Xe(n,e))!==void 0}function mn(t,e){let n=wt(t),r=wt(e);if(n!==r)return ee(n,r);switch(n){case 0:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(i,s){let o=ae(i.integerValue||i.doubleValue),a=ae(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Iu(t.timestampValue,e.timestampValue);case 4:return Iu(tr(t),tr(e));case 5:return ee(t.stringValue,e.stringValue);case 6:return function(i,s){let o=dn(i),a=dn(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){let o=i.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){let l=ee(o[c],a[c]);if(l!==0)return l}return ee(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){let o=ee(ae(i.latitude),ae(s.latitude));return o!==0?o:ee(ae(i.longitude),ae(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){let o=i.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){let l=mn(o[c],a[c]);if(l)return l}return ee(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){let o=i.fields||{},a=Object.keys(o),c=s.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){let h=ee(a[u],l[u]);if(h!==0)return h;let f=mn(o[a[u]],c[l[u]]);if(f!==0)return f}return ee(a.length,l.length)}(t.mapValue,e.mapValue);default:throw q()}}function Iu(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);let n=_t(t),r=_t(e),i=ee(n.seconds,r.seconds);return i!==0?i:ee(n.nanos,r.nanos)}function Io(t){return To(t)}function To(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){let i=_t(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?dn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,V.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(let o of r.values||[])s?s=!1:i+=",",i+=To(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){let i=Object.keys(r.fields||{}).sort(),s="{",o=!0;for(let a of i)o?o=!1:s+=",",s+=`${a}:${To(r.fields[a])}`;return s+"}"}(t.mapValue):q();var e,n}function So(t){return!!t&&"integerValue"in t}function ko(t){return!!t&&"arrayValue"in t}function Su(t){return!!t&&"nullValue"in t}function ku(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ao(t){return!!t&&"mapValue"in t}var Le=class{constructor(e){this.overlayMap=new Map,this.partialValue=e}static empty(){return new Le({mapValue:{}})}field(e){return Le.extractNestedValue(this.buildProto(),e)}toProto(){return this.field(Ie.emptyPath())}set(e,n){this.setOverlay(e,n)}setAll(e){e.forEach((n,r)=>{n?this.set(r,n):this.delete(r)})}delete(e){this.setOverlay(e,null)}isEqual(e){return Xe(this.buildProto(),e.buildProto())}setOverlay(e,n){let r=this.overlayMap;for(let i=0;i<e.length-1;++i){let s=e.get(i),o=r.get(s);o instanceof Map?r=o:o&&wt(o)===10?(o=new Map(Object.entries(o.mapValue.fields||{})),r.set(s,o),r=o):(o=new Map,r.set(s,o),r=o)}r.set(e.lastSegment(),n)}applyOverlay(e,n){let r=!1,i=Le.extractNestedValue(this.partialValue,e),s=Ao(i)?Object.assign({},i.mapValue.fields):{};return n.forEach((o,a)=>{if(o instanceof Map){let c=this.applyOverlay(e.child(a),o);c!=null&&(s[a]=c,r=!0)}else o!==null?(s[a]=o,r=!0):s.hasOwnProperty(a)&&(delete s[a],r=!0)}),r?{mapValue:{fields:s}}:null}buildProto(){let e=this.applyOverlay(Ie.emptyPath(),this.overlayMap);return e!=null&&(this.partialValue=e,this.overlayMap.clear()),this.partialValue}static extractNestedValue(e,n){if(n.isEmpty())return e;{let r=e;for(let i=0;i<n.length-1;++i)if(!r.mapValue.fields||(r=r.mapValue.fields[n.get(i)],!Ao(r)))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}clone(){return new Le(this.buildProto())}};function Au(t){let e=[];return yi(t.fields||{},(n,r)=>{let i=new Ie([n]);if(Ao(r)){let s=Au(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new vi(e)}var ve=class{constructor(e,n,r,i,s){this.key=e,this.documentType=n,this.version=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new ve(e,0,J.min(),Le.empty(),0)}static newFoundDocument(e,n,r){return new ve(e,1,n,r,0)}static newNoDocument(e,n){return new ve(e,2,n,Le.empty(),0)}static newUnknownDocument(e,n){return new ve(e,3,n,Le.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Le.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Le.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ve&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new ve(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.toProto())}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Cu=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.h=null}};function Ru(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Cu(t,e,n,r,i,s,o)}function Co(t){let e=B(t);if(e.h===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),pn(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=wi(e.startAt)),e.endAt&&(n+="|ub:",n+=wi(e.endAt)),e.h=n}return e.h}function rv(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Io(r.value)}`;var r}).join(", ")}]`),pn(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+wi(t.startAt)),t.endAt&&(e+=", endAt: "+wi(t.endAt)),`Target(${e})`}function Ro(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!iv(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Xe(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nu(t.startAt,e.startAt)&&Nu(t.endAt,e.endAt)}function No(t){return V.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ne=class extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.l(e,n,r):new Du(e,n,r):n==="array-contains"?new Pu(e,r):n==="in"?new Mu(e,r):n==="not-in"?new Uu(e,r):n==="array-contains-any"?new xu(e,r):new Ne(e,n,r)}static l(e,n,r){return n==="in"?new Ou(e,r):new Lu(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.m(mn(n,this.value)):n!==null&&wt(this.value)===wt(n)&&this.m(mn(n,this.value))}m(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}g(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}};function nv(t){return t.field.canonicalString()+t.op.toString()+Io(t.value)}var Du=class extends Ne{constructor(e,n,r){super(e,n,r),this.key=V.fromName(r.referenceValue)}matches(e){let n=V.comparator(e.key,this.key);return this.m(n)}},Ou=class extends Ne{constructor(e,n){super(e,"in",n),this.keys=Vu("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Lu=class extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=Vu("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Vu(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>V.fromName(r.referenceValue))}var Pu=class extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ko(n)&&nr(n.arrayValue,this.value)}},Mu=class extends Ne{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&nr(this.value.arrayValue,n)}},Uu=class extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(nr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!nr(this.value.arrayValue,n)}},xu=class extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ko(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nr(this.value.arrayValue,r))}},Ei=class{constructor(e,n){this.position=e,this.before=n}};function wi(t){return`${t.before?"b":"a"}:${t.position.map(e=>Io(e)).join(",")}`}var gn=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function iv(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Fu(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=V.comparator(V.fromName(o.referenceValue),n.key):r=mn(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function Nu(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xe(t.position[n],e.position[n]))return!1;return!0}var rr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt}};function sv(t,e,n,r,i,s,o,a){return new rr(t,e,n,r,i,s,o,a)}function Do(t){return new rr(t)}function bi(t){return!pn(t.limit)&&t.limitType==="F"}function Oo(t){return!pn(t.limit)&&t.limitType==="L"}function ov(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function av(t){for(let e of t.filters)if(e.g())return e.field;return null}function cv(t){return t.collectionGroup!==null}function ir(t){let e=B(t);if(e.p===null){e.p=[];let n=av(e),r=ov(e);if(n!==null&&r===null)n.isKeyField()||e.p.push(new gn(n)),e.p.push(new gn(Ie.keyField(),"asc"));else{let i=!1;for(let s of e.explicitOrderBy)e.p.push(s),s.field.isKeyField()&&(i=!0);if(!i){let s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new gn(Ie.keyField(),s))}}}return e.p}function Ut(t){let e=B(t);if(!e.T)if(e.limitType==="F")e.T=Ru(e.path,e.collectionGroup,ir(e),e.filters,e.limit,e.startAt,e.endAt);else{let n=[];for(let s of ir(e)){let o=s.dir==="desc"?"asc":"desc";n.push(new gn(s.field,o))}let r=e.endAt?new Ei(e.endAt.position,!e.endAt.before):null,i=e.startAt?new Ei(e.startAt.position,!e.startAt.before):null;e.T=Ru(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.T}function lv(t,e,n){return new rr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ti(t,e){return Ro(Ut(t),Ut(e))&&t.limitType===e.limitType}function $u(t){return`${Co(Ut(t))}|lt:${t.limitType}`}function Lo(t){return`Query(target=${rv(Ut(t))}; limitType=${t.limitType})`}function Ii(t,e){return e.isFoundDocument()&&function(n,r){let i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):V.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(let i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(let i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!Fu(n.startAt,ir(n),r)||n.endAt&&Fu(n.endAt,ir(n),r))}(t,e)}function ju(t){return(e,n)=>{let r=!1;for(let i of ir(t)){let s=uv(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uv(t,e,n){let r=t.field.isKeyField()?V.comparator(e.key,n.key):function(i,s,o){let a=s.data.field(i),c=o.data.field(i);return a!==null&&c!==null?mn(a,c):q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}function qu(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_i(e)?"-0":e}}function Bu(t){return{integerValue:""+t}}function hv(t,e){return tv(e)?Bu(e):qu(t,e)}var sr=class{constructor(){this._=void 0}};function fv(t,e,n){return t instanceof or?function(r,i){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof yn?Hu(t,e):t instanceof vn?Ku(t,e):function(r,i){let s=zu(r,i),o=Gu(s)+Gu(r.A);return So(s)&&So(r.A)?Bu(o):qu(r.R,o)}(t,e)}function dv(t,e,n){return t instanceof yn?Hu(t,e):t instanceof vn?Ku(t,e):n}function zu(t,e){return t instanceof ar?So(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}var or=class extends sr{},yn=class extends sr{constructor(e){super(),this.elements=e}};function Hu(t,e){let n=Wu(e);for(let r of t.elements)n.some(i=>Xe(i,r))||n.push(r);return{arrayValue:{values:n}}}var vn=class extends sr{constructor(e){super(),this.elements=e}};function Ku(t,e){let n=Wu(e);for(let r of t.elements)n=n.filter(i=>!Xe(i,r));return{arrayValue:{values:n}}}var ar=class extends sr{constructor(e,n){super(),this.R=e,this.A=n}};function Gu(t){return ae(t.integerValue||t.doubleValue)}function Wu(t){return ko(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pv(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof yn&&r instanceof yn||n instanceof vn&&r instanceof vn?hn(n.elements,r.elements,Xe):n instanceof ar&&r instanceof ar?Xe(n.A,r.A):n instanceof or&&r instanceof or}(t.transform,e.transform)}var Xu=class{constructor(e,n){this.version=e,this.transformResults=n}},xt=class{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xt}static exists(e){return new xt(void 0,e)}static updateTime(e){return new xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Si(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var cr=class{};function mv(t,e,n){t instanceof lr?function(r,i,s){let o=r.value.clone(),a=Yu(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Vt?function(r,i,s){if(!Si(r.precondition,i))return void i.convertToUnknownDocument(s.version);let o=Yu(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(Qu(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Po(t,e,n){t instanceof lr?function(r,i,s){if(!Si(r.precondition,i))return;let o=r.value.clone(),a=Zu(r.fieldTransforms,s,i);o.setAll(a),i.convertToFoundDocument(Ju(i),o).setHasLocalMutations()}(t,e,n):t instanceof Vt?function(r,i,s){if(!Si(r.precondition,i))return;let o=Zu(r.fieldTransforms,s,i),a=i.data;a.setAll(Qu(r)),a.setAll(o),i.convertToFoundDocument(Ju(i),a).setHasLocalMutations()}(t,e,n):function(r,i){Si(r.precondition,i)&&i.convertToNoDocument(J.min())}(t,e)}function gv(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=zu(r.transform,i||null);s!=null&&(n==null&&(n=Le.empty()),n.set(r.field,s))}return n||null}function eh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&hn(n,r,(i,s)=>pv(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ju(t){return t.isFoundDocument()?t.version:J.min()}var lr=class extends cr{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}},Vt=class extends cr{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}};function Qu(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Yu(t,e,n){let r=new Map;ne(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,dv(o,a,n[i]))}return r}function Zu(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,fv(s,o,e))}return r}var th=class extends cr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}},nh=class extends cr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}};var rh=class{constructor(e){this.count=e}};var ce,X;function yv(t){switch(t){case _.OK:return q();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return q()}}function ih(t){if(t===void 0)return vt("GRPC error has no .code"),_.UNKNOWN;switch(t){case ce.OK:return _.OK;case ce.CANCELLED:return _.CANCELLED;case ce.UNKNOWN:return _.UNKNOWN;case ce.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case ce.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case ce.INTERNAL:return _.INTERNAL;case ce.UNAVAILABLE:return _.UNAVAILABLE;case ce.UNAUTHENTICATED:return _.UNAUTHENTICATED;case ce.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case ce.NOT_FOUND:return _.NOT_FOUND;case ce.ALREADY_EXISTS:return _.ALREADY_EXISTS;case ce.PERMISSION_DENIED:return _.PERMISSION_DENIED;case ce.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case ce.ABORTED:return _.ABORTED;case ce.OUT_OF_RANGE:return _.OUT_OF_RANGE;case ce.UNIMPLEMENTED:return _.UNIMPLEMENTED;case ce.DATA_LOSS:return _.DATA_LOSS;default:return q()}}(X=ce||(ce={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var _e=class{constructor(e,n){this.comparator=e,this.root=n||de.EMPTY}insert(e,n){return new _e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,de.BLACK,null,null))}remove(e){return new _e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,de.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ur(this.root,e,this.comparator,!0)}},ur=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},de=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??de.RED,this.left=i??de.EMPTY,this.right=s??de.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new de(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return de.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return de.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,de.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,de.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};de.EMPTY=null,de.RED=!0,de.BLACK=!1;de.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(t,e,n,r,i){return this}insert(t,e,n){return new de(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pe=class{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mo(this.data.getIterator())}getIteratorFrom(e){return new Mo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pe)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new pe(this.comparator);return n.data=e,n}},Mo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var vv=new _e(V.comparator);function Ft(){return vv}var _v=new _e(V.comparator);function Uo(){return _v}var wv=new _e(V.comparator);function Ev(){return wv}var bv=new pe(V.comparator);function ie(...t){let e=bv;for(let n of t)e=e.add(n);return e}var Tv=new pe(ee);function sh(){return Tv}var hr=class{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){let r=new Map;return r.set(e,_n.createSynthesizedTargetChangeForCurrentChange(e,n)),new hr(J.min(),r,sh(),Ft(),ie())}},_n=class{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new _n(ye.EMPTY_BYTE_STRING,n,ie(),ie(),ie())}};var fr=class{constructor(e,n,r,i){this.P=e,this.removedTargetIds=n,this.key=r,this.v=i}},xo=class{constructor(e,n){this.targetId=e,this.V=n}},Vo=class{constructor(e,n,r=ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Fo=class{constructor(){this.S=0,this.D=oh(),this.C=ye.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}get current(){return this.N}get resumeToken(){return this.C}get $(){return this.S!==0}get O(){return this.k}M(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)}F(){let e=ie(),n=ie(),r=ie();return this.D.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q()}}),new _n(this.C,this.N,e,n,r)}L(){this.k=!1,this.D=oh()}B(e,n){this.k=!0,this.D=this.D.insert(e,n)}U(e){this.k=!0,this.D=this.D.remove(e)}q(){this.S+=1}K(){this.S-=1}j(){this.k=!0,this.N=!0}},ah=class{constructor(e){this.W=e,this.G=new Map,this.H=Ft(),this.J=ch(),this.Y=new pe(ee)}X(e){for(let n of e.P)e.v&&e.v.isFoundDocument()?this.Z(n,e.v):this.tt(n,e.key,e.v);for(let n of e.removedTargetIds)this.tt(n,e.key,e.v)}et(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.st(n)&&r.M(e.resumeToken);break;case 1:r.K(),r.$||r.L(),r.M(e.resumeToken);break;case 2:r.K(),r.$||this.removeTarget(n);break;case 3:this.st(n)&&(r.j(),r.M(e.resumeToken));break;case 4:this.st(n)&&(this.it(n),r.M(e.resumeToken));break;default:q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.G.forEach((r,i)=>{this.st(i)&&n(i)})}rt(e){let n=e.targetId,r=e.V.count,i=this.ot(n);if(i){let s=i.target;if(No(s))if(r===0){let o=new V(s.path);this.tt(n,o,ve.newNoDocument(o,J.min()))}else ne(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}}at(e){let n=new Map;this.G.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&No(a.target)){let c=new V(a.target.path);this.H.get(c)!==null||this.ut(o,c)||this.tt(o,c,ve.newNoDocument(c,e))}s.O&&(n.set(o,s.F()),s.L())}});let r=ie();this.J.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))});let i=new hr(e,n,this.Y,this.H,r);return this.H=Ft(),this.J=ch(),this.Y=new pe(ee),i}Z(e,n){if(!this.st(e))return;let r=this.ut(e,n.key)?2:0;this.nt(e).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(e))}tt(e,n,r){if(!this.st(e))return;let i=this.nt(e);this.ut(e,n)?i.B(n,1):i.U(n),this.J=this.J.insert(n,this.ht(n).delete(e)),r&&(this.H=this.H.insert(n,r))}removeTarget(e){this.G.delete(e)}ct(e){let n=this.nt(e).F();return this.W.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}q(e){this.nt(e).q()}nt(e){let n=this.G.get(e);return n||(n=new Fo,this.G.set(e,n)),n}ht(e){let n=this.J.get(e);return n||(n=new pe(ee),this.J=this.J.insert(e,n)),n}st(e){let n=this.ot(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.G.get(e);return n&&n.$?null:this.W.lt(e)}it(e){this.G.set(e,new Fo),this.W.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}ut(e,n){return this.W.getRemoteKeysForTarget(e).has(n)}};function ch(){return new _e(V.comparator)}function oh(){return new _e(V.comparator)}var Iv=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Sv=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),lh=class{constructor(e,n){this.databaseId=e,this.I=n}};function ki(t,e){return t.I?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uh(t,e){return t.I?e.toBase64():e.toUint8Array()}function kv(t,e){return ki(t,e.toTimestamp())}function rt(t){return ne(!!t),J.fromTimestamp(function(e){let n=_t(e);return new Oe(n.seconds,n.nanos)}(t))}function $o(t,e){return function(n){return new re(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function fh(t){let e=re.fromString(t);return ne(hh(e)),e}function jo(t,e){return $o(t.databaseId,e.path)}function qo(t,e){let n=fh(e);if(n.get(1)!==t.databaseId.projectId)throw new O(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(dh(n))}function Bo(t,e){return $o(t.databaseId,e)}function Av(t){let e=fh(t);return e.length===4?re.emptyPath():dh(e)}function zo(t){return new re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dh(t){return ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ph(t,e,n){return{name:jo(t,e),fields:n.toProto().mapValue.fields}}function Cv(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.I?(ne(l===void 0||typeof l=="string"),ye.fromBase64String(l||"")):(ne(l===void 0||l instanceof Uint8Array),ye.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?_.UNKNOWN:ih(c.code);return new O(l,c.message||"")}(o);n=new Vo(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=qo(t,r.document.name),s=rt(r.document.updateTime),o=new Le({mapValue:{fields:r.document.fields}}),a=ve.newFoundDocument(i,s,o),c=r.targetIds||[],l=r.removedTargetIds||[];n=new fr(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=qo(t,r.document),s=r.readTime?rt(r.readTime):J.min(),o=ve.newNoDocument(i,s),a=r.removedTargetIds||[];n=new fr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=qo(t,r.document),s=r.removedTargetIds||[];n=new fr([],s,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let i=r.count||0,s=new rh(i),o=r.targetId;n=new xo(o,s)}}return n}function Nv(t,e){let n;if(e instanceof lr)n={update:ph(t,e.key,e.value)};else if(e instanceof th)n={delete:jo(t,e.key)};else if(e instanceof Vt)n={update:ph(t,e.key,e.data),updateMask:Rv(e.fieldMask)};else{if(!(e instanceof nh))return q();n={verify:jo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){let o=s.transform;if(o instanceof or)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof yn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof vn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ar)return{fieldPath:s.field.canonicalString(),increment:o.A};throw q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:kv(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:q()}(t,e.precondition)),n}function Dv(t,e){return t&&t.length>0?(ne(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?rt(r.updateTime):rt(i);return s.isEqual(J.min())&&(s=rt(i)),new Xu(s,r.transformResults||[])}(n,e))):[]}function Ov(t,e){return{documents:[Bo(t,e.path)]}}function Mv(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Bo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Bo(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(a){if(a.length===0)return;let c=a.map(l=>function(u){if(u.op==="=="){if(ku(u.value))return{unaryFilter:{field:wn(u.field),op:"IS_NAN"}};if(Su(u.value))return{unaryFilter:{field:wn(u.field),op:"IS_NULL"}}}else if(u.op==="!="){if(ku(u.value))return{unaryFilter:{field:wn(u.field),op:"IS_NOT_NAN"}};if(Su(u.value))return{unaryFilter:{field:wn(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wn(u.field),op:Pv(u.op),value:u.value}}}(l));return c.length===1?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);i&&(n.structuredQuery.where=i);let s=function(a){if(a.length!==0)return a.map(c=>function(l){return{field:wn(l.field),direction:Lv(l.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let o=function(a,c){return a.I||pn(c)?c:{value:c}}(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=mh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=mh(e.endAt)),n}function Uv(t){let e=Av(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ne(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=gh(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new gn(En(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,pn(h)?null:h}(n.limit));let c=null;n.startAt&&(c=yh(n.startAt));let l=null;return n.endAt&&(l=yh(n.endAt)),sv(e,i,o,s,a,"F",c,l)}function xv(t,e){let n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return q()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function gh(t){return t?t.unaryFilter!==void 0?[Fv(t)]:t.fieldFilter!==void 0?[Vv(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>gh(e)).reduce((e,n)=>e.concat(n)):q():[]}function mh(t){return{before:t.before,values:t.position}}function yh(t){let e=!!t.before,n=t.values||[];return new Ei(n,e)}function Lv(t){return Iv[t]}function Pv(t){return Sv[t]}function wn(t){return{fieldPath:t.canonicalString()}}function En(t){return Ie.fromServerFormat(t.fieldPath)}function Vv(t){return Ne.create(En(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}function Fv(t){switch(t.unaryFilter.op){case"IS_NAN":let e=En(t.unaryFilter.field);return Ne.create(e,"==",{doubleValue:NaN});case"IS_NULL":let n=En(t.unaryFilter.field);return Ne.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=En(t.unaryFilter.field);return Ne.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=En(t.unaryFilter.field);return Ne.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return q()}}function Rv(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hh(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var $v="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};var bn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var S=class{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new S((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof S?n:S.resolve(n)}catch(n){return S.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):S.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):S.reject(n)}static resolve(e){return new S((n,r)=>{n(e)})}static reject(e){return new S((n,r)=>{r(e)})}static waitFor(e){return new S((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=S.resolve(!1);for(let r of e)n=n.next(i=>i?S.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}};function dr(t){return t.name==="IndexedDbTransactionError"}var _h=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&mv(s,e,r[i])}}applyToLocalView(e){for(let n of this.baseMutations)n.key.isEqual(e.key)&&Po(n,e,this.localWriteTime);for(let n of this.mutations)n.key.isEqual(e.key)&&Po(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{let r=e.get(n.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(J.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&hn(this.mutations,e.mutations,(n,r)=>eh(n,r))&&hn(this.baseMutations,e.baseMutations,(n,r)=>eh(n,r))}},Ai=class{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ne(e.mutations.length===r.length);let i=Ev(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ai(e,n,r,i)}};var Et=class{constructor(e,n,r,i,s=J.min(),o=J.min(),a=ye.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Et(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Et(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Et(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}};var wh=class{constructor(e){this.Lt=e}};function jv(t){let e=Uv({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lv(e,e.limit,"L"):e}var Eh=class{constructor(){this.Bt=new bh}addToCollectionParentIndex(e,n){return this.Bt.add(n),S.resolve()}getCollectionParents(e,n){return S.resolve(this.Bt.getEntries(n))}},bh=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pe(re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pe(re.comparator)).toArray()}};var $t=class{constructor(e){this.Ht=e}next(){return this.Ht+=2,this.Ht}static Jt(){return new $t(0)}static Yt(){return new $t(-1)}};async function pr(t){if(t.code!==_.FAILED_PRECONDITION||t.message!==$v)throw t;D("LocalStore","Unexpectedly lost primary lease")}var Tn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n])}else this.inner[r]=[[e,n]]}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1}forEach(e){yi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Eu(this.inner)}};var Th=class{constructor(){this.changes=new Tn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){let n=this.changes.get(e);return n?n.readTime:J.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:ve.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?S.resolve(r.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ho=class{constructor(e,n,r){this.qe=e,this._n=n,this.qt=r}mn(e,n){return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.gn(e,n,r))}gn(e,n,r){return this.qe.getEntry(e,n).next(i=>{for(let s of r)s.applyToLocalView(i);return i})}yn(e,n){e.forEach((r,i)=>{for(let s of n)s.applyToLocalView(i)})}pn(e,n){return this.qe.getEntries(e,n).next(r=>this.En(e,r).next(()=>r))}En(e,n){return this._n.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.yn(n,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return V.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(e,n.path):cv(n)?this.In(e,n,r):this.An(e,n,r)}Tn(e,n){return this.mn(e,new V(n)).next(r=>{let i=Uo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}In(e,n,r){let i=n.collectionGroup,s=Uo();return this.qt.getCollectionParents(e,i).next(o=>S.forEach(o,a=>{let c=function(l,u){return new rr(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(i));return this.An(e,c,r).next(l=>{l.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}An(e,n,r){let i,s;return this.qe.getDocumentsMatchingQuery(e,n,r).next(o=>(i=o,this._n.getAllMutationBatchesAffectingQuery(e,n))).next(o=>(s=o,this.Rn(e,s,i).next(a=>{i=a;for(let c of s)for(let l of c.mutations){let u=l.key,h=i.get(u);h==null&&(h=ve.newInvalidDocument(u),i=i.insert(u,h)),Po(l,h,c.localWriteTime),h.isFoundDocument()||(i=i.remove(u))}}))).next(()=>(i.forEach((o,a)=>{Ii(n,a)||(i=i.remove(o))}),i))}Rn(e,n,r){let i=ie();for(let o of n)for(let a of o.mutations)a instanceof Vt&&r.get(a.key)===null&&(i=i.add(a.key));let s=r;return this.qe.getEntries(e,i).next(o=>(o.forEach((a,c)=>{c.isFoundDocument()&&(s=s.insert(a,c))}),s))}};var Ci=class{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pn=r,this.bn=i}static vn(e,n){let r=ie(),i=ie();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ci(e,n.fromCache,r,i)}};var Ih=class{Vn(e){this.Sn=e}getDocumentsMatchingQuery(e,n,r,i){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(J.min())?this.Dn(e,n):this.Sn.pn(e,i).next(s=>{let o=this.Cn(n,s);return(bi(n)||Oo(n))&&this.Nn(n.limitType,o,i,r)?this.Dn(e,n):(vu()<=Q.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lo(n)),this.Sn.getDocumentsMatchingQuery(e,n,r).next(a=>(o.forEach(c=>{a=a.insert(c.key,c)}),a)))})}Cn(e,n){let r=new pe(ju(e));return n.forEach((i,s)=>{Ii(e,s)&&(r=r.add(s))}),r}Nn(e,n,r,i){if(r.size!==n.size)return!0;let s=e==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Dn(e,n){return vu()<=Q.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",Lo(n)),this.Sn.getDocumentsMatchingQuery(e,n,J.min())}};var Sh=class{constructor(e,n,r,i){this.persistence=e,this.xn=n,this.R=i,this.kn=new _e(ee),this.$n=new Tn(s=>Co(s),Ro),this.On=J.min(),this._n=e.getMutationQueue(r),this.Mn=e.getRemoteDocumentCache(),this.Ue=e.getTargetCache(),this.Fn=new Ho(this.Mn,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Fn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.kn))}};function qv(t,e,n,r){return new Sh(t,e,n,r)}async function kh(t,e){let n=B(t),r=n._n,i=n.Fn,s=await n.persistence.runTransaction("Handle user change","readonly",o=>{let a;return n._n.getAllMutationBatches(o).next(c=>(a=c,r=n.persistence.getMutationQueue(e),i=new Ho(n.Mn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(o))).next(c=>{let l=[],u=[],h=ie();for(let f of a){l.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}for(let f of c){u.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}return i.pn(o,h).next(f=>({Ln:f,removedBatchIds:l,addedBatchIds:u}))})});return n._n=r,n.Fn=i,n.xn.Vn(n.Fn),s}function Bv(t,e){let n=B(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.Mn.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){let u=c.batch,h=u.keys(),f=S.resolve();return h.forEach(d=>{f=f.next(()=>l.getEntry(a,d)).next(p=>{let m=c.docVersions.get(d);ne(m!==null),p.version.compareTo(m)<0&&(u.applyToRemoteDocument(p,c),p.isValidDocument()&&l.addEntry(p,c.commitVersion))})}),f.next(()=>o._n.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n._n.performConsistencyCheck(r)).next(()=>n.Fn.pn(r,i))})}function Ah(t){let e=B(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ue.getLastRemoteSnapshotVersion(n))}function Hv(t,e){let n=B(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.Mn.newChangeBuffer({trackRemovals:!0});i=n.kn;let a=[];e.targetChanges.forEach((l,u)=>{let h=i.get(u);if(!h)return;a.push(n.Ue.removeMatchingKeys(s,l.removedDocuments,u).next(()=>n.Ue.addMatchingKeys(s,l.addedDocuments,u)));let f=l.resumeToken;if(f.approximateByteSize()>0){let d=h.withResumeToken(f,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(u,d),function(p,m,A){return ne(m.resumeToken.approximateByteSize()>0),p.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(h,d,l)&&a.push(n.Ue.updateTargetData(s,d))}});let c=Ft();if(e.documentUpdates.forEach((l,u)=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(zv(s,o,e.documentUpdates,r,void 0).next(l=>{c=l})),!r.isEqual(J.min())){let l=n.Ue.getLastRemoteSnapshotVersion(s).next(u=>n.Ue.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return S.waitFor(a).next(()=>o.apply(s)).next(()=>n.Fn.En(s,c)).next(()=>c)}).then(s=>(n.kn=i,s))}function zv(t,e,n,r,i){let s=ie();return n.forEach(o=>s=s.add(o)),e.getEntries(t,s).next(o=>{let a=Ft();return n.forEach((c,l)=>{let u=o.get(c),h=(i==null?void 0:i.get(c))||r;l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(c,h),a=a.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l,h),a=a.insert(c,l)):D("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),a})}function Kv(t,e){let n=B(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n._n.getNextMutationBatchAfterBatchId(r,e)))}function Gv(t,e){let n=B(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ue.getTargetData(r,e).next(s=>s?(i=s,S.resolve(i)):n.Ue.allocateTargetId(r).next(o=>(i=new Et(e,o,0,r.currentSequenceNumber),n.Ue.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.$n.set(e,r.targetId)),r})}async function Ko(t,e,n){let r=B(t),i=r.kn.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!dr(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.kn=r.kn.remove(e),r.$n.delete(i.target)}function Ch(t,e,n){let r=B(t),i=J.min(),s=ie();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){let u=B(a),h=u.$n.get(l);return h!==void 0?S.resolve(u.kn.get(h)):u.Ue.getTargetData(c,l)}(r,o,Ut(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ue.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.xn.getDocumentsMatchingQuery(o,e,n?i:J.min(),n?s:ie())).next(a=>({documents:a,Bn:s})))}var Rh=class{constructor(e){this.R=e,this.Qn=new Map,this.jn=new Map}getBundleMetadata(e,n){return S.resolve(this.Qn.get(n))}saveBundleMetadata(e,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:rt(r.createTime)}),S.resolve()}getNamedQuery(e,n){return S.resolve(this.jn.get(n))}saveNamedQuery(e,n){return this.jn.set(n.name,function(r){return{name:r.name,query:jv(r.bundledQuery),readTime:rt(r.readTime)}}(n)),S.resolve()}};var Ri=class{constructor(){this.Wn=new pe(he.Gn),this.zn=new pe(he.Hn)}isEmpty(){return this.Wn.isEmpty()}addReference(e,n){let r=new he(e,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)}Jn(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Yn(new he(e,n))}Xn(e,n){e.forEach(r=>this.removeReference(r,n))}Zn(e){let n=new V(new re([])),r=new he(n,e),i=new he(n,e+1),s=[];return this.zn.forEachInRange([r,i],o=>{this.Yn(o),s.push(o.key)}),s}ts(){this.Wn.forEach(e=>this.Yn(e))}Yn(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)}es(e){let n=new V(new re([])),r=new he(n,e),i=new he(n,e+1),s=ie();return this.zn.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new he(e,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},he=class{constructor(e,n){this.key=e,this.ns=n}static Gn(e,n){return V.comparator(e.key,n.key)||ee(e.ns,n.ns)}static Hn(e,n){return ee(e.ns,n.ns)||V.comparator(e.key,n.key)}};var Nh=class{constructor(e,n){this.qt=e,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new pe(he.Gn)}checkEmpty(e){return S.resolve(this._n.length===0)}addMutationBatch(e,n,r,i){let s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];let o=new _h(s,n,r,i);this._n.push(o);for(let a of i)this.rs=this.rs.add(new he(a.key,s)),this.qt.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(o)}lookupMutationBatch(e,n){return S.resolve(this.os(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.cs(r),s=i<0?0:i;return S.resolve(this._n.length>s?this._n[s]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this._n.length===0?-1:this.ss-1)}getAllMutationBatches(e){return S.resolve(this._n.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new he(n,0),i=new he(n,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],o=>{let a=this.os(o.ns);s.push(a)}),S.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pe(ee);return n.forEach(i=>{let s=new he(i,0),o=new he(i,Number.POSITIVE_INFINITY);this.rs.forEachInRange([s,o],a=>{r=r.add(a.ns)})}),S.resolve(this.us(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;V.isDocumentKey(s)||(s=s.child(""));let o=new he(new V(s),0),a=new pe(ee);return this.rs.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.ns)),!0)},o),S.resolve(this.us(a))}us(e){let n=[];return e.forEach(r=>{let i=this.os(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ne(this.hs(n.batchId,"removed")===0),this._n.shift();let r=this.rs;return S.forEach(n.mutations,i=>{let s=new he(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.rs=r})}Gt(e){}containsKey(e,n){let r=new he(n,0),i=this.rs.firstAfterOrEqual(r);return S.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this._n.length,S.resolve()}hs(e,n){return this.cs(e)}cs(e){return this._n.length===0?0:e-this._n[0].batchId}os(e){let n=this.cs(e);return n<0||n>=this._n.length?null:this._n[n]}};var Dh=class{constructor(e,n){this.qt=e,this.ls=n,this.docs=new _e(V.comparator),this.size=0}addEntry(e,n,r){let i=n.key,s=this.docs.get(i),o=s?s.size:0,a=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:a,readTime:r}),this.size+=a-o,this.qt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return S.resolve(r?r.document.clone():ve.newInvalidDocument(n))}getEntries(e,n){let r=Ft();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.clone():ve.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,n,r){let i=Ft(),s=new V(n.path.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){let{key:a,value:{document:c,readTime:l}}=o.getNext();if(!n.path.isPrefixOf(a.path))break;l.compareTo(r)<=0||Ii(n,c)&&(i=i.insert(c.key,c.clone()))}return S.resolve(i)}fs(e,n){return S.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Oh(this)}getSize(e){return S.resolve(this.size)}},Oh=class extends Th{constructor(e){super(),this.Ie=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?n.push(this.Ie.addEntry(e,i.document,this.getReadTime(r))):this.Ie.removeEntry(r)}),S.waitFor(n)}getFromCache(e,n){return this.Ie.getEntry(e,n)}getAllFromCache(e,n){return this.Ie.getEntries(e,n)}};var Lh=class{constructor(e){this.persistence=e,this.ds=new Tn(n=>Co(n),Ro),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.ws=0,this._s=new Ri,this.targetCount=0,this.gs=$t.Jt()}forEachTarget(e,n){return this.ds.forEach((r,i)=>n(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.ws)}allocateTargetId(e){return this.highestTargetId=this.gs.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),S.resolve()}te(e){this.ds.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.gs=new $t(n),this.highestTargetId=n),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)}addTargetData(e,n){return this.te(n),this.targetCount+=1,S.resolve()}updateTargetData(e,n){return this.te(n),S.resolve()}removeTargetData(e,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.ds.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ds.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(s).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,n){let r=this.ds.get(n)||null;return S.resolve(r)}addMatchingKeys(e,n,r){return this._s.Jn(n,r),S.resolve()}removeMatchingKeys(e,n,r){this._s.Xn(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),S.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._s.Zn(n),S.resolve()}getMatchingKeysForTargetId(e,n){let r=this._s.es(n);return S.resolve(r)}containsKey(e,n){return S.resolve(this._s.containsKey(n))}};var Ph=class{constructor(e,n){this.ys={},this.Ne=new gi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.Ue=new Lh(this),this.qt=new Eh,this.qe=function(r,i){return new Dh(r,i)}(this.qt,r=>this.referenceDelegate.ps(r)),this.R=new wh(n),this.Ke=new Rh(this.R)}start(){return Promise.resolve()}shutdown(){return this.xe=!1,Promise.resolve()}get started(){return this.xe}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.qt}getMutationQueue(e){let n=this.ys[e.toKey()];return n||(n=new Nh(this.qt,this.referenceDelegate),this.ys[e.toKey()]=n),n}getTargetCache(){return this.Ue}getRemoteDocumentCache(){return this.qe}getBundleCache(){return this.Ke}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);let i=new Mh(this.Ne.next());return this.referenceDelegate.Es(),r(i).next(s=>this.referenceDelegate.Ts(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Is(e,n){return S.or(Object.values(this.ys).map(r=>()=>r.containsKey(e,n)))}},Mh=class extends vh{constructor(e){super(),this.currentSequenceNumber=e}},Ni=class{constructor(e){this.persistence=e,this.As=new Ri,this.Rs=null}static Ps(e){return new Ni(e)}get bs(){if(this.Rs)return this.Rs;throw q()}addReference(e,n,r){return this.As.addReference(r,n),this.bs.delete(r.toString()),S.resolve()}removeReference(e,n,r){return this.As.removeReference(r,n),this.bs.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,n){return this.bs.add(n.toString()),S.resolve()}removeTarget(e,n){this.As.Zn(n.targetId).forEach(i=>this.bs.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.bs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Es(){this.Rs=new Set}Ts(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.bs,r=>{let i=V.fromPath(r);return this.vs(e,i).next(s=>{s||n.removeEntry(i)})}).next(()=>(this.Rs=null,n.apply(e)))}updateLimboDocument(e,n){return this.vs(e,n).next(r=>{r?this.bs.delete(n.toString()):this.bs.add(n.toString())})}ps(e){return 0}vs(e,n){return S.or([()=>S.resolve(this.As.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Is(e,n)])}};var $e=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid");var Go=class{constructor(){this.activeTargetIds=sh()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}Cs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Uh=class{constructor(){this.li=new Go,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.li.Ds(e),this.fi[e]||"not-current"}updateQueryState(e,n,r){this.fi[e]=n}removeLocalQueryTarget(e){this.li.Cs(e)}isLocalQueryTarget(e){return this.li.activeTargetIds.has(e)}clearQueryState(e){delete this.fi[e]}getAllActiveQueryTargets(){return this.li.activeTargetIds}isActiveQueryTarget(e){return this.li.activeTargetIds.has(e)}start(){return this.li=new Go,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}};var xh=class{di(e){}shutdown(){}};var Wo=class{constructor(){this.wi=()=>this._i(),this.mi=()=>this.gi(),this.yi=[],this.pi()}di(e){this.yi.push(e)}shutdown(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)}pi(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)}_i(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.yi)e(0)}gi(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.yi)e(1)}static gt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};var Vh=class{constructor(e){this.Ei=e.Ei,this.Ti=e.Ti}Ii(e){this.Ai=e}Ri(e){this.Pi=e}onMessage(e){this.bi=e}close(){this.Ti()}send(e){this.Ei(e)}vi(){this.Ai()}Vi(e){this.Pi(e)}Si(e){this.bi(e)}};var Fh=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http";this.Di=n+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Ni(e,n,r,i){let s=this.xi(e,n);D("RestConnection","Sending: ",s,r);let o={};return this.ki(o,i),this.$i(e,s,o,r).then(a=>(D("RestConnection","Received: ",a),a),a=>{throw _u("RestConnection",`${e} failed with error: `,a,"url: ",s,"request:",r),a})}Oi(e,n,r,i){return this.Ni(e,n,r,i)}ki(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+un,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(let r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])}xi(e,n){let r=Wv[e];return`${this.Di}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling}$i(e,n,r,i){return new Promise((s,o)=>{let a=new Yy;a.listenOnce(Xy.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case wo.NO_ERROR:let l=a.getResponseJson();D("Connection","XHR received:",JSON.stringify(l)),s(l);break;case wo.TIMEOUT:D("Connection",'RPC "'+e+'" timed out'),o(new O(_.DEADLINE_EXCEEDED,"Request time out"));break;case wo.HTTP_ERROR:let u=a.getStatus();if(D("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let h=a.getResponseJson().error;if(h&&h.status&&h.message){let f=function(d){let p=d.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(p)>=0?p:_.UNKNOWN}(h.status);o(new O(f,h.message))}else o(new O(_.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new O(_.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{D("Connection",'RPC "'+e+'" completed.')}});let c=JSON.stringify(i);a.send(n,"POST",c,r,15)})}Mi(e,n){let r=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Gy(),s=Wy(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.ki(o.initMessageHeaders,n),Ir()||kr()||sc()||Ar()||oc()||Sr()||(o.httpHeadersOverwriteParam="$httpHeaders");let a=r.join("");D("Connection","Creating WebChannel: "+a,o);let c=i.createWebChannel(a,o),l=!1,u=!1,h=new Vh({Ei:d=>{u?D("Connection","Not sending because WebChannel is closed:",d):(l||(D("Connection","Opening WebChannel transport."),c.open(),l=!0),D("Connection","WebChannel sending:",d),c.send(d))},Ti:()=>c.close()}),f=(d,p,m)=>{d.listen(p,A=>{try{m(A)}catch(w){setTimeout(()=>{throw w},0)}})};return f(c,mi.EventType.OPEN,()=>{u||D("Connection","WebChannel transport opened.")}),f(c,mi.EventType.CLOSE,()=>{u||(u=!0,D("Connection","WebChannel transport closed"),h.Vi())}),f(c,mi.EventType.ERROR,d=>{u||(u=!0,_u("Connection","WebChannel transport errored:",d),h.Vi(new O(_.UNAVAILABLE,"The operation could not be completed")))}),f(c,mi.EventType.MESSAGE,d=>{var p;if(!u){let m=d.data[0];ne(!!m);let A=m,w=A.error||((p=A[0])===null||p===void 0?void 0:p.error);if(w){D("Connection","WebChannel received error:",w);let L=w.status,E=function(te){let G=ce[te];if(G!==void 0)return ih(G)}(L),F=w.message;E===void 0&&(E=_.INTERNAL,F="Unknown error status: "+L+" with message "+w.message),u=!0,h.Vi(new O(E,F)),c.close()}else D("Connection","WebChannel received:",m),h.Si(m)}}),f(s,Qy.STAT_EVENT,d=>{d.stat===yu.PROXY?D("Connection","Detected buffering proxy"):d.stat===yu.NOPROXY&&D("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.vi()},0),h}};function Xo(){return typeof document!="undefined"?document:null}function Di(t){return new lh(t,!0)}var Qo=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Se=e,this.timerId=n,this.Fi=r,this.Li=i,this.Bi=s,this.Ui=0,this.qi=null,this.Ki=Date.now(),this.reset()}reset(){this.Ui=0}Qi(){this.Ui=this.Bi}ji(e){this.cancel();let n=Math.floor(this.Ui+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ui} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qi=this.Se.enqueueAfterDelay(this.timerId,i,()=>(this.Ki=Date.now(),e())),this.Ui*=this.Li,this.Ui<this.Fi&&(this.Ui=this.Fi),this.Ui>this.Bi&&(this.Ui=this.Bi)}Gi(){this.qi!==null&&(this.qi.skipDelay(),this.qi=null)}cancel(){this.qi!==null&&(this.qi.cancel(),this.qi=null)}Wi(){return(Math.random()-.5)*this.Ui}};var Yo=class{constructor(e,n,r,i,s,o){this.Se=e,this.zi=r,this.Hi=i,this.Ji=s,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Qo(e,n)}tr(){return this.state===1||this.state===2||this.state===4}er(){return this.state===2}start(){this.state!==3?this.auth():this.nr()}async stop(){this.tr()&&await this.close(0)}sr(){this.state=0,this.Zi.reset()}ir(){this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,()=>this.rr()))}cr(e){this.ar(),this.stream.send(e)}async rr(){if(this.er())return this.close(0)}ar(){this.Xi&&(this.Xi.cancel(),this.Xi=null)}async close(e,n){this.ar(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():n&&n.code===_.RESOURCE_EXHAUSTED?(vt(n.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===_.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ur(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ri(n)}ur(){}auth(){this.state=1;let e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(r=>{this.Yi===n&&this.lr(r)},r=>{e(()=>{let i=new O(_.UNKNOWN,"Fetching auth token failed: "+r.message);return this.dr(i)})})}lr(e){let n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(()=>{n(()=>(this.state=2,this.listener.Ii()))}),this.stream.Ri(r=>{n(()=>this.dr(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}nr(){this.state=4,this.Zi.ji(async()=>{this.state=0,this.start()})}dr(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}hr(e){return n=>{this.Se.enqueueAndForget(()=>this.Yi===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},$h=class extends Yo{constructor(e,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s),this.R=i}wr(e){return this.Hi.Mi("Listen",e)}onMessage(e){this.Zi.reset();let n=Cv(this.R,e),r=function(i){if(!("targetChange"in i))return J.min();let s=i.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?rt(s.readTime):J.min()}(e);return this.listener._r(n,r)}mr(e){let n={};n.database=zo(this.R),n.addTarget=function(i,s){let o,a=s.target;return o=No(a)?{documents:Ov(i,a)}:{query:Mv(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=uh(i,s.resumeToken):s.snapshotVersion.compareTo(J.min())>0&&(o.readTime=ki(i,s.snapshotVersion.toTimestamp())),o}(this.R,e);let r=xv(this.R,e);r&&(n.labels=r),this.cr(n)}gr(e){let n={};n.database=zo(this.R),n.removeTarget=e,this.cr(n)}},jh=class extends Yo{constructor(e,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle",n,r,s),this.R=i,this.yr=!1}get pr(){return this.yr}start(){this.yr=!1,this.lastStreamToken=void 0,super.start()}ur(){this.yr&&this.Er([])}wr(e){return this.Hi.Mi("Write",e)}onMessage(e){if(ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.yr){this.Zi.reset();let n=Dv(e.writeResults,e.commitTime),r=rt(e.commitTime);return this.listener.Tr(r,n)}return ne(!e.writeResults||e.writeResults.length===0),this.yr=!0,this.listener.Ir()}Ar(){let e={};e.database=zo(this.R),this.cr(e)}Er(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Nv(this.R,r))};this.cr(n)}};var qh=class extends class{}{constructor(e,n,r){super(),this.credentials=e,this.Hi=n,this.R=r,this.Rr=!1}Pr(){if(this.Rr)throw new O(_.FAILED_PRECONDITION,"The client has already been terminated.")}Ni(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Ni(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new O(_.UNKNOWN,i.toString())})}Oi(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Oi(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new O(_.UNKNOWN,i.toString())})}terminate(){this.Rr=!0}},Bh=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.br=0,this.vr=null,this.Vr=!0}Sr(){this.br===0&&(this.Dr("Unknown"),this.vr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.vr=null,this.Cr("Backend didn't respond within 10 seconds."),this.Dr("Offline"),Promise.resolve())))}Nr(e){this.state==="Online"?this.Dr("Unknown"):(this.br++,this.br>=1&&(this.kr(),this.Cr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Dr("Offline")))}set(e){this.kr(),this.br=0,e==="Online"&&(this.Vr=!1),this.Dr(e)}Dr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Cr(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(vt(n),this.Vr=!1):D("OnlineStateTracker",n)}kr(){this.vr!==null&&(this.vr.cancel(),this.vr=null)}};var zh=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.$r=[],this.Or=new Map,this.Mr=new Set,this.Fr=[],this.Lr=s,this.Lr.di(o=>{r.enqueueAndForget(async()=>{jt(this)&&(D("RemoteStore","Restarting streams for network reachability change."),await async function(a){let c=B(a);c.Mr.add(4),await mr(c),c.Br.set("Unknown"),c.Mr.delete(4),await Oi(c)}(this))})}),this.Br=new Bh(r,i)}};async function Oi(t){if(jt(t))for(let e of t.Fr)await e(!0)}async function mr(t){for(let e of t.Fr)await e(!1)}function Hh(t,e){let n=B(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),ea(n)?Zo(n):In(n).er()&&Jo(n,e))}function Gh(t,e){let n=B(t),r=In(n);n.Or.delete(e),r.er()&&Kh(n,e),n.Or.size===0&&(r.er()?r.ir():jt(n)&&n.Br.set("Unknown"))}function Jo(t,e){t.Ur.q(e.targetId),In(t).mr(e)}function Kh(t,e){t.Ur.q(e),In(t).gr(e)}function Zo(t){t.Ur=new ah({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.Or.get(e)||null}),In(t).start(),t.Br.Sr()}function ea(t){return jt(t)&&!In(t).tr()&&t.Or.size>0}function jt(t){return B(t).Mr.size===0}function Wh(t){t.Ur=void 0}async function Xv(t){t.Or.forEach((e,n)=>{Jo(t,e)})}async function Qv(t,e){Wh(t),ea(t)?(t.Br.Nr(e),Zo(t)):t.Br.set("Unknown")}async function Yv(t,e,n){if(t.Br.set("Online"),e instanceof Vo&&e.state===2&&e.cause)try{await async function(r,i){let s=i.cause;for(let o of i.targetIds)r.Or.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Or.delete(o),r.Ur.removeTarget(o))}(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Li(t,r)}else if(e instanceof fr?t.Ur.X(e):e instanceof xo?t.Ur.rt(e):t.Ur.et(e),!n.isEqual(J.min()))try{let r=await Ah(t.localStore);n.compareTo(r)>=0&&await function(i,s){let o=i.Ur.at(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){let l=i.Or.get(c);l&&i.Or.set(c,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{let c=i.Or.get(a);if(!c)return;i.Or.set(a,c.withResumeToken(ye.EMPTY_BYTE_STRING,c.snapshotVersion)),Kh(i,a);let l=new Et(c.target,a,1,c.sequenceNumber);Jo(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){D("RemoteStore","Failed to raise snapshot:",r),await Li(t,r)}}async function Li(t,e,n){if(!dr(e))throw e;t.Mr.add(1),await mr(t),t.Br.set("Offline"),n||(n=()=>Ah(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{D("RemoteStore","Retrying IndexedDB access"),await n(),t.Mr.delete(1),await Oi(t)})}function Xh(t,e){return e().catch(n=>Li(t,n,e))}async function Pi(t){let e=B(t),n=bt(e),r=e.$r.length>0?e.$r[e.$r.length-1].batchId:-1;for(;Jv(e);)try{let i=await Kv(e.localStore,r);if(i===null){e.$r.length===0&&n.ir();break}r=i.batchId,Zv(e,i)}catch(i){await Li(e,i)}Qh(e)&&Yh(e)}function Jv(t){return jt(t)&&t.$r.length<10}function Zv(t,e){t.$r.push(e);let n=bt(t);n.er()&&n.pr&&n.Er(e.mutations)}function Qh(t){return jt(t)&&!bt(t).tr()&&t.$r.length>0}function Yh(t){bt(t).start()}async function e_(t){bt(t).Ar()}async function t_(t){let e=bt(t);for(let n of t.$r)e.Er(n.mutations)}async function n_(t,e,n){let r=t.$r.shift(),i=Ai.from(r,e,n);await Xh(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Pi(t)}async function r_(t,e){e&&bt(t).pr&&await async function(n,r){if(i=r.code,yv(i)&&i!==_.ABORTED){let s=n.$r.shift();bt(n).sr(),await Xh(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Pi(n)}var i}(t,e),Qh(t)&&Yh(t)}async function i_(t,e){let n=B(t);e?(n.Mr.delete(2),await Oi(n)):e||(n.Mr.add(2),await mr(n),n.Br.set("Unknown"))}function In(t){return t.qr||(t.qr=function(e,n,r){let i=B(e);return i.Pr(),new $h(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:Xv.bind(null,t),Ri:Qv.bind(null,t),_r:Yv.bind(null,t)}),t.Fr.push(async e=>{e?(t.qr.sr(),ea(t)?Zo(t):t.Br.set("Unknown")):(await t.qr.stop(),Wh(t))})),t.qr}function bt(t){return t.Kr||(t.Kr=function(e,n,r){let i=B(e);return i.Pr(),new jh(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:e_.bind(null,t),Ri:r_.bind(null,t),Ir:t_.bind(null,t),Tr:n_.bind(null,t)}),t.Fr.push(async e=>{e?(t.Kr.sr(),await Pi(t)):(await t.Kr.stop(),t.$r.length>0&&(D("RemoteStore",`Stopping write stream with ${t.$r.length} pending writes`),t.$r=[]))})),t.Kr}var Mi=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new Mi(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ta(t,e){if(vt("AsyncQueue",`${e}: ${t}`),dr(t))return new O(_.UNAVAILABLE,`${e}: ${t}`);throw t}var qt=class{constructor(e){this.comparator=e?(n,r)=>e(n,r)||V.comparator(n.key,r.key):(n,r)=>V.comparator(n.key,r.key),this.keyedMap=Uo(),this.sortedSet=new _e(this.comparator)}static emptySet(e){return new qt(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new qt;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var na=class{constructor(){this.Qr=new _e(V.comparator)}track(e){let n=e.doc.key,r=this.Qr.get(n);r?e.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,e):e.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Qr=this.Qr.remove(n):e.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):q():this.Qr=this.Qr.insert(n,e)}jr(){let e=[];return this.Qr.inorderTraversal((n,r)=>{e.push(r)}),e}},Bt=class{constructor(e,n,r,i,s,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c}static fromInitialDocuments(e,n,r,i){let s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Bt(e,n,qt.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ti(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Jh=class{constructor(){this.Wr=void 0,this.listeners=[]}},Zh=class{constructor(){this.queries=new Tn(e=>$u(e),Ti),this.onlineState="Unknown",this.Gr=new Set}};async function s_(t,e){let n=B(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Jh),i)try{s.Wr=await n.onListen(r)}catch(o){let a=ta(o,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&ra(n)}async function o_(t,e){let n=B(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function a_(t,e){let n=B(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.Hr(i)&&(r=!0);o.Wr=i}}r&&ra(n)}function c_(t,e,n){let r=B(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function ra(t){t.Gr.forEach(e=>{e.next()})}var ef=class{constructor(e,n,r){this.query=e,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}Hr(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Bt(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),n=!0):this.eo(e,this.onlineState)&&(this.no(e),n=!0),this.Xr=e,n}onError(e){this.Jr.error(e)}zr(e){this.onlineState=e;let n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),n=!0),n}eo(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.so||!r)&&(!e.docs.isEmpty()||n==="Offline")}Zr(e){if(e.docChanges.length>0)return!0;let n=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}no(e){e=Bt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)}};var ia=class{constructor(e){this.key=e}},sa=class{constructor(e){this.key=e}},tf=class{constructor(e,n){this.query=e,this.ao=n,this.uo=null,this.current=!1,this.ho=ie(),this.mutatedKeys=ie(),this.lo=ju(e),this.fo=new qt(this.lo)}get wo(){return this.ao}_o(e,n){let r=n?n.mo:new na,i=n?n.fo:this.fo,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=bi(this.query)&&i.size===this.query.limit?i.last():null,l=Oo(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let f=i.get(u),d=Ii(this.query,h)?h:null,p=!!f&&this.mutatedKeys.has(f.key),m=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations),A=!1;f&&d?f.data.isEqual(d.data)?p!==m&&(r.track({type:3,doc:d}),A=!0):this.yo(f,d)||(r.track({type:2,doc:d}),A=!0,(c&&this.lo(d,c)>0||l&&this.lo(d,l)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),A=!0):f&&!d&&(r.track({type:1,doc:f}),A=!0,(c||l)&&(a=!0)),A&&(d?(o=o.add(d),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),bi(this.query)||Oo(this.query))for(;o.size>this.query.limit;){let u=bi(this.query)?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}}yo(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){let i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;let s=e.mo.jr();s.sort((l,u)=>function(h,f){let d=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return d(h)-d(f)}(l.type,u.type)||this.lo(l.doc,u.doc)),this.po(r);let o=n?this.Eo():[],a=this.ho.size===0&&this.current?1:0,c=a!==this.uo;return this.uo=a,s.length!==0||c?{snapshot:new Bt(this.query,e.fo,i,s,e.mutatedKeys,a===0,c,!1),To:o}:{To:o}}zr(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new na,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}}Io(e){return!this.ao.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations}po(e){e&&(e.addedDocuments.forEach(n=>this.ao=this.ao.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ao=this.ao.delete(n)),this.current=e.current)}Eo(){if(!this.current)return[];let e=this.ho;this.ho=ie(),this.fo.forEach(r=>{this.Io(r.key)&&(this.ho=this.ho.add(r.key))});let n=[];return e.forEach(r=>{this.ho.has(r)||n.push(new sa(r))}),this.ho.forEach(r=>{e.has(r)||n.push(new ia(r))}),n}Ao(e){this.ao=e.Bn,this.ho=ie();let n=this._o(e.documents);return this.applyChanges(n,!0)}Ro(){return Bt.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.uo===0)}},nf=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},rf=class{constructor(e){this.key=e,this.Po=!1}},sf=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.bo={},this.vo=new Tn(a=>$u(a),Ti),this.Vo=new Map,this.So=new Set,this.Do=new _e(V.comparator),this.Co=new Map,this.No=new Ri,this.xo={},this.ko=new Map,this.$o=$t.Yt(),this.onlineState="Unknown",this.Oo=void 0}get isPrimaryClient(){return this.Oo===!0}};async function h_(t,e){let n=u_(t),r,i,s=n.vo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro();else{let o=await Gv(n.localStore,Ut(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await l_(n,e,r,a==="current"),n.isPrimaryClient&&Hh(n.remoteStore,o)}return i}async function l_(t,e,n,r){t.Mo=(u,h,f)=>async function(d,p,m,A){let w=p.view._o(m);w.Nn&&(w=await Ch(d.localStore,p.query,!1).then(({documents:F})=>p.view._o(F,w)));let L=A&&A.targetChanges.get(p.targetId),E=p.view.applyChanges(w,d.isPrimaryClient,L);return of(d,p.targetId,E.To),E.snapshot}(t,u,h,f);let i=await Ch(t.localStore,e,!0),s=new tf(e,i.Bn),o=s._o(i.documents),a=_n.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),c=s.applyChanges(o,t.isPrimaryClient,a);of(t,n,c.To);let l=new nf(e,n,s);return t.vo.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot}async function f_(t,e){let n=B(t),r=n.vo.get(e),i=n.Vo.get(r.targetId);if(i.length>1)return n.Vo.set(r.targetId,i.filter(s=>!Ti(s,e))),void n.vo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ko(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Gh(n.remoteStore,r.targetId),oa(n,r.targetId)}).catch(pr)):(oa(n,r.targetId),await Ko(n.localStore,r.targetId,!0))}async function p_(t,e,n){let r=d_(t);try{let i=await function(s,o){let a=B(s),c=Oe.now(),l=o.reduce((h,f)=>h.add(f.key),ie()),u;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>a.Fn.pn(h,l).next(f=>{u=f;let d=[];for(let p of o){let m=gv(p,u.get(p.key));m!=null&&d.push(new Vt(p.key,m,Au(m.toProto().mapValue),xt.exists(!0)))}return a._n.addMutationBatch(h,c,d,o)})).then(h=>(h.applyToLocalDocumentSet(u),{batchId:h.batchId,changes:u}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let c=s.xo[s.currentUser.toKey()];c||(c=new _e(ee)),c=c.insert(o,a),s.xo[s.currentUser.toKey()]=c}(r,i.batchId,n),await gr(r,i.changes),await Pi(r.remoteStore)}catch(i){let s=ta(i,"Failed to persist write");n.reject(s)}}async function af(t,e){let n=B(t);try{let r=await Hv(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Co.get(s);o&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Po=!0:i.modifiedDocuments.size>0?ne(o.Po):i.removedDocuments.size>0&&(ne(o.Po),o.Po=!1))}),await gr(n,r,e)}catch(r){await pr(r)}}function cf(t,e,n){let r=B(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.vo.forEach((s,o)=>{let a=o.view.zr(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){let a=B(s);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(let h of u.listeners)h.zr(o)&&(c=!0)}),c&&ra(a)}(r.eventManager,e),i.length&&r.bo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function m_(t,e,n){let r=B(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Co.get(e),s=i&&i.key;if(s){let o=new _e(V.comparator);o=o.insert(s,ve.newNoDocument(s,J.min()));let a=ie().add(s),c=new hr(J.min(),new Map,new pe(ee),o,a);await af(r,c),r.Do=r.Do.remove(s),r.Co.delete(e),aa(r)}else await Ko(r.localStore,e,!1).then(()=>oa(r,e,n)).catch(pr)}async function g_(t,e){let n=B(t),r=e.batch.batchId;try{let i=await Bv(n.localStore,e);uf(n,r,null),lf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gr(n,i)}catch(i){await pr(i)}}async function y_(t,e,n){let r=B(t);try{let i=await function(s,o){let a=B(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a._n.lookupMutationBatch(c,o).next(u=>(ne(u!==null),l=u.keys(),a._n.removeMutationBatch(c,u))).next(()=>a._n.performConsistencyCheck(c)).next(()=>a.Fn.pn(c,l))})}(r.localStore,e);uf(r,e,n),lf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gr(r,i)}catch(i){await pr(i)}}function lf(t,e){(t.ko.get(e)||[]).forEach(n=>{n.resolve()}),t.ko.delete(e)}function uf(t,e,n){let r=B(t),i=r.xo[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function oa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Vo.get(e))t.vo.delete(r),n&&t.bo.Fo(r,n);t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(r=>{t.No.containsKey(r)||hf(t,r)})}function hf(t,e){t.So.delete(e.path.canonicalString());let n=t.Do.get(e);n!==null&&(Gh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),aa(t))}function of(t,e,n){for(let r of n)r instanceof ia?(t.No.addReference(r.key,e),v_(t,r)):r instanceof sa?(D("SyncEngine","Document no longer in limbo: "+r.key),t.No.removeReference(r.key,e),t.No.containsKey(r.key)||hf(t,r.key)):q()}function v_(t,e){let n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(D("SyncEngine","New document in limbo: "+n),t.So.add(r),aa(t))}function aa(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){let e=t.So.values().next().value;t.So.delete(e);let n=new V(re.fromString(e)),r=t.$o.next();t.Co.set(r,new rf(n)),t.Do=t.Do.insert(n,r),Hh(t.remoteStore,new Et(Ut(Do(n.path)),r,2,gi.o))}}async function gr(t,e,n){let r=B(t),i=[],s=[],o=[];r.vo.isEmpty()||(r.vo.forEach((a,c)=>{o.push(r.Mo(c,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),i.push(l);let u=Ci.vn(c.targetId,l);s.push(u)}}))}),await Promise.all(o),r.bo._r(i),await async function(a,c){let l=B(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>S.forEach(c,h=>S.forEach(h.Pn,f=>l.persistence.referenceDelegate.addReference(u,h.targetId,f)).next(()=>S.forEach(h.bn,f=>l.persistence.referenceDelegate.removeReference(u,h.targetId,f)))))}catch(u){if(!dr(u))throw u;D("LocalStore","Failed to update sequence numbers: "+u)}for(let u of c){let h=u.targetId;if(!u.fromCache){let f=l.kn.get(h),d=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(d);l.kn=l.kn.insert(h,p)}}}(r.localStore,s))}async function __(t,e){let n=B(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());let r=await kh(n.localStore,e);n.currentUser=e,function(i,s){i.ko.forEach(o=>{o.forEach(a=>{a.reject(new O(_.CANCELLED,s))})}),i.ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gr(n,r.Ln)}}function w_(t,e){let n=B(t),r=n.Co.get(e);if(r&&r.Po)return ie().add(r.key);{let i=ie(),s=n.Vo.get(e);if(!s)return i;for(let o of s){let a=n.vo.get(o);i=i.unionWith(a.view.wo)}return i}}function u_(t){let e=B(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=af.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m_.bind(null,e),e.bo._r=a_.bind(null,e.eventManager),e.bo.Fo=c_.bind(null,e.eventManager),e}function d_(t){let e=B(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y_.bind(null,e),e}var ff=class{constructor(){this.synchronizeTabs=!1}async initialize(e){this.R=Di(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.Uo(e),await this.persistence.start(),this.gcScheduler=this.qo(e),this.localStore=this.Ko(e)}qo(e){return null}Ko(e){return qv(this.persistence,new Ih,e.initialUser,this.R)}Uo(e){return new Ph(Ni.Ps,this.R)}Bo(e){return new Uh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}},df=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=__.bind(null,this.syncEngine),await i_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zh}createDatastore(e){let n=Di(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new Fh(i));var i;return function(s,o,a){return new qh(s,o,a)}(e.credentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>cf(this.syncEngine,a,0),o=Wo.gt()?new Wo:new xh,new zh(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,c,l){let u=new sf(r,i,s,o,a,c);return l&&(u.Oo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){let n=B(e);D("RemoteStore","RemoteStore shutting down."),n.Mr.add(5),await mr(n),n.Lr.shutdown(),n.Br.set("Unknown")}(this.remoteStore)}};var pf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.jo(this.observer.next,e)}error(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Wo(){this.muted=!0}jo(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var mf=class{constructor(e,n,r){this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=$e.UNAUTHENTICATED,this.clientId=bo.u(),this.credentialListener=()=>Promise.resolve(),this.credentials.setChangeListener(n,async i=>{D("FirestoreClient","Received user=",i.uid),await this.credentialListener(i),this.user=i})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.removeChangeListener(),e.resolve()}catch(n){let r=ta(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function E_(t,e){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");let n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await kh(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function T_(t,e){t.asyncQueue.verifyOperationInProgress();let n=await b_(t);D("FirestoreClient","Initializing OnlineComponentProvider");let r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>async function(s,o){let a=B(s);a.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");let c=jt(a);a.Mr.add(3),await mr(a),c&&a.Br.set("Unknown"),await a.remoteSyncer.handleCredentialChange(o),a.Mr.delete(3),await Oi(a)}(e.remoteStore,i)),t.onlineComponents=e}async function b_(t){return t.offlineComponents||(D("FirestoreClient","Using default OfflineComponentProvider"),await E_(t,new ff)),t.offlineComponents}async function gf(t){return t.onlineComponents||(D("FirestoreClient","Using default OnlineComponentProvider"),await T_(t,new df)),t.onlineComponents}function I_(t){return gf(t).then(e=>e.syncEngine)}async function S_(t){let e=await gf(t),n=e.eventManager;return n.onListen=h_.bind(null,e.syncEngine),n.onUnlisten=f_.bind(null,e.syncEngine),n}function k_(t,e,n={}){let r=new bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,c){let l=new pf({next:h=>{s.enqueueAndForget(()=>o_(i,u));let f=h.docs.has(o);!f&&h.fromCache?c.reject(new O(_.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&a&&a.source==="server"?c.reject(new O(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new ef(Do(o.path),l,{includeMetadataChanges:!0,so:!0});return s_(i,u)}(await S_(t),t.asyncQueue,e,n,r)),r.promise}var yf=class{constructor(e,n,r,i,s,o,a){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a}},Sn=class{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Sn&&e.projectId===this.projectId&&e.database===this.database}};var vf=new Map;var _f=class{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}},ca=class{constructor(){this.changeListener=null}getToken(){return Promise.resolve(null)}invalidateToken(){}setChangeListener(e,n){this.changeListener=n,e.enqueueRetryable(()=>n($e.UNAUTHENTICATED))}removeChangeListener(){this.changeListener=null}},wf=class{constructor(e){this.currentUser=$e.UNAUTHENTICATED,this.oc=new bn,this.cc=0,this.changeListener=()=>Promise.resolve(),this.ac=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=()=>{this.cc++,this.currentUser=this.hc(),this.oc.resolve(),this.ac&&this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser))};let n=r=>{D("FirebaseCredentialsProvider","Auth detected"),this.auth=r,this.lc(),this.auth.addAuthTokenListener(this.uc)};e.onInit(r=>n(r)),setTimeout(()=>{if(!this.auth){let r=e.getImmediate({optional:!0});r?n(r):this.ac&&(D("FirebaseCredentialsProvider","Auth not yet detected"),this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser)))}},0)}getToken(){let e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.cc!==e?(D("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string"),new _f(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}setChangeListener(e,n){this.ac=!0,this.asyncQueue=e,this.changeListener=n}removeChangeListener(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=()=>Promise.resolve()}hc(){let e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new $e(e)}lc(){this.ac&&(this.ac=!1,this.asyncQueue.enqueueRetryable(async()=>{await this.oc.promise,await this.changeListener(this.currentUser),this.ac=!0}))}},Ef=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r,this.type="FirstParty",this.user=$e.FIRST_PARTY}get authHeaders(){let e={"X-Goog-AuthUser":this.dc},n=this.fc.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.wc&&(e["X-Goog-Iam-Authorization-Token"]=this.wc),e}},bf=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r}getToken(){return Promise.resolve(new Ef(this.fc,this.dc,this.wc))}setChangeListener(e,n){e.enqueueRetryable(()=>n($e.FIRST_PARTY))}removeChangeListener(){}invalidateToken(){}};function Tf(t,e,n){if(!n)throw new O(_.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function If(t){if(!V.isDocumentKey(t))throw new O(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sf(t){if(V.isDocumentKey(t))throw new O(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function la(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(n){if(n.constructor){let r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q()}function Ui(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=la(t);throw new O(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var ua=class{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new O(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,function(r,i,s,o){if(i===!0&&o===!0)throw new O(_.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties}};var xi=class{constructor(e,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ua({}),this._settingsFrozen=!1,e instanceof Sn?(this._databaseId=e,this._credentials=new ca):(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new O(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sn(r.options.projectId)}(e),this._credentials=new wf(n))}get app(){if(!this._app)throw new O(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new O(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ua(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new ca;switch(n.type){case"gapi":let r=n.client;return ne(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new bf(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new O(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let n=vf.get(e);n&&(D("ComponentProvider","Removing Datastore"),vf.delete(e),n.terminate())}(this),Promise.resolve()}};var Pe=class{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new it(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}},Vi=class{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}},it=class extends Vi{constructor(e,n,r){super(e,n,Do(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new V(e))}withConverter(e){return new it(this.firestore,e,this._path)}};function kf(t,e,...n){if(t=xe(t),Tf("collection","path",e),t instanceof xi){let r=re.fromString(e,...n);return Sf(r),new it(t,null,r)}{if(!(t instanceof Pe||t instanceof it))throw new O(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=re.fromString(t.path,...n).child(re.fromString(e));return Sf(r),new it(t.firestore,null,r)}}function ha(t,e,...n){if(t=xe(t),arguments.length===1&&(e=bo.u()),Tf("doc","path",e),t instanceof xi){let r=re.fromString(e,...n);return If(r),new Pe(t,null,new V(r))}{if(!(t instanceof Pe||t instanceof it))throw new O(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(re.fromString(e,...n));return If(r),new Pe(t.firestore,t instanceof it?t.converter:null,new V(r))}}var Af=class{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new Qo(this,"async_queue_retry"),this.Ac=()=>{let n=Xo();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Zi.Gi()};let e=Xo();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Ac)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Rc(),this.Pc(e)}enterRestrictedMode(){if(!this.gc){this.gc=!0;let e=Xo();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Ac)}}enqueue(e){return this.Rc(),this.gc?new Promise(n=>{}):this.Pc(e)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.bc()))}async bc(){if(this.mc.length!==0){try{await this.mc[0](),this.mc.shift(),this.Zi.reset()}catch(e){if(!dr(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.mc.length>0&&this.Zi.ji(()=>this.bc())}}Pc(e){let n=this._c.then(()=>(this.Tc=!0,e().catch(r=>{throw this.Ec=r,this.Tc=!1,vt("INTERNAL UNHANDLED ERROR: ",function(i){let s=i.message||"";return i.stack&&(s=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),s}(r)),r}).then(r=>(this.Tc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.Rc(),this.Ic.indexOf(e)>-1&&(n=0);let i=Mi.createAndSchedule(this,e,n,r,s=>this.vc(s));return this.yc.push(i),i}Rc(){this.Ec&&q()}verifyOperationInProgress(){}async Vc(){let e;do e=this._c,await e;while(e!==this._c)}Sc(e){for(let n of this.yc)if(n.timerId===e)return!0;return!1}Dc(e){return this.Vc().then(()=>{this.yc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.yc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vc()})}Cc(e){this.Ic.push(e)}vc(e){let n=this.yc.indexOf(e);this.yc.splice(n,1)}},Fi=class extends xi{constructor(e,n){super(e,n),this.type="firestore",this._queue=new Af,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Cf(this),this._firestoreClient.terminate()}};function Rf(t=Nr()){return Mn(t,"firestore-exp").getImmediate()}function Nf(t){return t._firestoreClient||Cf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Cf(t){var e;let n=t._freezeSettings(),r=function(i,s,o,a){return new yf(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new mf(t._credentials,t._queue,r)}var $i=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ie(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var zt=class{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zt(ye.fromBase64String(e))}catch(n){throw new O(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zt(ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var fa=class{constructor(e){this._methodName=e}};var ji=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}};var A_=/^__.*__$/,Df=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vt(e,this.data,this.fieldMask,n,this.fieldTransforms):new lr(e,this.data,n,this.fieldTransforms)}};function Of(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var qi=class{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Nc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get xc(){return this.settings.xc}kc(e){return new qi(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}$c(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.kc({path:r,Oc:!1});return i.Mc(e),i}Fc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.kc({path:r,Oc:!1});return i.Nc(),i}Lc(e){return this.kc({path:void 0,Oc:!0})}Bc(e){return Bi(e,this.settings.methodName,this.settings.Uc||!1,this.path,this.settings.qc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Nc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(e.length===0)throw this.Bc("Document fields must not be empty");if(Of(this.xc)&&A_.test(e))throw this.Bc('Document fields cannot begin and end with "__"')}},Lf=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.R=r||Di(e)}Kc(e,n,r,i=!1){return new qi({xc:e,methodName:n,qc:r,path:Ie.emptyPath(),Oc:!1,Uc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)}};function C_(t){let e=t._freezeSettings(),n=Di(t._databaseId);return new Lf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function D_(t,e,n,r,i,s={}){let o=t.Kc(s.merge||s.mergeFields?2:0,e,n,i);Mf("Data must be an object, but it was:",o,r);let a=Pf(r,o),c,l;if(s.merge)c=new vi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let h of s.mergeFields){let f=R_(e,h,n);if(!o.contains(f))throw new O(_.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);N_(u,f)||u.push(f)}c=new vi(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new Df(new Le(a),c,l)}function Uf(t,e){if(xf(t=xe(t)))return Mf("Unsupported field value:",e,t),Pf(t,e);if(t instanceof fa)return function(n,r){if(!Of(r.xc))throw r.Bc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bc(`${n._methodName}() is not currently supported inside arrays`);let i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oc&&e.xc!==4)throw e.Bc("Nested arrays are not supported");return function(n,r){let i=[],s=0;for(let o of n){let a=Uf(o,r.Lc(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=xe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return hv(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let i=Oe.fromDate(n);return{timestampValue:ki(r.R,i)}}if(n instanceof Oe){let i=new Oe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ki(r.R,i)}}if(n instanceof ji)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof zt)return{bytesValue:uh(r.R,n._byteString)};if(n instanceof Pe){let i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Bc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$o(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Bc(`Unsupported field value: ${la(n)}`)}(t,e)}function Pf(t,e){let n={};return Eu(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yi(t,(r,i)=>{let s=Uf(i,e.$c(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function xf(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof ji||t instanceof zt||t instanceof Pe||t instanceof fa)}function Mf(t,e,n){if(!xf(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let r=la(n);throw r==="an object"?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function R_(t,e,n){if((e=xe(e))instanceof $i)return e._internalPath;if(typeof e=="string")return Vf(t,e);throw Bi("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var O_=new RegExp("[~\\*/\\[\\]]");function Vf(t,e,n){if(e.search(O_)>=0)throw Bi(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $i(...e.split("."))._internalPath}catch(r){throw Bi(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bi(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new O(_.INVALID_ARGUMENT,a+t+c)}function N_(t,e){return t.some(n=>n.isEqual(e))}var da=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ff(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.toProto())}}get(e){if(this._document){let n=this._document.data.field($f("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Ff=class extends da{data(){return super.data()}};function $f(t,e){return typeof e=="string"?Vf(t,e):e instanceof $i?e._internalPath:e._delegate._internalPath}var jf=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},pa=class extends da{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.toProto(),e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field($f("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},qf=class extends pa{data(e={}){return super.data(e)}};var Bf=class{convertValue(e,n="none"){switch(wt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw q()}}convertObject(e,n){let r={};return yi(e.fields||{},(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ji(ae(e.latitude),ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Tu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tr(e));default:return null}}convertTimestamp(e){let n=_t(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=re.fromString(e);ne(hh(r));let i=new Sn(r.get(1),r.get(3)),s=new V(r.popFirst(5));return i.isEqual(n)||vt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function L_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function zf(t){t=Ui(t,Pe);let e=Ui(t.firestore,Fi);return k_(Nf(e),t._key).then(n=>P_(e,t,n))}var Hf=class extends Bf{constructor(e){super(),this.firestore=e}convertBytes(e){return new zt(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}};function Kf(t,e,n){t=Ui(t,Pe);let r=Ui(t.firestore,Fi),i=L_(t.converter,e,n);return M_(r,[D_(C_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xt.none())])}function M_(t,e){return function(n,r){let i=new bn;return n.asyncQueue.enqueueAndForget(async()=>p_(await I_(n),r,i)),i.promise}(Nf(t),e)}function P_(t,e,n){let r=n.docs.get(e._key),i=new Hf(t);return new pa(t,i,e._key,r,new jf(n.hasPendingWrites,n.fromCache),e.converter)}var U_;(function(t){un=t})(Rt),Ct(new ct("firestore-exp",(t,{options:e})=>{let n=t.getProvider("app-exp").getImmediate(),r=new Fi(n,t.getProvider("auth-internal"));return e&&r._setSettings(e),r},"PUBLIC")),ut("@firebase/firestore","0.0.900-exp.d92a36260",U_);var Gf=Rf(),ma=async(t,e)=>{let n=ha(Gf,t,e),r=await zf(n),i="";return r.exists()?i=r.data():console.log("No such document!"),i},ga=async(t,e,n)=>{let r=kf(Gf,t);n&&await Kf(ha(r,e),{[t]:n})};var ya=tl(),x_=new ze,zi=()=>Jc(ya,x_),Wf=()=>Mc(ya),V_=()=>{ka(),Wa(),Aa()},F_=t=>{Ye.set(t)},$_=t=>{ma("goal",t).then(e=>e?Je.set(e.goal):""),ma("data",t).then(e=>e?De.set(e.data):"")};Pc(ya,t=>{t?(console.log("you are logged"),F_(t),$_(t.uid),Je.subscribe(e=>ga("goal",t.uid,e)),De.subscribe(e=>ga("data",t.uid,e))):(console.log("you are not logged"),V_())});function Xf(t,e,n){let r=t.slice();return r[3]=e[n].label,r[4]=e[n].icon,r[5]=e[n].style,r[6]=e[n].onClick,r[7]=e[n].name,r}function q_(t){let e,n,r,i,s;return i=new Nn({props:{label:"Iniciar sesión",$$slots:{default:[j_]},$$scope:{ctx:t}}}),{c(){e=b("h2"),e.textContent="Haz click para iniciar sesión",n=R(),r=b("div"),x(i.$$.fragment),v(e,"class","text-center"),v(r,"class","m-2 flex flex-col")},m(o,a){y(o,e,a),y(o,n,a),y(o,r,a),P(i,r,null),s=!0},p(o,a){let c={};a&1024&&(c.$$scope={dirty:a,ctx:o}),i.$set(c)},i(o){s||(T(i.$$.fragment,o),s=!0)},o(o){k(i.$$.fragment,o),s=!1},d(o){o&&g(e),o&&g(n),o&&g(r),M(i)}}}function B_(t){let e,n,r,i,s,o=t[0].displayName+"",a,c,l,u=t[0].email+"",h,f,d,p,m=t[0].uid+"",A,w,L=[],E=new Map,F,te,G=t[1],W=N=>N[7];for(let N=0;N<G.length;N+=1){let U=Xf(t,G,N),He=W(U);E.set(He,L[N]=Qf(He,U))}return{c(){e=b("img"),r=R(),i=b("div"),s=b("h2"),a=Y(o),c=R(),l=b("h2"),h=Y(u),f=R(),d=b("h3"),p=Y("uid: "),A=Y(m),w=R();for(let N=0;N<L.length;N+=1)L[N].c();F=st(),v(e,"class","mx-auto rounded-lg"),e.src!==(n=t[0].photoURL)&&v(e,"src",n),v(e,"alt","user"),v(i,"class","my-8")},m(N,U){y(N,e,U),y(N,r,U),y(N,i,U),I(i,s),I(s,a),I(i,c),I(i,l),I(l,h),I(i,f),I(i,d),I(d,p),I(d,A),y(N,w,U);for(let He=0;He<L.length;He+=1)L[He].m(N,U);y(N,F,U),te=!0},p(N,U){(!te||U&1&&e.src!==(n=N[0].photoURL))&&v(e,"src",n),(!te||U&1)&&o!==(o=N[0].displayName+"")&&se(a,o),(!te||U&1)&&u!==(u=N[0].email+"")&&se(h,u),(!te||U&1)&&m!==(m=N[0].uid+"")&&se(A,m),U&2&&(G=N[1],we(),L=Cn(L,U,W,1,N,G,E,F.parentNode,An,Qf,F,Xf),Ee())},i(N){if(!te){for(let U=0;U<G.length;U+=1)T(L[U]);te=!0}},o(N){for(let U=0;U<L.length;U+=1)k(L[U]);te=!1},d(N){N&&g(e),N&&g(r),N&&g(i),N&&g(w);for(let U=0;U<L.length;U+=1)L[U].d(N);N&&g(F)}}}function j_(t){let e,n;return e=new Ue({props:{props:t[2]}}),{c(){x(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p:Z,i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function z_(t){let e,n;return e=new Ue({props:{props:{icon:t[4],style:t[5],onClick:t[6]}}}),{c(){x(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p:Z,i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Qf(t,e){let n,r,i,s;return r=new Nn({props:{label:e[3],$$slots:{default:[z_]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=b("div"),x(r.$$.fragment),i=R(),v(n,"class","m-2 flex flex-col"),this.first=n},m(o,a){y(o,n,a),P(r,n,null),I(n,i),s=!0},p(o,a){e=o;let c={};a&1024&&(c.$$scope={dirty:a,ctx:e}),r.$set(c)},i(o){s||(T(r.$$.fragment,o),s=!0)},o(o){k(r.$$.fragment,o),s=!1},d(o){o&&g(n),M(r)}}}function H_(t){let e,n,r,i,s=[B_,q_],o=[];function a(c,l){return c[0]?0:1}return e=a(t,-1),n=o[e]=s[e](t),{c(){n.c(),r=st()},m(c,l){o[e].m(c,l),y(c,r,l),i=!0},p(c,l){let u=e;e=a(c,l),e===u?o[e].p(c,l):(we(),k(o[u],1,1,()=>{o[u]=null}),Ee(),n=o[e],n?n.p(c,l):(n=o[e]=s[e](c),n.c()),T(n,1),n.m(r.parentNode,r))},i(c){i||(T(n),i=!0)},o(c){k(n),i=!1},d(c){o[e].d(c),c&&g(r)}}}function K_(t){let e,n;return e=new at({props:{$$slots:{default:[H_]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,i){P(e,r,i),n=!0},p(r,[i]){let s={};i&1025&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function G_(t,e,n){let r;return je(t,Ye,o=>n(0,r=o)),[r,[{name:"SignOut",label:"Cerrar sesión",icon:"logout",style:"primary",onClick:Wf}],{icon:"login",style:"primary",onClick:zi}]}var Yf=class extends H{constructor(e){super();K(this,e,G_,K_,z,{})}},Jf=Yf;function Zf(t,e,n){let r=t.slice();return r[4]=e[n],r}function ed(t){let e,n;function r(){return t[3](t[4])}return e=new Ue({props:{props:t[4],current:t[0]}}),e.$on("click",r),{c(){x(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p(i,s){t=i;let o={};s&1&&(o.current=t[0]),e.$set(o)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){M(e,i)}}}function W_(t){let e,n,r=t[2],i=[];for(let o=0;o<r.length;o+=1)i[o]=ed(Zf(t,r,o));let s=o=>k(i[o],1,1,()=>{i[o]=null});return{c(){e=b("div");for(let o=0;o<i.length;o+=1)i[o].c();v(e,"class","container fixed svelte-1xfd7dv")},m(o,a){y(o,e,a);for(let c=0;c<i.length;c+=1)i[c].m(e,null);n=!0},p(o,[a]){if(a&7){r=o[2];let c;for(c=0;c<r.length;c+=1){let l=Zf(o,r,c);i[c]?(i[c].p(l,a),T(i[c],1)):(i[c]=ed(l),i[c].c(),T(i[c],1),i[c].m(e,null))}for(we(),c=r.length;c<i.length;c+=1)s(c);Ee()}},i(o){if(!n){for(let a=0;a<r.length;a+=1)T(i[a]);n=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)k(i[a]);n=!1},d(o){o&&g(e),Qe(i,o)}}}function X_(t,e,n){let r=[{icon:"home",style:"secondary",selected:!1},{icon:"lightning",style:"secondary",selected:!1},{icon:"profile",style:"secondary",selected:!1},{icon:"bell",style:"secondary",selected:!1}],{current:i="Home"}=e,{selectedBtn:s=()=>{}}=e,o=a=>s(a.icon);return t.$$set=a=>{"current"in a&&n(0,i=a.current),"selectedBtn"in a&&n(1,s=a.selectedBtn)},[i,s,r,o]}var td=class extends H{constructor(e){super();K(this,e,X_,W_,z,{current:0,selectedBtn:1})}},nd=td;function Q_(t){let e,n,r,i,s,o,a;function c(u){t[1](u)}let l={label:"Objetivo",type:"text"};return t[0]!==void 0&&(l.value=t[0]),s=new Rn({props:l}),ot.push(()=>Wt(s,"value",c)),{c(){e=b("h1"),e.textContent="Opciones",n=R(),r=b("h3"),r.textContent="Configura tus fuentes de ingresos",i=R(),x(s.$$.fragment)},m(u,h){y(u,e,h),y(u,n,h),y(u,r,h),y(u,i,h),P(s,u,h),a=!0},p(u,h){let f={};!o&&h&1&&(o=!0,f.value=u[0],Gt(()=>o=!1)),s.$set(f)},i(u){a||(T(s.$$.fragment,u),a=!0)},o(u){k(s.$$.fragment,u),a=!1},d(u){u&&g(e),u&&g(n),u&&g(r),u&&g(i),M(s,u)}}}function Y_(t){let e,n,r,i,s,o,a;return e=new at({props:{$$slots:{default:[Q_]},$$scope:{ctx:t}}}),i=new Ue({props:{props:{icon:"add",style:"secondary"}}}),i.$on("click",De.add),o=new Er({props:{edit:!0}}),{c(){x(e.$$.fragment),n=R(),r=b("div"),x(i.$$.fragment),s=R(),x(o.$$.fragment)},m(c,l){P(e,c,l),y(c,n,l),y(c,r,l),P(i,r,null),y(c,s,l),P(o,c,l),a=!0},p(c,[l]){let u={};l&5&&(u.$$scope={dirty:l,ctx:c}),e.$set(u)},i(c){a||(T(e.$$.fragment,c),T(i.$$.fragment,c),T(o.$$.fragment,c),a=!0)},o(c){k(e.$$.fragment,c),k(i.$$.fragment,c),k(o.$$.fragment,c),a=!1},d(c){M(e,c),c&&g(n),c&&g(r),M(i),c&&g(s),M(o,c)}}}function J_(t,e,n){let r;je(t,Je,s=>n(0,r=s));function i(s){r=s,Je.set(r)}return[r,i]}var rd=class extends H{constructor(e){super();K(this,e,J_,Y_,z,{})}},id=rd;function Z_(t){let e,n,r;return{c(){e=b("button"),n=b("img"),v(n,"class","w-12 h-12 rounded-full"),n.src!==(r=t[0])&&v(n,"src",r),v(n,"alt","Avatar")},m(i,s){y(i,e,s),I(e,n)},p(i,[s]){s&1&&n.src!==(r=i[0])&&v(n,"src",r)},i:Z,o:Z,d(i){i&&g(e)}}}function e0(t,e,n){let{img:r="icons/user.svg"}=e;return t.$$set=i=>{"img"in i&&n(0,r=i.img)},[r]}var sd=class extends H{constructor(e){super();K(this,e,e0,Z_,z,{img:0})}},od=sd;function t0(t){let e,n,r,i,s,o;return r=new od({props:{img:t[0]}}),{c(){e=b("div"),n=b("div"),x(r.$$.fragment),v(n,"class","float-right"),v(e,"class","w-screen p-8")},m(a,c){y(a,e,c),I(e,n),P(r,n,null),i=!0,s||(o=Se(n,"click",zi),s=!0)},p(a,[c]){let l={};c&1&&(l.img=a[0]),r.$set(l)},i(a){i||(T(r.$$.fragment,a),i=!0)},o(a){k(r.$$.fragment,a),i=!1},d(a){a&&g(e),M(r),s=!1,o()}}}function n0(t,e,n){let r,i;return je(t,Ye,s=>n(1,i=s)),t.$$.update=()=>{if(t.$$.dirty&2){e:n(0,r=i.photoURL?i.photoURL:"icons/user.svg")}},[r,i]}var ad=class extends H{constructor(e){super();K(this,e,n0,t0,z,{})}},cd=ad;function r0(t){let e,n,r,i,s,o;e=new cd({});var a=t[1];function c(l){return{}}return a&&(r=new a(c(t))),s=new nd({props:{current:t[0],selectedBtn:t[2]}}),{c(){x(e.$$.fragment),n=R(),r&&x(r.$$.fragment),i=R(),x(s.$$.fragment)},m(l,u){P(e,l,u),y(l,n,u),r&&P(r,l,u),y(l,i,u),P(s,l,u),o=!0},p(l,[u]){if(a!==(a=l[1])){if(r){we();let f=r;k(f.$$.fragment,1,0,()=>{M(f,1)}),Ee()}a?(r=new a(c(l)),x(r.$$.fragment),T(r.$$.fragment,1),P(r,i.parentNode,i)):r=null}let h={};u&1&&(h.current=l[0]),s.$set(h)},i(l){o||(T(e.$$.fragment,l),r&&T(r.$$.fragment,l),T(s.$$.fragment,l),o=!0)},o(l){k(e.$$.fragment,l),r&&k(r.$$.fragment,l),k(s.$$.fragment,l),o=!1},d(l){M(e,l),l&&g(n),r&&M(r,l),l&&g(i),M(s,l)}}}function i0(t,e,n){let r,i="home",s=a=>{n(0,i=a)},o={home:nc,profile:Jf,lightning:id};return t.$$.update=()=>{if(t.$$.dirty&1){e:n(1,r=o[i])}},[i,r,s]}var ld=class extends H{constructor(e){super();K(this,e,i0,r0,z,{})}},ud=ld;import.meta.env=Hi;var hd=new ud({target:document.body}),s0=hd;import.meta?.hot&&((void 0).accept(),(void 0).dispose(()=>{hd.$destroy()}));export{s0 as default};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=index.js.map

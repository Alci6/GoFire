var vd=Object.defineProperty;var yd=(t,e)=>{for(var n in e)vd(t,n,{get:e[n],enumerable:!0})};var Hi={};yd(Hi,{MODE:()=>_d,NODE_ENV:()=>wd,SSR:()=>Ed});var _d="production",wd="production",Ed=!1;function Q(){}function bd(t,e){for(let n in e)t[n]=e[n];return t}function _a(t){return t()}function wa(){return Object.create(null)}function Ke(t){t.forEach(_a)}function Td(t){return typeof t=="function"}function $(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Id(t){return Object.keys(t).length===0}function Sd(t,...e){if(t==null)return Q;let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function qe(t,e,n){t.$$.on_destroy.push(Sd(e,n))}function bt(t,e,n,r){if(t){let i=Ea(t,e,n,r);return t[0](i)}}function Ea(t,e,n,r){return t[1]&&r?bd(n.ctx.slice(),t[1](r(e))):n.ctx}function kd(t,e,n,r){if(t[2]&&r){let i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){let s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function Tt(t,e,n,r,i,s,o){let a=kd(e,r,i,s);if(a){let c=Ea(e,n,r,o);t.p(c,a)}}function zt(t){return t??""}function S(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function Be(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function X(t){return document.createTextNode(t)}function R(){return X(" ")}function Ge(){return X("")}function ke(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function It(t){return t===""?null:+t}function Ad(t){return Array.from(t.childNodes)}function Z(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function xe(t,e){t.value=e??""}function Ht(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function Le(t,e,n){t.classList[n?"add":"remove"](e)}var ba;function gr(t){ba=t}function Ki(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r(e))}var Sn=[],st=[],vr=[],Gi=[],Cd=Promise.resolve(),Wi=!1;function Rd(){Wi||(Wi=!0,Cd.then(Ta))}function Xi(t){vr.push(t)}function Kt(t){Gi.push(t)}var Qi=!1,Yi=new Set;function Ta(){if(!Qi){Qi=!0;do{for(let t=0;t<Sn.length;t+=1){let e=Sn[t];gr(e),Nd(e.$$)}for(gr(null),Sn.length=0;st.length;)st.pop()();for(let t=0;t<vr.length;t+=1){let e=vr[t];Yi.has(e)||(Yi.add(e),e())}vr.length=0}while(Sn.length);for(;Gi.length;)Gi.pop()();Wi=!1,Qi=!1,Yi.clear()}}function Nd(t){if(t.fragment!==null){t.update(),Ke(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Xi)}}var yr=new Set,St;function ae(){St={r:0,c:[],p:St}}function ce(){St.r||Ke(St.c),St=St.p}function I(t,e){t&&t.i&&(yr.delete(t),t.i(e))}function k(t,e,n,r){if(t&&t.o){if(yr.has(t))return;yr.add(t),St.c.push(()=>{yr.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function kn(t,e){k(t,1,1,()=>{e.delete(t.key)})}function An(t,e,n,r,i,s,o,a,c,l,u,h){let f=t.length,d=s.length,m=f,p={};for(;m--;)p[t[m].key]=m;let b=[],E=new Map,C=new Map;for(m=d;m--;){let F=h(i,s,m),fe=n(F),ge=o.get(fe);ge?r&&ge.p(F,e):(ge=l(fe,F),ge.c()),E.set(fe,b[m]=ge),fe in p&&C.set(fe,Math.abs(m-p[fe]))}let T=new Set,x=new Set;function D(F){I(F,1),F.m(a,u),o.set(F.key,F),u=F.first,d--}for(;f&&d;){let F=b[d-1],fe=t[f-1],ge=F.key,ie=fe.key;F===fe?(u=F.first,f--,d--):E.has(ie)?!o.has(ge)||T.has(ge)?D(F):x.has(ie)?f--:C.get(ge)>C.get(ie)?(x.add(ge),D(F)):(T.add(ie),f--):(c(fe,o),f--)}for(;f--;){let F=t[f];E.has(F.key)||c(F,o)}for(;d;)D(b[d-1]);return b}function Gt(t,e,n){let r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function P(t){t&&t.c()}function O(t,e,n,r){let{fragment:i,on_mount:s,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,n),r||Xi(()=>{let c=s.map(_a).filter(Td);o?o.push(...c):Ke(c),t.$$.on_mount=[]}),a.forEach(Xi)}function L(t,e){let n=t.$$;n.fragment!==null&&(Ke(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Dd(t,e){t.$$.dirty[0]===-1&&(Sn.push(t),Rd(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(t,e,n,r,i,s,o=[-1]){let a=ba;gr(t);let c=t.$$={fragment:null,ctx:null,props:s,update:Q,not_equal:i,bound:wa(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:e.context||[]),callbacks:wa(),dirty:o,skip_bound:!1},l=!1;if(c.ctx=n?n(t,e.props||{},(u,h,...f)=>{let d=f.length?f[0]:h;return c.ctx&&i(c.ctx[u],c.ctx[u]=d)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](d),l&&Dd(t,u)),h}):[],c.update(),l=!0,Ke(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){let u=Ad(e.target);c.fragment&&c.fragment.l(u),u.forEach(g)}else c.fragment&&c.fragment.c();e.intro&&I(t.$$.fragment),O(t,e.target,e.anchor,e.customElement),Ta()}gr(a)}var B=class{$destroy(){L(this,1),this.$destroy=Q}$on(e,n){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{let i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Id(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var de=t=>new Intl.NumberFormat("es",{notation:"compact",style:"currency",currency:"EUR"}).format(t),Ji=t=>new Intl.NumberFormat("es",{style:"currency",currency:"EUR"}).format(t),Ia=new Date().toISOString().slice(0,10);function Od(t){let e,n,r,i=de(t[0])+"",s;return{c(){e=w("p"),e.textContent="Objetivo logrado",n=R(),r=w("h6"),s=X(i),y(e,"class","euros text-xs text-center"),y(r,"class","euros text-xs text-center svelte-bssdtf")},m(o,a){v(o,e,a),v(o,n,a),v(o,r,a),S(r,s)},p(o,a){a&1&&i!==(i=de(o[0])+"")&&Z(s,i)},d(o){o&&g(e),o&&g(n),o&&g(r)}}}function Ld(t){let e,n,r=de(t[1])+"",i,s,o,a,c=de(t[0])+"",l;return{c(){e=w("p"),n=X("a "),i=X(r),s=R(),o=w("h6"),a=X("de "),l=X(c),y(e,"class","euros text-sm text-center"),y(o,"class","euros text-xs text-center svelte-bssdtf")},m(u,h){v(u,e,h),S(e,n),S(e,i),v(u,s,h),v(u,o,h),S(o,a),S(o,l)},p(u,h){h&2&&r!==(r=de(u[1])+"")&&Z(i,r),h&1&&c!==(c=de(u[0])+"")&&Z(l,c)},d(u){u&&g(e),u&&g(s),u&&g(o)}}}function Md(t){let e,n,r,i,s;function o(l,u){return(s==null||u&4)&&(s=!!l[2]()),s?Ld:Od}let a=o(t,-1),c=a(t);return{c(){e=w("div"),n=w("img"),i=R(),c.c(),y(n,"class","m-auto"),n.src!==(r="icons/goal.svg")&&y(n,"src",r),y(n,"alt","goal"),y(e,"class","goal  float-right bg-red-500 p-5  svelte-bssdtf")},m(l,u){v(l,e,u),S(e,n),S(e,i),c.m(e,null)},p(l,[u]){a===(a=o(l,u))&&c?c.p(l,u):(c.d(1),c=a(l),c&&(c.c(),c.m(e,null)))},i:Q,o:Q,d(l){l&&g(e),c.d()}}}function Pd(t,e,n){let r,{goal:i=0}=e,{road:s=0}=e,{balance:o=0}=e;return t.$$set=a=>{"goal"in a&&n(0,i=a.goal),"road"in a&&n(1,s=a.road),"balance"in a&&n(3,o=a.balance)},t.$$.update=()=>{if(t.$$.dirty&9){e:n(2,r=()=>i>o)}},[i,s,r,o]}var Sa=class extends B{constructor(e){super();K(this,e,Pd,Md,$,{goal:0,road:1,balance:3})}},ka=Sa;function Ud(t){let e,n,r=t[1].default,i=bt(r,t,t[0],null);return{c(){e=w("div"),i&&i.c(),y(e,"class","card__background h-auto sm:w-96 w-11/12 mb-12 p-8 shadow-2xl relative")},m(s,o){v(s,e,o),i&&i.m(e,null),n=!0},p(s,[o]){i&&i.p&&(!n||o&1)&&Tt(i,r,s,s[0],o,null,null)},i(s){n||(I(i,s),n=!0)},o(s){k(i,s),n=!1},d(s){s&&g(e),i&&i.d(s)}}}function xd(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=s=>{"$$scope"in s&&n(0,i=s.$$scope)},[i,r]}var Aa=class extends B{constructor(e){super();K(this,e,xd,Ud,$,{})}},ot=Aa;var Wt=[];function Xt(t,e=Q){let n,r=[];function i(a){if($(t,a)&&(t=a,n)){let c=!Wt.length;for(let l=0;l<r.length;l+=1){let u=r[l];u[1](),Wt.push(u,t)}if(c){for(let l=0;l<Wt.length;l+=2)Wt[l][0](Wt[l+1]);Wt.length=0}}}function s(a){i(a(t))}function o(a,c=Q){let l=[a,c];return r.push(l),r.length===1&&(n=e(i)||Q),a(t),()=>{let u=r.indexOf(l);u!==-1&&r.splice(u,1),r.length===0&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}var Ye=Xt({displayName:"",photoURL:"icons/user.svg",email:"",uid:""}),Ca=()=>Ye.set(0);var Je=Xt(),Ra=()=>Je.set(0);function Vd(t){let e,n,r,i,s,o,a,c,l,u=de(t[0])+"",h,f,d,m;return d=new ka({props:{balance:t[0],goal:t[1],road:t[2]}}),{c(){e=w("h1"),n=X("Hola "),r=X(t[3]),i=R(),s=w("h3"),s.textContent="Bienvenido de nuevo",o=R(),a=w("h3"),a.textContent="Balance",c=R(),l=w("p"),h=X(u),f=R(),P(d.$$.fragment),y(a,"class","mt-8"),y(l,"class","euros")},m(p,b){v(p,e,b),S(e,n),S(e,r),v(p,i,b),v(p,s,b),v(p,o,b),v(p,a,b),v(p,c,b),v(p,l,b),S(l,h),v(p,f,b),O(d,p,b),m=!0},p(p,b){(!m||b&8)&&Z(r,p[3]),(!m||b&1)&&u!==(u=de(p[0])+"")&&Z(h,u);let E={};b&1&&(E.balance=p[0]),b&2&&(E.goal=p[1]),b&4&&(E.road=p[2]),d.$set(E)},i(p){m||(I(d.$$.fragment,p),m=!0)},o(p){k(d.$$.fragment,p),m=!1},d(p){p&&g(e),p&&g(i),p&&g(s),p&&g(o),p&&g(a),p&&g(c),p&&g(l),p&&g(f),L(d,p)}}}function Fd(t){let e,n;return e=new ot({props:{$$slots:{default:[Vd]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(r,i){O(e,r,i),n=!0},p(r,[i]){let s={};i&47&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function $d(t,e,n){let r,i,s,o;qe(t,Je,c=>n(1,s=c)),qe(t,Ye,c=>n(4,o=c));let{balance:a=0}=e;return t.$$set=c=>{"balance"in c&&n(0,a=c.balance)},t.$$.update=()=>{if(t.$$.dirty&3){e:n(2,r=s-a)}if(t.$$.dirty&16){e:n(3,i=o.displayName?o.displayName.split(" ")[0]:"crack")}},[a,s,r,i,o]}var Na=class extends B{constructor(e){super();K(this,e,$d,Fd,$,{balance:0})}},Da=Na;function jd(t){let e,n,r,i,s,o,a;return{c(){e=w("div"),n=w("button"),r=w("img"),r.src!==(i=`icons/${t[1]}.svg`)&&y(r,"src",i),y(r,"alt",t[1]),y(r,"class","svelte-qgfubh"),Le(r,"selected__icon",t[0]===t[1]),y(e,"class",s=""+(zt(t[2])+" svelte-qgfubh")),Le(e,"selected",t[0]===t[1])},m(c,l){v(c,e,l),S(e,n),S(n,r),o||(a=[ke(n,"click",t[3]),ke(e,"click",t[5])],o=!0)},p(c,[l]){l&3&&Le(r,"selected__icon",c[0]===c[1]),l&3&&Le(e,"selected",c[0]===c[1])},i:Q,o:Q,d(c){c&&g(e),o=!1,Ke(a)}}}function qd(t,e,n){let{props:r={icon:"menu",style:"primary",onClick:()=>console.log("click")}}=e,{current:i="profile"}=e,{icon:s,style:o,onClick:a}=r;function c(l){Ki(t,l)}return t.$$set=l=>{"props"in l&&n(4,r=l.props),"current"in l&&n(0,i=l.current)},[i,s,o,a,r,c]}var Oa=class extends B{constructor(e){super();K(this,e,qd,jd,$,{props:4,current:0})}},be=Oa;function Bd(t){let e,n,r,i;n=new be({props:{props:t[1]}});let s=t[2].default,o=bt(s,t,t[3],null);return{c(){e=w("div"),P(n.$$.fragment),r=R(),o&&o.c(),y(e,"class","btn--close svelte-1hoiz49")},m(a,c){v(a,e,c),O(n,e,null),v(a,r,c),o&&o.m(a,c),i=!0},p(a,c){o&&o.p&&(!i||c&8)&&Tt(o,s,a,a[3],c,null,null)},i(a){i||(I(n.$$.fragment,a),I(o,a),i=!0)},o(a){k(n.$$.fragment,a),k(o,a),i=!1},d(a){a&&g(e),L(n),a&&g(r),o&&o.d(a)}}}function zd(t){let e,n,r,i;return n=new ot({props:{$$slots:{default:[Bd]},$$scope:{ctx:t}}}),{c(){e=w("div"),P(n.$$.fragment),y(e,"class",r=""+(zt(t[0]?"hideModal":"modal")+" svelte-1hoiz49"))},m(s,o){v(s,e,o),O(n,e,null),i=!0},p(s,[o]){let a={};o&8&&(a.$$scope={dirty:o,ctx:s}),n.$set(a),(!i||o&1&&r!==(r=""+(zt(s[0]?"hideModal":"modal")+" svelte-1hoiz49")))&&y(e,"class",r)},i(s){i||(I(n.$$.fragment,s),i=!0)},o(s){k(n.$$.fragment,s),i=!1},d(s){s&&g(e),L(n)}}}function Hd(t,e,n){let{$$slots:r={},$$scope:i}=e,{hideModal:s=!0}=e,a={icon:"delete",style:"tertiary",onClick:()=>n(0,s=!s)};return t.$$set=c=>{"hideModal"in c&&n(0,s=c.hideModal),"$$scope"in c&&n(3,i=c.$$scope)},[s,a,r,i]}var La=class extends B{constructor(e){super();K(this,e,Hd,zd,$,{hideModal:0})}},Ma=La;function Kd(t){let e,n,r,i;return{c(){e=w("input"),y(e,"type","text"),y(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),y(e,"placeholder",t[2])},m(s,o){v(s,e,o),xe(e,t[0]),r||(i=ke(e,"input",t[8]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&y(e,"class",n),o&4&&y(e,"placeholder",s[2]),o&1&&e.value!==s[0]&&xe(e,s[0])},d(s){s&&g(e),r=!1,i()}}}function Gd(t){let e,n,r,i;return{c(){e=w("input"),y(e,"type","date"),y(e,"class",n="input__"+t[1]+" svelte-17e1blc"),y(e,"placeholder",t[2])},m(s,o){v(s,e,o),xe(e,t[0]),r||(i=ke(e,"input",t[7]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" svelte-17e1blc")&&y(e,"class",n),o&4&&y(e,"placeholder",s[2]),o&1&&xe(e,s[0])},d(s){s&&g(e),r=!1,i()}}}function Wd(t){let e,n,r,i;return{c(){e=w("input"),y(e,"type","number"),y(e,"class",n="input__"+t[1]+" inp-icon svelte-17e1blc"),y(e,"placeholder",t[2])},m(s,o){v(s,e,o),xe(e,t[0]),r||(i=ke(e,"input",t[6]),r=!0)},p(s,o){o&2&&n!==(n="input__"+s[1]+" inp-icon svelte-17e1blc")&&y(e,"class",n),o&4&&y(e,"placeholder",s[2]),o&1&&It(e.value)!==s[0]&&xe(e,s[0])},d(s){s&&g(e),r=!1,i()}}}function Xd(t){let e,n,r,i;function s(c,l){if(c[4]==="number")return Wd;if(c[4]==="date")return Gd;if(c[4]==="text")return Kd}let o=s(t,-1),a=o&&o(t);return{c(){e=w("div"),n=w("h3"),r=X(t[3]),i=R(),a&&a.c(),y(n,"class","mt-8 mb-1"),y(e,"class","svelte-17e1blc")},m(c,l){v(c,e,l),S(e,n),S(n,r),S(e,i),a&&a.m(e,null)},p(c,[l]){l&8&&Z(r,c[3]),o===(o=s(c,l))&&a?a.p(c,l):(a&&a.d(1),a=o&&o(c),a&&(a.c(),a.m(e,null)))},i:Q,o:Q,d(c){c&&g(e),a&&a.d()}}}function Qd(t,e,n){let{icon:r="menu"}=e,{style:i="primary"}=e,{placeholder:s="0€"}=e,{value:o=""}=e,{label:a=""}=e,{type:c="number"}=e;function l(){o=It(this.value),n(0,o)}function u(){o=this.value,n(0,o)}function h(){o=this.value,n(0,o)}return t.$$set=f=>{"icon"in f&&n(5,r=f.icon),"style"in f&&n(1,i=f.style),"placeholder"in f&&n(2,s=f.placeholder),"value"in f&&n(0,o=f.value),"label"in f&&n(3,a=f.label),"type"in f&&n(4,c=f.type)},[o,i,s,a,c,r,l,u,h]}var Pa=class extends B{constructor(e){super();K(this,e,Qd,Xd,$,{icon:5,style:1,placeholder:2,value:0,label:3,type:4})}},Cn=Pa;function Yd(t){let e,n,r,i,s,o=t[2].default,a=bt(o,t,t[1],null);return{c(){e=w("div"),a&&a.c(),n=R(),r=w("span"),i=X(t[0]),y(r,"class","tooltiptext svelte-1betoo6"),y(e,"class","tooltip svelte-1betoo6")},m(c,l){v(c,e,l),a&&a.m(e,null),S(e,n),S(e,r),S(r,i),s=!0},p(c,[l]){a&&a.p&&(!s||l&2)&&Tt(a,o,c,c[1],l,null,null),(!s||l&1)&&Z(i,c[0])},i(c){s||(I(a,c),s=!0)},o(c){k(a,c),s=!1},d(c){c&&g(e),a&&a.d(c)}}}function Jd(t,e,n){let{$$slots:r={},$$scope:i}=e,{label:s="Soy un tooltip"}=e;return t.$$set=o=>{"label"in o&&n(0,s=o.label),"$$scope"in o&&n(1,i=o.$$scope)},[s,i,r]}var Ua=class extends B{constructor(e){super();K(this,e,Jd,Yd,$,{label:0})}},Rn=Ua;function xa(t,e,n){let r=t.slice();return r[4]=e[n].today,r[5]=e[n].amount,r[6]=e[n].id_saving,r}function Va(t){let e,n,r=t[4]+"",i,s,o,a=Ji(t[5])+"",c,l,u,h,f,d;function m(){return t[3](t[6])}return h=new be({props:{props:{icon:"delete",style:"tertiary",onClick:m}}}),{c(){e=w("tr"),n=w("td"),i=X(r),s=R(),o=w("td"),c=X(a),l=R(),u=w("td"),P(h.$$.fragment),f=R(),y(n,"class","svelte-1q78vq1"),y(o,"class","svelte-1q78vq1"),y(u,"class","svelte-1q78vq1")},m(p,b){v(p,e,b),S(e,n),S(n,i),S(e,s),S(e,o),S(o,c),S(e,l),S(e,u),O(h,u,null),S(e,f),d=!0},p(p,b){t=p,(!d||b&2)&&r!==(r=t[4]+"")&&Z(i,r),(!d||b&2)&&a!==(a=Ji(t[5])+"")&&Z(c,a);let E={};b&7&&(E.props={icon:"delete",style:"tertiary",onClick:m}),h.$set(E)},i(p){d||(I(h.$$.fragment,p),d=!0)},o(p){k(h.$$.fragment,p),d=!1},d(p){p&&g(e),L(h)}}}function Zd(t){let e,n,r,i,s,o=t[1],a=[];for(let l=0;l<o.length;l+=1)a[l]=Va(xa(t,o,l));let c=l=>k(a[l],1,1,()=>{a[l]=null});return{c(){e=w("table"),n=w("thead"),n.innerHTML=`<tr><th class="svelte-1q78vq1">FECHA</th> 

			<th class="svelte-1q78vq1">CANTIDAD</th></tr>`,r=R(),i=w("tbody");for(let l=0;l<a.length;l+=1)a[l].c();y(e,"class","text-center w-full")},m(l,u){v(l,e,u),S(e,n),S(e,r),S(e,i);for(let h=0;h<a.length;h+=1)a[h].m(i,null);s=!0},p(l,[u]){if(u&7){o=l[1];let h;for(h=0;h<o.length;h+=1){let f=xa(l,o,h);a[h]?(a[h].p(f,u),I(a[h],1)):(a[h]=Va(f),a[h].c(),I(a[h],1),a[h].m(i,null))}for(ae(),h=o.length;h<a.length;h+=1)c(h);ce()}},i(l){if(!s){for(let u=0;u<o.length;u+=1)I(a[u]);s=!0}},o(l){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)k(a[u]);s=!1},d(l){l&&g(e),Be(a,l)}}}function ep(t,e,n){let{removeSaving:r=()=>{}}=e,{savings:i=[]}=e,{id:s=0}=e,o=a=>r(s,a);return t.$$set=a=>{"removeSaving"in a&&n(0,r=a.removeSaving),"savings"in a&&n(1,i=a.savings),"id"in a&&n(2,s=a.id)},[r,i,s,o]}var Fa=class extends B{constructor(e){super();K(this,e,ep,Zd,$,{removeSaving:0,savings:1,id:2})}},$a=Fa;function ja(t,e,n){let r=t.slice();return r[15]=e[n].label,r[16]=e[n].icon,r[17]=e[n].style,r[18]=e[n].onClick,r}function tp(t){let e,n,r;return n=new be({props:{props:t[9][1]}}),{c(){e=w("div"),P(n.$$.fragment),y(e,"class","float-right  mt-5 flex flex-row")},m(i,s){v(i,e,s),O(n,e,null),r=!0},p:Q,i(i){r||(I(n.$$.fragment,i),r=!0)},o(i){k(n.$$.fragment,i),r=!1},d(i){i&&g(e),L(n)}}}function np(t){let e,n,r,i,s,o=t[9],a=[];for(let l=0;l<o.length;l+=1)a[l]=qa(ja(t,o,l));let c=l=>k(a[l],1,1,()=>{a[l]=null});return i=new $a({props:{savings:t[8],removeSaving:t[2],id:t[4]}}),{c(){e=w("div");for(let l=0;l<a.length;l+=1)a[l].c();n=R(),r=w("div"),P(i.$$.fragment),y(e,"class","float-right  mt-5 flex flex-row"),y(r,"class","mt-20 svelte-gm1d5i"),Le(r,"hide",!t[5])},m(l,u){v(l,e,u);for(let h=0;h<a.length;h+=1)a[h].m(e,null);v(l,n,u),v(l,r,u),O(i,r,null),s=!0},p(l,u){if(u&512){o=l[9];let f;for(f=0;f<o.length;f+=1){let d=ja(l,o,f);a[f]?(a[f].p(d,u),I(a[f],1)):(a[f]=qa(d),a[f].c(),I(a[f],1),a[f].m(e,null))}for(ae(),f=o.length;f<a.length;f+=1)c(f);ce()}let h={};u&256&&(h.savings=l[8]),u&4&&(h.removeSaving=l[2]),u&16&&(h.id=l[4]),i.$set(h),u&32&&Le(r,"hide",!l[5])},i(l){if(!s){for(let u=0;u<o.length;u+=1)I(a[u]);I(i.$$.fragment,l),s=!0}},o(l){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)k(a[u]);k(i.$$.fragment,l),s=!1},d(l){l&&g(e),Be(a,l),l&&g(n),l&&g(r),L(i)}}}function rp(t){let e,n,r;return e=new be({props:{props:{icon:t[16],style:t[17],onClick:t[18]}}}),{c(){P(e.$$.fragment),n=R()},m(i,s){O(e,i,s),v(i,n,s),r=!0},p:Q,i(i){r||(I(e.$$.fragment,i),r=!0)},o(i){k(e.$$.fragment,i),r=!1},d(i){L(e,i),i&&g(n)}}}function qa(t){let e,n;return e=new Rn({props:{label:t[15],$$slots:{default:[rp]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(r,i){O(e,r,i),n=!0},p(r,i){let s={};i&2097152&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function ip(t){let e,n,r,i,s,o,a,c,l,u,h,f,d;function m(D){t[11](D)}let p={label:"añade la cantidad",type:"number"};t[6]!==void 0&&(p.value=t[6]),i=new Cn({props:p}),st.push(()=>Gt(i,"value",m));function b(D){t[12](D)}let E={label:"¿Cuándo añadiste los fondos?",type:"date"};t[7]!==void 0&&(E.value=t[7]),a=new Cn({props:E}),st.push(()=>Gt(a,"value",b));let C=[np,tp],T=[];function x(D,F){return D[1].length>0?0:1}return u=x(t,-1),h=T[u]=C[u](t),{c(){e=w("h1"),n=X(t[3]),r=R(),P(i.$$.fragment),o=R(),P(a.$$.fragment),l=R(),h.c(),f=Ge(),y(e,"class","noselect text-2xl")},m(D,F){v(D,e,F),S(e,n),v(D,r,F),O(i,D,F),v(D,o,F),O(a,D,F),v(D,l,F),T[u].m(D,F),v(D,f,F),d=!0},p(D,F){(!d||F&8)&&Z(n,D[3]);let fe={};!s&&F&64&&(s=!0,fe.value=D[6],Kt(()=>s=!1)),i.$set(fe);let ge={};!c&&F&128&&(c=!0,ge.value=D[7],Kt(()=>c=!1)),a.$set(ge);let ie=u;u=x(D,F),u===ie?T[u].p(D,F):(ae(),k(T[ie],1,1,()=>{T[ie]=null}),ce(),h=T[u],h?h.p(D,F):(h=T[u]=C[u](D),h.c()),I(h,1),h.m(f.parentNode,f))},i(D){d||(I(i.$$.fragment,D),I(a.$$.fragment,D),I(h),d=!0)},o(D){k(i.$$.fragment,D),k(a.$$.fragment,D),k(h),d=!1},d(D){D&&g(e),D&&g(r),L(i,D),D&&g(o),L(a,D),D&&g(l),T[u].d(D),D&&g(f)}}}function sp(t){let e,n;return e=new Ma({props:{hideModal:t[0],$$slots:{default:[ip]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(r,i){O(e,r,i),n=!0},p(r,[i]){let s={};i&1&&(s.hideModal=r[0]),i&2097662&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function op(t,e,n){let r,{hideModal:i=!0}=e,{save:s=()=>{}}=e,{savings:o=[]}=e,{removeSaving:a=()=>{}}=e,{title:c="Title"}=e,{id:l="0"}=e,u=!1,h=()=>n(5,u=!u),f=0,d=()=>n(0,i=!i),m=[{icon:"history",label:"Ver el historial ",style:"modal",onClick:h},{icon:"saving",label:"Guardar Datos",style:"modal",onClick:()=>{s(l,p,f)}}],p=Ia;function b(C){f=C,n(6,f)}function E(C){p=C,n(7,p)}return t.$$set=C=>{"hideModal"in C&&n(0,i=C.hideModal),"save"in C&&n(10,s=C.save),"savings"in C&&n(1,o=C.savings),"removeSaving"in C&&n(2,a=C.removeSaving),"title"in C&&n(3,c=C.title),"id"in C&&n(4,l=C.id)},t.$$.update=()=>{if(t.$$.dirty&2){e:n(8,r=o.sort((C,T)=>(C=C.today.split("-").join(""),T=T.today.split("-").join(""),T-C)))}},[i,o,a,c,l,u,f,p,r,m,s,b,E]}var Ba=class extends B{constructor(e){super();K(this,e,op,sp,$,{hideModal:0,save:10,savings:1,removeSaving:2,title:3,id:4})}},za=Ba;function Ha(t,e,n){let r=t.slice();return r[1]=e[n].start,r[2]=e[n].size,r}function Ka(t){let e,n,r;return{c(){e=w("tr"),n=w("td"),r=R(),Ht(n,"--start",t[1]),Ht(n,"--size",t[2])},m(i,s){v(i,e,s),S(e,n),S(e,r)},p(i,s){s&1&&Ht(n,"--start",i[1]),s&1&&Ht(n,"--size",i[2])},d(i){i&&g(e)}}}function ap(t){let e,n,r=t[0],i=[];for(let s=0;s<r.length;s+=1)i[s]=Ka(Ha(t,r,s));return{c(){e=w("table"),n=w("tbody");for(let s=0;s<i.length;s+=1)i[s].c();y(e,"class","charts-css line svelte-1xzgxgp"),y(e,"id","my-chart")},m(s,o){v(s,e,o),S(e,n);for(let a=0;a<i.length;a+=1)i[a].m(n,null)},p(s,[o]){if(o&1){r=s[0];let a;for(a=0;a<r.length;a+=1){let c=Ha(s,r,a);i[a]?i[a].p(c,o):(i[a]=Ka(c),i[a].c(),i[a].m(n,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=r.length}},i:Q,o:Q,d(s){s&&g(e),Be(i,s)}}}function cp(t,e,n){let{chart:r=[{start:0,size:.4},{start:.4,size:1}]}=e;return t.$$set=i=>{"chart"in i&&n(0,r=i.chart)},[r]}var Ga=class extends B{constructor(e){super();K(this,e,cp,ap,$,{chart:0})}},Nn=Ga;function Wa(t,e,n){let r=t.slice();return r[22]=e[n],r}function lp(t){let e,n,r,i,s,o=de(t[3])+"",a,c,l,u,h,f;return l=new Nn({}),{c(){e=w("h6"),n=X(t[4]),r=R(),i=w("div"),s=w("p"),a=X(o),c=R(),P(l.$$.fragment),u=R(),h=w("p"),h.textContent=`${t[9]}`,y(e,"class","mb-1"),y(s,"class","euros"),y(h,"class","percent svelte-49wrw"),y(i,"class","data svelte-49wrw")},m(d,m){v(d,e,m),S(e,n),v(d,r,m),v(d,i,m),S(i,s),S(s,a),S(i,c),O(l,i,null),S(i,u),S(i,h),f=!0},p(d,m){(!f||m&16)&&Z(n,d[4]),(!f||m&8)&&o!==(o=de(d[3])+"")&&Z(a,o)},i(d){f||(I(l.$$.fragment,d),f=!0)},o(d){k(l.$$.fragment,d),f=!1},d(d){d&&g(e),d&&g(r),d&&g(i),L(l)}}}function up(t){let e,n,r,i,s,o,a,c,l,u,h,f,d;o=new Nn({});let m=t[13],p=[];for(let E=0;E<m.length;E+=1)p[E]=Xa(Wa(t,m,E));let b=E=>k(p[E],1,1,()=>{p[E]=null});return{c(){e=w("input"),n=R(),r=w("div"),i=w("input"),s=R(),P(o.$$.fragment),a=R(),c=w("p"),c.textContent=`${t[9]}`,l=R(),u=w("div");for(let E=0;E<p.length;E+=1)p[E].c();y(e,"name","title"),y(e,"class","title w-64 svelte-49wrw"),y(e,"type","text"),y(i,"name","number"),y(i,"type","number"),y(i,"class","svelte-49wrw"),y(c,"class","percent svelte-49wrw"),y(r,"class","data svelte-49wrw"),y(u,"class"," flex flex-row float-right")},m(E,C){v(E,e,C),xe(e,t[4]),v(E,n,C),v(E,r,C),S(r,i),xe(i,t[3]),S(r,s),O(o,r,null),S(r,a),S(r,c),v(E,l,C),v(E,u,C);for(let T=0;T<p.length;T+=1)p[T].m(u,null);h=!0,f||(d=[ke(e,"change",t[11]),ke(e,"input",t[15]),ke(i,"change",t[12]),ke(i,"input",t[16])],f=!0)},p(E,C){if(C&16&&e.value!==E[4]&&xe(e,E[4]),C&8&&It(i.value)!==E[3]&&xe(i,E[3]),C&8192){m=E[13];let T;for(T=0;T<m.length;T+=1){let x=Wa(E,m,T);p[T]?(p[T].p(x,C),I(p[T],1)):(p[T]=Xa(x),p[T].c(),I(p[T],1),p[T].m(u,null))}for(ae(),T=m.length;T<p.length;T+=1)b(T);ce()}},i(E){if(!h){I(o.$$.fragment,E);for(let C=0;C<m.length;C+=1)I(p[C]);h=!0}},o(E){k(o.$$.fragment,E),p=p.filter(Boolean);for(let C=0;C<p.length;C+=1)k(p[C]);h=!1},d(E){E&&g(e),E&&g(n),E&&g(r),L(o),E&&g(l),E&&g(u),Be(p,E),f=!1,Ke(d)}}}function Xa(t){let e,n,r,i;return n=new be({props:{props:t[22]}}),{c(){e=w("div"),P(n.$$.fragment),r=R()},m(s,o){v(s,e,o),O(n,e,null),S(e,r),i=!0},p:Q,i(s){i||(I(n.$$.fragment,s),i=!0)},o(s){k(n.$$.fragment,s),i=!1},d(s){s&&g(e),L(n)}}}function Qa(t){let e,n,r=de(t[7])+"",i;return{c(){e=w("h3"),n=X("Rentabilidad: "),i=X(r),y(e,"class","mt-1 revenue text-sm")},m(s,o){v(s,e,o),S(e,n),S(e,i)},p(s,o){o&128&&r!==(r=de(s[7])+"")&&Z(i,r)},d(s){s&&g(e)}}}function hp(t){let e,n,r,i,s,o,a;e=new za({props:{hideModal:t[6],title:t[4],id:t[8],save:t[1].saving,savings:t[2].saving,removeSaving:t[1].removeSaving}});let c=[up,lp],l=[];function u(f,d){return f[0]?0:1}i=u(t,-1),s=l[i]=c[i](t);let h=t[10].length>0&&!t[0]&&Qa(t);return{c(){P(e.$$.fragment),n=R(),r=w("div"),s.c(),o=R(),h&&h.c(),y(r,"class","w-64 m-3 relative svelte-49wrw"),Le(r,"hightlight",t[5])},m(f,d){O(e,f,d),v(f,n,d),v(f,r,d),l[i].m(r,null),S(r,o),h&&h.m(r,null),a=!0},p(f,[d]){let m={};d&64&&(m.hideModal=f[6]),d&16&&(m.title=f[4]),d&2&&(m.save=f[1].saving),d&4&&(m.savings=f[2].saving),d&2&&(m.removeSaving=f[1].removeSaving),e.$set(m);let p=i;i=u(f,d),i===p?l[i].p(f,d):(ae(),k(l[p],1,1,()=>{l[p]=null}),ce(),s=l[i],s?s.p(f,d):(s=l[i]=c[i](f),s.c()),I(s,1),s.m(r,o)),f[10].length>0&&!f[0]?h?h.p(f,d):(h=Qa(f),h.c(),h.m(r,null)):h&&(h.d(1),h=null),d&32&&Le(r,"hightlight",f[5])},i(f){a||(I(e.$$.fragment,f),I(s),a=!0)},o(f){k(e.$$.fragment,f),k(s),a=!1},d(f){L(e,f),f&&g(n),f&&g(r),l[i].d(),h&&h.d()}}}function fp(t,e,n){let r,i,{edit:s=!1}=e,{data:o=[]}=e,{props:a={id:"9c72c81f-480d-4575-bdff-45e50afc7a33",title:"Total Title",number:0,percent:0,hightlight:!1,saving:[]}}=e,{id:c,title:l,number:u,percent:h,hightlight:f,saving:d}=a,m=!0,p=()=>n(6,m=!m),b={remove:()=>o.remove(c),changeName:()=>o.change(c,"title",l),changeNumber:()=>o.change(c,"number",u),changeHigh:()=>o.change(c,"hightlight",f),toogleHigh:()=>{n(5,f=!f),T()}},{changeName:E,changeNumber:C,changeHigh:T,remove:x,toogleHigh:D}=b,F=[{icon:"delete",style:"tertiary",onClick:x},{icon:"highlight",style:"tertiary",onClick:D},{icon:"saving",style:"tertiary",onClick:p}];function fe(){l=this.value,n(4,l)}function ge(){u=It(this.value),n(3,u)}t.$$set=ie=>{"edit"in ie&&n(0,s=ie.edit),"data"in ie&&n(1,o=ie.data),"props"in ie&&n(2,a=ie.props)},t.$$.update=()=>{if(t.$$.dirty&16392){e:n(7,i=u-r)}};e:n(14,r=d.reduce((ie,zi)=>ie+zi.amount,0));return[s,o,a,u,l,f,m,i,c,h,d,E,C,F,r,fe,ge]}var Ya=class extends B{constructor(e){super();K(this,e,fp,hp,$,{edit:0,data:1,props:2})}},Ja=Ya;var _r,dp=new Uint8Array(16);function pp(){if(!_r&&(_r=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!_r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _r(dp)}var mp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function gp(t){return typeof t=="string"&&mp.test(t)}var ve=[];for(var Zi=0;Zi<256;++Zi)ve.push((Zi+256).toString(16).substr(1));function vp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ve[t[e+0]]+ve[t[e+1]]+ve[t[e+2]]+ve[t[e+3]]+"-"+ve[t[e+4]]+ve[t[e+5]]+"-"+ve[t[e+6]]+ve[t[e+7]]+"-"+ve[t[e+8]]+ve[t[e+9]]+"-"+ve[t[e+10]]+ve[t[e+11]]+ve[t[e+12]]+ve[t[e+13]]+ve[t[e+14]]+ve[t[e+15]]).toLowerCase();if(!gp(n))throw TypeError("Stringified UUID is invalid");return n}function es(t,e,n){t=t||{};var r=t.random||(t.rng||pp)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return vp(r)}var yp={title:"Título",number:0,revenue:0,percent:0,hightlight:!1,saving:[]},_p=()=>{let{subscribe:t,update:e,set:n}=Xt(),r=()=>{let f=[];return t(d=>f=d),f};return{subscribe:t,update:e,add:()=>e(f=>[...f,{...yp,id:es()}]),set:n,remove:f=>e(d=>d.filter(m=>m.id!==f)),change:(f,d,m)=>{let p=r();p.map(b=>b.id===f?b[d]=m:""),n(p)},balance:()=>r().reduce((m,p)=>m+p.number,0),saving:(f,d,m)=>{let p=r(),b=es();p.map(E=>E.id===f?E.saving=[...E.saving,{id_saving:b,today:d,amount:m}]:""),n(p)},revenue:()=>{let f=r(),d=[];return f.map(p=>p.saving.map(b=>d=[...d,b.amount])),d.reduce((p,b)=>p+b,0)},detectNoSavings:()=>{let f=r(),d=[];return f.map(p=>p.saving.length===0?d=[...d,p.number]:""),d.reduce((p,b)=>p+b,0)},removeSaving:(f,d)=>{let b=r().filter(E=>E.id===f)[0].saving.filter(E=>E.id_saving!=d);e(E=>E.map(C=>C.id==f?{...C,saving:b}:C))}}},Ae=_p(),Za=()=>{Ae.set([])};function ec(t,e,n){let r=t.slice();return r[2]=e[n],r}function nc(t){let e=[],n=new Map,r,i,s=t[1],o=a=>a[2].id;for(let a=0;a<s.length;a+=1){let c=ec(t,s,a),l=o(c);n.set(l,e[a]=tc(l,c))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=Ge()},m(a,c){for(let l=0;l<e.length;l+=1)e[l].m(a,c);v(a,r,c),i=!0},p(a,c){c&3&&(s=a[1],ae(),e=An(e,c,o,1,a,s,n,r.parentNode,kn,tc,r,ec),ce())},i(a){if(!i){for(let c=0;c<s.length;c+=1)I(e[c]);i=!0}},o(a){for(let c=0;c<e.length;c+=1)k(e[c]);i=!1},d(a){for(let c=0;c<e.length;c+=1)e[c].d(a);a&&g(r)}}}function tc(t,e){let n,r,i;return r=new Ja({props:{edit:e[0],props:e[2],data:Ae}}),{key:t,first:null,c(){n=Ge(),P(r.$$.fragment),this.first=n},m(s,o){v(s,n,o),O(r,s,o),i=!0},p(s,o){e=s;let a={};o&1&&(a.edit=e[0]),o&2&&(a.props=e[2]),r.$set(a)},i(s){i||(I(r.$$.fragment,s),i=!0)},o(s){k(r.$$.fragment,s),i=!1},d(s){s&&g(n),L(r,s)}}}function wp(t){let e,n,r=t[1]&&nc(t);return{c(){r&&r.c(),e=Ge()},m(i,s){r&&r.m(i,s),v(i,e,s),n=!0},p(i,[s]){i[1]?r?(r.p(i,s),s&2&&I(r,1)):(r=nc(i),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(ae(),k(r,1,1,()=>{r=null}),ce())},i(i){n||(I(r),n=!0)},o(i){k(r),n=!1},d(i){r&&r.d(i),i&&g(e)}}}function Ep(t,e,n){let r;qe(t,Ae,s=>n(1,r=s));let{edit:i=!1}=e;return t.$$set=s=>{"edit"in s&&n(0,i=s.edit)},[i,r]}var rc=class extends B{constructor(e){super();K(this,e,Ep,wp,$,{edit:0})}},wr=rc;function bp(t){let e,n,r,i,s,o=de(t[0])+"",a,c,l,u,h,f;return l=new Nn({}),{c(){e=w("div"),n=w("h6"),n.textContent=`${t[1]}`,r=R(),i=w("div"),s=w("p"),a=X(o),c=R(),P(l.$$.fragment),u=R(),h=w("p"),h.textContent=`${t[2]}`,y(n,"class","mb-1"),y(s,"class","euros"),y(h,"class","percent svelte-x91ufk"),y(i,"class","data svelte-x91ufk"),y(e,"class","w-64 m-3 relative m-6 svelte-x91ufk"),Le(e,"hightlight",t[3])},m(d,m){v(d,e,m),S(e,n),S(e,r),S(e,i),S(i,s),S(s,a),S(i,c),O(l,i,null),S(i,u),S(i,h),f=!0},p(d,[m]){(!f||m&1)&&o!==(o=de(d[0])+"")&&Z(a,o)},i(d){f||(I(l.$$.fragment,d),f=!0)},o(d){k(l.$$.fragment,d),f=!1},d(d){d&&g(e),L(l)}}}function Tp(t,e,n){let{revenue:r=0}=e,{props:i={title:"Beneficios",number:10,percent:0,hightlight:!0}}=e,{title:s,number:o,percent:a,hightlight:c}=i;return t.$$set=l=>{"revenue"in l&&n(0,r=l.revenue),"props"in l&&n(4,i=l.props)},[r,s,a,c,i]}var ic=class extends B{constructor(e){super();K(this,e,Tp,bp,$,{revenue:0,props:4})}},sc=ic;function Ip(t){let e,n,r,i,s,o;return e=new Da({props:{balance:t[0]}}),r=new sc({props:{revenue:t[1]}}),s=new wr({}),{c(){P(e.$$.fragment),n=R(),P(r.$$.fragment),i=R(),P(s.$$.fragment)},m(a,c){O(e,a,c),v(a,n,c),O(r,a,c),v(a,i,c),O(s,a,c),o=!0},p(a,[c]){let l={};c&1&&(l.balance=a[0]),e.$set(l);let u={};c&2&&(u.revenue=a[1]),r.$set(u)},i(a){o||(I(e.$$.fragment,a),I(r.$$.fragment,a),I(s.$$.fragment,a),o=!0)},o(a){k(e.$$.fragment,a),k(r.$$.fragment,a),k(s.$$.fragment,a),o=!1},d(a){L(e,a),a&&g(n),L(r,a),a&&g(i),L(s,a)}}}function Sp(t,e,n){let r=0,i=0;return Ae.subscribe(s=>{s&&(n(0,r=Ae.balance()),n(1,i=Ae.balance()-Ae.revenue()-Ae.detectNoSavings()))}),[r,i]}var oc=class extends B{constructor(e){super();K(this,e,Sp,Ip,$,{})}},ac=oc;var ts=function(t,e){return ts=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ts(t,e)};function kp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ts(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ns=function(){return ns=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ns.apply(this,arguments)};function Er(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ap(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Cp(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function rs(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function br(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function cc(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var Rp=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)==55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Np=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{var s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Dp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,d=l&63;c||(d=64,o||(f=64)),r.push(n[u],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Rp(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Np(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length,a=o?n[t.charAt(i)]:0;++i;var c=i<t.length,l=c?n[t.charAt(i)]:64;++i;var u=i<t.length,h=u?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw Error();var f=s<<2|a>>4;if(r.push(f),l!==64){var d=a<<4&240|l>>2;if(r.push(d),h!==64){var m=l<<6&192|h;r.push(m)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},lc=function(t){try{return Dp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};var Op=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();function le(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tr(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(le())}function Ir(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Sr(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uc(){return le().indexOf("Electron/")>=0}function kr(){var t=le();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hc(){return le().indexOf("MSAppHost/")>=0}var Lp="FirebaseError",On=function(t){kp(e,t);function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name=Lp,Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,Dn.prototype.create),s}return e}(Error),Dn=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+e,o=this.errors[e],a=o?Mp(o,i):"Error",c=this.serviceName+": "+a+" ("+s+").",l=new On(s,c,i);return l},t}();function Mp(t,e){return t.replace(Pp,function(n,r){var i=e[r];return i!=null?String(i):"<"+r+"?>"})}var Pp=/\{\$([^}]+)}/g;function fc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qt(t){for(var e=[],n=function(c,l){Array.isArray(l)?l.forEach(function(u){e.push(encodeURIComponent(c)+"="+encodeURIComponent(u))}):e.push(encodeURIComponent(c)+"="+encodeURIComponent(l))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r],o=s[0],a=s[1];n(o,a)}return e.length?"&"+e.join("&"):""}function dc(t,e){var n=new Up(t,e);return n.subscribe.bind(n)}var Up=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xp(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=is),s.error===void 0&&(s.error=is),s.complete===void 0&&(s.complete=is);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch(a){}}),this.observers.push(s),o},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function xp(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function is(){}function Ve(t){return t&&t._delegate?t._delegate:t}var at=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();var ct="[DEFAULT]";var $p=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(e){e===void 0&&(e=ct);var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new Op;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(s){}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n=ns({identifier:ct,optional:!1},e),r=n.identifier,i=n.optional,s=this.normalizeInstanceIdentifier(r);if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(Fp(e))try{this.getOrInitializeService({instanceIdentifier:ct})}catch(h){}try{for(var i=rs(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var o=br(s.value,2),a=o[0],c=o[1],l=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:l});c.resolve(u)}catch(h){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=ct),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return Ap(this,void 0,void 0,function(){var e;return Cp(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(cc(cc([],br(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),br(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=ct),this.instances.has(e)},t.prototype.initialize=function(e){var n,r;e===void 0&&(e={});var i=e.instanceIdentifier,s=i===void 0?ct:i,o=e.options,a=o===void 0?{}:o,c=this.normalizeInstanceIdentifier(s);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:c,options:a});try{for(var u=rs(this.instancesDeferred.entries()),h=u.next();!h.done;h=u.next()){var f=br(h.value,2),d=f[0],m=f[1],p=this.normalizeInstanceIdentifier(d);c===p&&m.resolve(l)}}catch(b){n={error:b}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return this.invokeOnInitCallbacks(l,c),l},t.prototype.onInit=function(e){var n=this;return this.onInitCallbacks.add(e),function(){n.onInitCallbacks.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var r,i;try{for(var s=rs(this.onInitCallbacks),o=s.next();!o.done;o=s.next()){var a=o.value;try{a(e,n)}catch(c){}}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,r=e.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Vp(n),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(o){}return s||null},t.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:ct:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function Vp(t){return t===ct?void 0:t}function Fp(t){return t.instantiationMode==="EAGER"}var jp=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new $p(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function ze(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var kt,W;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(W||(W={}));var qp={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},Bp=W.INFO,zp=(kt={},kt[W.DEBUG]="log",kt[W.VERBOSE]="log",kt[W.INFO]="info",kt[W.WARN]="warn",kt[W.ERROR]="error",kt),Hp=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),s=zp[e];if(s)console[s].apply(console,ze(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},Ln=function(){function t(e){this.name=e,this._logLevel=Bp,this._logHandler=Hp,this._userLogHandler=null}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in W))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?qp[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,ze([this,W.DEBUG],e)),this._logHandler.apply(this,ze([this,W.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,ze([this,W.VERBOSE],e)),this._logHandler.apply(this,ze([this,W.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,ze([this,W.INFO],e)),this._logHandler.apply(this,ze([this,W.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,ze([this,W.WARN],e)),this._logHandler.apply(this,ze([this,W.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,ze([this,W.ERROR],e)),this._logHandler.apply(this,ze([this,W.ERROR],e))},t}();var pc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kp(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Kp(t){let e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}var mc="@firebase/app-exp",Gp="0.0.900-exp.d92a36260";var ss=new Ln("@firebase/app"),Wp="@firebase/app-compat",Xp="@firebase/analytics-compat",Qp="@firebase/analytics-exp",Yp="@firebase/auth-exp",Jp="@firebase/auth-compat",Zp="@firebase/database",em="@firebase/database-compat",tm="@firebase/functions-exp",nm="@firebase/functions-compat",rm="@firebase/installations-exp",im="@firebase/installations-compat",sm="@firebase/messaging-exp",om="@firebase/messaging-compat",am="@firebase/performance-exp",cm="@firebase/performance-compat",lm="@firebase/remote-config-exp",um="@firebase/remote-config-compat",hm="@firebase/storage",fm="@firebase/storage-compat",dm="@firebase/firestore",pm="@firebase/firestore-compat",mm="firebase-exp",gm="9.0.0-beta.2";var gc="[DEFAULT]",vm={[mc]:"fire-core",[Wp]:"fire-core-compat",[Qp]:"fire-analytics",[Xp]:"fire-analytics-compat",[Yp]:"fire-auth",[Jp]:"fire-auth-compat",[Zp]:"fire-rtdb",[em]:"fire-rtdb-compat",[tm]:"fire-fn",[nm]:"fire-fn-compat",[rm]:"fire-iid",[im]:"fire-iid-compat",[sm]:"fire-fcm",[om]:"fire-fcm-compat",[am]:"fire-perf",[cm]:"fire-perf-compat",[lm]:"fire-rc",[um]:"fire-rc-compat",[hm]:"fire-gcs",[fm]:"fire-gcs-compat",[dm]:"fire-fst",[pm]:"fire-fst-compat","fire-js":"fire-js",[mm]:"fire-js-all"};var Ar=new Map,os=new Map;function ym(t,e){try{t.container.addComponent(e)}catch(n){ss.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function At(t){let e=t.name;if(os.has(e))return ss.debug(`There were multiple attempts to register component ${e}.`),!1;os.set(e,t);for(let n of Ar.values())ym(n,t);return!0}function Mn(t,e){return t.container.getProvider(e)}var _m={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Cr=new Dn("app","Firebase",_m);var vc=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new at("app-exp",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}};var Ct=gm;function as(t,e={}){typeof e!="object"&&(e={name:e});let n=Object.assign({name:gc,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Cr.create("bad-app-name",{appName:String(r)});if(Ar.has(r))throw Cr.create("duplicate-app",{appName:r});let i=new jp(r);for(let o of os.values())i.addComponent(o);let s=new vc(t,n,i);return Ar.set(r,s),s}function Rr(t=gc){let e=Ar.get(t);if(!e)throw Cr.create("no-app",{appName:t});return e}function lt(t,e,n){var r;let i=(r=vm[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ss.warn(a.join(" "));return}At(new at(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function wm(t){At(new at("platform-logger",e=>new pc(e),"PRIVATE")),lt(mc,Gp,t),lt("fire-js","")}wm();var Em="firebase-exp",bm="9.0.0-beta.2";lt(Em,bm,"app");var Tm={apiKey:"AIzaSyDWiDgqYUOUq1tsA8C5zY3eJR170KRa3qA",authDomain:"finanzas-cfeb0.firebaseapp.com",projectId:"finanzas-cfeb0",storageBucket:"finanzas-cfeb0.appspot.com",messagingSenderId:"245107666949",appId:"1:245107666949:web:f8bac696fa6a205541ac6c",measurementId:"G-LR1WRTGGG2"},cE=as(Tm);function Im(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var yc=new Dn("auth","Firebase",Im());var _c=new Ln("@firebase/auth-exp");function Nr(t,...e){_c.logLevel<=W.ERROR&&_c.error(`Auth (${Ct}): ${t}`,...e)}function Ze(t,...e){throw cs(t,...e)}function Yt(t,...e){return cs(t,...e)}function cs(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yc.create(t,...e)}function j(t,e,...n){if(!t)throw cs(e,...n)}function et(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Nr(e),new Error(e)}function ut(t,e){t||et(e)}var wc=new Map;function tt(t){ut(t instanceof Function,"Expected a class definition");let e=wc.get(t);return e?(ut(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wc.set(t,e),e)}function Sm(t,e){let n=Mn(t,"auth-exp");if(n.isInitialized()){let i=n.getImmediate();Ze(i,"already-initialized")}return n.initialize({options:e})}function km(t,e){let n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tt);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ls(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Am(){return Ec()==="http:"||Ec()==="https:"}function Ec(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Cm(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Am()||Ir()||"connection"in navigator)?navigator.onLine:!0}function Rm(){if(typeof navigator=="undefined")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Jt=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ut(n>e,"Short delay should be less than long delay!"),this.isMobile=Tr()||Sr()}get(){return Cm()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function us(t,e){ut(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Dr=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Nm={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"};var Dm=new Jt(3e4,6e4);function Om(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Or(t,e,n,r,i={}){return bc(t,i,()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Qt(Object.assign({key:t.config.apiKey},o)).slice(1),c=new(Dr.headers());return c.set("Content-Type","application/json"),c.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&c.set("X-Firebase-Locale",t.languageCode),Dr.fetch()(Tc(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function bc(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Nm),e);try{let i=new Ic(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw hs(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=(s.ok?o.errorMessage:o.error.message).split(" : ")[0];if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw hs(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw hs(t,"email-already-in-use",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");Ze(t,l)}}catch(i){if(i instanceof On)throw i;Ze(t,"network-request-failed")}}async function Lm(t,e,n,r,i={}){let s=await Or(t,e,n,r,i);return"mfaPendingCredential"in s&&Ze(t,"multi-factor-auth-required",{serverResponse:s}),s}function Tc(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?us(t.config,i):`${t.config.apiScheme}://${i}`}var Ic=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yt(this.auth,"timeout")),Dm.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function hs(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Yt(t,e,r);return i.customData._tokenResponse=n,i}async function Mm(t,e){return Or(t,"POST","/v1/accounts:delete",e)}async function Pm(t,e){return Or(t,"POST","/v1/accounts:lookup",e)}function Pn(t){if(!!t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function Um(t,e=!1){let n=Ve(t),r=await n.getIdToken(e),i=ds(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pn(fs(i.auth_time)),issuedAtTime:Pn(fs(i.iat)),expirationTime:Pn(fs(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function fs(t){return Number(t)*1e3}function ds(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nr("JWT malformed, contained fewer than 3 sections"),null;try{let i=lc(n);return i?JSON.parse(i):(Nr("Failed to decode base64 JWT payload"),null)}catch(i){return Nr("Caught error parsing JWT payload as JSON",i),null}}function xm(t){let e=ds(t);return j(e,"internal-error"),j(typeof e.exp!="undefined","internal-error"),j(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}async function Un(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof On&&Vm(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Vm({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Sc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ps=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pn(this.lastLoginAt),this.creationTime=Pn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Lr(t){var e;let n=t.auth,r=await t.getIdToken(),i=await Un(t,Pm(n,{idToken:r}));j(i==null?void 0:i.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?$m(s.providerUserInfo):[],a=Fm(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(a==null?void 0:a.length),u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ps(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function jm(t){let e=Ve(t);await Lr(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Fm(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $m(t){return t.map(e=>{var{providerId:n}=e,r=Er(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function qm(t,e){let n=await bc(t,{},()=>{let r=Qt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Tc(t,i,"/v1/token",`key=${s}`);return Dr.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}var Zt=class{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken!="undefined","internal-error"),j(typeof e.refreshToken!="undefined","internal-error");let n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):xm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return j(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:s}=await qm(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Zt;return r&&(j(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(j(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(j(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zt,this.toJSON())}_performRefresh(){return et("not implemented")}};function ht(t,e){j(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}var ft=class{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Er(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Sc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.metadata=new ps(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let n=await Un(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Um(this,e)}reload(){return jm(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ft(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lr(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await Un(this,Mm(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,d=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,p=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(l=n.createdAt)!==null&&l!==void 0?l:void 0,C=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:x,isAnonymous:D,providerData:F,stsTokenManager:fe}=n;j(T&&fe,e,"internal-error");let ge=Zt.fromJSON(this.name,fe);j(typeof T=="string",e,"internal-error"),ht(h,e.name),ht(f,e.name),j(typeof x=="boolean",e,"internal-error"),j(typeof D=="boolean",e,"internal-error"),ht(d,e.name),ht(m,e.name),ht(p,e.name),ht(b,e.name),ht(E,e.name),ht(C,e.name);let ie=new ft({uid:T,auth:e,email:f,emailVerified:x,displayName:h,isAnonymous:D,photoURL:m,phoneNumber:d,tenantId:p,stsTokenManager:ge,createdAt:E,lastLoginAt:C});return F&&Array.isArray(F)&&(ie.providerData=F.map(zi=>Object.assign({},zi))),b&&(ie._redirectEventId=b),ie}static async _fromIdTokenResponse(e,n,r=!1){let i=new Zt;i.updateFromServerResponse(n);let s=new ft({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Lr(s),s}};var ms=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){let n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};ms.type="NONE";var kc=ms;function Mr(t,e,n){return`firebase:${t}:${e}:${n}`}var en=class{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Mr(this.userKey,i.apiKey,s),this.fullPersistenceKey=Mr("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?ft._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new en(tt(kc),e,r);let i=tt(kc);for(let a of n)if(await a._isAvailable()){i=a;break}let s=null,o=Mr(r,e.config.apiKey,e.name);for(let a of n)try{let c=await a._get(o);if(c){let l=ft._fromJSON(e,c);a!==i&&(s=l);break}}catch(c){}return s&&await i._set(o,s.toJSON()),await Promise.all(n.map(async a=>{if(a!==i)try{await a._remove(o)}catch(c){}})),new en(i,e,r)}};function Lc(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rc(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ac(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dc(e))return"Blackberry";if(Oc(e))return"Webos";if(gs(e))return"Safari";if((e.includes("chrome/")||Cc(e))&&!e.includes("edge/"))return"Chrome";if(Nc(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ac(t=le()){return/firefox\//i.test(t)}function gs(t=le()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cc(t=le()){return/crios\//i.test(t)}function Rc(t=le()){return/iemobile/i.test(t)}function Nc(t=le()){return/android/i.test(t)}function Dc(t=le()){return/blackberry/i.test(t)}function Oc(t=le()){return/webos/i.test(t)}function Pr(t=le()){return/iphone|ipad|ipod/i.test(t)}function Bm(t=le()){var e;return Pr(t)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function zm(){return kr()&&document.documentMode===10}function Mc(t=le()){return Pr(t)||Nc(t)||Oc(t)||Dc(t)||/windows phone/i.test(t)||Rc(t)}function Hm(){try{return!!(window&&window!==window.top)}catch(t){return!1}}function Pc(t,e=[]){let n;switch(t){case"Browser":n=Lc(le());break;case"Worker":n=`${Lc(le())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ct}/${r}`}var Uc=class{constructor(e,n){this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vs(this),this.idTokenSubscription=new vs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.redirectInitializerError=null,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yc,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tt(n)),this._initializationPromise=this.queue(async()=>{var r;this._deleted||(this.persistenceManager=await en.create(this,e),!this._deleted&&(((r=this._popupRedirectResolver)===null||r===void 0?void 0:r._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(n),!this._deleted&&(this._isInitialized=!0)))}),this._initializationPromise.then(()=>{if(this.redirectInitializerError)throw this.redirectInitializerError})}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var n;let r=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=r==null?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===s)&&(o==null?void 0:o.user)&&(r=o.user)}return r?r._redirectEventId?(j(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)):this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){this.redirectInitializerError=r,await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lr(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rm()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let n=e?Ve(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(tt(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&tt(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=await en.create(this,[tt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next,o=this._isInitialized?Promise.resolve():this._initializationPromise;return j(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}};function ys(t){return Ve(t)}var vs=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=dc(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _s=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return et("not implemented")}_getIdTokenResponse(e){return et("not implemented")}_linkToIdToken(e,n){return et("not implemented")}_getReauthenticationResolver(e){return et("not implemented")}};async function tn(t,e){return Lm(t,"POST","/v1/accounts:signInWithIdp",Om(t,e))}var Km="http://localhost",xn=class extends _s{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){let n=new xn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ze("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Er(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new xn(r,i);return Object.assign(o,s),o}_getIdTokenResponse(e){let n=this.buildRequest();return tn(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,tn(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,tn(e,n)}buildRequest(){let e={requestUri:Km,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qt(n)}return e}};var Ur=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ws=class extends Ur{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var He=class extends ws{constructor(){super("google.com");this.addScope("profile")}static credential(e,n){return xn._fromParams({providerId:He.PROVIDER_ID,signInMethod:He.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return He.credentialFromTaggedObject(e)}static credentialFromError(e){return He.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return He.credential(n,r)}catch(i){return null}}};He.GOOGLE_SIGN_IN_METHOD="google.com";He.PROVIDER_ID="google.com";var Rt=class{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let s=await ft._fromIdTokenResponse(e,r,i),o=xc(r);return new Rt({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=xc(r);return new Rt({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function xc(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Vn=class extends On{constructor(e,n,r,i){var s;super(n.code,n.message);this.operationType=r,this.user=i,this.name="FirebaseError",Object.setPrototypeOf(this,Vn.prototype),this.appName=e.name,this.code=n.code,this.tenantId=(s=e.tenantId)!==null&&s!==void 0?s:void 0,this.serverResponse=n.customData.serverResponse}static _fromErrorAndOperation(e,n,r,i){return new Vn(e,n,r,i)}};function Vc(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Vn._fromErrorAndOperation(t,s,e,r):s})}async function Gm(t,e,n=!1){let r=await Un(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Rt._forOperation(t,"link",r)}async function Wm(t,e,n=!1){let{auth:r}=t,i="reauthenticate";try{let s=await Un(t,Vc(r,i,e,t),n);j(s.idToken,r,"internal-error");let o=ds(s.idToken);j(o,r,"internal-error");let{sub:a}=o;return j(t.uid===a,r,"user-mismatch"),Rt._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ze(r,"user-mismatch"),s}}async function Xm(t,e,n=!1){let r="signIn",i=await Vc(t,r,e),s=await Rt._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Fc(t,e,n,r){return Ve(t).onAuthStateChanged(e,n,r)}function $c(t){return Ve(t).signOut()}var Qm="@firebase/auth-exp",Ym="0.0.900-exp.d92a36260";var jc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{var i;e(((i=r)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Jm(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Zm(t){At(new at("auth-exp",(e,{options:n})=>{let r=e.getProvider("app-exp").getImmediate(),{apiKey:i,authDomain:s}=r.options;return(o=>{j(i&&!i.includes(":"),"invalid-api-key",{appName:o.name}),j(!(s==null?void 0:s.includes(":")),"argument-error",{appName:o.name});let a={apiKey:i,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pc(t)},c=new Uc(o,a);return km(c,n),c})(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),At(new at("auth-internal",e=>{let n=ys(e.getProvider("auth-exp").getImmediate());return(r=>new jc(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lt(Qm,Ym,Jm(t))}var xr="__sak";var Es=class{constructor(e,n){this.storage=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xr,"1"),this.storage.removeItem(xr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}};function eg(){let t=le();return gs(t)||Pr(t)}var tg=1e3,ng=10,bs=class extends Es{constructor(){super(window.localStorage,"LOCAL");this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=eg()&&Hm(),this.fallbackToPolling=Mc(),this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}let r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}let i=()=>{let o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);zm()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ng):i()}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},tg)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){let n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}};bs.type="LOCAL";var rg=bs;function ig(t){return Promise.all(t.map(async e=>{try{let n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}var Fn=class{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;let r=new Fn(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o==null?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});let a=Array.from(o).map(async l=>l(n.origin,s)),c=await ig(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};Fn.receivers=[];function sg(t="",e=20){return`${t}${Math.floor(Math.random()*Math.pow(10,e))}`}var qc=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=sg();i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function We(){return window}function og(t){We().location.href=t}function Bc(){return typeof We().WorkerGlobalScope!="undefined"&&typeof We().importScripts=="function"}async function ag(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function cg(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lg(){return Bc()?self:null}var zc="firebaseLocalStorageDb",ug=1,Vr="firebaseLocalStorage",Hc="fbase_key",nn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Fr(t,e){return t.transaction([Vr],e?"readwrite":"readonly").objectStore(Vr)}function hg(){let t=indexedDB.deleteDatabase(zc);return new nn(t).toPromise()}function Ts(){let t=indexedDB.open(zc,ug);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Vr,{keyPath:Hc})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;if(r.objectStoreNames.contains(Vr))e(r);else return await hg(),Ts()})})}async function Kc(t,e,n){let r=Fr(t,!0).put({[Hc]:e,value:n});return new nn(r).toPromise()}async function fg(t,e){let n=Fr(t,!1).get(e),r=await new nn(n).toPromise();return r===void 0?null:r.value}function Gc(t,e){let n=Fr(t,!0).delete(e);return new nn(n).toPromise()}var dg=800,pg=3,Is=class{constructor(){this.type="LOCAL",this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ts(),this.db)}async _withRetries(e){let n=0;for(;;)try{let r=await this._openDb();return await e(r)}catch(r){if(n++>pg)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fn._getInstance(lg()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ag(),!this.activeServiceWorker)return;this.sender=new qc(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cg()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Ts();return await Kc(e,xr,"1"),await Gc(e,xr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kc(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){let n=await this._withRetries(r=>fg(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gc(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(i=>{let s=Fr(i,!1).getAll();return new nn(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;for(let{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(let i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dg)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Is.type="LOCAL";var mg=Is;var gg=10*60*1e3,Wc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vg(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Qc(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gg&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xc(e))}saveEventToCache(e){this.cachedEventUids.add(Xc(e)),this.lastProcessedEventTime=Date.now()}};function Xc(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Qc({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vg(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qc(t);default:return!1}}function yg(t){return`${t||""}${Math.floor(Math.random()*1e9)}`}async function _g(t){return Or(t,"GET","/v1/projects",{})}var wg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Eg=/^https?/;async function Tg(t){if(t.config.emulator)return;let{authorizedDomains:e}=await _g(t);for(let n of e)try{if(bg(n))return}catch(r){}Ze(t,"unauthorized-domain")}function bg(t){let e=ls(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Eg.test(n))return!1;if(wg.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}function Ig(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Sg(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n,r.type="text/javascript",r.charset="UTF-8",Ig().appendChild(r)})}function kg(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Ag=new Jt(3e4,6e4);function Yc(){let t=We().___jsl;if(t==null?void 0:t.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Cg(t){return new Promise((e,n)=>{var r,i,s;function o(){Yc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yc(),n(Yt(t,"network-request-failed"))},timeout:Ag.get()})}if((i=(r=We().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0?void 0:i.Iframe)e(gapi.iframes.getContext());else if((s=We().gapi)===null||s===void 0?void 0:s.load)o();else{let a=kg("iframefcb");return We()[a]=()=>{gapi.load?o():n(Yt(t,"network-request-failed"))},Sg(`https://apis.google.com/js/api.js?onload=${a}`)}}).catch(e=>{throw $r=null,e})}var $r=null;function Rg(t){return $r=$r||Cg(t),$r}var Ng=new Jt(5e3,15e3),Dg="__/auth/iframe",Og="emulator/auth/iframe",Lg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Mg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pg(t){let e=t.config;j(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?us(e,Og):`https://${t.config.authDomain}/${Dg}`,r={apiKey:e.apiKey,appName:t.name,v:Ct},i=Mg.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qt(r).slice(1)}`}async function Ug(t){let e=await Rg(t),n=We().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:Pg(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lg,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Yt(t,"network-request-failed"),a=We().setTimeout(()=>{s(o)},Ng.get());function c(){We().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var Ss=class extends Es{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}};Ss.type="SESSION";var xg=Ss;var Vg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Fg=500,$g=600,jg="_blank",qg="http://localhost",ks=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}};function zg(t,e,n,r=Fg,i=$g){let s=Math.min((window.screen.availHeight-i)/2,0).toString(),o=Math.min((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Vg),{width:r.toString(),height:i.toString(),top:s,left:o}),l=le().toLowerCase();n&&(a=Cc(l)?jg:n),Ac(l)&&(e=e||qg,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[d,m])=>`${f}${d}=${m},`,"");if(Bm(l)&&a!=="_self")return Bg(e||"",a),new ks(null);let h=window.open(e||"",a,u);j(h,t,"popup-blocked");try{h.focus()}catch(f){}return new ks(h)}function Bg(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}function Jc(t,e){return e?tt(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var jr=class extends _s{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return tn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return tn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return tn(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Hg(t){return Xm(t.auth,new jr(t),t.bypassAuthState)}function Kg(t){let{auth:e,user:n}=t;return j(n,e,"internal-error"),Wm(n,new jr(t),t.bypassAuthState)}async function Gg(t){let{auth:e,user:n}=t;return j(n,e,"internal-error"),Gm(n,new jr(t),t.bypassAuthState)}var Zc=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hg;case"linkViaPopup":case"linkViaRedirect":return Gg;case"reauthViaPopup":case"reauthViaRedirect":return Kg;default:Ze(this.auth,"internal-error")}}resolve(e){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Wg="pendingRedirect",el=new Map,tl=class extends Zc{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r);this.eventId=null}async execute(){let e=el.get(this.auth._key());if(!e){try{let r=await Xg(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}el.set(this.auth._key(),e)}return e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Xg(t,e){let n=nl(e),r=await As(t)._get(n)==="true";return await As(t)._remove(n),r}async function Qg(t,e){return As(t)._set(nl(e),"true")}function As(t){return tt(t._redirectPersistence)}function nl(t){return Mr(Wg,t.config.apiKey,t.name)}function rl(t,e,n){return Yg(t,e,n)}async function Yg(t,e,n){let r=ys(t);j(e instanceof Ur,t,"argument-error");let i=Jc(r,n);return await Qg(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Jg(t,e,n=!1){let r=ys(t),i=Jc(r,e),o=await new tl(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var Zg="__/auth/handler",ev="emulator/auth/handler";function il(t,e,n,r,i,s){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ct,eventId:i};if(e instanceof Ur){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",fc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[c,l]of Object.entries(s||{}))o[c]=l}if(e instanceof ws){let c=e.getScopes().filter(l=>l!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let c of Object.keys(a))a[c]===void 0&&delete a[c];return`${tv(t)}?${Qt(a).slice(1)}`}function tv({config:t}){return t.emulator?us(t,ev):`https://${t.authDomain}/${Zg}`}var Cs="webStorageSupport",sl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xg,this._completeRedirectFn=Jg}async _openPopup(e,n,r,i){var s;ut((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=il(e,n,r,ls(),i);return zg(e,o,yg())}async _openRedirect(e,n,r,i){return await this._originValidation(e),og(il(e,n,r,ls(),i)),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ut(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r}async initAndGetManager(e){let n=await Ug(e),r=new Wc(e);return n.register("authEvent",i=>(j(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cs,{type:Cs},i=>{var s;let o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Cs];o!==void 0&&n(!!o),Ze(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Tg(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Mc()||gs()||Pr()}},nv=sl,hE=new Jt(3e4,6e4);var fE=new Jt(2e3,1e4);function ol(t=Rr()){let e=Mn(t,"auth-exp");return e.isInitialized()?e.getImmediate():Sm(t,{popupRedirectResolver:nv,persistence:[mg,rg]})}Zm("Browser");var qr=typeof qr!="undefined"?qr:typeof self!="undefined"?self:typeof window!="undefined"?window:{};var Rs=function(t,e){return Rs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Rs(t,e)};function rv(t,e){Rs(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function al(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var iv=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof qr!="undefined"?qr:typeof self!="undefined"?self:{},N,Ns=Ns||{},q=iv||self;function Br(){}function Ds(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function $n(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function ov(t){return Object.prototype.hasOwnProperty.call(t,Os)&&t[Os]||(t[Os]=++sv)}var Os="closure_uid_"+(1e9*Math.random()>>>0),sv=0;function av(t,e,n){return t.call.apply(t.bind,arguments)}function cv(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Te(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Te=av:Te=cv,Te.apply(null,arguments)}function zr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Xe(){return Date.now()}function Ce(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function dt(){this.j=this.j,this.i=this.i}var lv=0;dt.prototype.j=!1;dt.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),lv!=0))var t=ov(this)};dt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var cl=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ll=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=typeof t=="string"?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function hv(t){e:{for(var e=uv,n=t.length,r=typeof t=="string"?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function ul(t){return Array.prototype.concat.apply([],arguments)}function Ls(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Hr(t){return/^[\s\xa0]*$/.test(t)}var hl=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Re(t,e){return t.indexOf(e)!=-1}function Ms(t,e){return t<e?-1:t>e?1:0}var Ne;e:{if(Ps=q.navigator,Ps&&(Us=Ps.userAgent,Us)){Ne=Us;break e}Ne=""}var Ps,Us;function xs(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function fl(t){var e={};for(var n in t)e[n]=t[n];return e}var dl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pl(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var s=0;s<dl.length;s++)n=dl[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Vs(t){return Vs[" "](t),t}Vs[" "]=Br;function dv(t,e){var n=fv;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var pv=Re(Ne,"Opera"),pt=Re(Ne,"Trident")||Re(Ne,"MSIE"),ml=Re(Ne,"Edge"),Fs=ml||pt,gl=Re(Ne,"Gecko")&&!(Re(Ne.toLowerCase(),"webkit")&&!Re(Ne,"Edge"))&&!(Re(Ne,"Trident")||Re(Ne,"MSIE"))&&!Re(Ne,"Edge"),mv=Re(Ne.toLowerCase(),"webkit")&&!Re(Ne,"Edge");function vl(){var t=q.document;return t?t.documentMode:void 0}var Kr;e:{if(Gr="",Wr=function(){var t=Ne;if(gl)return/rv:([^\);]+)(\)|;)/.exec(t);if(ml)return/Edge\/([\d\.]+)/.exec(t);if(pt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(mv)return/WebKit\/(\S+)/.exec(t);if(pv)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Wr&&(Gr=Wr?Wr[1]:""),pt&&(Xr=vl(),Xr!=null&&Xr>parseFloat(Gr))){Kr=String(Xr);break e}Kr=Gr}var Gr,Wr,Xr,fv={};function yl(t){return dv(t,function(){for(var e=0,n=hl(String(Kr)).split("."),r=hl(String(t)).split("."),i=Math.max(n.length,r.length),s=0;e==0&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o[0].length==0&&a[0].length==0)break;e=Ms(o[1].length==0?0:parseInt(o[1],10),a[1].length==0?0:parseInt(a[1],10))||Ms(o[2].length==0,a[2].length==0)||Ms(o[2],a[2]),o=o[3],a=a[3]}while(e==0)}return 0<=e})}var $s;q.document&&pt?(js=vl(),$s=js||parseInt(Kr,10)||void 0):$s=void 0;var js,_l=$s,qs=!pt||9<=Number(_l),gv=pt&&!yl("9"),vv=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{q.addEventListener("test",Br,e),q.removeEventListener("test",Br,e)}catch(n){}return t}();function Ie(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}Ie.prototype.b=function(){this.defaultPrevented=!0};function jn(t,e){if(Ie.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(gl){e:{try{Vs(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:yv[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ce(jn,Ie);var yv={2:"touch",3:"pen",4:"mouse"};jn.prototype.b=function(){jn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,gv)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var qn="closure_listenable_"+(1e6*Math.random()|0),_v=0;function wv(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++_v,this.Y=this.Z=!1}function Qr(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Yr(t){this.src=t,this.a={},this.b=0}Yr.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.a[s],t||(t=this.a[s]=[],this.b++);var o=Bs(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):(e=new wv(e,this.src,s,!!r,i),e.Z=n,t.push(e)),e};function zs(t,e){var n=e.type;if(n in t.a){var r=t.a[n],i=cl(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Qr(e),t.a[n].length==0&&(delete t.a[n],t.b--))}}function Bs(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.ca==r)return i}return-1}var Hs="closure_lm_"+(1e6*Math.random()|0),Ks={};function Gs(t,e,n,r,i){if(r&&r.once)return El(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Gs(t,e[s],n,r,i);return null}return n=Ws(n),t&&t[qn]?t.va(e,n,$n(r)?!!r.capture:!!r,i):wl(t,e,n,!1,r,i)}function wl(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=$n(i)?!!i.capture:!!i;if(o&&!qs)return null;var a=Xs(t);if(a||(t[Hs]=a=new Yr(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=Ev(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)vv||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(bl(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Ev(){var t=bv,e=qs?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function El(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)El(t,e[s],n,r,i);return null}return n=Ws(n),t&&t[qn]?t.wa(e,n,$n(r)?!!r.capture:!!r,i):wl(t,e,n,!0,r,i)}function Tl(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Tl(t,e[s],n,r,i);else r=$n(r)?!!r.capture:!!r,n=Ws(n),t&&t[qn]?(t=t.c,e=String(e).toString(),e in t.a&&(s=t.a[e],n=Bs(s,n,r,i),-1<n&&(Qr(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.a[e],t.b--)))):t&&(t=Xs(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Bs(e,n,r,i)),(n=-1<t?e[t]:null)&&Qs(n))}function Qs(t){if(typeof t!="number"&&t&&!t.Y){var e=t.src;if(e&&e[qn])zs(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bl(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Xs(e))?(zs(n,t),n.b==0&&(n.src=null,e[Hs]=null)):Qr(t)}}}function bl(t){return t in Ks?Ks[t]:Ks[t]="on"+t}function Il(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Qs(t),n.call(r,e)}function bv(t,e){if(t.Y)return!0;if(!qs){if(!e)e:{e=["window","event"];for(var n=q,r=0;r<e.length;r++)if(n=n[e[r]],n==null){e=null;break e}e=n}return e=new jn(e,this),Il(t,e)}return Il(t,new jn(e,this))}function Xs(t){return t=t[Hs],t instanceof Yr?t:null}var Ys="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ws(t){return typeof t=="function"?t:(t[Ys]||(t[Ys]=function(e){return t.handleEvent(e)}),t[Ys])}function Fe(){dt.call(this),this.c=new Yr(this),this.J=this,this.C=null}Ce(Fe,dt);Fe.prototype[qn]=!0;N=Fe.prototype;N.addEventListener=function(t,e,n,r){Gs(this,t,e,n,r)};N.removeEventListener=function(t,e,n,r){Tl(this,t,e,n,r)};function ye(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,typeof e=="string")e=new Ie(e,t);else if(e instanceof Ie)e.target=e.target||t;else{var i=e;e=new Ie(r,t),pl(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=Jr(o,r,!0,e)&&i}if(o=e.a=t,i=Jr(o,r,!0,e)&&i,i=Jr(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.a=n[s],i=Jr(o,r,!1,e)&&i}N.G=function(){if(Fe.X.G.call(this),this.c){var t=this.c,e;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Qr(n[r]);delete t.a[e],t.b--}}this.C=null};N.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)};N.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};function Jr(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,c=o.ca||o.src;o.Z&&zs(t.c,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Js=q.JSON.stringify;function Sl(){this.b=this.a=null}var kl=new(function(){function t(e,n){this.c=e,this.f=n,this.b=0,this.a=null}return t.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},t}())(function(){return new Zs},function(t){t.reset()});Sl.prototype.add=function(t,e){var n=kl.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n};function Tv(){var t=Al,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Zs(){this.next=this.b=this.a=null}Zs.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};Zs.prototype.reset=function(){this.next=this.b=this.a=null};function Iv(t){q.setTimeout(function(){throw t},0)}function Cl(t,e){eo||Sv(),to||(eo(),to=!0),Al.add(t,e)}var eo;function Sv(){var t=q.Promise.resolve(void 0);eo=function(){t.then(kv)}}var to=!1,Al=new Sl;function kv(){for(var t;t=Tv();){try{t.a.call(t.b)}catch(n){Iv(n)}var e=kl;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}to=!1}function Zr(t,e){Fe.call(this),this.b=t||1,this.a=e||q,this.f=Te(this.Za,this),this.g=Xe()}Ce(Zr,Fe);N=Zr.prototype;N.aa=!1;N.M=null;N.Za=function(){if(this.aa){var t=Xe()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ye(this,"tick"),this.aa&&(no(this),this.start()))}};N.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Xe())};function no(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}N.G=function(){Zr.X.G.call(this),no(this),delete this.a};function ro(t,e,n){if(typeof t=="function")n&&(t=Te(t,n));else if(t&&typeof t.handleEvent=="function")t=Te(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:q.setTimeout(t,e||0)}function Rl(t){t.a=ro(function(){t.a=null,t.c&&(t.c=!1,Rl(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}var Av=function(t){rv(e,t);function e(n,r){var i=t.call(this)||this;return i.g=n,i.h=r,i.b=null,i.c=!1,i.a=null,i}return e.prototype.f=function(n){this.b=arguments,this.a?this.c=!0:Rl(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(q.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(dt);function Bn(t){dt.call(this),this.b=t,this.a={}}Ce(Bn,dt);var Nl=[];function Dl(t,e,n,r){Array.isArray(n)||(n&&(Nl[0]=n.toString()),n=Nl);for(var i=0;i<n.length;i++){var s=Gs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Ol(t){xs(t.a,function(e,n){this.a.hasOwnProperty(n)&&Qs(e)},t),t.a={}}Bn.prototype.G=function(){Bn.X.G.call(this),Ol(this)};Bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function io(){this.a=!0}function Cv(t,e,n,r,i,s){t.info(function(){if(t.a)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Rv(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function rn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Nv(t,n)+(r?" "+r:"")})}function Dv(t,e){t.info(function(){return"TIMEOUT: "+e})}io.prototype.info=function(){};function Nv(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Js(n)}catch(a){return e}}var Nt={},Ll=null;function ei(){return Ll=Ll||new Fe}Nt.Fa="serverreachability";function Ml(t){Ie.call(this,Nt.Fa,t)}Ce(Ml,Ie);function zn(t){var e=ei();ye(e,new Ml(e,t))}Nt.STAT_EVENT="statevent";function Pl(t,e){Ie.call(this,Nt.STAT_EVENT,t),this.stat=e}Ce(Pl,Ie);function De(t){var e=ei();ye(e,new Pl(e,t))}Nt.Ga="timingevent";function Ul(t){Ie.call(this,Nt.Ga,t)}Ce(Ul,Ie);function Hn(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){t()},e)}var ti={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},xl={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Vl(){}Vl.prototype.a=null;function Fl(t){var e;return(e=t.a)||(e=t.a={}),e}function $l(){}var Kn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function so(){Ie.call(this,"d")}Ce(so,Ie);function oo(){Ie.call(this,"c")}Ce(oo,Ie);var jl;function ql(){}Ce(ql,Vl);jl=new ql;function Gn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Bn(this),this.P=Ov,t=Fs?125:void 0,this.R=new Zr(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}var Ov=45e3,Bl={},ao={};N=Gn.prototype;N.setTimeout=function(t){this.P=t};function co(t,e,n){t.H=1,t.i=ni(nt(e)),t.j=n,t.I=!0,zl(t,null)}function zl(t,e){t.u=Xe(),Wn(t),t.l=nt(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Hl(n.b,"t",r),t.D=0,t.a=Kl(t.g,t.g.C?e:null),0<t.O&&(t.F=new Av(Te(t.Ca,t,t.a),t.O)),Dl(t.J,t.a,"readystatechange",t.Xa),e=t.B?fl(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),zn(1),Cv(t.c,t.m,t.l,t.f,t.S,t.j)}N.Xa=function(t){t=t.target;var e=this.F;e&&mt(t)==3?e.f():this.Ca(t)};N.Ca=function(t){try{if(t==this.a)e:{var e=mt(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||e==3&&!Fs&&!this.a.$())){this.A||e!=4||n==7||(n==8||0>=r?zn(3):zn(2)),ri(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=i==200,Rv(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){t:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hr(o)){var c=o;break t}}c=null}if(c)rn(this.c,this.f,c,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,lo(this,c);else{this.b=!1,this.h=3,De(12),sn(this),ii(this);break e}}this.I?(Gl(this,e,s),Fs&&this.b&&e==3&&(Dl(this.J,this.R,"tick",this.Wa),this.R.start())):(rn(this.c,this.f,s,null),lo(this,s)),e==4&&sn(this),this.b&&!this.A&&(e==4?Wl(this.g,this):(this.b=!1,Wn(this)))}else i==400&&0<s.indexOf("Unknown SID")?(this.h=3,De(12)):(this.h=0,De(13)),sn(this),ii(this)}}}catch(l){}finally{}};function Gl(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Lv(t,n);if(i==ao){e==4&&(t.h=4,De(14),r=!1),rn(t.c,t.f,null,"[Incomplete Response]");break}else if(i==Bl){t.h=4,De(15),rn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}else rn(t.c,t.f,i,null),lo(t,i)}e==4&&n.length==0&&(t.h=1,De(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,e=t.g,e.a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),uo(e),e.F=!0,De(11))):(rn(t.c,t.f,n,"[Invalid Chunked Response]"),sn(t),ii(t))}N.Wa=function(){if(this.a){var t=mt(this.a),e=this.a.$();this.D<e.length&&(ri(this),Gl(this,t,e),this.b&&t!=4&&Wn(this))}};function Lv(t,e){var n=t.D,r=e.indexOf(`
`,n);return r==-1?ao:(n=Number(e.substring(n,r)),isNaN(n)?Bl:(r+=1,r+n>e.length?ao:(e=e.substr(r,n),t.D=r+n,e)))}N.cancel=function(){this.A=!0,sn(this)};function Wn(t){t.T=Xe()+t.P,Xl(t,t.P)}function Xl(t,e){if(t.o!=null)throw Error("WatchDog timer not null");t.o=Hn(Te(t.Va,t),e)}function ri(t){t.o&&(q.clearTimeout(t.o),t.o=null)}N.Va=function(){this.o=null;var t=Xe();0<=t-this.T?(Dv(this.c,this.l),this.H!=2&&(zn(3),De(17)),sn(this),this.h=2,ii(this)):Xl(this,this.T-t)};function ii(t){t.g.v==0||t.A||Wl(t.g,t)}function sn(t){ri(t);var e=t.F;e&&typeof e.ja=="function"&&e.ja(),t.F=null,no(t.R),Ol(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function lo(t,e){try{var n=t.g;if(n.v!=0&&(n.a==t||ho(n.b,t))){if(n.I=t.N,!t.C&&ho(n.b,t)&&n.v==3){try{var r=n.ka.a.parse(e)}catch(b){r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0)e:if(!n.j){if(n.a)if(n.a.u+3e3<t.u)ai(n),si(n);else break e;mo(n),De(18)}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&n.o==0&&!n.m&&(n.m=Hn(Te(n.Sa,n),6e3));if(1>=Ql(n.b)&&n.ea){try{n.ea()}catch(b){}n.ea=void 0}}else Dt(n,11)}else if((t.C||n.a==t)&&ai(n),!Hr(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],n.v==2)if(i[0]=="c"){n.J=i[1],n.ga=i[2];var s=i[3];s!=null&&(n.ha=s,n.c.info("VER="+n.ha));var o=i[4];o!=null&&(n.pa=o,n.c.info("SVER="+n.pa));var a=i[5];if(a!=null&&typeof a=="number"&&0<a){var c=1.5*a;n.D=c,n.c.info("backChannelRequestTimeoutMs_="+c)}c=n;var l=t.a;if(l){var u=l.a?l.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var h=c.b;!h.a&&(Re(u,"spdy")||Re(u,"quic")||Re(u,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(fo(h,h.b),h.b=null))}if(c.A){var f=l.a?l.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(c.na=f,re(c.B,c.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Xe()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),c=n;var d=t;if(c.la=Zl(c,c.C?c.ga:null,c.fa),d.C){Yl(c.b,d);var m=d,p=c.D;p&&m.setTimeout(p),m.o&&(ri(m),Wn(m)),c.a=d}else Jl(c);0<n.g.length&&oi(n)}else i[0]!="stop"&&i[0]!="close"||Dt(n,7);else n.v==3&&(i[0]=="stop"||i[0]=="close"?i[0]=="stop"?Dt(n,7):po(n):i[0]!="noop"&&n.f&&n.f.sa(i),n.o=0)}zn(4)}catch(b){}}function Mv(t){if(t.K&&typeof t.K=="function")return t.K();if(typeof t=="string")return t.split("");if(Ds(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return t=e}function go(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ds(t)||typeof t=="string")ll(t,e,void 0);else{if(t.L&&typeof t.L=="function")var n=t.L();else if(t.K&&typeof t.K=="function")n=void 0;else if(Ds(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=Mv(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function on(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof on)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}N=on.prototype;N.K=function(){vo(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t};N.L=function(){return vo(this),this.a.concat()};function vo(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ot(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Ot(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}N.get=function(t,e){return Ot(this.b,t)?this.b[t]:e};N.set=function(t,e){Ot(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e};N.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function Ot(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var eu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pv(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Lt(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Lt){this.a=e!==void 0?e:t.a,ci(this,t.f),this.j=t.j,li(this,t.c),ui(this,t.h),this.g=t.g,e=t.b;var n=new Qn;n.c=e.c,e.a&&(n.a=new on(e.a),n.b=e.b),tu(this,n),this.i=t.i}else t&&(n=String(t).match(eu))?(this.a=!!e,ci(this,n[1]||"",!0),this.j=Xn(n[2]||""),li(this,n[3]||"",!0),ui(this,n[4]),this.g=Xn(n[5]||"",!0),tu(this,n[6]||"",!0),this.i=Xn(n[7]||"")):(this.a=!!e,this.b=new Qn(null,this.a))}Lt.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Yn(e,nu,!0),":");var n=this.c;return(n||e=="file")&&(t.push("//"),(e=this.j)&&t.push(Yn(e,nu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,n!=null&&t.push(":",String(n))),(n=this.g)&&(this.c&&n.charAt(0)!="/"&&t.push("/"),t.push(Yn(n,n.charAt(0)=="/"?xv:Uv,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Yn(n,Vv)),t.join("")};function nt(t){return new Lt(t)}function ci(t,e,n){t.f=n?Xn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function li(t,e,n){t.c=n?Xn(e,!0):e}function ui(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function tu(t,e,n){e instanceof Qn?(t.b=e,$v(t.b,t.a)):(n||(e=Yn(e,Fv)),t.b=new Qn(e,t.a))}function re(t,e,n){t.b.set(e,n)}function ni(t){return re(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Xe()).toString(36)),t}function jv(t){return t instanceof Lt?nt(t):new Lt(t,void 0)}function qv(t,e,n,r){var i=new Lt(null,void 0);return t&&ci(i,t),e&&li(i,e),n&&ui(i,n),r&&(i.g=r),i}function Xn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Yn(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Bv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bv(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var nu=/[#\/\?@]/g,Uv=/[#\?:]/g,xv=/[#\?]/g,Fv=/[#\?@]/g,Vv=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function gt(t){t.a||(t.a=new on,t.b=0,t.c&&Pv(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=Qn.prototype;N.add=function(t,e){gt(this),this.c=null,t=an(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this};function ru(t,e){gt(t),e=an(t,e),Ot(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Ot(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&vo(t)))}function iu(t,e){return gt(t),e=an(t,e),Ot(t.a.b,e)}N.forEach=function(t,e){gt(this),this.a.forEach(function(n,r){ll(n,function(i){t.call(e,i,r,this)},this)},this)};N.L=function(){gt(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};N.K=function(t){gt(this);var e=[];if(typeof t=="string")iu(this,t)&&(e=ul(e,this.a.get(an(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=ul(e,t[n])}return e};N.set=function(t,e){return gt(this),this.c=null,t=an(this,t),iu(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this};N.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e};function Hl(t,e,n){ru(t,e),0<n.length&&(t.c=null,t.a.set(an(t,e),Ls(n)),t.b+=n.length)}N.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};function an(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function $v(t,e){e&&!t.f&&(gt(t),t.c=null,t.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(ru(this,r),Hl(this,i,n))},t)),t.f=e}var zv=function(){function t(e,n){this.b=e,this.a=n}return t}();function su(t){this.g=t||Hv,q.PerformanceNavigationTiming?(t=q.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(q.ia&&q.ia.ya&&q.ia.ya()&&q.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Hv=10;function ou(t){return t.b?!0:t.a?t.a.size>=t.f:!1}function Ql(t){return t.b?1:t.a?t.a.size:0}function ho(t,e){return t.b?t.b==e:t.a?t.a.has(e):!1}function fo(t,e){t.a?t.a.add(e):t.b=e}function Yl(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}su.prototype.cancel=function(){var t,e;if(this.c=au(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&this.a.size!==0){try{for(var n=al(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}};function au(t){var e,n;if(t.b!=null)return t.c.concat(t.b.s);if(t.a!=null&&t.a.size!==0){var r=t.c;try{for(var i=al(t.a.values()),s=i.next();!s.done;s=i.next()){var o=s.value;r=r.concat(o.s)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ls(t.c)}function yo(){}yo.prototype.stringify=function(t){return q.JSON.stringify(t,void 0)};yo.prototype.parse=function(t){return q.JSON.parse(t,void 0)};function Kv(){this.a=new yo}function Gv(t,e,n){var r=n||"";try{go(t,function(i,s){var o=i;$n(i)&&(o=Js(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wv(t,e){var n=new io;if(q.Image){var r=new Image;r.onload=zr(hi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zr(hi,n,r,"TestLoadImage: error",!1,e),r.onabort=zr(hi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zr(hi,n,r,"TestLoadImage: timeout",!1,e),q.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function hi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}var Xv=q.JSON.parse;function ue(t){Fe.call(this),this.headers=new on,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Qv,this.D=this.F=!1}Ce(ue,Fe);var Qv="",Yv=/^https?$/i,Jv=["POST","PUT"];N=ue.prototype;N.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Fl(this.H):Fl(jl),this.a.onreadystatechange=Te(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(s){cu(this,s);return}t=n||"";var i=new on(this.headers);r&&go(r,function(s,o){i.set(o,s)}),r=hv(i.L()),n=q.FormData&&t instanceof q.FormData,!(0<=cl(Jv,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.a.setRequestHeader(o,s)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{lu(this),0<this.o&&((this.D=Zv(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Te(this.xa,this)):this.m=ro(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(s){cu(this,s)}};function Zv(t){return pt&&yl(9)&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function uv(t){return t.toLowerCase()=="content-type"}N.xa=function(){typeof Ns!="undefined"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ye(this,"timeout"),this.abort(8))};function cu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,uu(t),fi(t)}function uu(t){t.u||(t.u=!0,ye(t,"complete"),ye(t,"error"))}N.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ye(this,"complete"),ye(this,"abort"),fi(this))};N.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),fi(this,!0)),ue.X.G.call(this)};N.za=function(){this.j||(this.A||this.l||this.g?hu(this):this.Ua())};N.Ua=function(){hu(this)};function hu(t){if(t.b&&typeof Ns!="undefined"&&(!t.s[1]||mt(t)!=4||t.W()!=2)){if(t.l&&mt(t)==4)ro(t.za,0,t);else if(ye(t,"readystatechange"),mt(t)==4){t.b=!1;try{{var e=t.W();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=e===0){var s=String(t.B).match(eu)[1]||null;if(!s&&q.self&&q.self.location){var o=q.self.location.protocol;s=o.substr(0,o.length-1)}i=!Yv.test(s?s.toLowerCase():"")}r=i}var a=r}if(a)ye(t,"complete"),ye(t,"success");else{t.h=6;try{var c=2<mt(t)?t.a.statusText:""}catch(l){c=""}t.f=c+" ["+t.W()+"]",uu(t)}}finally{fi(t)}}}}function fi(t,e){if(t.a){lu(t);var n=t.a,r=t.s[0]?Br:null;t.a=null,t.s=null,e||ye(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function lu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(q.clearTimeout(t.m),t.m=null)}function mt(t){return t.a?t.a.readyState:0}N.W=function(){try{return 2<mt(this)?this.a.status:-1}catch(t){return-1}};N.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}};N.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Xv(e)}};N.ua=function(){return this.h};N.Qa=function(){return typeof this.f=="string"?this.f:String(this.f)};function ey(t){var e="";return xs(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function _o(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ey(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):re(t,e,n))}function Jn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function fu(t){this.pa=0,this.g=[],this.c=new io,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Jn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Jn("baseRetryDelayMs",5e3,t),this.Ra=Jn("retryDelaySeedMs",1e4,t),this.Ma=Jn("forwardChannelMaxRetries",2,t),this.ma=Jn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new su(t&&t.concurrentRequestLimit),this.ka=new Kv,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}N=fu.prototype;N.ha=8;N.v=1;function po(t){if(du(t),t.v==3){var e=t.R++,n=nt(t.B);re(n,"SID",t.J),re(n,"RID",e),re(n,"TYPE","terminate"),Zn(t,n),e=new Gn(t,t.c,e,void 0),e.H=2,e.i=ni(nt(n)),n=!1,q.navigator&&q.navigator.sendBeacon&&(n=q.navigator.sendBeacon(e.i.toString(),"")),!n&&q.Image&&(new Image().src=e.i,n=!0),n||(e.a=Kl(e.g,null),e.a.ba(e.i)),e.u=Xe(),Wn(e)}pu(t)}function si(t){t.a&&(uo(t),t.a.cancel(),t.a=null)}function du(t){si(t),t.j&&(q.clearTimeout(t.j),t.j=null),ai(t),t.b.cancel(),t.h&&(typeof t.h=="number"&&q.clearTimeout(t.h),t.h=null)}function wo(t,e){t.g.push(new zv(t.Oa++,e)),t.v==3&&oi(t)}function oi(t){ou(t.b)||t.h||(t.h=!0,Cl(t.Ba,t),t.u=0)}function ty(t,e){return Ql(t.b)>=t.b.f-(t.h?1:0)?!1:t.h?(t.g=e.s.concat(t.g),!0):t.v==1||t.v==2||t.u>=(t.La?0:t.Ma)?!1:(t.h=Hn(Te(t.Ba,t,e),mu(t,t.u)),t.u++,!0)}N.Ba=function(t){if(this.h)if(this.h=null,this.v==1){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e=new Gn(this,this.c,t,void 0),n=this.l;this.O&&(n?(n=fl(n),pl(n,this.O)):n=this.O),this.i===null&&(e.B=n);var r;if(this.da)e:{for(var i=r=0;i<this.g.length;i++){t:{var s=this.g[i];if("__data__"in s.a&&(s=s.a.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.g.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=vu(this,e,r),i=nt(this.B),re(i,"RID",t),re(i,"CVER",22),this.A&&re(i,"X-HTTP-Session-Id",this.A),Zn(this,i),this.i&&n&&_o(i,this.i,n),fo(this.b,e),this.Ia&&re(i,"TYPE","init"),this.da?(re(i,"$req",r),re(i,"SID","null"),e.U=!0,co(e,i,null)):co(e,i,r),this.v=2}}else this.v==3&&(t?gu(this,t):this.g.length==0||ou(this.b)||gu(this))};function gu(t,e){var n;e?n=e.f:n=t.R++;var r=nt(t.B);re(r,"SID",t.J),re(r,"RID",n),re(r,"AID",t.P),Zn(t,r),t.i&&t.l&&_o(r,t.i,t.l),n=new Gn(t,t.c,n,t.u+1),t.i===null&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=vu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fo(t.b,n),co(n,r,e)}function Zn(t,e){t.f&&go({},function(n,r){re(e,r,n)})}function vu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Te(t.f.Ja,t.f,t):null;e:for(var i=t.g,s=-1;;){var o=["count="+n];s==-1?0<n?(s=i[0].b,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,c=0;c<n;c++){var l=i[c].b,u=i[c].a;if(l-=s,0>l)s=Math.max(0,i[c].b-100),a=!1;else try{Gv(u,o,"req"+l+"_")}catch(h){r&&r(u)}}if(a){r=o.join("&");break e}}return t=t.g.splice(0,n),e.s=t,r}function Jl(t){t.a||t.j||(t.T=1,Cl(t.Aa,t),t.o=0)}function mo(t){return t.a||t.j||3<=t.o?!1:(t.T++,t.j=Hn(Te(t.Aa,t),mu(t,t.o)),t.o++,!0)}N.Aa=function(){if(this.j=null,yu(this),this.U&&!(this.F||this.a==null||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Hn(Te(this.Ta,this),t)}};N.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,De(10),si(this),yu(this))};function uo(t){t.s!=null&&(q.clearTimeout(t.s),t.s=null)}function yu(t){t.a=new Gn(t,t.c,"rpc",t.T),t.i===null&&(t.a.B=t.l),t.a.O=0;var e=nt(t.la);re(e,"RID","rpc"),re(e,"SID",t.J),re(e,"CI",t.H?"0":"1"),re(e,"AID",t.P),Zn(t,e),re(e,"TYPE","xmlhttp"),t.i&&t.l&&_o(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ni(nt(e)),n.j=null,n.I=!0,zl(n,t)}N.Sa=function(){this.m!=null&&(this.m=null,si(this),mo(this),De(19))};function ai(t){t.m!=null&&(q.clearTimeout(t.m),t.m=null)}function Wl(t,e){var n=null;if(t.a==e){ai(t),uo(t),t.a=null;var r=2}else if(ho(t.b,e))n=e.s,Yl(t.b,e),r=1;else return;if(t.I=e.N,t.v!=0){if(e.b)if(r==1){n=e.j?e.j.length:0,e=Xe()-e.u;var i=t.u;r=ei(),ye(r,new Ul(r,n,e,i)),oi(t)}else Jl(t);else if(i=e.h,i==3||i==0&&0<t.I||!(r==1&&ty(t,e)||r==2&&mo(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Dt(t,5);break;case 4:Dt(t,10);break;case 3:Dt(t,6);break;default:Dt(t,2)}}}function mu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Dt(t,e){if(t.c.info("Error code "+e),e==2){var n=null;t.f&&(n=null);var r=Te(t.Ya,t);n||(n=new Lt("//www.google.com/images/cleardot.gif"),q.location&&q.location.protocol=="http"||ci(n,"https"),ni(n)),Wv(n.toString(),r)}else De(2);t.v=0,t.f&&t.f.ra(e),pu(t),du(t)}N.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),De(2)):(this.c.info("Failed to ping google.com"),De(1))};function pu(t){t.v=0,t.I=-1,t.f&&((au(t.b).length!=0||t.g.length!=0)&&(t.b.c.length=0,Ls(t.g),t.g.length=0),t.f.qa())}function Zl(t,e,n){var r=jv(n);if(r.c!="")e&&li(r,e+"."+r.c),ui(r,r.h);else{var i=q.location;r=qv(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&xs(t.V,function(s,o){re(r,o,s)}),e=t.A,n=t.na,e&&n&&re(r,e,n),re(r,"VER",t.ha),Zn(t,r),r}function Kl(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new ue(t.Na),e.F=t.C,e}function _u(){}N=_u.prototype;N.ta=function(){};N.sa=function(){};N.ra=function(){};N.qa=function(){};N.Ja=function(){};function di(){if(pt&&!(10<=Number(_l)))throw Error("Environmental error: no available transport.")}di.prototype.a=function(t,e){return new $e(t,e)};function $e(t,e){Fe.call(this),this.a=new fu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Hr(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hr(e)&&(this.a.A=e,t=this.b,t!==null&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new cn(this)}Ce($e,Fe);$e.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;De(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Zl(t,null,t.fa),oi(t)};$e.prototype.close=function(){po(this.a)};$e.prototype.h=function(t){if(typeof t=="string"){var e={};e.__data__=t,wo(this.a,e)}else this.l?(e={},e.__data__=Js(t),wo(this.a,e)):wo(this.a,t)};$e.prototype.G=function(){this.a.f=null,delete this.f,po(this.a),delete this.a,$e.X.G.call(this)};function wu(t){so.call(this);var e=t.__sm__;if(e){e:{for(var n in e){t=n;break e}t=void 0}(this.c=t)?(t=this.c,this.data=e!==null&&t in e?e[t]:void 0):this.data=e}else this.data=t}Ce(wu,so);function Eu(){oo.call(this),this.status=1}Ce(Eu,oo);function cn(t){this.a=t}Ce(cn,_u);cn.prototype.ta=function(){ye(this.a,"a")};cn.prototype.sa=function(t){ye(this.a,new wu(t))};cn.prototype.ra=function(t){ye(this.a,new Eu(t))};cn.prototype.qa=function(){ye(this.a,"b")};di.prototype.createWebChannel=di.prototype.a;$e.prototype.send=$e.prototype.h;$e.prototype.open=$e.prototype.g;$e.prototype.close=$e.prototype.close;ti.NO_ERROR=0;ti.TIMEOUT=8;ti.HTTP_ERROR=6;xl.COMPLETE="complete";$l.EventType=Kn;Kn.OPEN="a";Kn.CLOSE="b";Kn.ERROR="c";Kn.MESSAGE="d";Fe.prototype.listen=Fe.prototype.va;ue.prototype.listenOnce=ue.prototype.wa;ue.prototype.getLastError=ue.prototype.Qa;ue.prototype.getLastErrorCode=ue.prototype.ua;ue.prototype.getStatus=ue.prototype.W;ue.prototype.getResponseJson=ue.prototype.Pa;ue.prototype.getResponseText=ue.prototype.$;ue.prototype.send=ue.prototype.ba;var ny=function(){return new di},ry=function(){return ei()},Eo=ti,iy=xl,sy=Nt,bu={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},pi=$l,oy=ue;var ln="8.6.1";var mi=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.t(r),this.i=r=>n.writeSequenceNumber(r))}t(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.i&&this.i(e),e}};mi.o=-1;var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Mt=new Ln("@firebase/firestore");function Tu(){return Mt.logLevel}function M(t,...e){if(Mt.logLevel<=W.DEBUG){let n=e.map(bo);Mt.debug(`Firestore (${ln}): ${t}`,...n)}}function vt(t,...e){if(Mt.logLevel<=W.ERROR){let n=e.map(bo);Mt.error(`Firestore (${ln}): ${t}`,...n)}}function Iu(t,...e){if(Mt.logLevel<=W.WARN){let n=e.map(bo);Mt.warn(`Firestore (${ln}): ${t}`,...n)}}function bo(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}function z(t="Unexpected state"){let e=`FIRESTORE (${ln}) INTERNAL ASSERTION FAILED: `+t;throw vt(e),new Error(e)}function ee(t,e){t||z()}function H(t,e){return t}function ay(t){let e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var To=class{static u(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=ay(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function J(t,e){return t<e?-1:t>e?1:0}function un(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Me=class{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new U(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new U(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Me(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new Me(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};function Su(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ku(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var hn=class{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(),r===void 0?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hn.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},te=class extends hn{construct(e,n,r){return new te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(_.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new te(n)}static emptyPath(){return new te([])}},cy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Se=class extends hn{construct(e,n,r){return new Se(e,n,r)}static isValidIdentifier(e){return cy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Se(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new U(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new U(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Se(n)}static emptyPath(){return new Se([])}};var vi=class{constructor(e){this.fields=e,e.sort(Se.comparator)}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return un(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var _e=class{constructor(e){this.binaryString=e}static fromBase64String(e){let n=atob(e);return new _e(n)}static fromUint8Array(e){let n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new _e(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};_e.EMPTY_BYTE_STRING=new _e("");var ly=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yt(t){if(ee(!!t),typeof t=="string"){let e=0,n=ly.exec(t);if(ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:se(t.seconds),nanos:se(t.nanos)}}function se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fn(t){return typeof t=="string"?_e.fromBase64String(t):_e.fromUint8Array(t)}function Au(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Cu(t){let e=t.mapValue.fields.__previous_value__;return Au(e)?Cu(e):e}function er(t){let e=yt(t.mapValue.fields.__local_write_time__.timestampValue);return new Me(e.seconds,e.nanos)}function dn(t){return t==null}function yi(t){return t===0&&1/t==-1/0}function uy(t){return typeof t=="number"&&Number.isInteger(t)&&!yi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var V=class{constructor(e){this.path=e}static fromPath(e){return new V(te.fromString(e))}static fromName(e){return new V(te.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new V(new te(e.slice()))}};function _t(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Au(t)?4:10:z()}function Qe(t,e){let n=_t(t);if(n!==_t(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return er(t).isEqual(er(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;let s=yt(r.timestampValue),o=yt(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return fn(r.bytesValue).isEqual(fn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return se(r.geoPointValue.latitude)===se(i.geoPointValue.latitude)&&se(r.geoPointValue.longitude)===se(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return se(r.integerValue)===se(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){let s=se(r.doubleValue),o=se(i.doubleValue);return s===o?yi(s)===yi(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return un(t.arrayValue.values||[],e.arrayValue.values||[],Qe);case 10:return function(r,i){let s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Su(s)!==Su(o))return!1;for(let a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Qe(s[a],o[a])))return!1;return!0}(t,e);default:return z()}}function tr(t,e){return(t.values||[]).find(n=>Qe(n,e))!==void 0}function pn(t,e){let n=_t(t),r=_t(e);if(n!==r)return J(n,r);switch(n){case 0:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(i,s){let o=se(i.integerValue||i.doubleValue),a=se(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Ru(t.timestampValue,e.timestampValue);case 4:return Ru(er(t),er(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(i,s){let o=fn(i),a=fn(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){let o=i.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){let l=J(o[c],a[c]);if(l!==0)return l}return J(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){let o=J(se(i.latitude),se(s.latitude));return o!==0?o:J(se(i.longitude),se(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){let o=i.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){let l=pn(o[c],a[c]);if(l)return l}return J(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){let o=i.fields||{},a=Object.keys(o),c=s.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){let h=J(a[u],l[u]);if(h!==0)return h;let f=pn(o[a[u]],c[l[u]]);if(f!==0)return f}return J(a.length,l.length)}(t.mapValue,e.mapValue);default:throw z()}}function Ru(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);let n=yt(t),r=yt(e),i=J(n.seconds,r.seconds);return i!==0?i:J(n.nanos,r.nanos)}function So(t){return Io(t)}function Io(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){let i=yt(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?fn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,V.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(let o of r.values||[])s?s=!1:i+=",",i+=Io(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){let i=Object.keys(r.fields||{}).sort(),s="{",o=!0;for(let a of i)o?o=!1:s+=",",s+=`${a}:${Io(r.fields[a])}`;return s+"}"}(t.mapValue):z();var e,n}function ko(t){return!!t&&"integerValue"in t}function Ao(t){return!!t&&"arrayValue"in t}function Nu(t){return!!t&&"nullValue"in t}function Du(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Co(t){return!!t&&"mapValue"in t}var Pe=class{constructor(e){this.overlayMap=new Map,this.partialValue=e}static empty(){return new Pe({mapValue:{}})}field(e){return Pe.extractNestedValue(this.buildProto(),e)}toProto(){return this.field(Se.emptyPath())}set(e,n){this.setOverlay(e,n)}setAll(e){e.forEach((n,r)=>{n?this.set(r,n):this.delete(r)})}delete(e){this.setOverlay(e,null)}isEqual(e){return Qe(this.buildProto(),e.buildProto())}setOverlay(e,n){let r=this.overlayMap;for(let i=0;i<e.length-1;++i){let s=e.get(i),o=r.get(s);o instanceof Map?r=o:o&&_t(o)===10?(o=new Map(Object.entries(o.mapValue.fields||{})),r.set(s,o),r=o):(o=new Map,r.set(s,o),r=o)}r.set(e.lastSegment(),n)}applyOverlay(e,n){let r=!1,i=Pe.extractNestedValue(this.partialValue,e),s=Co(i)?Object.assign({},i.mapValue.fields):{};return n.forEach((o,a)=>{if(o instanceof Map){let c=this.applyOverlay(e.child(a),o);c!=null&&(s[a]=c,r=!0)}else o!==null?(s[a]=o,r=!0):s.hasOwnProperty(a)&&(delete s[a],r=!0)}),r?{mapValue:{fields:s}}:null}buildProto(){let e=this.applyOverlay(Se.emptyPath(),this.overlayMap);return e!=null&&(this.partialValue=e,this.overlayMap.clear()),this.partialValue}static extractNestedValue(e,n){if(n.isEmpty())return e;{let r=e;for(let i=0;i<n.length-1;++i)if(!r.mapValue.fields||(r=r.mapValue.fields[n.get(i)],!Co(r)))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}clone(){return new Pe(this.buildProto())}};function Ou(t){let e=[];return gi(t.fields||{},(n,r)=>{let i=new Se([n]);if(Co(r)){let s=Ou(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new vi(e)}var we=class{constructor(e,n,r,i,s){this.key=e,this.documentType=n,this.version=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new we(e,0,Y.min(),Pe.empty(),0)}static newFoundDocument(e,n,r){return new we(e,1,n,r,0)}static newNoDocument(e,n){return new we(e,2,n,Pe.empty(),0)}static newUnknownDocument(e,n){return new we(e,3,n,Pe.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pe.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof we&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new we(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.toProto())}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Lu=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.h=null}};function Mu(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Lu(t,e,n,r,i,s,o)}function Ro(t){let e=H(t);if(e.h===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),dn(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=_i(e.startAt)),e.endAt&&(n+="|ub:",n+=_i(e.endAt)),e.h=n}return e.h}function fy(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${So(r.value)}`;var r}).join(", ")}]`),dn(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+_i(t.startAt)),t.endAt&&(e+=", endAt: "+_i(t.endAt)),`Target(${e})`}function No(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!dy(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Qe(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pu(t.startAt,e.startAt)&&Pu(t.endAt,e.endAt)}function Do(t){return V.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Oe=class extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.l(e,n,r):new Uu(e,n,r):n==="array-contains"?new Fu(e,r):n==="in"?new $u(e,r):n==="not-in"?new ju(e,r):n==="array-contains-any"?new qu(e,r):new Oe(e,n,r)}static l(e,n,r){return n==="in"?new xu(e,r):new Vu(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.m(pn(n,this.value)):n!==null&&_t(this.value)===_t(n)&&this.m(pn(n,this.value))}m(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}g(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}};function hy(t){return t.field.canonicalString()+t.op.toString()+So(t.value)}var Uu=class extends Oe{constructor(e,n,r){super(e,n,r),this.key=V.fromName(r.referenceValue)}matches(e){let n=V.comparator(e.key,this.key);return this.m(n)}},xu=class extends Oe{constructor(e,n){super(e,"in",n),this.keys=Bu("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Vu=class extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=Bu("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Bu(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>V.fromName(r.referenceValue))}var Fu=class extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Ao(n)&&tr(n.arrayValue,this.value)}},$u=class extends Oe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&tr(this.value.arrayValue,n)}},ju=class extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(tr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!tr(this.value.arrayValue,n)}},qu=class extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Ao(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tr(this.value.arrayValue,r))}},wi=class{constructor(e,n){this.position=e,this.before=n}};function _i(t){return`${t.before?"b":"a"}:${t.position.map(e=>So(e)).join(",")}`}var mn=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function dy(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function zu(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=V.comparator(V.fromName(o.referenceValue),n.key):r=pn(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function Pu(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qe(t.position[n],e.position[n]))return!1;return!0}var nr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt}};function py(t,e,n,r,i,s,o,a){return new nr(t,e,n,r,i,s,o,a)}function Oo(t){return new nr(t)}function Ei(t){return!dn(t.limit)&&t.limitType==="F"}function Lo(t){return!dn(t.limit)&&t.limitType==="L"}function my(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function gy(t){for(let e of t.filters)if(e.g())return e.field;return null}function vy(t){return t.collectionGroup!==null}function rr(t){let e=H(t);if(e.p===null){e.p=[];let n=gy(e),r=my(e);if(n!==null&&r===null)n.isKeyField()||e.p.push(new mn(n)),e.p.push(new mn(Se.keyField(),"asc"));else{let i=!1;for(let s of e.explicitOrderBy)e.p.push(s),s.field.isKeyField()&&(i=!0);if(!i){let s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new mn(Se.keyField(),s))}}}return e.p}function Pt(t){let e=H(t);if(!e.T)if(e.limitType==="F")e.T=Mu(e.path,e.collectionGroup,rr(e),e.filters,e.limit,e.startAt,e.endAt);else{let n=[];for(let s of rr(e)){let o=s.dir==="desc"?"asc":"desc";n.push(new mn(s.field,o))}let r=e.endAt?new wi(e.endAt.position,!e.endAt.before):null,i=e.startAt?new wi(e.startAt.position,!e.startAt.before):null;e.T=Mu(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.T}function yy(t,e,n){return new nr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bi(t,e){return No(Pt(t),Pt(e))&&t.limitType===e.limitType}function Hu(t){return`${Ro(Pt(t))}|lt:${t.limitType}`}function Mo(t){return`Query(target=${fy(Pt(t))}; limitType=${t.limitType})`}function Ti(t,e){return e.isFoundDocument()&&function(n,r){let i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):V.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(let i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(let i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!zu(n.startAt,rr(n),r)||n.endAt&&zu(n.endAt,rr(n),r))}(t,e)}function Ku(t){return(e,n)=>{let r=!1;for(let i of rr(t)){let s=_y(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _y(t,e,n){let r=t.field.isKeyField()?V.comparator(e.key,n.key):function(i,s,o){let a=s.data.field(i),c=o.data.field(i);return a!==null&&c!==null?pn(a,c):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}function Gu(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yi(e)?"-0":e}}function Wu(t){return{integerValue:""+t}}function wy(t,e){return uy(e)?Wu(e):Gu(t,e)}var ir=class{constructor(){this._=void 0}};function Ey(t,e,n){return t instanceof sr?function(r,i){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof gn?Qu(t,e):t instanceof vn?Yu(t,e):function(r,i){let s=Xu(r,i),o=Ju(s)+Ju(r.A);return ko(s)&&ko(r.A)?Wu(o):Gu(r.R,o)}(t,e)}function by(t,e,n){return t instanceof gn?Qu(t,e):t instanceof vn?Yu(t,e):n}function Xu(t,e){return t instanceof or?ko(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}var sr=class extends ir{},gn=class extends ir{constructor(e){super(),this.elements=e}};function Qu(t,e){let n=Zu(e);for(let r of t.elements)n.some(i=>Qe(i,r))||n.push(r);return{arrayValue:{values:n}}}var vn=class extends ir{constructor(e){super(),this.elements=e}};function Yu(t,e){let n=Zu(e);for(let r of t.elements)n=n.filter(i=>!Qe(i,r));return{arrayValue:{values:n}}}var or=class extends ir{constructor(e,n){super(),this.R=e,this.A=n}};function Ju(t){return se(t.integerValue||t.doubleValue)}function Zu(t){return Ao(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Ty(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof gn&&r instanceof gn||n instanceof vn&&r instanceof vn?un(n.elements,r.elements,Qe):n instanceof or&&r instanceof or?Qe(n.A,r.A):n instanceof sr&&r instanceof sr}(t.transform,e.transform)}var eh=class{constructor(e,n){this.version=e,this.transformResults=n}},Ut=class{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ut}static exists(e){return new Ut(void 0,e)}static updateTime(e){return new Ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ii(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ar=class{};function Iy(t,e,n){t instanceof cr?function(r,i,s){let o=r.value.clone(),a=nh(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof xt?function(r,i,s){if(!Ii(r.precondition,i))return void i.convertToUnknownDocument(s.version);let o=nh(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(th(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Po(t,e,n){t instanceof cr?function(r,i,s){if(!Ii(r.precondition,i))return;let o=r.value.clone(),a=ih(r.fieldTransforms,s,i);o.setAll(a),i.convertToFoundDocument(rh(i),o).setHasLocalMutations()}(t,e,n):t instanceof xt?function(r,i,s){if(!Ii(r.precondition,i))return;let o=ih(r.fieldTransforms,s,i),a=i.data;a.setAll(th(r)),a.setAll(o),i.convertToFoundDocument(rh(i),a).setHasLocalMutations()}(t,e,n):function(r,i){Ii(r.precondition,i)&&i.convertToNoDocument(Y.min())}(t,e)}function Sy(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=Xu(r.transform,i||null);s!=null&&(n==null&&(n=Pe.empty()),n.set(r.field,s))}return n||null}function sh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&un(n,r,(i,s)=>Ty(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function rh(t){return t.isFoundDocument()?t.version:Y.min()}var cr=class extends ar{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}},xt=class extends ar{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}};function th(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function nh(t,e,n){let r=new Map;ee(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,by(o,a,n[i]))}return r}function ih(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Ey(s,o,e))}return r}var oh=class extends ar{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}},ah=class extends ar{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}};var ch=class{constructor(e){this.count=e}};var oe,G;function ky(t){switch(t){case _.OK:return z();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return z()}}function lh(t){if(t===void 0)return vt("GRPC error has no .code"),_.UNKNOWN;switch(t){case oe.OK:return _.OK;case oe.CANCELLED:return _.CANCELLED;case oe.UNKNOWN:return _.UNKNOWN;case oe.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case oe.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case oe.INTERNAL:return _.INTERNAL;case oe.UNAVAILABLE:return _.UNAVAILABLE;case oe.UNAUTHENTICATED:return _.UNAUTHENTICATED;case oe.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case oe.NOT_FOUND:return _.NOT_FOUND;case oe.ALREADY_EXISTS:return _.ALREADY_EXISTS;case oe.PERMISSION_DENIED:return _.PERMISSION_DENIED;case oe.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case oe.ABORTED:return _.ABORTED;case oe.OUT_OF_RANGE:return _.OUT_OF_RANGE;case oe.UNIMPLEMENTED:return _.UNIMPLEMENTED;case oe.DATA_LOSS:return _.DATA_LOSS;default:return z()}}(G=oe||(oe={}))[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";var Ee=class{constructor(e,n){this.comparator=e,this.root=n||pe.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pe.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lr(this.root,e,this.comparator,!1)}getReverseIterator(){return new lr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lr(this.root,e,this.comparator,!0)}},lr=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pe=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??pe.RED,this.left=i??pe.EMPTY,this.right=s??pe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new pe(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return pe.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,pe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,pe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};pe.EMPTY=null,pe.RED=!0,pe.BLACK=!1;pe.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,e,n,r,i){return this}insert(t,e,n){return new pe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var me=class{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Uo(this.data.getIterator())}getIteratorFrom(e){return new Uo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof me)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new me(this.comparator);return n.data=e,n}},Uo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ay=new Ee(V.comparator);function Vt(){return Ay}var Cy=new Ee(V.comparator);function xo(){return Cy}var Ry=new Ee(V.comparator);function Ny(){return Ry}var Dy=new me(V.comparator);function ne(...t){let e=Dy;for(let n of t)e=e.add(n);return e}var Oy=new me(J);function uh(){return Oy}var ur=class{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){let r=new Map;return r.set(e,yn.createSynthesizedTargetChangeForCurrentChange(e,n)),new ur(Y.min(),r,uh(),Vt(),ne())}},yn=class{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new yn(_e.EMPTY_BYTE_STRING,n,ne(),ne(),ne())}};var hr=class{constructor(e,n,r,i){this.P=e,this.removedTargetIds=n,this.key=r,this.v=i}},Vo=class{constructor(e,n){this.targetId=e,this.V=n}},Fo=class{constructor(e,n,r=_e.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},$o=class{constructor(){this.S=0,this.D=hh(),this.C=_e.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}get current(){return this.N}get resumeToken(){return this.C}get $(){return this.S!==0}get O(){return this.k}M(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)}F(){let e=ne(),n=ne(),r=ne();return this.D.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z()}}),new yn(this.C,this.N,e,n,r)}L(){this.k=!1,this.D=hh()}B(e,n){this.k=!0,this.D=this.D.insert(e,n)}U(e){this.k=!0,this.D=this.D.remove(e)}q(){this.S+=1}K(){this.S-=1}j(){this.k=!0,this.N=!0}},fh=class{constructor(e){this.W=e,this.G=new Map,this.H=Vt(),this.J=dh(),this.Y=new me(J)}X(e){for(let n of e.P)e.v&&e.v.isFoundDocument()?this.Z(n,e.v):this.tt(n,e.key,e.v);for(let n of e.removedTargetIds)this.tt(n,e.key,e.v)}et(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.st(n)&&r.M(e.resumeToken);break;case 1:r.K(),r.$||r.L(),r.M(e.resumeToken);break;case 2:r.K(),r.$||this.removeTarget(n);break;case 3:this.st(n)&&(r.j(),r.M(e.resumeToken));break;case 4:this.st(n)&&(this.it(n),r.M(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.G.forEach((r,i)=>{this.st(i)&&n(i)})}rt(e){let n=e.targetId,r=e.V.count,i=this.ot(n);if(i){let s=i.target;if(Do(s))if(r===0){let o=new V(s.path);this.tt(n,o,we.newNoDocument(o,Y.min()))}else ee(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}}at(e){let n=new Map;this.G.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&Do(a.target)){let c=new V(a.target.path);this.H.get(c)!==null||this.ut(o,c)||this.tt(o,c,we.newNoDocument(c,e))}s.O&&(n.set(o,s.F()),s.L())}});let r=ne();this.J.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))});let i=new ur(e,n,this.Y,this.H,r);return this.H=Vt(),this.J=dh(),this.Y=new me(J),i}Z(e,n){if(!this.st(e))return;let r=this.ut(e,n.key)?2:0;this.nt(e).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(e))}tt(e,n,r){if(!this.st(e))return;let i=this.nt(e);this.ut(e,n)?i.B(n,1):i.U(n),this.J=this.J.insert(n,this.ht(n).delete(e)),r&&(this.H=this.H.insert(n,r))}removeTarget(e){this.G.delete(e)}ct(e){let n=this.nt(e).F();return this.W.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}q(e){this.nt(e).q()}nt(e){let n=this.G.get(e);return n||(n=new $o,this.G.set(e,n)),n}ht(e){let n=this.J.get(e);return n||(n=new me(J),this.J=this.J.insert(e,n)),n}st(e){let n=this.ot(e)!==null;return n||M("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.G.get(e);return n&&n.$?null:this.W.lt(e)}it(e){this.G.set(e,new $o),this.W.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}ut(e,n){return this.W.getRemoteKeysForTarget(e).has(n)}};function dh(){return new Ee(V.comparator)}function hh(){return new Ee(V.comparator)}var Ly=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),My=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),ph=class{constructor(e,n){this.databaseId=e,this.I=n}};function Si(t,e){return t.I?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mh(t,e){return t.I?e.toBase64():e.toUint8Array()}function Py(t,e){return Si(t,e.toTimestamp())}function rt(t){return ee(!!t),Y.fromTimestamp(function(e){let n=yt(e);return new Me(n.seconds,n.nanos)}(t))}function jo(t,e){return function(n){return new te(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function vh(t){let e=te.fromString(t);return ee(gh(e)),e}function qo(t,e){return jo(t.databaseId,e.path)}function Bo(t,e){let n=vh(e);if(n.get(1)!==t.databaseId.projectId)throw new U(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new U(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(yh(n))}function zo(t,e){return jo(t.databaseId,e)}function Uy(t){let e=vh(t);return e.length===4?te.emptyPath():yh(e)}function Ho(t){return new te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yh(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _h(t,e,n){return{name:qo(t,e),fields:n.toProto().mapValue.fields}}function xy(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.I?(ee(l===void 0||typeof l=="string"),_e.fromBase64String(l||"")):(ee(l===void 0||l instanceof Uint8Array),_e.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?_.UNKNOWN:lh(c.code);return new U(l,c.message||"")}(o);n=new Fo(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Bo(t,r.document.name),s=rt(r.document.updateTime),o=new Pe({mapValue:{fields:r.document.fields}}),a=we.newFoundDocument(i,s,o),c=r.targetIds||[],l=r.removedTargetIds||[];n=new hr(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Bo(t,r.document),s=r.readTime?rt(r.readTime):Y.min(),o=we.newNoDocument(i,s),a=r.removedTargetIds||[];n=new hr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Bo(t,r.document),s=r.removedTargetIds||[];n=new hr([],s,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let i=r.count||0,s=new ch(i),o=r.targetId;n=new Vo(o,s)}}return n}function Fy(t,e){let n;if(e instanceof cr)n={update:_h(t,e.key,e.value)};else if(e instanceof oh)n={delete:qo(t,e.key)};else if(e instanceof xt)n={update:_h(t,e.key,e.data),updateMask:Vy(e.fieldMask)};else{if(!(e instanceof ah))return z();n={verify:qo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){let o=s.transform;if(o instanceof sr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof gn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof vn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof or)return{fieldPath:s.field.canonicalString(),increment:o.A};throw z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Py(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:z()}(t,e.precondition)),n}function $y(t,e){return t&&t.length>0?(ee(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?rt(r.updateTime):rt(i);return s.isEqual(Y.min())&&(s=rt(i)),new eh(s,r.transformResults||[])}(n,e))):[]}function jy(t,e){return{documents:[zo(t,e.path)]}}function zy(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=zo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=zo(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(a){if(a.length===0)return;let c=a.map(l=>function(u){if(u.op==="=="){if(Du(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NAN"}};if(Nu(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NULL"}}}else if(u.op==="!="){if(Du(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NOT_NAN"}};if(Nu(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_n(u.field),op:By(u.op),value:u.value}}}(l));return c.length===1?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);i&&(n.structuredQuery.where=i);let s=function(a){if(a.length!==0)return a.map(c=>function(l){return{field:_n(l.field),direction:qy(l.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let o=function(a,c){return a.I||dn(c)?c:{value:c}}(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=wh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=wh(e.endAt)),n}function Hy(t){let e=Uy(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ee(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=Eh(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new mn(wn(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,dn(h)?null:h}(n.limit));let c=null;n.startAt&&(c=bh(n.startAt));let l=null;return n.endAt&&(l=bh(n.endAt)),py(e,i,o,s,a,"F",c,l)}function Ky(t,e){let n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return z()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Eh(t){return t?t.unaryFilter!==void 0?[Wy(t)]:t.fieldFilter!==void 0?[Gy(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Eh(e)).reduce((e,n)=>e.concat(n)):z():[]}function wh(t){return{before:t.before,values:t.position}}function bh(t){let e=!!t.before,n=t.values||[];return new wi(n,e)}function qy(t){return Ly[t]}function By(t){return My[t]}function _n(t){return{fieldPath:t.canonicalString()}}function wn(t){return Se.fromServerFormat(t.fieldPath)}function Gy(t){return Oe.create(wn(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}function Wy(t){switch(t.unaryFilter.op){case"IS_NAN":let e=wn(t.unaryFilter.field);return Oe.create(e,"==",{doubleValue:NaN});case"IS_NULL":let n=wn(t.unaryFilter.field);return Oe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=wn(t.unaryFilter.field);return Oe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=wn(t.unaryFilter.field);return Oe.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return z()}}function Vy(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gh(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Xy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Th=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};var En=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var A=class{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new A((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof A?n:A.resolve(n)}catch(n){return A.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):A.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):A.reject(n)}static resolve(e){return new A((n,r)=>{n(e)})}static reject(e){return new A((n,r)=>{r(e)})}static waitFor(e){return new A((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=A.resolve(!1);for(let r of e)n=n.next(i=>i?A.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}};function fr(t){return t.name==="IndexedDbTransactionError"}var Ih=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Iy(s,e,r[i])}}applyToLocalView(e){for(let n of this.baseMutations)n.key.isEqual(e.key)&&Po(n,e,this.localWriteTime);for(let n of this.mutations)n.key.isEqual(e.key)&&Po(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{let r=e.get(n.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Y.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&un(this.mutations,e.mutations,(n,r)=>sh(n,r))&&un(this.baseMutations,e.baseMutations,(n,r)=>sh(n,r))}},ki=class{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length);let i=Ny(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ki(e,n,r,i)}};var wt=class{constructor(e,n,r,i,s=Y.min(),o=Y.min(),a=_e.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new wt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new wt(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new wt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}};var Sh=class{constructor(e){this.Lt=e}};function Qy(t){let e=Hy({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yy(e,e.limit,"L"):e}var kh=class{constructor(){this.Bt=new Ah}addToCollectionParentIndex(e,n){return this.Bt.add(n),A.resolve()}getCollectionParents(e,n){return A.resolve(this.Bt.getEntries(n))}},Ah=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new me(te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new me(te.comparator)).toArray()}};var Ft=class{constructor(e){this.Ht=e}next(){return this.Ht+=2,this.Ht}static Jt(){return new Ft(0)}static Yt(){return new Ft(-1)}};async function dr(t){if(t.code!==_.FAILED_PRECONDITION||t.message!==Xy)throw t;M("LocalStore","Unexpectedly lost primary lease")}var bn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n])}else this.inner[r]=[[e,n]]}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1}forEach(e){gi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return ku(this.inner)}};var Ch=class{constructor(){this.changes=new bn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){let n=this.changes.get(e);return n?n.readTime:Y.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:we.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?A.resolve(r.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ko=class{constructor(e,n,r){this.qe=e,this._n=n,this.qt=r}mn(e,n){return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.gn(e,n,r))}gn(e,n,r){return this.qe.getEntry(e,n).next(i=>{for(let s of r)s.applyToLocalView(i);return i})}yn(e,n){e.forEach((r,i)=>{for(let s of n)s.applyToLocalView(i)})}pn(e,n){return this.qe.getEntries(e,n).next(r=>this.En(e,r).next(()=>r))}En(e,n){return this._n.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.yn(n,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return V.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(e,n.path):vy(n)?this.In(e,n,r):this.An(e,n,r)}Tn(e,n){return this.mn(e,new V(n)).next(r=>{let i=xo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}In(e,n,r){let i=n.collectionGroup,s=xo();return this.qt.getCollectionParents(e,i).next(o=>A.forEach(o,a=>{let c=function(l,u){return new nr(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(i));return this.An(e,c,r).next(l=>{l.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}An(e,n,r){let i,s;return this.qe.getDocumentsMatchingQuery(e,n,r).next(o=>(i=o,this._n.getAllMutationBatchesAffectingQuery(e,n))).next(o=>(s=o,this.Rn(e,s,i).next(a=>{i=a;for(let c of s)for(let l of c.mutations){let u=l.key,h=i.get(u);h==null&&(h=we.newInvalidDocument(u),i=i.insert(u,h)),Po(l,h,c.localWriteTime),h.isFoundDocument()||(i=i.remove(u))}}))).next(()=>(i.forEach((o,a)=>{Ti(n,a)||(i=i.remove(o))}),i))}Rn(e,n,r){let i=ne();for(let o of n)for(let a of o.mutations)a instanceof xt&&r.get(a.key)===null&&(i=i.add(a.key));let s=r;return this.qe.getEntries(e,i).next(o=>(o.forEach((a,c)=>{c.isFoundDocument()&&(s=s.insert(a,c))}),s))}};var Ai=class{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pn=r,this.bn=i}static vn(e,n){let r=ne(),i=ne();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ai(e,n.fromCache,r,i)}};var Rh=class{Vn(e){this.Sn=e}getDocumentsMatchingQuery(e,n,r,i){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(Y.min())?this.Dn(e,n):this.Sn.pn(e,i).next(s=>{let o=this.Cn(n,s);return(Ei(n)||Lo(n))&&this.Nn(n.limitType,o,i,r)?this.Dn(e,n):(Tu()<=W.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Mo(n)),this.Sn.getDocumentsMatchingQuery(e,n,r).next(a=>(o.forEach(c=>{a=a.insert(c.key,c)}),a)))})}Cn(e,n){let r=new me(Ku(e));return n.forEach((i,s)=>{Ti(e,s)&&(r=r.add(s))}),r}Nn(e,n,r,i){if(r.size!==n.size)return!0;let s=e==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Dn(e,n){return Tu()<=W.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",Mo(n)),this.Sn.getDocumentsMatchingQuery(e,n,Y.min())}};var Nh=class{constructor(e,n,r,i){this.persistence=e,this.xn=n,this.R=i,this.kn=new Ee(J),this.$n=new bn(s=>Ro(s),No),this.On=Y.min(),this._n=e.getMutationQueue(r),this.Mn=e.getRemoteDocumentCache(),this.Ue=e.getTargetCache(),this.Fn=new Ko(this.Mn,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Fn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.kn))}};function Yy(t,e,n,r){return new Nh(t,e,n,r)}async function Dh(t,e){let n=H(t),r=n._n,i=n.Fn,s=await n.persistence.runTransaction("Handle user change","readonly",o=>{let a;return n._n.getAllMutationBatches(o).next(c=>(a=c,r=n.persistence.getMutationQueue(e),i=new Ko(n.Mn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(o))).next(c=>{let l=[],u=[],h=ne();for(let f of a){l.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}for(let f of c){u.push(f.batchId);for(let d of f.mutations)h=h.add(d.key)}return i.pn(o,h).next(f=>({Ln:f,removedBatchIds:l,addedBatchIds:u}))})});return n._n=r,n.Fn=i,n.xn.Vn(n.Fn),s}function Jy(t,e){let n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.Mn.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){let u=c.batch,h=u.keys(),f=A.resolve();return h.forEach(d=>{f=f.next(()=>l.getEntry(a,d)).next(m=>{let p=c.docVersions.get(d);ee(p!==null),m.version.compareTo(p)<0&&(u.applyToRemoteDocument(m,c),m.isValidDocument()&&l.addEntry(m,c.commitVersion))})}),f.next(()=>o._n.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n._n.performConsistencyCheck(r)).next(()=>n.Fn.pn(r,i))})}function Oh(t){let e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ue.getLastRemoteSnapshotVersion(n))}function e_(t,e){let n=H(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.Mn.newChangeBuffer({trackRemovals:!0});i=n.kn;let a=[];e.targetChanges.forEach((l,u)=>{let h=i.get(u);if(!h)return;a.push(n.Ue.removeMatchingKeys(s,l.removedDocuments,u).next(()=>n.Ue.addMatchingKeys(s,l.addedDocuments,u)));let f=l.resumeToken;if(f.approximateByteSize()>0){let d=h.withResumeToken(f,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(u,d),function(m,p,b){return ee(p.resumeToken.approximateByteSize()>0),m.resumeToken.approximateByteSize()===0||p.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(h,d,l)&&a.push(n.Ue.updateTargetData(s,d))}});let c=Vt();if(e.documentUpdates.forEach((l,u)=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(Zy(s,o,e.documentUpdates,r,void 0).next(l=>{c=l})),!r.isEqual(Y.min())){let l=n.Ue.getLastRemoteSnapshotVersion(s).next(u=>n.Ue.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return A.waitFor(a).next(()=>o.apply(s)).next(()=>n.Fn.En(s,c)).next(()=>c)}).then(s=>(n.kn=i,s))}function Zy(t,e,n,r,i){let s=ne();return n.forEach(o=>s=s.add(o)),e.getEntries(t,s).next(o=>{let a=Vt();return n.forEach((c,l)=>{let u=o.get(c),h=(i==null?void 0:i.get(c))||r;l.isNoDocument()&&l.version.isEqual(Y.min())?(e.removeEntry(c,h),a=a.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l,h),a=a.insert(c,l)):M("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),a})}function t_(t,e){let n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n._n.getNextMutationBatchAfterBatchId(r,e)))}function n_(t,e){let n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ue.getTargetData(r,e).next(s=>s?(i=s,A.resolve(i)):n.Ue.allocateTargetId(r).next(o=>(i=new wt(e,o,0,r.currentSequenceNumber),n.Ue.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.$n.set(e,r.targetId)),r})}async function Go(t,e,n){let r=H(t),i=r.kn.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!fr(o))throw o;M("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.kn=r.kn.remove(e),r.$n.delete(i.target)}function Lh(t,e,n){let r=H(t),i=Y.min(),s=ne();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){let u=H(a),h=u.$n.get(l);return h!==void 0?A.resolve(u.kn.get(h)):u.Ue.getTargetData(c,l)}(r,o,Pt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ue.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.xn.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ne())).next(a=>({documents:a,Bn:s})))}var Mh=class{constructor(e){this.R=e,this.Qn=new Map,this.jn=new Map}getBundleMetadata(e,n){return A.resolve(this.Qn.get(n))}saveBundleMetadata(e,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:rt(r.createTime)}),A.resolve()}getNamedQuery(e,n){return A.resolve(this.jn.get(n))}saveNamedQuery(e,n){return this.jn.set(n.name,function(r){return{name:r.name,query:Qy(r.bundledQuery),readTime:rt(r.readTime)}}(n)),A.resolve()}};var Ci=class{constructor(){this.Wn=new me(he.Gn),this.zn=new me(he.Hn)}isEmpty(){return this.Wn.isEmpty()}addReference(e,n){let r=new he(e,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)}Jn(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Yn(new he(e,n))}Xn(e,n){e.forEach(r=>this.removeReference(r,n))}Zn(e){let n=new V(new te([])),r=new he(n,e),i=new he(n,e+1),s=[];return this.zn.forEachInRange([r,i],o=>{this.Yn(o),s.push(o.key)}),s}ts(){this.Wn.forEach(e=>this.Yn(e))}Yn(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)}es(e){let n=new V(new te([])),r=new he(n,e),i=new he(n,e+1),s=ne();return this.zn.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new he(e,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},he=class{constructor(e,n){this.key=e,this.ns=n}static Gn(e,n){return V.comparator(e.key,n.key)||J(e.ns,n.ns)}static Hn(e,n){return J(e.ns,n.ns)||V.comparator(e.key,n.key)}};var Ph=class{constructor(e,n){this.qt=e,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new me(he.Gn)}checkEmpty(e){return A.resolve(this._n.length===0)}addMutationBatch(e,n,r,i){let s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];let o=new Ih(s,n,r,i);this._n.push(o);for(let a of i)this.rs=this.rs.add(new he(a.key,s)),this.qt.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(o)}lookupMutationBatch(e,n){return A.resolve(this.os(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.cs(r),s=i<0?0:i;return A.resolve(this._n.length>s?this._n[s]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this._n.length===0?-1:this.ss-1)}getAllMutationBatches(e){return A.resolve(this._n.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new he(n,0),i=new he(n,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],o=>{let a=this.os(o.ns);s.push(a)}),A.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new me(J);return n.forEach(i=>{let s=new he(i,0),o=new he(i,Number.POSITIVE_INFINITY);this.rs.forEachInRange([s,o],a=>{r=r.add(a.ns)})}),A.resolve(this.us(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;V.isDocumentKey(s)||(s=s.child(""));let o=new he(new V(s),0),a=new me(J);return this.rs.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.ns)),!0)},o),A.resolve(this.us(a))}us(e){let n=[];return e.forEach(r=>{let i=this.os(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.hs(n.batchId,"removed")===0),this._n.shift();let r=this.rs;return A.forEach(n.mutations,i=>{let s=new he(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.rs=r})}Gt(e){}containsKey(e,n){let r=new he(n,0),i=this.rs.firstAfterOrEqual(r);return A.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this._n.length,A.resolve()}hs(e,n){return this.cs(e)}cs(e){return this._n.length===0?0:e-this._n[0].batchId}os(e){let n=this.cs(e);return n<0||n>=this._n.length?null:this._n[n]}};var Uh=class{constructor(e,n){this.qt=e,this.ls=n,this.docs=new Ee(V.comparator),this.size=0}addEntry(e,n,r){let i=n.key,s=this.docs.get(i),o=s?s.size:0,a=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:a,readTime:r}),this.size+=a-o,this.qt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return A.resolve(r?r.document.clone():we.newInvalidDocument(n))}getEntries(e,n){let r=Vt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.clone():we.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,n,r){let i=Vt(),s=new V(n.path.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){let{key:a,value:{document:c,readTime:l}}=o.getNext();if(!n.path.isPrefixOf(a.path))break;l.compareTo(r)<=0||Ti(n,c)&&(i=i.insert(c.key,c.clone()))}return A.resolve(i)}fs(e,n){return A.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xh(this)}getSize(e){return A.resolve(this.size)}},xh=class extends Ch{constructor(e){super(),this.Ie=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?n.push(this.Ie.addEntry(e,i.document,this.getReadTime(r))):this.Ie.removeEntry(r)}),A.waitFor(n)}getFromCache(e,n){return this.Ie.getEntry(e,n)}getAllFromCache(e,n){return this.Ie.getEntries(e,n)}};var Vh=class{constructor(e){this.persistence=e,this.ds=new bn(n=>Ro(n),No),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.ws=0,this._s=new Ci,this.targetCount=0,this.gs=Ft.Jt()}forEachTarget(e,n){return this.ds.forEach((r,i)=>n(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.ws)}allocateTargetId(e){return this.highestTargetId=this.gs.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),A.resolve()}te(e){this.ds.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.gs=new Ft(n),this.highestTargetId=n),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)}addTargetData(e,n){return this.te(n),this.targetCount+=1,A.resolve()}updateTargetData(e,n){return this.te(n),A.resolve()}removeTargetData(e,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.ds.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ds.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(s).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,n){let r=this.ds.get(n)||null;return A.resolve(r)}addMatchingKeys(e,n,r){return this._s.Jn(n,r),A.resolve()}removeMatchingKeys(e,n,r){this._s.Xn(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),A.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._s.Zn(n),A.resolve()}getMatchingKeysForTargetId(e,n){let r=this._s.es(n);return A.resolve(r)}containsKey(e,n){return A.resolve(this._s.containsKey(n))}};var Fh=class{constructor(e,n){this.ys={},this.Ne=new mi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.Ue=new Vh(this),this.qt=new kh,this.qe=function(r,i){return new Uh(r,i)}(this.qt,r=>this.referenceDelegate.ps(r)),this.R=new Sh(n),this.Ke=new Mh(this.R)}start(){return Promise.resolve()}shutdown(){return this.xe=!1,Promise.resolve()}get started(){return this.xe}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.qt}getMutationQueue(e){let n=this.ys[e.toKey()];return n||(n=new Ph(this.qt,this.referenceDelegate),this.ys[e.toKey()]=n),n}getTargetCache(){return this.Ue}getRemoteDocumentCache(){return this.qe}getBundleCache(){return this.Ke}runTransaction(e,n,r){M("MemoryPersistence","Starting transaction:",e);let i=new $h(this.Ne.next());return this.referenceDelegate.Es(),r(i).next(s=>this.referenceDelegate.Ts(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Is(e,n){return A.or(Object.values(this.ys).map(r=>()=>r.containsKey(e,n)))}},$h=class extends Th{constructor(e){super(),this.currentSequenceNumber=e}},Ri=class{constructor(e){this.persistence=e,this.As=new Ci,this.Rs=null}static Ps(e){return new Ri(e)}get bs(){if(this.Rs)return this.Rs;throw z()}addReference(e,n,r){return this.As.addReference(r,n),this.bs.delete(r.toString()),A.resolve()}removeReference(e,n,r){return this.As.removeReference(r,n),this.bs.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,n){return this.bs.add(n.toString()),A.resolve()}removeTarget(e,n){this.As.Zn(n.targetId).forEach(i=>this.bs.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.bs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Es(){this.Rs=new Set}Ts(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.bs,r=>{let i=V.fromPath(r);return this.vs(e,i).next(s=>{s||n.removeEntry(i)})}).next(()=>(this.Rs=null,n.apply(e)))}updateLimboDocument(e,n){return this.vs(e,n).next(r=>{r?this.bs.delete(n.toString()):this.bs.add(n.toString())})}ps(e){return 0}vs(e,n){return A.or([()=>A.resolve(this.As.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Is(e,n)])}};var je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};je.UNAUTHENTICATED=new je(null),je.GOOGLE_CREDENTIALS=new je("google-credentials-uid"),je.FIRST_PARTY=new je("first-party-uid");var Wo=class{constructor(){this.activeTargetIds=uh()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}Cs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},jh=class{constructor(){this.li=new Wo,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.li.Ds(e),this.fi[e]||"not-current"}updateQueryState(e,n,r){this.fi[e]=n}removeLocalQueryTarget(e){this.li.Cs(e)}isLocalQueryTarget(e){return this.li.activeTargetIds.has(e)}clearQueryState(e){delete this.fi[e]}getAllActiveQueryTargets(){return this.li.activeTargetIds}isActiveQueryTarget(e){return this.li.activeTargetIds.has(e)}start(){return this.li=new Wo,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}};var qh=class{di(e){}shutdown(){}};var Xo=class{constructor(){this.wi=()=>this._i(),this.mi=()=>this.gi(),this.yi=[],this.pi()}di(e){this.yi.push(e)}shutdown(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)}pi(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)}_i(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.yi)e(0)}gi(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.yi)e(1)}static gt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var r_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};var Bh=class{constructor(e){this.Ei=e.Ei,this.Ti=e.Ti}Ii(e){this.Ai=e}Ri(e){this.Pi=e}onMessage(e){this.bi=e}close(){this.Ti()}send(e){this.Ei(e)}vi(){this.Ai()}Vi(e){this.Pi(e)}Si(e){this.bi(e)}};var zh=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http";this.Di=n+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Ni(e,n,r,i){let s=this.xi(e,n);M("RestConnection","Sending: ",s,r);let o={};return this.ki(o,i),this.$i(e,s,o,r).then(a=>(M("RestConnection","Received: ",a),a),a=>{throw Iu("RestConnection",`${e} failed with error: `,a,"url: ",s,"request:",r),a})}Oi(e,n,r,i){return this.Ni(e,n,r,i)}ki(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+ln,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(let r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])}xi(e,n){let r=r_[e];return`${this.Di}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling}$i(e,n,r,i){return new Promise((s,o)=>{let a=new oy;a.listenOnce(iy.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Eo.NO_ERROR:let l=a.getResponseJson();M("Connection","XHR received:",JSON.stringify(l)),s(l);break;case Eo.TIMEOUT:M("Connection",'RPC "'+e+'" timed out'),o(new U(_.DEADLINE_EXCEEDED,"Request time out"));break;case Eo.HTTP_ERROR:let u=a.getStatus();if(M("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let h=a.getResponseJson().error;if(h&&h.status&&h.message){let f=function(d){let m=d.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(m)>=0?m:_.UNKNOWN}(h.status);o(new U(f,h.message))}else o(new U(_.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new U(_.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{M("Connection",'RPC "'+e+'" completed.')}});let c=JSON.stringify(i);a.send(n,"POST",c,r,15)})}Mi(e,n){let r=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ny(),s=ry(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.ki(o.initMessageHeaders,n),Tr()||Sr()||uc()||kr()||hc()||Ir()||(o.httpHeadersOverwriteParam="$httpHeaders");let a=r.join("");M("Connection","Creating WebChannel: "+a,o);let c=i.createWebChannel(a,o),l=!1,u=!1,h=new Bh({Ei:d=>{u?M("Connection","Not sending because WebChannel is closed:",d):(l||(M("Connection","Opening WebChannel transport."),c.open(),l=!0),M("Connection","WebChannel sending:",d),c.send(d))},Ti:()=>c.close()}),f=(d,m,p)=>{d.listen(m,b=>{try{p(b)}catch(E){setTimeout(()=>{throw E},0)}})};return f(c,pi.EventType.OPEN,()=>{u||M("Connection","WebChannel transport opened.")}),f(c,pi.EventType.CLOSE,()=>{u||(u=!0,M("Connection","WebChannel transport closed"),h.Vi())}),f(c,pi.EventType.ERROR,d=>{u||(u=!0,Iu("Connection","WebChannel transport errored:",d),h.Vi(new U(_.UNAVAILABLE,"The operation could not be completed")))}),f(c,pi.EventType.MESSAGE,d=>{var m;if(!u){let p=d.data[0];ee(!!p);let b=p,E=b.error||((m=b[0])===null||m===void 0?void 0:m.error);if(E){M("Connection","WebChannel received error:",E);let C=E.status,T=function(D){let F=oe[D];if(F!==void 0)return lh(F)}(C),x=E.message;T===void 0&&(T=_.INTERNAL,x="Unknown error status: "+C+" with message "+E.message),u=!0,h.Vi(new U(T,x)),c.close()}else M("Connection","WebChannel received:",p),h.Si(p)}}),f(s,sy.STAT_EVENT,d=>{d.stat===bu.PROXY?M("Connection","Detected buffering proxy"):d.stat===bu.NOPROXY&&M("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.vi()},0),h}};function Qo(){return typeof document!="undefined"?document:null}function Ni(t){return new ph(t,!0)}var Yo=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Se=e,this.timerId=n,this.Fi=r,this.Li=i,this.Bi=s,this.Ui=0,this.qi=null,this.Ki=Date.now(),this.reset()}reset(){this.Ui=0}Qi(){this.Ui=this.Bi}ji(e){this.cancel();let n=Math.floor(this.Ui+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&M("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ui} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qi=this.Se.enqueueAfterDelay(this.timerId,i,()=>(this.Ki=Date.now(),e())),this.Ui*=this.Li,this.Ui<this.Fi&&(this.Ui=this.Fi),this.Ui>this.Bi&&(this.Ui=this.Bi)}Gi(){this.qi!==null&&(this.qi.skipDelay(),this.qi=null)}cancel(){this.qi!==null&&(this.qi.cancel(),this.qi=null)}Wi(){return(Math.random()-.5)*this.Ui}};var Jo=class{constructor(e,n,r,i,s,o){this.Se=e,this.zi=r,this.Hi=i,this.Ji=s,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Yo(e,n)}tr(){return this.state===1||this.state===2||this.state===4}er(){return this.state===2}start(){this.state!==3?this.auth():this.nr()}async stop(){this.tr()&&await this.close(0)}sr(){this.state=0,this.Zi.reset()}ir(){this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,()=>this.rr()))}cr(e){this.ar(),this.stream.send(e)}async rr(){if(this.er())return this.close(0)}ar(){this.Xi&&(this.Xi.cancel(),this.Xi=null)}async close(e,n){this.ar(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():n&&n.code===_.RESOURCE_EXHAUSTED?(vt(n.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===_.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ur(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ri(n)}ur(){}auth(){this.state=1;let e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(r=>{this.Yi===n&&this.lr(r)},r=>{e(()=>{let i=new U(_.UNKNOWN,"Fetching auth token failed: "+r.message);return this.dr(i)})})}lr(e){let n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(()=>{n(()=>(this.state=2,this.listener.Ii()))}),this.stream.Ri(r=>{n(()=>this.dr(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}nr(){this.state=4,this.Zi.ji(async()=>{this.state=0,this.start()})}dr(e){return M("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}hr(e){return n=>{this.Se.enqueueAndForget(()=>this.Yi===e?n():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Hh=class extends Jo{constructor(e,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s),this.R=i}wr(e){return this.Hi.Mi("Listen",e)}onMessage(e){this.Zi.reset();let n=xy(this.R,e),r=function(i){if(!("targetChange"in i))return Y.min();let s=i.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?rt(s.readTime):Y.min()}(e);return this.listener._r(n,r)}mr(e){let n={};n.database=Ho(this.R),n.addTarget=function(i,s){let o,a=s.target;return o=Do(a)?{documents:jy(i,a)}:{query:zy(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=mh(i,s.resumeToken):s.snapshotVersion.compareTo(Y.min())>0&&(o.readTime=Si(i,s.snapshotVersion.toTimestamp())),o}(this.R,e);let r=Ky(this.R,e);r&&(n.labels=r),this.cr(n)}gr(e){let n={};n.database=Ho(this.R),n.removeTarget=e,this.cr(n)}},Kh=class extends Jo{constructor(e,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle",n,r,s),this.R=i,this.yr=!1}get pr(){return this.yr}start(){this.yr=!1,this.lastStreamToken=void 0,super.start()}ur(){this.yr&&this.Er([])}wr(e){return this.Hi.Mi("Write",e)}onMessage(e){if(ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.yr){this.Zi.reset();let n=$y(e.writeResults,e.commitTime),r=rt(e.commitTime);return this.listener.Tr(r,n)}return ee(!e.writeResults||e.writeResults.length===0),this.yr=!0,this.listener.Ir()}Ar(){let e={};e.database=Ho(this.R),this.cr(e)}Er(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Fy(this.R,r))};this.cr(n)}};var Gh=class extends class{}{constructor(e,n,r){super(),this.credentials=e,this.Hi=n,this.R=r,this.Rr=!1}Pr(){if(this.Rr)throw new U(_.FAILED_PRECONDITION,"The client has already been terminated.")}Ni(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Ni(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new U(_.UNKNOWN,i.toString())})}Oi(e,n,r){return this.Pr(),this.credentials.getToken().then(i=>this.Hi.Oi(e,n,r,i)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new U(_.UNKNOWN,i.toString())})}terminate(){this.Rr=!0}},Wh=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.br=0,this.vr=null,this.Vr=!0}Sr(){this.br===0&&(this.Dr("Unknown"),this.vr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.vr=null,this.Cr("Backend didn't respond within 10 seconds."),this.Dr("Offline"),Promise.resolve())))}Nr(e){this.state==="Online"?this.Dr("Unknown"):(this.br++,this.br>=1&&(this.kr(),this.Cr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Dr("Offline")))}set(e){this.kr(),this.br=0,e==="Online"&&(this.Vr=!1),this.Dr(e)}Dr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Cr(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(vt(n),this.Vr=!1):M("OnlineStateTracker",n)}kr(){this.vr!==null&&(this.vr.cancel(),this.vr=null)}};var Xh=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.$r=[],this.Or=new Map,this.Mr=new Set,this.Fr=[],this.Lr=s,this.Lr.di(o=>{r.enqueueAndForget(async()=>{$t(this)&&(M("RemoteStore","Restarting streams for network reachability change."),await async function(a){let c=H(a);c.Mr.add(4),await pr(c),c.Br.set("Unknown"),c.Mr.delete(4),await Di(c)}(this))})}),this.Br=new Wh(r,i)}};async function Di(t){if($t(t))for(let e of t.Fr)await e(!0)}async function pr(t){for(let e of t.Fr)await e(!1)}function Qh(t,e){let n=H(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),ta(n)?ea(n):Tn(n).er()&&Zo(n,e))}function Jh(t,e){let n=H(t),r=Tn(n);n.Or.delete(e),r.er()&&Yh(n,e),n.Or.size===0&&(r.er()?r.ir():$t(n)&&n.Br.set("Unknown"))}function Zo(t,e){t.Ur.q(e.targetId),Tn(t).mr(e)}function Yh(t,e){t.Ur.q(e),Tn(t).gr(e)}function ea(t){t.Ur=new fh({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.Or.get(e)||null}),Tn(t).start(),t.Br.Sr()}function ta(t){return $t(t)&&!Tn(t).tr()&&t.Or.size>0}function $t(t){return H(t).Mr.size===0}function Zh(t){t.Ur=void 0}async function i_(t){t.Or.forEach((e,n)=>{Zo(t,e)})}async function s_(t,e){Zh(t),ta(t)?(t.Br.Nr(e),ea(t)):t.Br.set("Unknown")}async function o_(t,e,n){if(t.Br.set("Online"),e instanceof Fo&&e.state===2&&e.cause)try{await async function(r,i){let s=i.cause;for(let o of i.targetIds)r.Or.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Or.delete(o),r.Ur.removeTarget(o))}(t,e)}catch(r){M("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Oi(t,r)}else if(e instanceof hr?t.Ur.X(e):e instanceof Vo?t.Ur.rt(e):t.Ur.et(e),!n.isEqual(Y.min()))try{let r=await Oh(t.localStore);n.compareTo(r)>=0&&await function(i,s){let o=i.Ur.at(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){let l=i.Or.get(c);l&&i.Or.set(c,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{let c=i.Or.get(a);if(!c)return;i.Or.set(a,c.withResumeToken(_e.EMPTY_BYTE_STRING,c.snapshotVersion)),Yh(i,a);let l=new wt(c.target,a,1,c.sequenceNumber);Zo(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){M("RemoteStore","Failed to raise snapshot:",r),await Oi(t,r)}}async function Oi(t,e,n){if(!fr(e))throw e;t.Mr.add(1),await pr(t),t.Br.set("Offline"),n||(n=()=>Oh(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{M("RemoteStore","Retrying IndexedDB access"),await n(),t.Mr.delete(1),await Di(t)})}function ef(t,e){return e().catch(n=>Oi(t,n,e))}async function Li(t){let e=H(t),n=Et(e),r=e.$r.length>0?e.$r[e.$r.length-1].batchId:-1;for(;a_(e);)try{let i=await t_(e.localStore,r);if(i===null){e.$r.length===0&&n.ir();break}r=i.batchId,c_(e,i)}catch(i){await Oi(e,i)}tf(e)&&nf(e)}function a_(t){return $t(t)&&t.$r.length<10}function c_(t,e){t.$r.push(e);let n=Et(t);n.er()&&n.pr&&n.Er(e.mutations)}function tf(t){return $t(t)&&!Et(t).tr()&&t.$r.length>0}function nf(t){Et(t).start()}async function l_(t){Et(t).Ar()}async function u_(t){let e=Et(t);for(let n of t.$r)e.Er(n.mutations)}async function h_(t,e,n){let r=t.$r.shift(),i=ki.from(r,e,n);await ef(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Li(t)}async function f_(t,e){e&&Et(t).pr&&await async function(n,r){if(i=r.code,ky(i)&&i!==_.ABORTED){let s=n.$r.shift();Et(n).sr(),await ef(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Li(n)}var i}(t,e),tf(t)&&nf(t)}async function d_(t,e){let n=H(t);e?(n.Mr.delete(2),await Di(n)):e||(n.Mr.add(2),await pr(n),n.Br.set("Unknown"))}function Tn(t){return t.qr||(t.qr=function(e,n,r){let i=H(e);return i.Pr(),new Hh(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:i_.bind(null,t),Ri:s_.bind(null,t),_r:o_.bind(null,t)}),t.Fr.push(async e=>{e?(t.qr.sr(),ta(t)?ea(t):t.Br.set("Unknown")):(await t.qr.stop(),Zh(t))})),t.qr}function Et(t){return t.Kr||(t.Kr=function(e,n,r){let i=H(e);return i.Pr(),new Kh(n,i.Hi,i.credentials,i.R,r)}(t.datastore,t.asyncQueue,{Ii:l_.bind(null,t),Ri:f_.bind(null,t),Ir:u_.bind(null,t),Tr:h_.bind(null,t)}),t.Fr.push(async e=>{e?(t.Kr.sr(),await Li(t)):(await t.Kr.stop(),t.$r.length>0&&(M("RemoteStore",`Stopping write stream with ${t.$r.length} pending writes`),t.$r=[]))})),t.Kr}var Mi=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new Mi(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function na(t,e){if(vt("AsyncQueue",`${e}: ${t}`),fr(t))return new U(_.UNAVAILABLE,`${e}: ${t}`);throw t}var jt=class{constructor(e){this.comparator=e?(n,r)=>e(n,r)||V.comparator(n.key,r.key):(n,r)=>V.comparator(n.key,r.key),this.keyedMap=xo(),this.sortedSet=new Ee(this.comparator)}static emptySet(e){return new jt(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new jt;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var ra=class{constructor(){this.Qr=new Ee(V.comparator)}track(e){let n=e.doc.key,r=this.Qr.get(n);r?e.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,e):e.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Qr=this.Qr.remove(n):e.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):z():this.Qr=this.Qr.insert(n,e)}jr(){let e=[];return this.Qr.inorderTraversal((n,r)=>{e.push(r)}),e}},qt=class{constructor(e,n,r,i,s,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c}static fromInitialDocuments(e,n,r,i){let s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new qt(e,n,jt.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var rf=class{constructor(){this.Wr=void 0,this.listeners=[]}},sf=class{constructor(){this.queries=new bn(e=>Hu(e),bi),this.onlineState="Unknown",this.Gr=new Set}};async function p_(t,e){let n=H(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new rf),i)try{s.Wr=await n.onListen(r)}catch(o){let a=na(o,`Initialization of query '${Mo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&ia(n)}async function m_(t,e){let n=H(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function g_(t,e){let n=H(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.Hr(i)&&(r=!0);o.Wr=i}}r&&ia(n)}function v_(t,e,n){let r=H(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function ia(t){t.Gr.forEach(e=>{e.next()})}var of=class{constructor(e,n,r){this.query=e,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}Hr(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new qt(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),n=!0):this.eo(e,this.onlineState)&&(this.no(e),n=!0),this.Xr=e,n}onError(e){this.Jr.error(e)}zr(e){this.onlineState=e;let n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),n=!0),n}eo(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.so||!r)&&(!e.docs.isEmpty()||n==="Offline")}Zr(e){if(e.docChanges.length>0)return!0;let n=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}no(e){e=qt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)}};var sa=class{constructor(e){this.key=e}},oa=class{constructor(e){this.key=e}},af=class{constructor(e,n){this.query=e,this.ao=n,this.uo=null,this.current=!1,this.ho=ne(),this.mutatedKeys=ne(),this.lo=Ku(e),this.fo=new jt(this.lo)}get wo(){return this.ao}_o(e,n){let r=n?n.mo:new ra,i=n?n.fo:this.fo,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=Ei(this.query)&&i.size===this.query.limit?i.last():null,l=Lo(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let f=i.get(u),d=Ti(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations),b=!1;f&&d?f.data.isEqual(d.data)?m!==p&&(r.track({type:3,doc:d}),b=!0):this.yo(f,d)||(r.track({type:2,doc:d}),b=!0,(c&&this.lo(d,c)>0||l&&this.lo(d,l)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),b=!0):f&&!d&&(r.track({type:1,doc:f}),b=!0,(c||l)&&(a=!0)),b&&(d?(o=o.add(d),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),Ei(this.query)||Lo(this.query))for(;o.size>this.query.limit;){let u=Ei(this.query)?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}}yo(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){let i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;let s=e.mo.jr();s.sort((l,u)=>function(h,f){let d=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return d(h)-d(f)}(l.type,u.type)||this.lo(l.doc,u.doc)),this.po(r);let o=n?this.Eo():[],a=this.ho.size===0&&this.current?1:0,c=a!==this.uo;return this.uo=a,s.length!==0||c?{snapshot:new qt(this.query,e.fo,i,s,e.mutatedKeys,a===0,c,!1),To:o}:{To:o}}zr(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ra,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}}Io(e){return!this.ao.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations}po(e){e&&(e.addedDocuments.forEach(n=>this.ao=this.ao.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ao=this.ao.delete(n)),this.current=e.current)}Eo(){if(!this.current)return[];let e=this.ho;this.ho=ne(),this.fo.forEach(r=>{this.Io(r.key)&&(this.ho=this.ho.add(r.key))});let n=[];return e.forEach(r=>{this.ho.has(r)||n.push(new oa(r))}),this.ho.forEach(r=>{e.has(r)||n.push(new sa(r))}),n}Ao(e){this.ao=e.Bn,this.ho=ne();let n=this._o(e.documents);return this.applyChanges(n,!0)}Ro(){return qt.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.uo===0)}},cf=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},lf=class{constructor(e){this.key=e,this.Po=!1}},uf=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.bo={},this.vo=new bn(a=>Hu(a),bi),this.Vo=new Map,this.So=new Set,this.Do=new Ee(V.comparator),this.Co=new Map,this.No=new Ci,this.xo={},this.ko=new Map,this.$o=Ft.Yt(),this.onlineState="Unknown",this.Oo=void 0}get isPrimaryClient(){return this.Oo===!0}};async function w_(t,e){let n=__(t),r,i,s=n.vo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro();else{let o=await n_(n.localStore,Pt(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await y_(n,e,r,a==="current"),n.isPrimaryClient&&Qh(n.remoteStore,o)}return i}async function y_(t,e,n,r){t.Mo=(u,h,f)=>async function(d,m,p,b){let E=m.view._o(p);E.Nn&&(E=await Lh(d.localStore,m.query,!1).then(({documents:x})=>m.view._o(x,E)));let C=b&&b.targetChanges.get(m.targetId),T=m.view.applyChanges(E,d.isPrimaryClient,C);return hf(d,m.targetId,T.To),T.snapshot}(t,u,h,f);let i=await Lh(t.localStore,e,!0),s=new af(e,i.Bn),o=s._o(i.documents),a=yn.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),c=s.applyChanges(o,t.isPrimaryClient,a);hf(t,n,c.To);let l=new cf(e,n,s);return t.vo.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot}async function E_(t,e){let n=H(t),r=n.vo.get(e),i=n.Vo.get(r.targetId);if(i.length>1)return n.Vo.set(r.targetId,i.filter(s=>!bi(s,e))),void n.vo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Go(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Jh(n.remoteStore,r.targetId),aa(n,r.targetId)}).catch(dr)):(aa(n,r.targetId),await Go(n.localStore,r.targetId,!0))}async function T_(t,e,n){let r=b_(t);try{let i=await function(s,o){let a=H(s),c=Me.now(),l=o.reduce((h,f)=>h.add(f.key),ne()),u;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>a.Fn.pn(h,l).next(f=>{u=f;let d=[];for(let m of o){let p=Sy(m,u.get(m.key));p!=null&&d.push(new xt(m.key,p,Ou(p.toProto().mapValue),Ut.exists(!0)))}return a._n.addMutationBatch(h,c,d,o)})).then(h=>(h.applyToLocalDocumentSet(u),{batchId:h.batchId,changes:u}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let c=s.xo[s.currentUser.toKey()];c||(c=new Ee(J)),c=c.insert(o,a),s.xo[s.currentUser.toKey()]=c}(r,i.batchId,n),await mr(r,i.changes),await Li(r.remoteStore)}catch(i){let s=na(i,"Failed to persist write");n.reject(s)}}async function ff(t,e){let n=H(t);try{let r=await e_(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Co.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Po=!0:i.modifiedDocuments.size>0?ee(o.Po):i.removedDocuments.size>0&&(ee(o.Po),o.Po=!1))}),await mr(n,r,e)}catch(r){await dr(r)}}function df(t,e,n){let r=H(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.vo.forEach((s,o)=>{let a=o.view.zr(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){let a=H(s);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(let h of u.listeners)h.zr(o)&&(c=!0)}),c&&ia(a)}(r.eventManager,e),i.length&&r.bo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function I_(t,e,n){let r=H(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Co.get(e),s=i&&i.key;if(s){let o=new Ee(V.comparator);o=o.insert(s,we.newNoDocument(s,Y.min()));let a=ne().add(s),c=new ur(Y.min(),new Map,new me(J),o,a);await ff(r,c),r.Do=r.Do.remove(s),r.Co.delete(e),ca(r)}else await Go(r.localStore,e,!1).then(()=>aa(r,e,n)).catch(dr)}async function S_(t,e){let n=H(t),r=e.batch.batchId;try{let i=await Jy(n.localStore,e);mf(n,r,null),pf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mr(n,i)}catch(i){await dr(i)}}async function k_(t,e,n){let r=H(t);try{let i=await function(s,o){let a=H(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a._n.lookupMutationBatch(c,o).next(u=>(ee(u!==null),l=u.keys(),a._n.removeMutationBatch(c,u))).next(()=>a._n.performConsistencyCheck(c)).next(()=>a.Fn.pn(c,l))})}(r.localStore,e);mf(r,e,n),pf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mr(r,i)}catch(i){await dr(i)}}function pf(t,e){(t.ko.get(e)||[]).forEach(n=>{n.resolve()}),t.ko.delete(e)}function mf(t,e,n){let r=H(t),i=r.xo[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function aa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Vo.get(e))t.vo.delete(r),n&&t.bo.Fo(r,n);t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(r=>{t.No.containsKey(r)||gf(t,r)})}function gf(t,e){t.So.delete(e.path.canonicalString());let n=t.Do.get(e);n!==null&&(Jh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ca(t))}function hf(t,e,n){for(let r of n)r instanceof sa?(t.No.addReference(r.key,e),A_(t,r)):r instanceof oa?(M("SyncEngine","Document no longer in limbo: "+r.key),t.No.removeReference(r.key,e),t.No.containsKey(r.key)||gf(t,r.key)):z()}function A_(t,e){let n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(M("SyncEngine","New document in limbo: "+n),t.So.add(r),ca(t))}function ca(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){let e=t.So.values().next().value;t.So.delete(e);let n=new V(te.fromString(e)),r=t.$o.next();t.Co.set(r,new lf(n)),t.Do=t.Do.insert(n,r),Qh(t.remoteStore,new wt(Pt(Oo(n.path)),r,2,mi.o))}}async function mr(t,e,n){let r=H(t),i=[],s=[],o=[];r.vo.isEmpty()||(r.vo.forEach((a,c)=>{o.push(r.Mo(c,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),i.push(l);let u=Ai.vn(c.targetId,l);s.push(u)}}))}),await Promise.all(o),r.bo._r(i),await async function(a,c){let l=H(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>A.forEach(c,h=>A.forEach(h.Pn,f=>l.persistence.referenceDelegate.addReference(u,h.targetId,f)).next(()=>A.forEach(h.bn,f=>l.persistence.referenceDelegate.removeReference(u,h.targetId,f)))))}catch(u){if(!fr(u))throw u;M("LocalStore","Failed to update sequence numbers: "+u)}for(let u of c){let h=u.targetId;if(!u.fromCache){let f=l.kn.get(h),d=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(d);l.kn=l.kn.insert(h,m)}}}(r.localStore,s))}async function C_(t,e){let n=H(t);if(!n.currentUser.isEqual(e)){M("SyncEngine","User change. New user:",e.toKey());let r=await Dh(n.localStore,e);n.currentUser=e,function(i,s){i.ko.forEach(o=>{o.forEach(a=>{a.reject(new U(_.CANCELLED,s))})}),i.ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mr(n,r.Ln)}}function R_(t,e){let n=H(t),r=n.Co.get(e);if(r&&r.Po)return ne().add(r.key);{let i=ne(),s=n.Vo.get(e);if(!s)return i;for(let o of s){let a=n.vo.get(o);i=i.unionWith(a.view.wo)}return i}}function __(t){let e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ff.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I_.bind(null,e),e.bo._r=g_.bind(null,e.eventManager),e.bo.Fo=v_.bind(null,e.eventManager),e}function b_(t){let e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k_.bind(null,e),e}var vf=class{constructor(){this.synchronizeTabs=!1}async initialize(e){this.R=Ni(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.Uo(e),await this.persistence.start(),this.gcScheduler=this.qo(e),this.localStore=this.Ko(e)}qo(e){return null}Ko(e){return Yy(this.persistence,new Rh,e.initialUser,this.R)}Uo(e){return new Fh(Ri.Ps,this.R)}Bo(e){return new jh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}},yf=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>df(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=C_.bind(null,this.syncEngine),await d_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new sf}createDatastore(e){let n=Ni(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new zh(i));var i;return function(s,o,a){return new Gh(s,o,a)}(e.credentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>df(this.syncEngine,a,0),o=Xo.gt()?new Xo:new qh,new Xh(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,c,l){let u=new uf(r,i,s,o,a,c);return l&&(u.Oo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){let n=H(e);M("RemoteStore","RemoteStore shutting down."),n.Mr.add(5),await pr(n),n.Lr.shutdown(),n.Br.set("Unknown")}(this.remoteStore)}};var _f=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.jo(this.observer.next,e)}error(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Wo(){this.muted=!0}jo(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var wf=class{constructor(e,n,r){this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=je.UNAUTHENTICATED,this.clientId=To.u(),this.credentialListener=()=>Promise.resolve(),this.credentials.setChangeListener(n,async i=>{M("FirestoreClient","Received user=",i.uid),await this.credentialListener(i),this.user=i})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new U(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.removeChangeListener(),e.resolve()}catch(n){let r=na(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function N_(t,e){t.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");let n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Dh(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function O_(t,e){t.asyncQueue.verifyOperationInProgress();let n=await D_(t);M("FirestoreClient","Initializing OnlineComponentProvider");let r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>async function(s,o){let a=H(s);a.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");let c=$t(a);a.Mr.add(3),await pr(a),c&&a.Br.set("Unknown"),await a.remoteSyncer.handleCredentialChange(o),a.Mr.delete(3),await Di(a)}(e.remoteStore,i)),t.onlineComponents=e}async function D_(t){return t.offlineComponents||(M("FirestoreClient","Using default OfflineComponentProvider"),await N_(t,new vf)),t.offlineComponents}async function Ef(t){return t.onlineComponents||(M("FirestoreClient","Using default OnlineComponentProvider"),await O_(t,new yf)),t.onlineComponents}function L_(t){return Ef(t).then(e=>e.syncEngine)}async function M_(t){let e=await Ef(t),n=e.eventManager;return n.onListen=w_.bind(null,e.syncEngine),n.onUnlisten=E_.bind(null,e.syncEngine),n}function P_(t,e,n={}){let r=new En;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,c){let l=new _f({next:h=>{s.enqueueAndForget(()=>m_(i,u));let f=h.docs.has(o);!f&&h.fromCache?c.reject(new U(_.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&a&&a.source==="server"?c.reject(new U(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new of(Oo(o.path),l,{includeMetadataChanges:!0,so:!0});return p_(i,u)}(await M_(t),t.asyncQueue,e,n,r)),r.promise}var bf=class{constructor(e,n,r,i,s,o,a){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a}},In=class{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof In&&e.projectId===this.projectId&&e.database===this.database}};var Tf=new Map;var If=class{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}},la=class{constructor(){this.changeListener=null}getToken(){return Promise.resolve(null)}invalidateToken(){}setChangeListener(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(je.UNAUTHENTICATED))}removeChangeListener(){this.changeListener=null}},Sf=class{constructor(e){this.currentUser=je.UNAUTHENTICATED,this.oc=new En,this.cc=0,this.changeListener=()=>Promise.resolve(),this.ac=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=()=>{this.cc++,this.currentUser=this.hc(),this.oc.resolve(),this.ac&&this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser))};let n=r=>{M("FirebaseCredentialsProvider","Auth detected"),this.auth=r,this.lc(),this.auth.addAuthTokenListener(this.uc)};e.onInit(r=>n(r)),setTimeout(()=>{if(!this.auth){let r=e.getImmediate({optional:!0});r?n(r):this.ac&&(M("FirebaseCredentialsProvider","Auth not yet detected"),this.asyncQueue.enqueueRetryable(()=>this.changeListener(this.currentUser)))}},0)}getToken(){let e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.cc!==e?(M("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new If(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}setChangeListener(e,n){this.ac=!0,this.asyncQueue=e,this.changeListener=n}removeChangeListener(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=()=>Promise.resolve()}hc(){let e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new je(e)}lc(){this.ac&&(this.ac=!1,this.asyncQueue.enqueueRetryable(async()=>{await this.oc.promise,await this.changeListener(this.currentUser),this.ac=!0}))}},kf=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r,this.type="FirstParty",this.user=je.FIRST_PARTY}get authHeaders(){let e={"X-Goog-AuthUser":this.dc},n=this.fc.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.wc&&(e["X-Goog-Iam-Authorization-Token"]=this.wc),e}},Af=class{constructor(e,n,r){this.fc=e,this.dc=n,this.wc=r}getToken(){return Promise.resolve(new kf(this.fc,this.dc,this.wc))}setChangeListener(e,n){e.enqueueRetryable(()=>n(je.FIRST_PARTY))}removeChangeListener(){}invalidateToken(){}};function Cf(t,e,n){if(!n)throw new U(_.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rf(t){if(!V.isDocumentKey(t))throw new U(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Nf(t){if(V.isDocumentKey(t))throw new U(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ua(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(n){if(n.constructor){let r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z()}function Pi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new U(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ua(t);throw new U(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var ha=class{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new U(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,function(r,i,s,o){if(i===!0&&o===!0)throw new U(_.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties}};var Ui=class{constructor(e,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ha({}),this._settingsFrozen=!1,e instanceof In?(this._databaseId=e,this._credentials=new la):(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new U(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new In(r.options.projectId)}(e),this._credentials=new Sf(n))}get app(){if(!this._app)throw new U(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new U(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ha(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new la;switch(n.type){case"gapi":let r=n.client;return ee(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Af(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new U(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let n=Tf.get(e);n&&(M("ComponentProvider","Removing Datastore"),Tf.delete(e),n.terminate())}(this),Promise.resolve()}};var Ue=class{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new it(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}},xi=class{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}},it=class extends xi{constructor(e,n,r){super(e,n,Oo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new V(e))}withConverter(e){return new it(this.firestore,e,this._path)}};function Df(t,e,...n){if(t=Ve(t),Cf("collection","path",e),t instanceof Ui){let r=te.fromString(e,...n);return Nf(r),new it(t,null,r)}{if(!(t instanceof Ue||t instanceof it))throw new U(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=te.fromString(t.path,...n).child(te.fromString(e));return Nf(r),new it(t.firestore,null,r)}}function fa(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=To.u()),Cf("doc","path",e),t instanceof Ui){let r=te.fromString(e,...n);return Rf(r),new Ue(t,null,new V(r))}{if(!(t instanceof Ue||t instanceof it))throw new U(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(te.fromString(e,...n));return Rf(r),new Ue(t.firestore,t instanceof it?t.converter:null,new V(r))}}var Of=class{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new Yo(this,"async_queue_retry"),this.Ac=()=>{let n=Qo();n&&M("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Zi.Gi()};let e=Qo();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Ac)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Rc(),this.Pc(e)}enterRestrictedMode(){if(!this.gc){this.gc=!0;let e=Qo();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Ac)}}enqueue(e){return this.Rc(),this.gc?new Promise(n=>{}):this.Pc(e)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.bc()))}async bc(){if(this.mc.length!==0){try{await this.mc[0](),this.mc.shift(),this.Zi.reset()}catch(e){if(!fr(e))throw e;M("AsyncQueue","Operation failed with retryable error: "+e)}this.mc.length>0&&this.Zi.ji(()=>this.bc())}}Pc(e){let n=this._c.then(()=>(this.Tc=!0,e().catch(r=>{throw this.Ec=r,this.Tc=!1,vt("INTERNAL UNHANDLED ERROR: ",function(i){let s=i.message||"";return i.stack&&(s=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),s}(r)),r}).then(r=>(this.Tc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.Rc(),this.Ic.indexOf(e)>-1&&(n=0);let i=Mi.createAndSchedule(this,e,n,r,s=>this.vc(s));return this.yc.push(i),i}Rc(){this.Ec&&z()}verifyOperationInProgress(){}async Vc(){let e;do e=this._c,await e;while(e!==this._c)}Sc(e){for(let n of this.yc)if(n.timerId===e)return!0;return!1}Dc(e){return this.Vc().then(()=>{this.yc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.yc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vc()})}Cc(e){this.Ic.push(e)}vc(e){let n=this.yc.indexOf(e);this.yc.splice(n,1)}},Vi=class extends Ui{constructor(e,n){super(e,n),this.type="firestore",this._queue=new Of,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Lf(this),this._firestoreClient.terminate()}};function Mf(t=Rr()){return Mn(t,"firestore-exp").getImmediate()}function Pf(t){return t._firestoreClient||Lf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Lf(t){var e;let n=t._freezeSettings(),r=function(i,s,o,a){return new bf(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new wf(t._credentials,t._queue,r)}var Fi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new U(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Se(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bt=class{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bt(_e.fromBase64String(e))}catch(n){throw new U(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bt(_e.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var da=class{constructor(e){this._methodName=e}};var $i=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new U(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new U(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}};var U_=/^__.*__$/,Uf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xt(e,this.data,this.fieldMask,n,this.fieldTransforms):new cr(e,this.data,n,this.fieldTransforms)}};function xf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var ji=class{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Nc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get xc(){return this.settings.xc}kc(e){return new ji(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}$c(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.kc({path:r,Oc:!1});return i.Mc(e),i}Fc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.kc({path:r,Oc:!1});return i.Nc(),i}Lc(e){return this.kc({path:void 0,Oc:!0})}Bc(e){return qi(e,this.settings.methodName,this.settings.Uc||!1,this.path,this.settings.qc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Nc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(e.length===0)throw this.Bc("Document fields must not be empty");if(xf(this.xc)&&U_.test(e))throw this.Bc('Document fields cannot begin and end with "__"')}},Vf=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.R=r||Ni(e)}Kc(e,n,r,i=!1){return new ji({xc:e,methodName:n,qc:r,path:Se.emptyPath(),Oc:!1,Uc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)}};function x_(t){let e=t._freezeSettings(),n=Ni(t._databaseId);return new Vf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $_(t,e,n,r,i,s={}){let o=t.Kc(s.merge||s.mergeFields?2:0,e,n,i);$f("Data must be an object, but it was:",o,r);let a=Ff(r,o),c,l;if(s.merge)c=new vi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let h of s.mergeFields){let f=V_(e,h,n);if(!o.contains(f))throw new U(_.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);F_(u,f)||u.push(f)}c=new vi(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new Uf(new Pe(a),c,l)}function jf(t,e){if(qf(t=Ve(t)))return $f("Unsupported field value:",e,t),Ff(t,e);if(t instanceof da)return function(n,r){if(!xf(r.xc))throw r.Bc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bc(`${n._methodName}() is not currently supported inside arrays`);let i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oc&&e.xc!==4)throw e.Bc("Nested arrays are not supported");return function(n,r){let i=[],s=0;for(let o of n){let a=jf(o,r.Lc(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Ve(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return wy(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let i=Me.fromDate(n);return{timestampValue:Si(r.R,i)}}if(n instanceof Me){let i=new Me(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Si(r.R,i)}}if(n instanceof $i)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Bt)return{bytesValue:mh(r.R,n._byteString)};if(n instanceof Ue){let i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Bc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jo(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Bc(`Unsupported field value: ${ua(n)}`)}(t,e)}function Ff(t,e){let n={};return ku(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gi(t,(r,i)=>{let s=jf(i,e.$c(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function qf(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof $i||t instanceof Bt||t instanceof Ue||t instanceof da)}function $f(t,e,n){if(!qf(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let r=ua(n);throw r==="an object"?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function V_(t,e,n){if((e=Ve(e))instanceof Fi)return e._internalPath;if(typeof e=="string")return Bf(t,e);throw qi("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var j_=new RegExp("[~\\*/\\[\\]]");function Bf(t,e,n){if(e.search(j_)>=0)throw qi(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fi(...e.split("."))._internalPath}catch(r){throw qi(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qi(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new U(_.INVALID_ARGUMENT,a+t+c)}function F_(t,e){return t.some(n=>n.isEqual(e))}var pa=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new zf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.toProto())}}get(e){if(this._document){let n=this._document.data.field(Hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},zf=class extends pa{data(){return super.data()}};function Hf(t,e){return typeof e=="string"?Bf(t,e):e instanceof Fi?e._internalPath:e._delegate._internalPath}var Kf=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ma=class extends pa{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Gf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.toProto(),e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Gf=class extends ma{data(e={}){return super.data(e)}};var Wf=class{convertValue(e,n="none"){switch(_t(e)){case 0:return null;case 1:return e.booleanValue;case 2:return se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){let r={};return gi(e.fields||{},(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new $i(se(e.latitude),se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Cu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(er(e));default:return null}}convertTimestamp(e){let n=yt(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=te.fromString(e);ee(gh(r));let i=new In(r.get(1),r.get(3)),s=new V(r.popFirst(5));return i.isEqual(n)||vt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function q_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function Xf(t){t=Pi(t,Ue);let e=Pi(t.firestore,Vi);return P_(Pf(e),t._key).then(n=>B_(e,t,n))}var Qf=class extends Wf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bt(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}};function Yf(t,e,n){t=Pi(t,Ue);let r=Pi(t.firestore,Vi),i=q_(t.converter,e,n);return z_(r,[$_(x_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ut.none())])}function z_(t,e){return function(n,r){let i=new En;return n.asyncQueue.enqueueAndForget(async()=>T_(await L_(n),r,i)),i.promise}(Pf(t),e)}function B_(t,e,n){let r=n.docs.get(e._key),i=new Qf(t);return new ma(t,i,e._key,r,new Kf(n.hasPendingWrites,n.fromCache),e.converter)}var H_;(function(t){ln=t})(Ct),At(new at("firestore-exp",(t,{options:e})=>{let n=t.getProvider("app-exp").getImmediate(),r=new Vi(n,t.getProvider("auth-internal"));return e&&r._setSettings(e),r},"PUBLIC")),lt("@firebase/firestore","0.0.900-exp.d92a36260",H_);var Jf=Mf(),ga=async(t,e)=>{let n=fa(Jf,t,e),r=await Xf(n),i="";return r.exists()?i=r.data():console.log("No such document!"),i},va=async(t,e,n)=>{let r=Df(Jf,t);n&&await Yf(fa(r,e),{[t]:n})};var ya=ol(),K_=new He,Bi=()=>rl(ya,K_),Zf=()=>$c(ya),G_=()=>{Ca(),Za(),Ra()},W_=t=>{Ye.set(t)},X_=t=>{ga("goal",t).then(e=>e?Je.set(e.goal):""),ga("data",t).then(e=>e?Ae.set(e.data):"")};Fc(ya,t=>{t?(console.log("👌 you are logged 👌"),W_(t),X_(t.uid),Je.subscribe(e=>va("goal",t.uid,e)),Ae.subscribe(e=>va("data",t.uid,e))):(console.log("👋 you are not logged 👋"),G_())});function ed(t,e,n){let r=t.slice();return r[3]=e[n].label,r[4]=e[n].icon,r[5]=e[n].style,r[6]=e[n].onClick,r[7]=e[n].name,r}function Y_(t){let e,n,r,i,s;return i=new Rn({props:{label:"Iniciar sesión",$$slots:{default:[Q_]},$$scope:{ctx:t}}}),{c(){e=w("h2"),e.textContent="Haz click para iniciar sesión",n=R(),r=w("div"),P(i.$$.fragment),y(e,"class","text-center"),y(r,"class","m-2 flex flex-col")},m(o,a){v(o,e,a),v(o,n,a),v(o,r,a),O(i,r,null),s=!0},p(o,a){let c={};a&1024&&(c.$$scope={dirty:a,ctx:o}),i.$set(c)},i(o){s||(I(i.$$.fragment,o),s=!0)},o(o){k(i.$$.fragment,o),s=!1},d(o){o&&g(e),o&&g(n),o&&g(r),L(i)}}}function J_(t){let e,n,r,i,s,o=t[0].displayName+"",a,c,l,u=t[0].email+"",h,f,d=[],m=new Map,p,b,E=t[1],C=T=>T[7];for(let T=0;T<E.length;T+=1){let x=ed(t,E,T),D=C(x);m.set(D,d[T]=td(D,x))}return{c(){e=w("img"),r=R(),i=w("div"),s=w("h2"),a=X(o),c=R(),l=w("h2"),h=X(u),f=R();for(let T=0;T<d.length;T+=1)d[T].c();p=Ge(),y(e,"class","mx-auto rounded-lg"),e.src!==(n=t[0].photoURL)&&y(e,"src",n),y(e,"alt","user"),y(i,"class","my-8")},m(T,x){v(T,e,x),v(T,r,x),v(T,i,x),S(i,s),S(s,a),S(i,c),S(i,l),S(l,h),v(T,f,x);for(let D=0;D<d.length;D+=1)d[D].m(T,x);v(T,p,x),b=!0},p(T,x){(!b||x&1&&e.src!==(n=T[0].photoURL))&&y(e,"src",n),(!b||x&1)&&o!==(o=T[0].displayName+"")&&Z(a,o),(!b||x&1)&&u!==(u=T[0].email+"")&&Z(h,u),x&2&&(E=T[1],ae(),d=An(d,x,C,1,T,E,m,p.parentNode,kn,td,p,ed),ce())},i(T){if(!b){for(let x=0;x<E.length;x+=1)I(d[x]);b=!0}},o(T){for(let x=0;x<d.length;x+=1)k(d[x]);b=!1},d(T){T&&g(e),T&&g(r),T&&g(i),T&&g(f);for(let x=0;x<d.length;x+=1)d[x].d(T);T&&g(p)}}}function Q_(t){let e,n;return e=new be({props:{props:t[2]}}),{c(){P(e.$$.fragment)},m(r,i){O(e,r,i),n=!0},p:Q,i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Z_(t){let e,n;return e=new be({props:{props:{icon:t[4],style:t[5],onClick:t[6]}}}),{c(){P(e.$$.fragment)},m(r,i){O(e,r,i),n=!0},p:Q,i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function td(t,e){let n,r,i,s;return r=new Rn({props:{label:e[3],$$slots:{default:[Z_]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=w("div"),P(r.$$.fragment),i=R(),y(n,"class","m-2 flex flex-col"),this.first=n},m(o,a){v(o,n,a),O(r,n,null),S(n,i),s=!0},p(o,a){e=o;let c={};a&1024&&(c.$$scope={dirty:a,ctx:e}),r.$set(c)},i(o){s||(I(r.$$.fragment,o),s=!0)},o(o){k(r.$$.fragment,o),s=!1},d(o){o&&g(n),L(r)}}}function e0(t){let e,n,r,i,s=[J_,Y_],o=[];function a(c,l){return c[0]?0:1}return e=a(t,-1),n=o[e]=s[e](t),{c(){n.c(),r=Ge()},m(c,l){o[e].m(c,l),v(c,r,l),i=!0},p(c,l){let u=e;e=a(c,l),e===u?o[e].p(c,l):(ae(),k(o[u],1,1,()=>{o[u]=null}),ce(),n=o[e],n?n.p(c,l):(n=o[e]=s[e](c),n.c()),I(n,1),n.m(r.parentNode,r))},i(c){i||(I(n),i=!0)},o(c){k(n),i=!1},d(c){o[e].d(c),c&&g(r)}}}function t0(t){let e,n;return e=new ot({props:{$$slots:{default:[e0]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(r,i){O(e,r,i),n=!0},p(r,[i]){let s={};i&1025&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function n0(t,e,n){let r;return qe(t,Ye,o=>n(0,r=o)),[r,[{name:"SignOut",label:"Cerrar sesión",icon:"logout",style:"primary",onClick:Zf}],{icon:"login",style:"primary",onClick:Bi}]}var nd=class extends B{constructor(e){super();K(this,e,n0,t0,$,{})}},rd=nd;function id(t,e,n){let r=t.slice();return r[4]=e[n],r}function sd(t){let e,n;function r(){return t[3](t[4])}return e=new be({props:{props:t[4],current:t[0]}}),e.$on("click",r),{c(){P(e.$$.fragment)},m(i,s){O(e,i,s),n=!0},p(i,s){t=i;let o={};s&1&&(o.current=t[0]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){L(e,i)}}}function r0(t){let e,n,r=t[2],i=[];for(let o=0;o<r.length;o+=1)i[o]=sd(id(t,r,o));let s=o=>k(i[o],1,1,()=>{i[o]=null});return{c(){e=w("div");for(let o=0;o<i.length;o+=1)i[o].c();y(e,"class","container fixed svelte-1xfd7dv")},m(o,a){v(o,e,a);for(let c=0;c<i.length;c+=1)i[c].m(e,null);n=!0},p(o,[a]){if(a&7){r=o[2];let c;for(c=0;c<r.length;c+=1){let l=id(o,r,c);i[c]?(i[c].p(l,a),I(i[c],1)):(i[c]=sd(l),i[c].c(),I(i[c],1),i[c].m(e,null))}for(ae(),c=r.length;c<i.length;c+=1)s(c);ce()}},i(o){if(!n){for(let a=0;a<r.length;a+=1)I(i[a]);n=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)k(i[a]);n=!1},d(o){o&&g(e),Be(i,o)}}}function i0(t,e,n){let r=[{icon:"home",style:"secondary",selected:!1},{icon:"lightning",style:"secondary",selected:!1},{icon:"profile",style:"secondary",selected:!1}],{current:i="Home"}=e,{selectedBtn:s=()=>{}}=e,o=a=>s(a.icon);return t.$$set=a=>{"current"in a&&n(0,i=a.current),"selectedBtn"in a&&n(1,s=a.selectedBtn)},[i,s,r,o]}var od=class extends B{constructor(e){super();K(this,e,i0,r0,$,{current:0,selectedBtn:1})}},ad=od;function s0(t){let e,n,r,i,s,o,a;function c(u){t[1](u)}let l={label:"Objetivo",type:"text"};return t[0]!==void 0&&(l.value=t[0]),s=new Cn({props:l}),st.push(()=>Gt(s,"value",c)),{c(){e=w("h1"),e.textContent="Opciones",n=R(),r=w("h3"),r.textContent="Configura tus fuentes de ingresos",i=R(),P(s.$$.fragment)},m(u,h){v(u,e,h),v(u,n,h),v(u,r,h),v(u,i,h),O(s,u,h),a=!0},p(u,h){let f={};!o&&h&1&&(o=!0,f.value=u[0],Kt(()=>o=!1)),s.$set(f)},i(u){a||(I(s.$$.fragment,u),a=!0)},o(u){k(s.$$.fragment,u),a=!1},d(u){u&&g(e),u&&g(n),u&&g(r),u&&g(i),L(s,u)}}}function o0(t){let e,n,r,i,s,o,a;return e=new ot({props:{$$slots:{default:[s0]},$$scope:{ctx:t}}}),i=new be({props:{props:{icon:"add",style:"secondary"}}}),i.$on("click",Ae.add),o=new wr({props:{edit:!0}}),{c(){P(e.$$.fragment),n=R(),r=w("div"),P(i.$$.fragment),s=R(),P(o.$$.fragment)},m(c,l){O(e,c,l),v(c,n,l),v(c,r,l),O(i,r,null),v(c,s,l),O(o,c,l),a=!0},p(c,[l]){let u={};l&5&&(u.$$scope={dirty:l,ctx:c}),e.$set(u)},i(c){a||(I(e.$$.fragment,c),I(i.$$.fragment,c),I(o.$$.fragment,c),a=!0)},o(c){k(e.$$.fragment,c),k(i.$$.fragment,c),k(o.$$.fragment,c),a=!1},d(c){L(e,c),c&&g(n),c&&g(r),L(i),c&&g(s),L(o,c)}}}function a0(t,e,n){let r;qe(t,Je,s=>n(0,r=s));function i(s){r=s,Je.set(r)}return[r,i]}var cd=class extends B{constructor(e){super();K(this,e,a0,o0,$,{})}},ld=cd;function c0(t){let e,n,r;return{c(){e=w("button"),n=w("img"),y(n,"class","w-12 h-12 rounded-full"),n.src!==(r=t[0])&&y(n,"src",r),y(n,"alt","Avatar")},m(i,s){v(i,e,s),S(e,n)},p(i,[s]){s&1&&n.src!==(r=i[0])&&y(n,"src",r)},i:Q,o:Q,d(i){i&&g(e)}}}function l0(t,e,n){let{img:r="icons/user.svg"}=e;return t.$$set=i=>{"img"in i&&n(0,r=i.img)},[r]}var ud=class extends B{constructor(e){super();K(this,e,l0,c0,$,{img:0})}},hd=ud;function u0(t){let e,n,r,i,s,o;return r=new hd({props:{img:t[0]}}),{c(){e=w("div"),n=w("div"),P(r.$$.fragment),y(n,"class","float-right"),y(e,"class","w-screen p-8")},m(a,c){v(a,e,c),S(e,n),O(r,n,null),i=!0,s||(o=ke(n,"click",Bi),s=!0)},p(a,[c]){let l={};c&1&&(l.img=a[0]),r.$set(l)},i(a){i||(I(r.$$.fragment,a),i=!0)},o(a){k(r.$$.fragment,a),i=!1},d(a){a&&g(e),L(r),s=!1,o()}}}function h0(t,e,n){let r,i;return qe(t,Ye,s=>n(1,i=s)),t.$$.update=()=>{if(t.$$.dirty&2){e:n(0,r=i.photoURL?i.photoURL:"icons/user.svg")}},[r,i]}var fd=class extends B{constructor(e){super();K(this,e,h0,u0,$,{})}},dd=fd;function f0(t){let e,n,r,i,s,o;e=new dd({});var a=t[1];function c(l){return{}}return a&&(r=new a(c(t))),s=new ad({props:{current:t[0],selectedBtn:t[2]}}),{c(){P(e.$$.fragment),n=R(),r&&P(r.$$.fragment),i=R(),P(s.$$.fragment)},m(l,u){O(e,l,u),v(l,n,u),r&&O(r,l,u),v(l,i,u),O(s,l,u),o=!0},p(l,[u]){if(a!==(a=l[1])){if(r){ae();let f=r;k(f.$$.fragment,1,0,()=>{L(f,1)}),ce()}a?(r=new a(c(l)),P(r.$$.fragment),I(r.$$.fragment,1),O(r,i.parentNode,i)):r=null}let h={};u&1&&(h.current=l[0]),s.$set(h)},i(l){o||(I(e.$$.fragment,l),r&&I(r.$$.fragment,l),I(s.$$.fragment,l),o=!0)},o(l){k(e.$$.fragment,l),r&&k(r.$$.fragment,l),k(s.$$.fragment,l),o=!1},d(l){L(e,l),l&&g(n),r&&L(r,l),l&&g(i),L(s,l)}}}function d0(t,e,n){let r,i="home",s=a=>{n(0,i=a)},o={home:ac,profile:rd,lightning:ld};return t.$$.update=()=>{if(t.$$.dirty&1){e:n(1,r=o[i])}},[i,r,s]}var pd=class extends B{constructor(e){super();K(this,e,d0,f0,$,{})}},md=pd;import.meta.env=Hi;var gd=new md({target:document.body}),p0=gd;import.meta?.hot&&((void 0).accept(),(void 0).dispose(()=>{gd.$destroy()}));export{p0 as default};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=index.js.map
